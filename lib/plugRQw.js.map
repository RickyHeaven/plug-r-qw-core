{"version":3,"file":"plugRQw.js","sources":["../src/locale/lang/zh-CN.js","../src/locale/format.ts","../src/locale/index.ts","../src/locale/i18nSFC.ts","../src/components/HeaderBt/HeaderBt.vue","../src/utils/proxy.ts","../src/components/FullPop/FullPop.vue","../src/components/Hello.vue","../src/components/IconTxtBtn/IconTxtBtn.vue","../src/components/Page404/Page404.vue","../src/utils/swal.ts","../src/components/TableTooltip/TableTooltip.vue","../src/utils/globalFunc.ts","../src/components/SideMenu/SideMenuGroup.vue","../src/utils/timer.ts","../src/components/SideMenu/SideMenu.vue","../src/components/SideMenuPro/SideMenuProGroup.vue","../src/components/SideMenuPro/SideMenuTwoLevel.vue","../src/components/SideMenuPro/SideIcoMenu.vue","../src/components/SideMenuPro/SideMenuPro.vue","../src/components/TableIconBtn/TableIconBtn.vue","../src/components/ShowHidePanel/ShowHidePanel.vue","../src/components/ShowHidePanelB/ShowHidePanelB.vue","../src/components/TableSearch/TableSearch.vue","../src/directives/clickOutside.ts","../src/utils/swalConfirm.ts","../src/components/TableSetting/TableSetting.vue","../src/utils/needImportFunc.ts","../src/utils/messageBox.ts","../src/utils/spin.ts","../src/utils/fetch.ts","../src/components/PagePro/PagePro.vue","../src/components/BtTablePage/BtTablePage.vue","../src/components/SelectInput/SelectInput.vue","../src/utils/amap.ts","../src/components/InputMap/InputMap.vue","../src/components/AsyncCascader/AsyncCascader.vue","../src/components/AlCascaderMC/AlCascaderMC.vue","../src/utils/fullScreenImgByDom.ts","../src/components/UploadGroup/UploadGroup.vue","../src/components/MonthRange/MonthRange.vue","../src/components/Date/Date.vue","../src/components/EditorPro/EditorPro.vue","../src/components/FormR/ItemR.vue","../src/components/FormR/FormR.vue","../src/components/FormGroup/FormGroup.vue","../src/components/SearchForm/SearchForm.vue","../src/components/FormModal/FormModal.vue","../src/components/CheckboxTree/CheckboxTree.vue","../src/components/TransferBox/TransferBox.vue","../src/components/CheckboxGroupTwoClass/CheckboxGroupTwoClass.vue","../src/components/CheckboxGroupThreeClass/CheckboxGroupThreeClass.vue","../src/components/WellCard/WellCard.vue","../src/components/SelectScrollMore/SelectScrollMore.vue","../src/utils/tablePrint/PrintModal.vue","../src/utils/tablePrint/index.ts","../src/utils/domPrint.ts","../src/utils/fullScreenImgPreview.ts","../src/utils/wangeditor5init.ts","../src/index.ts"],"sourcesContent":["export default {\r\n\tr: {\r\n\t\tlocale: 'zh-CN',\r\n\t\ttestMsg: '测试国际化',\r\n\t\tconfirm: '确定',\r\n\t\tsave: '保存',\r\n\t\tcancel: '取消',\r\n\t\tclear: '清空',\r\n\t\tinfo: {\r\n\t\t\ttitle: '提示',\r\n\t\t\ttext: '确定执行该操作？'\r\n\t\t},\r\n\t\thttp: {\r\n\t\t\t403: '登录状态失效,请重新登录！',\r\n\t\t\t409: '该账号已在其他地方登录,点击确定退出。'\r\n\t\t},\r\n\t\tpSelect: '请选择',\r\n\t\tpInput: '请输入',\r\n\t\tselectDate: '选择日期',\r\n\t\tselectTime: '选择时间',\r\n\t\tsearch: '搜索',\r\n\t\tlevel: {\r\n\t\t\t1: '一级',\r\n\t\t\t2: '二级',\r\n\t\t\t3: '三级'\r\n\t\t},\r\n\t\tunknown: '未知',\r\n\t\ttitle: '标题',\r\n\t\trequired: '该项为必填',\r\n\t\tback: '返回',\r\n\t\tbutton: '按钮',\r\n\t\tcheck: '查询',\r\n\t\tadSearch: '高级查询',\r\n\t\tall: '全选',\r\n\t\ttabSetting: ' 列表显示设置',\r\n\t\tdelete: '删除',\r\n\t\tfView: '全屏预览',\r\n\t\tdownload: '点击下载',\r\n\t\tfile: '文件',\r\n\t\tselectFile: '选择文件',\r\n\t\tnotImg: '文件不是图片，不可预览',\r\n\t\twrongFileType: '文件类型不被允许',\r\n\t\tsupportType: '支持类型：',\r\n\t\tnone: '无',\r\n\t\tfileIsBig: '文件过大',\r\n\t\tsupportSize: '支持最大：',\r\n\t\tuploadError: '上传出错',\r\n\t\tuploadFail: '上传失败',\r\n\t\tclosePreview: '关闭预览',\r\n\t\tfullImg: '该文件不支持图片形式预览',\r\n\t\tpreview: '预览',\r\n\t\tsearchFor: '当前搜索：',\r\n\t\tnoMore: '没有更多数据了',\r\n\t\toptionLabel: '选项',\r\n\t\tgetDataError: '拉取数据出错',\r\n\t\tadd: '添加',\r\n\t\tremove: '移除',\r\n\t\taddAll: '全部添加',\r\n\t\tremoveAll: '全部移除',\r\n\t\tadded: '已添加',\r\n\t\tnotAdded: '未添加',\r\n\t\tsuccess: '成功',\r\n\t\tfailed: '失败',\r\n\t\terror: '出错',\r\n\t\tpageNotFound: '页面没找到',\r\n\t\tnotFoundMsg: '您访问的页面不存在，点击下面按钮返回上一个页面。',\r\n\t\thideMenu: '隐藏菜单',\r\n\t\tshowMenu: '显示菜单',\r\n\t\tprint: '打印',\r\n\t\tclose: '关闭',\r\n\t\thelp: '帮助',\r\n\t\tprintGuide: {\r\n\t\t\t1: '鼠标停留在表头列右边框，出现拖动图标，按下鼠标拖动可设置列宽。',\r\n\t\t\t2: '点击“列表显示设置”，可选择需要打印的列，选择完需点击“确定”按钮。',\r\n\t\t\t3: '页面有A4灰色参考线，将打印内容右边缘调至参考线区间，打印机默认设置时可将表格内容铺满A4纸，表格越宽字体将越小。',\r\n\t\t\t4: '将此页面地址复制到浏览器地址栏，打开的页面将不可用。',\r\n\t\t\t5: '未到此线内容将无法铺满纸张',\r\n\t\t\t6: '超过此线打印内容将不完整',\r\n\t\t\t7: 'A4 纵向参考线',\r\n\t\t\t8: 'A4 横向参考线',\r\n\t\t\t9: '复制的页面无法使用该打印功能。',\r\n\t\t\t10: '鼠标停留在打印内容顶部矩形条右边框，出现拖动图标，按下鼠标拖动可设置打印内容宽度。'\r\n\t\t},\r\n\t\tpage: '条/页',\r\n\t\ttotal: '共',\r\n\t\titems: '条',\r\n\t\tnotSave: '您未保存，是否保存？',\r\n\t\tlast: '上一张',\r\n\t\tnext: '下一张'\r\n\t}\r\n}\r\n","/**\n * @description 国际化\n * @author Ricky email:zhangqingcq@foxmail.com\n * @created 2023.04.27\n */\n\n/**\n * t('XXX',...arg)\n *  去掉XXX中双花括号，或替换%{XXX}为arg[XXX]，arg为t('XXX',...arg)中arg\n *  如果XXX没有花括号，则返回XXX本身\n */\n\nconst REG_NAME = /(%|){([0-9a-zA-Z_]+)}/g\n\nexport default function () {\n\tfunction hasOwn(obj: any, key: keyof any) {\n\t\treturn Object.prototype.hasOwnProperty.call(obj, key)\n\t}\n\n\t/**\n\t * template\n\t *\n\t * @param {String} string\n\t * @param {Array} a\n\t * @return {String}\n\t */\n\n\tfunction template(string: string, ...a: any[]) {\n\t\tlet args: any\n\t\tif (a.length === 1 && typeof a[0] === 'object') {\n\t\t\targs = a[0]\n\t\t}\n\n\t\tif (!args || !args.hasOwnProperty) {\n\t\t\targs = {}\n\t\t}\n\t\tif (string === undefined) {\n\t\t\treturn ''\n\t\t}\n\n\t\treturn string.replace(REG_NAME, (match, prefix, i, index) => {\n\t\t\tlet result\n\n\t\t\tif (string[index - 1] === '{' && string[index + match.length] === '}') {\n\t\t\t\treturn i\n\t\t\t} else {\n\t\t\t\tresult = hasOwn(args, i) ? args[i] : null\n\n\t\t\t\treturn result ?? ''\n\t\t\t}\n\t\t})\n\t}\n\n\treturn template\n}\n","/**\n * @description 国际化\n * @author Ricky email:zhangqingcq@foxmail.com\n * @created 2023.04.27\n */\nimport deepmerge from 'deepmerge'\nimport zhLang from './lang/zh-CN'\nimport Format from './format'\n\nconst format = Format()\nlet lang: Record<keyof any, any> = zhLang\nconst message: Record<string, any> = {\n\tzh: zhLang\n}\nlet nowLang: Record<keyof any, any>\nlet merged: Record<string, any> = {}\nlet vueI18n: Record<keyof any, any>\nlet i18nHandler = function (this: any, path: string, options?: Record<keyof any, any> | Array<string | number>) {\n\tif (typeof this === 'object' && Reflect.has(this, '$t')) {\n\t\treturn this.$t(path, options)\n\t}\n\tif (vueI18n && vueI18n.global) {\n\t\treturn vueI18n.global.t(path, options)\n\t}\n\tif (vueI18n && vueI18n.locale) {\n\t\tif (!merged[vueI18n.locale] || nowLang != vueI18n.locale) {\n\t\t\tmerged[vueI18n.locale] = true\n\t\t\tlet localMessage = vueI18n.getLocaleMessage(vueI18n.locale) || {}\n\t\t\tlet newLocalMessage: Record<keyof any, any> = deepmerge(message[vueI18n.locale], localMessage, { clone: true })\n\t\t\tlang = newLocalMessage\n\t\t\tvueI18n.setLocaleMessage(vueI18n.locale, newLocalMessage)\n\t\t\tnowLang = vueI18n.locale\n\t\t}\n\t\treturn vueI18n.hlang(path, options)\n\t}\n}\n\nexport const t = function (this: any, path: string, options?: Record<keyof any, any> | Array<string | number>) {\n\tlet value = i18nHandler.apply(this, [path, options])\n\tif (value !== null && value !== undefined) {\n\t\treturn value\n\t}\n\n\tconst array = path.split('.')\n\tlet current = lang\n\n\tfor (let i = 0, j = array.length; i < j; i++) {\n\t\tconst property = array[i]\n\t\tvalue = current[property]\n\t\tif (i === j - 1) {\n\t\t\treturn format(value, options)\n\t\t}\n\t\tif (!value) {\n\t\t\treturn ''\n\t\t}\n\t\tcurrent = value\n\t}\n\treturn ''\n}\n\nexport const use = function (l: Record<keyof any, any>) {\n\tlang = l || lang\n}\n\nexport const i18n = function (initI18n: Record<keyof any, any>) {\n\tvueI18n = initI18n\n}\n\nexport default {\n\tuse,\n\tt,\n\ti18n\n}\n","import { t } from './index'\nimport { getCurrentInstance } from 'vue'\n\nexport default function (path: string, options?: Record<keyof any, any> | Array<string | number>) {\n\tconst proxy = getCurrentInstance()?.appContext?.config?.globalProperties\n\treturn t.apply(proxy, [path, options])\n}\n","<!--HeaderBt header右侧按钮，和header同高，左侧带白色分割线，按钮内容直接写在标签内\n@created 2023.05.11\n@author Ricky email:zhangqingcq@foxmail.com-->\n\n<script setup lang=\"ts\">\n\tconst props = withDefaults(\n\t\tdefineProps<{\n\t\t\ticon?: string\n\t\t\twithIcon?: boolean\n\t\t\ticonSize?: number | string\n\t\t\tcolor?: string\n\t\t\tborderColor?: string\n\t\t\tdisabled?: boolean\n\t\t}>(),\n\t\t{\n\t\t\twithIcon: false,\n\t\t\ticonSize: 18,\n\t\t\tcolor: 'inherit',\n\t\t\tborderColor: '#fff',\n\t\t\tdisabled: false\n\t\t}\n\t)\n\n\tconst emit = defineEmits(['click'])\n\n\tfunction click() {\n\t\tif (props.disabled) {\n\t\t\treturn\n\t\t}\n\t\temit('click')\n\t}\n</script>\n\n<template>\n\t<div\n\t\t:class=\"{ headerBtCTM: true, withIconCTM: props.icon || props.withIcon, disabled: props.disabled }\"\n\t\t:style=\"{ color: props.color, borderLeftColor: props.borderColor }\"\n\t\t@click=\"click\"\n\t>\n\t\t<Icon v-if=\"props.icon\" :size=\"props.iconSize\" :type=\"props.icon\" />\n\t\t<slot></slot>\n\t</div>\n</template>\n","import { getCurrentInstance } from 'vue'\r\n\r\nexport default function () {\r\n\tconst appContext = getCurrentInstance()?.appContext\r\n\tconst t: Record<string, any> = appContext?.config?.globalProperties || {}\r\n\treturn t\r\n}\r\n","<!--FullPop “全屏”弹出页（绝对定位，和最近一个relative元素大小一致），自带header，提供方法开关页面\n@created 2023.05.11\n@author Ricky email:zhangqingcq@foxmail.com-->\n\n<script setup lang=\"ts\">\n\timport t from '../../locale/i18nSFC'\n\timport HeaderBt from '../HeaderBt/HeaderBt.vue'\n\timport Proxy from '../../utils/proxy'\n\n\tconst props = withDefaults(\n\t\tdefineProps<{\n\t\t\ttitle?: string\n\t\t\theaderColor?: string\n\t\t\theaderBg?: string\n\t\t\theaderFontSize?: number | string\n\t\t\tzIndex?: number\n\t\t}>(),\n\t\t{\n\t\t\theaderFontSize: () => Proxy()?.fontSizeBase,\n\t\t\tzIndex: 1000\n\t\t}\n\t)\n\n\tconst emit = defineEmits(['on-open', 'on-close'])\n\n\tlet showPop = ref(false)\n\n\tconst hFontSize = computed(() => {\n\t\tif (typeof props.headerFontSize === 'number') {\n\t\t\treturn props.headerFontSize + 'px'\n\t\t}\n\t\treturn props.headerFontSize\n\t})\n\n\tconst popStyle = computed(() => {\n\t\treturn { zIndex: props.zIndex }\n\t})\n\n\tfunction open() {\n\t\tshowPop.value = true\n\t\temit('on-open')\n\t}\n\n\tfunction close(getData?: boolean) {\n\t\tshowPop.value = false\n\t\temit('on-close', getData === true)\n\t}\n\n\tdefineExpose({\n\t\topen,\n\t\tclose\n\t})\n</script>\n\n<template>\n\t<div v-show=\"showPop\" class=\"fullScreenPopBoxAM\" :style=\"popStyle\">\n\t\t<div class=\"headerAM\" :style=\"{ color: props.headerColor, backgroundColor: props.headerBg, fontSize: hFontSize }\">\n\t\t\t<!--这是标题-->\n\t\t\t<span class=\"headerTxtAM\">{{ title || t('r.title') }}</span>\n\t\t\t<!--这是返回按钮-->\n\t\t\t<HeaderBt icon=\"md-return-left\" @click=\"close\">{{ t('r.back') }}</HeaderBt>\n\t\t</div>\n\t\t<div class=\"contentAM\">\n\t\t\t<slot></slot>\n\t\t</div>\n\t</div>\n</template>\n","<!--Hello\n@created 2023.04.27\n@author Ricky email:zhangqingcq@foxmail.com-->\n\n<script setup lang=\"ts\">\n\tlet msg = ref('Greetings from Ricky.')\n</script>\n\n<template>\n\t<span class=\"msg\">{{ msg }}</span>\n</template>\n","<!--IconTxtBtn 表格顶部带图标的文字按钮（批量操作等），集成了权限v-has(自定义指令)，可指定图标、大小、按钮文字内容，可禁用\n@created 2023.07.19\n@author Ricky email:zhangqingcq@foxmail.com-->\n\n<script lang=\"ts\" setup>\n\timport t from '../../locale/i18nSFC'\n\timport Proxy from '../../utils/proxy'\n\n\tconst props = withDefaults(\n\t\tdefineProps<{\n\t\t\tname: string\n\t\t\ticon?: string\n\t\t\tsize?: number\n\t\t\tdisabled?: boolean\n\t\t\thas?: string\n\t\t}>(),\n\t\t{\n\t\t\ticon: 'md-download',\n\t\t\tsize: () => Proxy().iconTxtBtnIconSize,\n\t\t\tdisabled: false,\n\t\t\thas: ''\n\t\t}\n\t)\n\tconst emit = defineEmits(['click'])\n\n\tconst txtSize = computed(() => Math.floor((props.size / 17) * Proxy()?.fontSizeBase) + 'px')\n\n\tfunction click(e: any) {\n\t\tif (props.disabled) {\n\t\t\treturn\n\t\t}\n\t\temit('click', e)\n\t}\n</script>\n\n<template>\n\t<div\n\t\tclass=\"tabTopBtnsT\"\n\t\t@click=\"click\"\n\t\tv-has=\"has\"\n\t\t:class=\"{ disabled: props.disabled }\"\n\t\t:style=\"{ 'font-size': txtSize }\"\n\t>\n\t\t<Icon :type=\"props.icon\" :size=\"props.size\" />\n\t\t{{ props.name || t('r.button') }}\n\t</div>\n</template>\n","<!--Page404 404页面\n@created 2023.06.12\n@author Ricky email:zhangqingcq@foxmail.com-->\n\n<script setup lang=\"ts\">\n\timport type { Router } from 'vue-router'\n\timport t from '../../locale/i18nSFC'\n\n\tconst instance = getCurrentInstance()!\n\tconst router = instance.appContext.config.globalProperties.$router as Router\n\n\tfunction back() {\n\t\trouter.go(-1)\n\t}\n</script>\n\n<template>\n\t<div class=\"c404K\">\n\t\t<div class=\"t404\">404</div>\n\t\t<div class=\"ct404\">UH OH! {{ t('r.pageNotFound') }}</div>\n\t\t<div class=\"p404\">{{ t('r.notFoundMsg') }}</div>\n\n\t\t<Button class=\"bt404\" @click=\"back\">{{ t('r.back') }}</Button>\n\t</div>\n</template>\n","/**\n * @description 提示框\n * @author ricky zhangqingcq@foxmail.com\n * @created 2023.05.08\n */\n\nimport swal from 'sweetalert'\nimport { myTypeof } from './globalFunc'\nimport { t } from '../locale'\n\ntype ButtonC = { text?: string; className?: string; value?: boolean | null; visible?: boolean }\ntype ButtonS = { cancel: ButtonC; confirm: ButtonC }\n\n/**\n * $swal实例\n * @param {object|string|boolean} option object:{title:'标题',content(or text):'内容，可以为空',type(or icon):'success(or error\n *   or warning)'}---string:'标题'---boolean:关闭$swal窗体\n * @param {string|HTMLElement} [text] 当option为object时不传此变量，当option为string时该变量为'内容'\n * @param {string} [icon] 当option为object时不传此变量，当option为string时该变量为弹出框类型'success'/'error'/'warning'\n * @param {boolean} [closeOnClickOutside] 点击外部关闭，默认：true\n */\nexport default function $swal(\n\tthis: any,\n\toption:\n\t\t| string\n\t\t| {\n\t\t\t\ttitle?: string\n\t\t\t\tcontent?: string\n\t\t\t\ttext?: string | HTMLElement\n\t\t\t\ttype?: string\n\t\t\t\ticon?: string\n\t\t\t\tonOk?: () => void\n\t\t\t\tclassName?: string\n\t\t\t\tbuttons?: ButtonS | Array<string>\n\t\t\t\tcloseOnClickOutside?: boolean\n\t\t  }\n\t\t| boolean,\n\ttext?: string | HTMLElement,\n\ticon?: string,\n\tcloseOnClickOutside: boolean = true\n) {\n\tconst T = (...arg: Parameters<typeof t>) => t.apply(this, arg)\n\n\treturn new Promise((r, j) => {\n\t\tif (typeof option === 'object' && !Array.isArray(option)) {\n\t\t\tlet okTxt = T('r.confirm')\n\t\t\tlet cancelTxt = T('r.cancel')\n\t\t\tlet cancelVisible = false\n\t\t\tlet okClass = 'swalConfirmBt'\n\t\t\tlet cancelClass = 'swalCancelBt'\n\t\t\tconst reg = /^HTML.*Element$/\n\n\t\t\toption.type && (option.icon = option.type) && delete option.type\n\t\t\toption.content && (option.text = option.content) && delete option.content\n\t\t\toption.className = option.className || 'swalBoxX'\n\n\t\t\tlet t = ''\n\t\t\tif (option.text && reg.test(myTypeof(option.text))) {\n\t\t\t\tt = 'content'\n\t\t\t} else if (option.text && myTypeof(option.text) === 'String') {\n\t\t\t\tt = 'text'\n\t\t\t}\n\n\t\t\tif (option.buttons) {\n\t\t\t\tif (typeof option.buttons === 'object' && !Array.isArray(option.buttons)) {\n\t\t\t\t\tif (option.buttons.cancel) {\n\t\t\t\t\t\toption.buttons.cancel.text && (cancelTxt = option.buttons.cancel.text) && (cancelVisible = true)\n\t\t\t\t\t\toption.buttons.cancel.className && (cancelClass = option.buttons.cancel.className)\n\n\t\t\t\t\t\toption.buttons.confirm.text && (okTxt = option.buttons.confirm.text)\n\t\t\t\t\t\toption.buttons.confirm.className && (okClass = option.buttons.confirm.className)\n\t\t\t\t\t}\n\t\t\t\t} else if (Array.isArray(option.buttons)) {\n\t\t\t\t\tif (option.buttons[0]) {\n\t\t\t\t\t\tcancelTxt = option.buttons[0]\n\t\t\t\t\t\tcancelVisible = true\n\t\t\t\t\t}\n\t\t\t\t\tif (option.buttons[1]) {\n\t\t\t\t\t\tokTxt = option.buttons[1]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tswal({\n\t\t\t\ttitle: option.title,\n\t\t\t\ticon: option.icon,\n\t\t\t\tclassName: option.className,\n\t\t\t\t[t]: option.text,\n\t\t\t\tbuttons: {\n\t\t\t\t\tconfirm: {\n\t\t\t\t\t\ttext: okTxt,\n\t\t\t\t\t\tvalue: true,\n\t\t\t\t\t\tvisible: true,\n\t\t\t\t\t\tclassName: okClass\n\t\t\t\t\t},\n\t\t\t\t\tcancel: {\n\t\t\t\t\t\ttext: cancelTxt,\n\t\t\t\t\t\tvalue: null,\n\t\t\t\t\t\tvisible: cancelVisible,\n\t\t\t\t\t\tclassName: cancelClass\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tcloseOnClickOutside: option.closeOnClickOutside ?? true\n\t\t\t})\n\t\t\t\t.then((res) => {\n\t\t\t\t\tif (res && typeof option.onOk === 'function') {\n\t\t\t\t\t\toption.onOk()\n\t\t\t\t\t}\n\t\t\t\t\tr(res)\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tj(err)\n\t\t\t\t})\n\t\t} else if (typeof option === 'string') {\n\t\t\tlet t = ''\n\t\t\tif (text) {\n\t\t\t\tswitch (typeof text) {\n\t\t\t\t\tcase 'string':\n\t\t\t\t\t\tt = 'text'\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'object':\n\t\t\t\t\t\tt = 'content'\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tswal({\n\t\t\t\ttitle: option,\n\t\t\t\t[t]: text || '',\n\t\t\t\ticon: icon || '',\n\t\t\t\tclassName: 'swalBoxX',\n\t\t\t\tcloseOnClickOutside: closeOnClickOutside,\n\t\t\t\tbuttons: {\n\t\t\t\t\tconfirm: {\n\t\t\t\t\t\ttext: T('r.confirm'),\n\t\t\t\t\t\tvalue: true,\n\t\t\t\t\t\tvisible: true,\n\t\t\t\t\t\tclassName: 'swalConfirmBt',\n\t\t\t\t\t\tcloseModal: true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t\t\t.then((res) => {\n\t\t\t\t\tr(res)\n\t\t\t\t})\n\t\t\t\t.catch((err) => {\n\t\t\t\t\tj(err)\n\t\t\t\t})\n\t\t} else if (typeof option === 'boolean') {\n\t\t\tif (!option && swal.close) {\n\t\t\t\tswal.close()\n\t\t\t}\n\t\t} else {\n\t\t\tthrow new TypeError('swal第一个参数类型有误，仅支持Object/String/false')\n\t\t}\n\t})\n}\n","<script setup lang=\"ts\">\r\n\timport { debounce } from 'lodash-es'\r\n\timport { Tooltip } from 'view-ui-plus'\r\n\r\n\tconst props = defineProps<{ content?: string | number | boolean | null }>()\r\n\tconst spanRef = ref()\r\n\tconst contentRef = ref()\r\n\r\n\tconst tooltipDisabled = ref(true)\r\n\tlet debounceFunc: any = null\r\n\tconst maxWidth = ref(200)\r\n\r\n\tfunction getSize() {\r\n\t\tconst $span = tooltipDisabled.value ? spanRef.value : contentRef.value\r\n\t\tif (!$span) {\r\n\t\t\treturn\r\n\t\t}\r\n\t\tlet range: any = document.createRange()\r\n\t\trange.setStart($span, 0)\r\n\t\trange.setEnd($span, $span.childNodes.length)\r\n\t\tconst rangeWidth = range.getBoundingClientRect().width\r\n\t\tmaxWidth.value = $span.offsetWidth * 2\r\n\t\ttooltipDisabled.value = rangeWidth < $span.offsetWidth\r\n\r\n\t\trange = null\r\n\t}\r\n\r\n\tonMounted(() => {\r\n\t\tgetSize()\r\n\r\n\t\tdebounceFunc = debounce(() => {\r\n\t\t\tnextTick(function () {\r\n\t\t\t\tgetSize()\r\n\t\t\t})\r\n\t\t}, 200)\r\n\r\n\t\twindow.addEventListener('resize', debounceFunc)\r\n\t})\r\n\r\n\tonUpdated(getSize)\r\n\r\n\tonUnmounted(() => {\r\n\t\twindow.removeEventListener('resize', debounceFunc)\r\n\t})\r\n</script>\r\n\r\n<template>\r\n\t<div class=\"tableTooltip\">\r\n\t\t<span ref=\"spanRef\" v-if=\"tooltipDisabled\" class=\"contentText\">{{ props.content }}</span>\r\n\t\t<Tooltip\r\n\t\t\tv-else\r\n\t\t\t:content=\"typeof props.content === 'boolean' ? String(props.content) : (props.content ?? '')\"\r\n\t\t\t:max-width=\"maxWidth\"\r\n\t\t\ttransfer\r\n\t\t>\r\n\t\t\t<span ref=\"contentRef\" class=\"contentText\">{{ props.content }}</span>\r\n\t\t</Tooltip>\r\n\t</div>\r\n</template>\r\n","/**\n * @description 全局公共方法集合，挂在app.config.globalProperties下(按需引入模式下除外)，组合式开发模式下推荐单独引用 import {xxx} from\n *   '@zhangqingcq/plug-r-qw'\n * @author ricky zhangqingcq@foxmail.com\n * @created 2023.07.14\n */\nimport { h, isRef } from 'vue'\nimport type { Collection, PlainObject, PredicateFunc } from '../public'\nimport { isPlainObject } from 'lodash-es'\nimport $swal from './swal'\nimport TableTooltip from '../components/TableTooltip/TableTooltip.vue'\n\nexport const isClient = typeof window !== 'undefined'\n\nexport function setValue(target: any, key: string, value: any) {\n\tif (isRef(target[key])) {\n\t\ttarget[key].value = value\n\t} else {\n\t\ttarget[key] = value\n\t}\n}\n\nexport function myTypeof(v: any): string {\n\tlet str = Object.prototype.toString.call(v)\n\treturn str.replace(/\\[object |]/g, '')\n}\n\nexport function has(v: string) {\n\treturn { style: { display: hasPermission(v) ? 'unset' : 'none' } }\n}\n\n// 驼峰转换下划线\nexport function toLine(name: string): string {\n\treturn name.replace(/([A-Z])/g, '_$1').toLowerCase()\n}\n\n/**\n * 去掉对象属性前后空格\n */\nexport function trimObj(obj: Collection): Collection {\n\tlet p = myTypeof(obj)\n\tif (p === 'Object') {\n\t\tfor (let key in obj) {\n\t\t\tif (obj.hasOwnProperty(key)) {\n\t\t\t\tlet o = myTypeof(obj[key])\n\t\t\t\tif (o === 'String') {\n\t\t\t\t\tobj[key] = obj[key].trim()\n\t\t\t\t} else if (o === 'Object' || o === 'Array') {\n\t\t\t\t\ttrimObj(obj[key])\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t} else if (p === 'Array') {\n\t\tfor (let i = 0, l = obj.length; i < l; i++) {\n\t\t\tlet t = myTypeof(obj[i])\n\t\t\tif (t === 'String') {\n\t\t\t\tobj[i] = obj[i].trim()\n\t\t\t} else if (t === 'Array' || t === 'Object') {\n\t\t\t\ttrimObj(obj[i])\n\t\t\t}\n\t\t}\n\t}\n\treturn obj\n}\n\n/**\n * 清空集合\n * @param val 被清空的集合\n * @param ignoreList 不需要清理的字段集合\n * @return *\n */\nexport function clearObj(val: Collection, ignoreList: Array<keyof Collection | never> = []): Collection {\n\tif (myTypeof(val) === 'Array') {\n\t\tval.forEach((item: Collection, index: number) => {\n\t\t\tswitch (myTypeof(item)) {\n\t\t\t\tcase 'Array':\n\t\t\t\tcase 'Object':\n\t\t\t\t\tclearObj(item)\n\t\t\t\t\tbreak\n\t\t\t\tdefault:\n\t\t\t\t\tval[index] = null\n\t\t\t}\n\t\t})\n\t\treturn val\n\t} else if (myTypeof(val) === 'Object') {\n\t\tfor (let key in val) {\n\t\t\tif (val.hasOwnProperty(key)) {\n\t\t\t\tlet go = true\n\t\t\t\tfor (let item of ignoreList) {\n\t\t\t\t\tif (item === key) {\n\t\t\t\t\t\tgo = false\n\t\t\t\t\t\tbreak\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (go) {\n\t\t\t\t\tswitch (myTypeof(val[key])) {\n\t\t\t\t\t\tcase 'Array':\n\t\t\t\t\t\tcase 'Object':\n\t\t\t\t\t\t\tclearObj(val[key])\n\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tval[key] = null\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn val\n\t} else {\n\t\treturn val\n\t}\n}\n\n/*以form-data方式提交请求数据时，$fetch的config参数值*/\nexport const formDataHeadConfig = {\n\theaders: {\n\t\t'Content-Type': 'multipart/form-data'\n\t}\n}\n\n/*将普通对象转换成form-data请求参数格式*/\nexport function toFormData(data: Record<string, any>): FormData {\n\tlet temp = new FormData()\n\tfor (let key in data) {\n\t\tif (data.hasOwnProperty(key) && data[key] !== null) {\n\t\t\ttemp.append(key, data[key])\n\t\t}\n\t}\n\treturn temp\n}\n\n/**\n * 在目标集合中按条件查找或直接查找，返回第一个满足条件的元素或路径\n * 与findPath不同，这里的路径是完整路径（findPath省略了一些标准结构中间路径），找不到返回：false\n * @param {array|object} group 被查找的集合\n * @param {Function|string|number|boolean} condition 查找的条件或值\n * @param {boolean} [getPath] 是否返回路径，默认为：false，返回找到的元素\n */\nexport function findCollection(\n\tgroup: Collection,\n\tcondition: PredicateFunc | string | number | boolean,\n\tgetPath: boolean = false\n) {\n\tif (!group || !condition) {\n\t\treturn false\n\t}\n\tlet PATH\n\tlet target: string | Collection = 'notFoundC'\n\tlet deepSearch: Function = function (group: Collection, condition: (e: any) => boolean) {\n\t\tif (Array.isArray(group)) {\n\t\t\tif (myTypeof(condition) === 'Function' && condition(group)) {\n\t\t\t\ttarget = group\n\t\t\t\treturn []\n\t\t\t}\n\t\t\tfor (let e of group) {\n\t\t\t\tif (target !== 'notFoundC') {\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\tif ((myTypeof(condition) === 'Function' && condition(e)) || e === condition) {\n\t\t\t\t\ttarget = e\n\t\t\t\t\treturn [group.indexOf(e)]\n\t\t\t\t} else if (myTypeof(e) === 'Array' || myTypeof(e) === 'Object') {\n\t\t\t\t\tlet r = deepSearch(e, condition)\n\t\t\t\t\tif (r !== undefined) {\n\t\t\t\t\t\treturn [group.indexOf(e), ...r]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (myTypeof(group) === 'Object') {\n\t\t\tif (myTypeof(condition) === 'Function' && condition(group)) {\n\t\t\t\ttarget = group\n\t\t\t\treturn []\n\t\t\t}\n\t\t\tfor (let key in group) {\n\t\t\t\tif (target !== 'notFoundC') {\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t\tif (group.hasOwnProperty(key)) {\n\t\t\t\t\tif ((myTypeof(condition) === 'Function' && condition(key)) || group[key] === condition) {\n\t\t\t\t\t\ttarget = group[key]\n\t\t\t\t\t\treturn [key]\n\t\t\t\t\t} else if (myTypeof(group[key]) === 'Object' || myTypeof(group[key]) === 'Array') {\n\t\t\t\t\t\tlet r = deepSearch(group[key], condition)\n\t\t\t\t\t\tif (r !== undefined) {\n\t\t\t\t\t\t\treturn [key, ...r]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tPATH = deepSearch(group, condition)\n\tif (getPath) {\n\t\treturn PATH || false\n\t}\n\treturn target === 'notFoundC' ? false : target\n}\n\n/*判断某个值是否在集合中*/\nexport function oneOf(value: any, validList: any[]) {\n\tfor (let i = 0, l = validList.length; i < l; i++) {\n\t\tif (value === validList[i]) {\n\t\t\treturn true\n\t\t}\n\t}\n\treturn false\n}\n\n/**\n * 小数位数限制，超出会返回被去掉后的值\n * @param val 原来的值\n * @param num 小数点后的位数，默认：2\n * @return {number|*}\n */\nexport function decimalDigitsLimit(val: number | string, num: number = 2): string | number {\n\tlet expStr = new RegExp(`(^-?\\\\d+\\\\.\\\\d{${num}})(\\\\d+$)`)\n\tlet valStr = (val && String(val)) || ''\n\tif (expStr.test(valStr)) {\n\t\treturn Number(valStr.replace(expStr, '$1'))\n\t}\n\treturn val\n}\n\n/*文件导出，调用后端接口以form表单提交数据下载文件*/\nexport function downloadFileByFormSubmit(url: string, data: PlainObject = {}, method: string = 'get'): void {\n\tlet form = document.createElement('form')\n\tlet body = document.getElementsByTagName('body')[0]\n\tbody.appendChild(form)\n\tform.setAttribute('style', 'display:none')\n\tform.setAttribute('target', '')\n\tform.setAttribute('method', method)\n\tlet _url = url\n\tif (window && window.hasOwnProperty('g')) {\n\t\t/*所有特定缩写字母开头的地址，都会被改变加上config.js（public里的全局配置文件，在index.html引入，在打包后通过更改该文件用于不\n\t\t 同环境的部署）里配置的地址变成绝对地址，如:\n\t\t config.js里配置了 window.g={mgrURL:'http://mgr.myweb.com'}\n\t\t 请求地址 ‘/mgr/file’ 会被改变为 'http://mgr.myweb.com/file'\n\t\t */\n\t\t// @ts-ignore\n\t\tlet httpEnv = Object.keys(window.g)\n\t\t\t.filter((e) => e?.indexOf?.('URL') > -1)\n\t\t\t.map((e) => e.replace?.('URL', ''))\n\n\t\tfor (let item of httpEnv) {\n\t\t\tlet regExp = new RegExp('^/' + item + '(?=/.*$)', 'i')\n\t\t\t// @ts-ignore\n\t\t\tif (regExp.test(url) && window.g[item + 'URL']) {\n\t\t\t\t// @ts-ignore\n\t\t\t\t_url = window.g[item + 'URL'] + url.replace(regExp, '')\n\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n\tform.setAttribute('action', _url)\n\n\tif (isPlainObject(data)) {\n\t\tfor (let key in data) {\n\t\t\tif (data.hasOwnProperty(key) && (data[key] || data[key] === 0 || data[key] === false || data[key] === '')) {\n\t\t\t\tlet input = document.createElement('input')\n\t\t\t\tinput.setAttribute('type', 'hidden')\n\t\t\t\tinput.setAttribute('name', key)\n\t\t\t\tinput.setAttribute('value', data[key])\n\t\t\t\tform.appendChild(input)\n\t\t\t}\n\t\t}\n\n\t\tform.submit()\n\n\t\tlet ta: any = setTimeout(() => {\n\t\t\tbody.removeChild(form)\n\t\t\tclearTimeout(ta)\n\t\t\tta = null\n\t\t}, 8000)\n\t} else {\n\t\tconsole.error('请求数据格式有误，无法下载文件')\n\t}\n}\n\n/**\n * 文件导出功能（调用文件下载方法downloadFileByFormSubmit）\n * @param url 导出路径\n * @param data 参数\n * @param method 请求方式\n */\nexport function fileExport(this: any, url: string, data: PlainObject = {}, method: string = 'get'): void {\n\tif (\n\t\tdata.hasOwnProperty('columns') &&\n\t\t(data['columns'] === '' || data['columns'] === null || data['columns'] === undefined)\n\t) {\n\t\t$swal.call(this, {\n\t\t\ttitle: '需要导出的列不能为空',\n\t\t\ttype: 'warning'\n\t\t})\n\t\treturn\n\t}\n\tdownloadFileByFormSubmit(url, data, method)\n}\n\n/**\n * 依据列显示设置缓存获取columns的key的集合\n * @param {String} sKey - 列显示设置插件的sKey\n * @param {Array} columns - 表格table的columns\n * @param {Boolean} returnArray - 是否返回数组，默认值false,返回String\n * */\nexport function getColumnsKeys(sKey: string, columns: any[], returnArray: boolean = false): string | string[] {\n\tlet temp\n\tif (sKey && myTypeof(columns) === 'Array') {\n\t\tlet names = localStorage.getItem(sKey)\n\t\tif (names) {\n\t\t\tlet t = JSON.parse(decodeURI(names))\n\t\t\ttemp = columns.filter((e) => e?.key && t?.indexOf?.(e.title) !== -1).map((e) => e.key)\n\t\t} else {\n\t\t\ttemp = columns.map((e) => e?.key)\n\t\t}\n\t} else {\n\t\ttemp = []\n\t}\n\tif (!returnArray) {\n\t\ttemp = String(temp)\n\t}\n\treturn temp\n}\n\n/**\n * 判断一个值是否为有效值，有效值：不为空即为有效\n * @param val 需要判断的值\n * @returns {boolean}\n */\nexport function isValidValue(val: any): boolean {\n\treturn val !== undefined && val !== null && val !== ''\n}\n\nexport function isNumberValue(val: any): boolean {\n\tconst reg = /^-?\\d+(.\\d+)?$/\n\treturn reg.test(val)\n}\n\n/**\n * 手动tooltip(基于tableTooltip的高级表格内容展示，展示内容和形式更多样和合理)\n * tableTooltip: 替换view-design的Table的tooltip功能，只在内容会导致换行或显示不完整时渲染tooltip\n * @param {String/Array/Function} contentKey 要设置tooltip的column的key或者key组成的数组（内容按数组中key对应的内容先后拼接），\n * 或获取值的自定义逻辑（Function回调，会传入params）\n * @param {boolean} dash 在内容为空(null、undefined、'')时是否以'--'代替显示\n * @param {String} jointMark 在内容为多个字段拼接时，各字段间连接符，默认没有\n */\nexport function tooltipManual(\n\tcontentKey: string | string[] | ((params: any) => string),\n\tdash: boolean = false,\n\tjointMark: string = ''\n) {\n\treturn function (_h: any, params: any) {\n\t\tlet content: string\n\t\tif (Array.isArray(contentKey)) {\n\t\t\tlet temp: any[] = []\n\t\t\tfor (let item of contentKey) {\n\t\t\t\tif (isValidValue(params.row?.[item])) {\n\t\t\t\t\ttemp.push(params.row[item])\n\t\t\t\t}\n\t\t\t}\n\t\t\tcontent = temp.join(jointMark)\n\t\t} else if (typeof contentKey === 'function') {\n\t\t\tcontent = contentKey(params)\n\t\t} else {\n\t\t\tcontent = params.row?.[contentKey]\n\t\t}\n\n\t\treturn h(TableTooltip, { content: dash ? (content === '' ? '--' : (content ?? '--')) : content })\n\t}\n}\n\n/*判断集合（数组或对象）每个元素或单个变量是否是有效值*/\nexport function isEmptyValue(data: Collection): boolean {\n\tif (isPlainObject(data)) {\n\t\tfor (let key in data) {\n\t\t\tif (data.hasOwnProperty(key) && isValidValue(data[key])) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\t\treturn true\n\t} else if (Array.isArray(data)) {\n\t\tfor (let item of data) {\n\t\t\tif (isValidValue(item)) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\t\treturn true\n\t}\n\treturn !isValidValue(data)\n}\n\n/*获取字符串长度，中文2，其他1（一般用于用户输入长度限制）*/\nexport function stringLength(str: string): number {\n\tif (myTypeof(str) === 'String') {\n\t\treturn str.replace(/[^\\x00-\\xff]/g, '01').length\n\t} else if (myTypeof(str) === 'Number') {\n\t\tstr += ''\n\t\treturn str.replace(/[^\\x00-\\xff]/g, '01').length\n\t}\n\treturn 0\n}\n\n/**\n * 按条件设置集合中指定字段的值\n * @param {Object} option\n * @param {Array} option.group 目标集合\n * @param {Function} option.condition 匹配条件\n * @param {String} option.key 要设置的字段键名\n * @param  option.val 要设置的字段的值，或处理逻辑\n * @param {String} option.childKey 子集键名\n */\nexport function setValByOption({\n\tgroup,\n\tcondition,\n\tkey,\n\tval,\n\tchildKey = 'children'\n}: {\n\tgroup: Collection\n\tcondition: (item: any) => boolean\n\tkey: string\n\tval: any\n\tchildKey?: string\n}) {\n\tif (\n\t\tmyTypeof(group) !== 'Array' ||\n\t\tmyTypeof(condition) !== 'Function' ||\n\t\tmyTypeof(key) !== 'String' ||\n\t\tmyTypeof(childKey) !== 'String'\n\t) {\n\t\treturn false\n\t}\n\tgroup.forEach((item: any) => {\n\t\tif (condition(item)) {\n\t\t\tif (myTypeof(val) === 'Function') {\n\t\t\t\titem[key] = val(item[key])\n\t\t\t} else {\n\t\t\t\titem[key] = val\n\t\t\t}\n\t\t}\n\t\tif (myTypeof(item[childKey]) === 'Array' && item[childKey].length > 0) {\n\t\t\tsetValByOption({\n\t\t\t\tgroup: item[childKey],\n\t\t\t\tcondition,\n\t\t\t\tkey,\n\t\t\t\tval,\n\t\t\t\tchildKey\n\t\t\t})\n\t\t}\n\t})\n}\n\n/**\n * 是否有该权限，用于权限管理\n * @param {String} value 权限代码\n * @returns {boolean}\n */\nexport function hasPermission(value: string): boolean {\n\tlet btnPermissions = sessionStorage.getItem('btnPermissions')\n\tif (btnPermissions) {\n\t\treturn btnPermissions.split(',').indexOf(value) > -1\n\t}\n\treturn false\n}\n\n/**\n * 判断一个变量是否是NaN\n * @param v 变量\n * @returns {boolean}\n */\nexport function isNaN(v: any): boolean {\n\treturn myTypeof(v) === 'Number' && String(v) === 'NaN'\n}\n\n/**\n *过滤对象属性或者将对象转换成url的query字符串\n * @param {Object} data 需要处理的对象\n * @param {Boolean} toUrl 是否需要转换成url，为false时可以不传\n * @param {Boolean} keepEmptyVal 是否保留空值（用于接口置空某个字段），为false时可以不传\n * @returns {*}\n * 注意：当toUrl=false且keepEmptyVal=true时，两个参数都传比较好\n */\n\nexport function dataFilterOrToUrl(\n\tdata: PlainObject,\n\ttoUrl: boolean = false,\n\tkeepEmptyVal: boolean = false\n): string | PlainObject {\n\tif (myTypeof(data) !== 'Object') {\n\t\treturn data\n\t}\n\tlet _data = Object.assign(data, {})\n\tlet url = ''\n\tfor (let key in _data) {\n\t\tif (_data.hasOwnProperty(key)) {\n\t\t\tlet val = _data[key]\n\t\t\tif (\n\t\t\t\tval === undefined ||\n\t\t\t\tval === '' ||\n\t\t\t\t(myTypeof(val) === 'String' && val.trim() === '') ||\n\t\t\t\tval === null ||\n\t\t\t\tisNaN(val)\n\t\t\t) {\n\t\t\t\tif (keepEmptyVal) {\n\t\t\t\t\tif (toUrl) {\n\t\t\t\t\t\turl += key + '=&'\n\t\t\t\t\t} else {\n\t\t\t\t\t\t_data[key] = ''\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tdelete _data[key]\n\t\t\t\t}\n\t\t\t} else if (toUrl) {\n\t\t\t\turl += key + '=' + val + '&'\n\t\t\t}\n\t\t}\n\t}\n\tif (toUrl) {\n\t\tif (url.length > 0) {\n\t\t\treturn url.substring(0, url.length - 1)\n\t\t}\n\t\treturn ''\n\t}\n\treturn _data\n}\n\n/*过滤对象或数组中无效值*/\nexport function removeEmptyValue(data: Collection): Collection {\n\tlet temp: Collection = {}\n\tif (Array.isArray(data)) {\n\t\ttemp = []\n\t\tfor (let item of data) {\n\t\t\tif (Array.isArray(item) || isPlainObject(item)) {\n\t\t\t\ttemp.push(removeEmptyValue(item))\n\t\t\t} else if (isValidValue(item)) {\n\t\t\t\ttemp.push(item)\n\t\t\t}\n\t\t}\n\t} else if (isPlainObject(data)) {\n\t\tfor (let key in data) {\n\t\t\tif (data.hasOwnProperty(key)) {\n\t\t\t\tif (Array.isArray(data[key]) || isPlainObject(data[key])) {\n\t\t\t\t\ttemp[key] = removeEmptyValue(data[key])\n\t\t\t\t} else if (isValidValue(data[key])) {\n\t\t\t\t\ttemp[key] = data[key]\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn temp\n}\n\n/**\n *打印页面，根据后端所传递的数据生成\n * @param data\n * @return {Promise<any>}\n */\nexport function htmlPrint(data: string): void {\n\tconst pWin = window.open()\n\tif (pWin) {\n\t\tpWin.document.write(data)\n\t\tlet ta: any = setTimeout(() => {\n\t\t\tpWin.print()\n\t\t\twindow.clearTimeout(ta)\n\t\t\tta = null\n\t\t}, 10)\n\t}\n}\n\n/**\n * 查找dom元素所有兄弟\n * @param elem - 被查找的元素\n */\nexport function siblingElems(elem: ChildNode) {\n\tlet nodes: any[] = []\n\tlet _elem = elem\n\twhile (elem.previousSibling && (elem = elem.previousSibling)) {\n\t\tif (elem.nodeType === 1) {\n\t\t\tnodes.push(elem)\n\t\t}\n\t}\n\n\twhile (_elem.nextSibling && (_elem = _elem.nextSibling)) {\n\t\tif (_elem.nodeType === 1) {\n\t\t\tnodes.push(_elem)\n\t\t}\n\t}\n\treturn nodes\n}\n","<script lang=\"ts\" setup>\n\timport { siblingElems } from '../../utils/globalFunc'\n\n\tconst router = useRouter()\n\tconst props = withDefaults(defineProps<{ data?: any[]; pathName?: string }>(), {\n\t\tdata: () => [],\n\t\tpathName: ''\n\t})\n\n\tfunction getClass(item: any) {\n\t\treturn item?.path === props.pathName ? 'active' : ''\n\t}\n\n\tfunction handleClick(e: any, item: any) {\n\t\te?.preventDefault?.()\n\t\tlet target = e?.target\n\n\t\tif (item && !item.children && !target.classList.contains('active')) {\n\t\t\trouter.push(item.path)\n\t\t\treturn\n\t\t}\n\t\tlet parent = target.parentNode\n\t\tlet siblings = siblingElems(parent)\n\t\tfor (let item of siblings) {\n\t\t\titem?.classList?.remove?.('open') //手风琴效果\n\t\t\tconst child = item?.querySelectorAll?.('.open')\n\t\t\tif (child && Array.isArray(child)) {\n\t\t\t\tfor (let e of child) {\n\t\t\t\t\te?.classList?.remove?.('open')\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tparent?.classList?.toggle?.('open')\n\t}\n</script>\n<template>\n\t<ul class=\"groupBoxRP\">\n\t\t<template v-for=\"(item, i) of props.data\" :key=\"item?.path + i\">\n\t\t\t<li v-if=\"item\" :class=\"{ dropItemRP: item.children }\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"menuTxtR\"\n\t\t\t\t\t:class=\"getClass(item)\"\n\t\t\t\t\t@click=\"handleClick($event, item)\"\n\t\t\t\t\t:style=\"{ paddingLeft: item.level * 20 + 'px' }\"\n\t\t\t\t>\n\t\t\t\t\t<Icon class=\"menuIcoL\" :custom=\"'iconfont ' + item.icon\" v-if=\"item?.icon\" />\n\t\t\t\t\t<span>{{ item?.name || '-- no name --' }}</span>\n\t\t\t\t</div>\n\t\t\t\t<sideMenuGroup :data=\"item.children\" v-if=\"item.children\" :path-name=\"props.pathName\" />\n\t\t\t</li>\n\t\t</template>\n\t</ul>\n</template>\n","/**\n * @description 可自动销毁的定时器和计时器\n * @author ricky zhangqingcq@foxmail.com\n * @created 2023.07.14\n */\n\nlet timeoutBox: any[] = []\nlet intervalBox: any[] = []\n/**\n * 初始化\n * @param {object} r router实例\n */\nexport const init = function (r: any) {\n\tif (r && r.beforeEach) {\n\t\tr.beforeEach(() => {\n\t\t\ttimeoutBox.map((e) => {\n\t\t\t\twindow.clearTimeout(e)\n\t\t\t})\n\t\t\tintervalBox.map((e) => {\n\t\t\t\twindow.clearInterval(e)\n\t\t\t})\n\t\t\ttimeoutBox.length = 0\n\t\t\tintervalBox.length = 0\n\t\t})\n\t} else {\n\t\tconsole.warn(\n\t\t\t'安装库plug-r-qw时未传入router，调用该库的定时器方法产生的定时器将不能自动销毁，请传入router：Vue.use(plugRQw,{router,...})'\n\t\t)\n\t}\n}\n\nexport const setTimeout = function (fn: () => void, time: number): number {\n\tlet handler = window.setTimeout(fn, time)\n\ttimeoutBox.push(handler)\n\treturn handler\n}\n\nexport const setInterval = function (fn: () => void, time: number): number {\n\tlet handler = window.setInterval(fn, time)\n\tintervalBox.push(handler)\n\treturn handler\n}\n\nexport default {\n\tinit,\n\tsetTimeout,\n\tsetInterval\n}\n","<!--SideMenu 侧边菜单，贴在父容器左侧，可向左将整个菜单收起\n@created 2023.07.17\n@author Ricky email:zhangqingcq@foxmail.com-->\n\n<script lang=\"ts\" setup>\n\timport t from '../../locale/i18nSFC'\n\timport SideMenuGroup from './SideMenuGroup.vue'\n\timport { setTimeout } from '../../utils/timer'\n\n\tconst props = withDefaults(defineProps<{ data?: any[]; light?: boolean }>(), { data: () => [] })\n\tconst emit = defineEmits(['on-change'])\n\tconst route = useRoute()\n\n\tconst menuDisplay = ref<boolean>(true)\n\tconst pathName = ref()\n\tconst menuRef = ref()\n\tconst titleC = computed(() => (menuDisplay.value ? t('r.hideMenu') : t('r.showMenu')))\n\tconst typeIco = computed(() => (menuDisplay.value ? 'ios-arrow-back' : 'ios-arrow-forward'))\n\n\tonBeforeMount(() => {\n\t\tlet t: string = localStorage.getItem('menuDisplayR') || ''\n\n\t\tif (t !== '') {\n\t\t\tmenuDisplay.value = JSON.parse(t)\n\t\t} else {\n\t\t\tmenuDisplay.value = true\n\t\t\tlocalStorage.setItem('menuDisplayR', JSON.stringify(true))\n\t\t}\n\t})\n\n\twatch(\n\t\t() => route.path,\n\t\t(after) => {\n\t\t\tpathName.value = after\n\t\t\tnextTick(() => {\n\t\t\t\tsetTimeout(addOpen, 10)\n\t\t\t})\n\t\t},\n\t\t{ immediate: true }\n\t)\n\n\tfunction showHideMenu() {\n\t\tmenuDisplay.value = !menuDisplay.value\n\t\tlocalStorage.setItem('menuDisplayR', JSON.stringify(menuDisplay.value))\n\t\temit('on-change', menuDisplay.value)\n\t}\n\n\tfunction addOpen() {\n\t\tlet t = menuRef.value.querySelectorAll('.dropItemRP')\n\t\tfor (let e of t) {\n\t\t\tif (e?.querySelector?.('.active') && !e.classList?.contains?.('open')) {\n\t\t\t\te.classList?.add?.('open')\n\t\t\t}\n\t\t}\n\t}\n</script>\n<template>\n\t<div ref=\"menuRef\" :class=\"['menuBoxRP', 'cannotSelect', { light: light }]\">\n\t\t<div class=\"menuListR\" v-show=\"menuDisplay\">\n\t\t\t<side-menu-group :data=\"props.data\" :pathName=\"pathName\" />\n\t\t</div>\n\t\t<Icon\n\t\t\t:type=\"typeIco\"\n\t\t\t:size=\"25\"\n\t\t\t:class=\"{ showIco: !menuDisplay }\"\n\t\t\tclass=\"menuShowHideIco\"\n\t\t\t:title=\"titleC\"\n\t\t\t@click=\"showHideMenu\"\n\t\t\t:color=\"menuDisplay ? '#fff' : '#333'\"\n\t\t/>\n\t</div>\n</template>\n","<!--SideMenuProGroup\n@created 2024.09.14\n@author Ricky email:zhangqingcq@foxmail.com-->\n<script lang=\"ts\" setup>\n\tconst router = useRouter()\n\tconst props = withDefaults(defineProps<{ data?: any[]; pathName?: string }>(), {\n\t\tdata: () => [],\n\t\tpathName: ''\n\t})\n\n\tconst current = ref('')\n\n\tfunction getClass(item: any) {\n\t\tlet t = 'menuTxtR '\n\t\tif (item?.path === props.pathName) {\n\t\t\tt += 'active '\n\t\t}\n\t\treturn t\n\t}\n\n\tfunction handleClick(e: any, item: any) {\n\t\te?.preventDefault?.()\n\t\tlet target = e?.target\n\n\t\tif (item && !item.children && !target.classList.contains('active')) {\n\t\t\trouter.push(item.path)\n\t\t}\n\t}\n\n\tfunction handleMouseenter(e: any, item: any) {\n\t\te?.preventDefault?.()\n\t\tcurrent.value = item?.path\n\t}\n\n\tfunction handleMouseleave(e: any) {\n\t\te?.preventDefault?.()\n\t\tcurrent.value = ''\n\t}\n</script>\n<template>\n\t<ul class=\"groupBoxRX\">\n\t\t<template v-for=\"(item, i) of props.data\" :key=\"item?.path + i\">\n\t\t\t<li\n\t\t\t\t:class=\"{ dropItemRX: item?.children }\"\n\t\t\t\t@mouseenter=\"handleMouseenter($event, item)\"\n\t\t\t\t@mouseleave=\"handleMouseleave($event)\"\n\t\t\t>\n\t\t\t\t<div\n\t\t\t\t\t:class=\"getClass(item)\"\n\t\t\t\t\t@click=\"handleClick($event, item)\"\n\t\t\t\t\t:style=\"{ paddingLeft: item.level * 20 + 'px' }\"\n\t\t\t\t>\n\t\t\t\t\t{{ item?.name || '-- no name --' }}\n\t\t\t\t\t<Icon\n\t\t\t\t\t\tclass=\"dropIcoRX\"\n\t\t\t\t\t\ttype=\"ios-arrow-forward\"\n\t\t\t\t\t\t:size=\"16\"\n\t\t\t\t\t\tv-show=\"item.children && item.children.length > 0\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<SideMenuProGroup\n\t\t\t\t\tclass=\"rightChildRX\"\n\t\t\t\t\tv-if=\"item?.children?.length > 0\"\n\t\t\t\t\tv-show=\"current === item?.path\"\n\t\t\t\t\t:data=\"item?.children\"\n\t\t\t\t\t:path-name=\"pathName\"\n\t\t\t\t/>\n\t\t\t</li>\n\t\t</template>\n\t</ul>\n</template>\n","<!--SideMenuTwoLevel\n@created 2024.09.14\n@author Ricky email:zhangqingcq@foxmail.com-->\n<script lang=\"ts\" setup>\n\timport { siblingElems } from '../../utils/globalFunc'\n\timport SideMenuProGroup from './SideMenuProGroup.vue'\n\n\tconst router = useRouter()\n\tconst props = withDefaults(defineProps<{ data?: any[]; pathName?: string; fromIcoMenu?: boolean }>(), {\n\t\tdata: () => [],\n\t\tpathName: ''\n\t})\n\n\tfunction getClass(item: any) {\n\t\tlet t = 'menuTxtR '\n\t\tif (item?.path === props.pathName) {\n\t\t\tt += 'active '\n\t\t}\n\t\treturn t\n\t}\n\n\tfunction handleClick(e: any, item: any) {\n\t\te?.preventDefault?.()\n\t\tlet target = e?.target\n\n\t\tif (item && !item.children && !target.classList.contains('active')) {\n\t\t\trouter.push(item.path)\n\t\t\treturn\n\t\t}\n\n\t\tconst ico = target?.querySelector?.('.dropIcoRX')\n\t\tconst parent = target.parentNode\n\t\tconst siblings = siblingElems(parent)\n\t\tfor (let item of siblings) {\n\t\t\titem?.classList?.remove?.('open')\n\t\t\tconst icoI = item?.querySelector?.('.dropIcoRX')\n\t\t\ticoI?.classList?.remove?.('open') //手风琴效果\n\t\t\tconst child = item?.querySelectorAll?.('.open')\n\t\t\tfor (let e of child) {\n\t\t\t\te?.classList?.remove?.('open')\n\t\t\t}\n\t\t}\n\t\tparent?.classList?.toggle?.('open')\n\t\tico?.classList?.toggle?.('open')\n\t}\n</script>\n<template>\n\t<ul class=\"groupBoxRX\">\n\t\t<template v-for=\"(item, i) of props.data\" :key=\"item?.path + i\">\n\t\t\t<li :class=\"{ dropItemRX: item?.children, open: props.fromIcoMenu, fromIcoMenu: props.fromIcoMenu }\">\n\t\t\t\t<div\n\t\t\t\t\t:class=\"getClass(item)\"\n\t\t\t\t\t@click=\"handleClick($event, item)\"\n\t\t\t\t\t:style=\"{ paddingLeft: item.level * 20 + 'px' }\"\n\t\t\t\t>\n\t\t\t\t\t<Icon class=\"menuIcoL\" :custom=\"'iconfont ' + (item.icon || 'icon-r-menu-default')\" />\n\t\t\t\t\t<span>{{ item?.name || '-- no name --' }}</span>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\t:class=\"['dropIcoRX', { open: props.fromIcoMenu, fromIcoMenu: props.fromIcoMenu }]\"\n\t\t\t\t\t\ttype=\"ios-arrow-forward\"\n\t\t\t\t\t\tv-show=\"item.children && item.children.length > 0\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<SideMenuProGroup :data=\"item.children\" v-if=\"item.children\" :path-name=\"props.pathName\" />\n\t\t\t</li>\n\t\t</template>\n\t</ul>\n</template>\n","<!--SideIcoMenu\n@created 2024.09.14\n@author Ricky email:zhangqingcq@foxmail.com-->\n<script lang=\"ts\" setup>\n\timport SideMenuTwoLevel from './SideMenuTwoLevel.vue'\n\n\tconst router = useRouter()\n\tconst props = withDefaults(defineProps<{ data?: any[]; pathName?: string }>(), {\n\t\tdata: () => [],\n\t\tpathName: ''\n\t})\n\n\tconst current = ref('')\n\n\tfunction getClass(item: any) {\n\t\tlet t = 'menuTxtR '\n\t\tif (item?.path === props.pathName) {\n\t\t\tt += 'active '\n\t\t}\n\t\treturn t\n\t}\n\n\tfunction handleClick(e: any, item: any) {\n\t\te?.preventDefault?.()\n\t\tlet target = e?.target\n\n\t\tif (item && !item.children && !target.classList.contains('active')) {\n\t\t\trouter.push(item.path)\n\t\t}\n\t}\n\n\tfunction handleMouseenter(e: any, item: any) {\n\t\te?.preventDefault?.()\n\t\tcurrent.value = item?.path\n\t}\n\n\tfunction handleMouseleave(e: any) {\n\t\te?.preventDefault?.()\n\t\tcurrent.value = ''\n\t}\n</script>\n<template>\n\t<ul class=\"groupBoxRX\">\n\t\t<template v-for=\"(item, i) of props.data\" :key=\"item?.path + i\">\n\t\t\t<li\n\t\t\t\t:class=\"{ dropItemRX: item.children }\"\n\t\t\t\t@mouseenter=\"handleMouseenter($event, item)\"\n\t\t\t\t@mouseleave=\"handleMouseleave($event)\"\n\t\t\t>\n\t\t\t\t<div :class=\"getClass(item)\" @click=\"handleClick($event, item)\">\n\t\t\t\t\t<Icon class=\"menuIcoM\" :custom=\"'iconfont ' + (item.icon || 'icon-r-menu-default')\" size=\"20\" />\n\t\t\t\t</div>\n\t\t\t\t<SideMenuTwoLevel\n\t\t\t\t\tclass=\"rightTwoMenu\"\n\t\t\t\t\tv-show=\"current === item?.path\"\n\t\t\t\t\t:data=\"[item]\"\n\t\t\t\t\t:pathName=\"props.pathName\"\n\t\t\t\t\tfromIcoMenu\n\t\t\t\t/>\n\t\t\t</li>\n\t\t</template>\n\t</ul>\n</template>\n","<!--SideMenuPro 侧边菜单，贴在父容器左侧，可向左将菜单收起进入精简模式（一级纯图标）\n@created 2024.09.14\n@author Ricky email:zhangqingcq@foxmail.com-->\n\n<script lang=\"ts\" setup>\n\timport t from '../../locale/i18nSFC'\n\timport SideMenuTwoLevel from './SideMenuTwoLevel.vue'\n\timport SideIcoMenu from './SideIcoMenu.vue'\n\timport { setTimeout } from '../../utils/timer'\n\n\tconst props = withDefaults(defineProps<{ data?: any[]; light?: boolean }>(), { data: () => [] })\n\tconst emit = defineEmits(['on-change'])\n\tconst route = useRoute()\n\n\tconst menuDisplay = ref<boolean>(true)\n\tconst pathName = ref()\n\tconst menuProRef = ref()\n\tconst titleC = computed(() => (menuDisplay.value ? t('r.hideMenu') : t('r.showMenu')))\n\tconst typeIco = computed(() => (menuDisplay.value ? 'iconfont icon-r-menu-hide' : 'iconfont icon-r-menu-open'))\n\n\tonBeforeMount(() => {\n\t\tlet t: string = localStorage.getItem('menuDisplayRPro') || ''\n\n\t\tif (t !== '') {\n\t\t\tmenuDisplay.value = JSON.parse(t)\n\t\t} else {\n\t\t\tmenuDisplay.value = true\n\t\t\tlocalStorage.setItem('menuDisplayRPro', JSON.stringify(true))\n\t\t}\n\t})\n\n\twatch(\n\t\t() => route.path,\n\t\t(after) => {\n\t\t\tpathName.value = after\n\t\t\tnextTick(() => {\n\t\t\t\tsetTimeout(addOpen, 10)\n\t\t\t})\n\t\t},\n\t\t{ immediate: true }\n\t)\n\n\tfunction showHideMenu() {\n\t\tmenuDisplay.value = !menuDisplay.value\n\t\tlocalStorage.setItem('menuDisplayRPro', JSON.stringify(menuDisplay.value))\n\t\temit('on-change', menuDisplay.value)\n\t}\n\n\tfunction addOpen() {\n\t\tlet t = menuProRef.value.querySelectorAll('.dropItemRX')\n\t\tfor (let e of t) {\n\t\t\tconst ico = e?.childNodes[0]?.querySelector?.('.dropIcoRX')\n\t\t\tif (e?.querySelector?.('.active')) {\n\t\t\t\tif (e?.childNodes[1]?.classList?.contains?.('rightChildRX')) {\n\t\t\t\t\tif (!e?.childNodes[0]?.classList?.contains?.('activeR')) {\n\t\t\t\t\t\te?.childNodes[0].classList.add?.('activeR')\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (!e?.classList?.contains?.('open')) {\n\t\t\t\t\t\te.classList.add?.('open')\n\t\t\t\t\t}\n\t\t\t\t\tif (ico && !ico?.classList?.contains?.('open')) {\n\t\t\t\t\t\tico.classList.add?.('open')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (e?.childNodes[1]?.classList?.contains?.('rightChildRX')) {\n\t\t\t\t\tif (e?.childNodes[0]?.classList?.contains?.('activeR')) {\n\t\t\t\t\t\te?.childNodes[0].classList.remove?.('activeR')\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (e?.classList?.contains?.('open') && !e?.classList?.contains?.('fromIcoMenu')) {\n\t\t\t\t\t\te.classList.remove?.('open')\n\t\t\t\t\t}\n\t\t\t\t\tif (ico?.classList?.contains?.('open') && !ico?.classList?.contains?.('fromIcoMenu')) {\n\t\t\t\t\t\tico.classList.remove?.('open')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n</script>\n<template>\n\t<div ref=\"menuProRef\" :class=\"['menuBoxRPro', 'cannotSelect', { light: light }]\">\n\t\t<div class=\"menuListR\" v-show=\"menuDisplay\">\n\t\t\t<SideMenuTwoLevel :data=\"props.data\" :pathName=\"pathName\" />\n\t\t</div>\n\t\t<sideIcoMenu class=\"icoMenuR\" v-show=\"!menuDisplay\" :data=\"data\" :pathName=\"pathName\" />\n\t\t<Icon\n\t\t\t:custom=\"typeIco\"\n\t\t\t:size=\"14\"\n\t\t\t:class=\"{ showIco: !menuDisplay }\"\n\t\t\tclass=\"menuShowHideIco\"\n\t\t\t:title=\"titleC\"\n\t\t\t@click=\"showHideMenu\"\n\t\t/>\n\t</div>\n</template>\n","<!--TableIconBtn 表格用图标按钮，集成了权限v-has(自定义指令)，可指定图标、大小、提示信息，可禁用\n@created 2023.07.20\n@author Ricky email:zhangqingcq@foxmail.com-->\n<script lang=\"ts\" setup>\n\timport t from '../../locale/i18nSFC'\n\n\tconst emit = defineEmits(['click'])\n\tconst props = withDefaults(\n\t\tdefineProps<{ icon?: string; title?: string; has?: string; disabled?: boolean; size?: number }>(),\n\t\t{\n\t\t\ticon: 'md-radio-button-on',\n\t\t\thas: '',\n\t\t\tdisabled: false,\n\t\t\tsize: 24\n\t\t}\n\t)\n\n\tfunction onClick(e: any) {\n\t\tif (props.disabled) {\n\t\t\treturn\n\t\t}\n\t\temit('click', e)\n\t}\n</script>\n\n<template>\n\t<div\n\t\tclass=\"tableBtnsG\"\n\t\t:class=\"{ disabled: props.disabled }\"\n\t\tv-has=\"props.has\"\n\t\t@click=\"onClick\"\n\t\t:title=\"props.title || t('r.button')\"\n\t>\n\t\t<Icon :type=\"props.icon\" :size=\"props.size\" />\n\t</div>\n</template>\n","<!--ShowHidePanel 收展面板，用于展示或收起表格页条件查询表单组\n@created 2023.07.20\n@author Ricky email:zhangqingcq@foxmail.com\n@params bg 例如：bg = '#fff' 或 bg = 'white' 不传为透明背景 (bg为自定义属性，控制该组件背景色) <show-hide-panel bg=\"#fff\">需要包装的代码</show-hide-panel> -->\n<script lang=\"ts\" setup>\n\tconst show = defineModel<boolean>({ default: true })\n\tconst props = defineProps<{ bg?: string }>()\n\n\tconst getBg = computed(() => (show ? 'background:' + props.bg || 'transparent' : ''))\n</script>\n\n<template>\n\t<div :style=\"getBg\">\n\t\t<div v-show=\"show\" class=\"contentX\">\n\t\t\t<slot />\n\t\t</div>\n\t\t<div class=\"arrowA\">\n\t\t\t<div class=\"btA\" @click=\"show = !show\">\n\t\t\t\t<Icon :type=\"show ? 'ios-arrow-up' : 'ios-arrow-down'\" size=\"20\" />\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n","<!--ShowHidePanelB 收展面板，用于展示或收起表格页条件查询表单组\n@created 2023.07.31\n@author Ricky email:zhangqingcq@foxmail.com\n@params modelValue(v-model绑定)展开收起\n@params bg 例如：bg = '#fff' 或 bg = 'white' 不传为透明背景 (bg为自定义属性，控制该组件背景色) <show-hide-panel-b v-model=\"open\" bg=\"#fff\">需要包装的代码</show-hide-panel-b> -->\n\n<script setup lang=\"ts\">\n\tconst props = withDefaults(defineProps<{ modelValue?: boolean; bg?: string }>(), {\n\t\tmodelValue: false,\n\t\tbg: 'transparent'\n\t})\n\tconst emit = defineEmits(['update:modelValue'])\n\tconst show = computed({\n\t\tget() {\n\t\t\treturn props.modelValue\n\t\t},\n\t\tset(d: boolean) {\n\t\t\temit('update:modelValue', d)\n\t\t}\n\t})\n\n\tconst getBg = computed(() => (show.value ? 'background:' + props.bg : ''))\n</script>\n\n<template>\n\t<div :style=\"getBg\">\n\t\t<div v-show=\"show\" class=\"contentZ\">\n\t\t\t<slot />\n\t\t</div>\n\t</div>\n</template>\n","<!--TableSearch 带高级查询按钮的快捷搜索组件，v-model绑定搜索框的值，高级查询按钮控制是否展开高级查询组件（showHidePanelB+searchForm）\n@created 2023.07.31\n@author Ricky email:zhangqingcq@foxmail.com-->\n<script setup lang=\"ts\">\n\t/**\n\t * @desc 联合showHidePanelB、searchForm等插件对table进行查询\n\t * @param {string} modelValue - 搜索框的值（v-model）必填\n\t * @param {boolean} open - 高级搜索是否开启 必填\n\t * @param {string} placeholder - 搜索框的placeholder\n\t * @param {string} width - 整个插件宽度\n\t * @param {string} right - 整个插件定位-右（最近relative）\n\t * @param {string} top - 整个插件定位-上（最近relative）\n\t * @example 调用示例 <table-search v-model=\"areaName\" :open=\"openSearch\" placeholder=\"片区名称\" @on-search=\"search\" @on-toggle=\"openSearch=!openSearch\"/>\n\t */\n\n\timport t from '../../locale/i18nSFC'\n\timport { setTimeout } from '../../utils/timer'\n\n\tconst emit = defineEmits(['update:modelValue', 'on-toggle', 'on-search'])\n\tconst props = withDefaults(\n\t\tdefineProps<{\n\t\t\tmodelValue: string\n\t\t\topen: boolean\n\t\t\tplaceholder?: string\n\t\t\tshowBtn?: boolean\n\t\t\tfixed?: boolean\n\t\t\twidth?: string | number\n\t\t\tright?: string | number\n\t\t\ttop?: string | number\n\t\t\tbtnColor?: string\n\t\t}>(),\n\t\t{\n\t\t\topen: false,\n\t\t\tshowBtn: true,\n\t\t\tfixed: false,\n\t\t\twidth: '210px',\n\t\t\tright: '0',\n\t\t\ttop: '0',\n\t\t\tbtnColor: 'inherit'\n\t\t}\n\t)\n\n\tlet isDebounce = false\n\tconst value = computed({\n\t\tget() {\n\t\t\treturn props.modelValue\n\t\t},\n\t\tset(d: string) {\n\t\t\temit('update:modelValue', d)\n\t\t}\n\t})\n\tconst openX = computed({\n\t\tget() {\n\t\t\treturn props.open\n\t\t},\n\t\tset(d: boolean) {\n\t\t\temit('on-toggle', d)\n\t\t}\n\t})\n\tconst iconL = computed(() => (openX.value ? 'ios-arrow-up' : 'ios-arrow-down'))\n\n\tfunction onSearch() {\n\t\tif (!isDebounce) {\n\t\t\tisDebounce = true\n\t\t\temit('on-search', value.value)\n\t\t\tsetTimeout(() => {\n\t\t\t\tisDebounce = false\n\t\t\t}, 2000)\n\t\t}\n\t}\n</script>\n\n<template>\n\t<div\n\t\tclass=\"tableSearchV\"\n\t\t:style=\"{ position: props.fixed ? 'fixed' : 'absolute', right: props.right, top: props.top }\"\n\t>\n\t\t<slot>\n\t\t\t<Input\n\t\t\t\tv-model=\"value\"\n\t\t\t\t:style=\"{ width: props.width }\"\n\t\t\t\tsearch\n\t\t\t\t@on-search=\"onSearch\"\n\t\t\t\tclass=\"searchInputC\"\n\t\t\t\t:placeholder=\"props.placeholder || t('r.pInput')\"\n\t\t\t/>\n\t\t</slot>\n\t\t<span class=\"sbt\" @click=\"openX = !openX\" v-show=\"props.showBtn\" :style=\"{ color: props.btnColor }\"\n\t\t\t><icon :type=\"iconL\" :color=\"props.btnColor\" />{{ t('r.adSearch') }}</span\n\t\t>\n\t</div>\n</template>\n","import { isClient } from '../utils/globalFunc'\r\n\r\nexport default {\r\n\tbeforeMount(el: any, binding: any) {\r\n\t\tfunction documentHandler(e: any) {\r\n\t\t\tif (el.contains(e.target)) {\r\n\t\t\t\treturn false\r\n\t\t\t}\r\n\t\t\tbinding?.value?.(e)\r\n\t\t}\r\n\r\n\t\tel.__vueClickOutside__ = documentHandler\r\n\t\tisClient && document.addEventListener('click', documentHandler)\r\n\t},\r\n\tunmounted(el: any) {\r\n\t\tisClient && document.removeEventListener('click', el.__vueClickOutside__)\r\n\t\tdelete el.__vueClickOutside__\r\n\t}\r\n}\r\n","/**\r\n * @description 提示框\r\n * @author ricky zhangqingcq@foxmail.com\r\n * @created 2023.05.09\r\n */\r\n\r\nimport $swal from './swal'\r\nimport { t } from '../locale'\r\n\r\nexport default function $swalConfirm(\r\n\tthis: any,\r\n\ttitle: string,\r\n\ttext: string,\r\n\ticon: string,\r\n\tonOk: () => void,\r\n\tcloseOnClickOutside: boolean = false\r\n) {\r\n\tconst T = (...arg: Parameters<typeof t>) => t.apply(this, arg)\r\n\t$swal.call(this, {\r\n\t\ttitle: title || T('r.info.title'),\r\n\t\ttext: text || T('r.info.text'),\r\n\t\ticon: icon || 'warning',\r\n\t\tonOk: onOk,\r\n\t\tbuttons: [T('r.cancel')],\r\n\t\tcloseOnClickOutside: closeOnClickOutside\r\n\t})\r\n}\r\n","<!--TableSetting 设置表格哪些列展示，支持指定列默认展示、指定列禁止修改展示设置\n@created 2023.08.14\n@author Ricky email:zhangqingcq@foxmail.com-->\n<script lang=\"ts\" setup>\n\t/**\n\t * @desc 利用table的columns和localstorage对table进行列的显示设置\n\t * @param {array} modelValue - 插件的值（v-model,对应table的columns）必填\n\t * @param {string} sKey - 插件数据在localstorage的唯一标识，命名规则：插件所在单文件名称_取名时间，如areaNew_202003231639 必填\n\t * @param {string} [width] - 设置面板宽度\n\t * @param {string} [bg] - 设置面板背景色，默认值可通过全局属性tableSettingBg改变，默认：`'#fff'`\n\t * @param {string} [placement] - 设置面板呼出位置，默认：'bottom-end'\n\t * @param {boolean} [defaultCheck] - 是否设置默认勾选（默认false，用于默认展示所有列），如果设为true（用于默认展示部分列）,则在v-model绑定的columns项里设置showSettingCheck:true\n\t * @param {string} [storage] - 指定使用浏览器缓存类型，可选值`'localStorage'`、`'sessionStorage'`，默认：`localStorage`\n\t * @param {boolean} [transfer] - 是否将面板放置于 body 内，在 Tabs、带有 overflow:hidden 的 上级容器内使用时，建议添加此属性，它将不受父级样式影响，从而达到更好的效果，默认值可通过全局属性tableSettingTransfer改变，默认：`true`\n\t * @param {boolean} [eventsEnabled] - 是否开启 Popper 的 eventsEnabled 属性，开启可能会牺牲一定的性能，但可以让弹出面板根据页面环境动态改变位置和自身尺寸，提升体验，默认值可通过全局属性tableSettingEventsEnabled改变，默认：`true`\n\t * @example 调用示例 <table-setting v-model=\"columns\" sKey=\"tableSettingEx_202007030903\"/>\n\t */\n\timport Popper from 'popper.js'\n\timport type { Placement } from 'popper.js'\n\timport { cloneDeep } from 'lodash-es'\n\timport vClickOutside from '../../directives/clickOutside'\n\timport t from '../../locale/i18nSFC'\n\timport Proxy from '../../utils/proxy'\n\timport { setTimeout } from '../../utils/timer'\n\timport SwalConfirm from '../../utils/swalConfirm'\n\n\tconst emit = defineEmits(['update:modelValue'])\n\tconst props = withDefaults(\n\t\tdefineProps<{\n\t\t\tmodelValue?: any[]\n\t\t\tsKey: string\n\t\t\twidth?: string\n\t\t\tbg?: string\n\t\t\tplacement?: Placement\n\t\t\tdefaultCheck?: boolean\n\t\t\tstorage?: 'localStorage' | 'sessionStorage'\n\t\t\ttransfer?: boolean\n\t\t\teventsEnabled?: boolean /*是否开启 Popper 的 eventsEnabled 属性，开启可能会牺牲一定的性能，但可以让弹出面板根据页面环境动态改变位置和自身尺寸，提升体验*/\n\t\t}>(),\n\t\t{\n\t\t\tmodelValue: () => [],\n\t\t\twidth: '240px',\n\t\t\tbg: () => Proxy().tableSettingBg,\n\t\t\tplacement: 'bottom-end',\n\t\t\tdefaultCheck: false,\n\t\t\tstorage: 'localStorage',\n\t\t\ttransfer: () => Proxy().tableSettingTransfer,\n\t\t\teventsEnabled: () => Proxy().tableSettingEventsEnabled\n\t\t}\n\t)\n\n\tconst buttonRef = ref()\n\tconst popperRef = ref()\n\n\tconst indeterminate = ref(true)\n\tconst checkAll = ref(false)\n\tconst show = ref(false)\n\tconst groupT = ref<any[]>([])\n\tconst groupX = computed(() => {\n\t\tlet unknown = t('r.unknown')\n\t\tif (props.modelValue?.length > groupT.value.length) {\n\t\t\tgroupT.value = cloneDeep(props.modelValue)\n\t\t}\n\t\treturn groupT.value.map((e: Record<string, any>) => {\n\t\t\tlet temp: Record<string, any> = { label: e?.title || unknown }\n\t\t\tif (e?.disableShowSetting) {\n\t\t\t\ttemp.disabled = true\n\t\t\t}\n\t\t\treturn temp\n\t\t})\n\t})\n\tconst disabledGroup = computed(() => groupX.value.filter((e: Record<string, any>) => e?.disabled))\n\tconst checkAllGroup = computed({\n\t\tget() {\n\t\t\treturn props.modelValue?.map?.((e: Record<string, any>) => e?.title || t('r.unknown'))\n\t\t},\n\t\tset(v: any[]) {\n\t\t\tlet subV = groupT.value.filter((e: Record<string, any>) => {\n\t\t\t\tfor (let item of v) {\n\t\t\t\t\tif (item === e?.title) {\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false\n\t\t\t})\n\t\t\temit('update:modelValue', subV)\n\t\t}\n\t})\n\tconst locale = getCurrentInstance()?.appContext?.config?.globalProperties?.$i18n?.locale\n\tlet _popper: any = null\n\n\tonMounted(() => {\n\t\tlet unknown = t('r.unknown')\n\t\tlet localStr: string | null = getStorage()\n\t\tif (localStr) {\n\t\t\tcheckAllGroup.value = JSON.parse(decodeURI(localStr))\n\t\t} else {\n\t\t\tif (props.defaultCheck) {\n\t\t\t\tcheckAllGroup.value = props.modelValue\n\t\t\t\t\t.filter((e: Record<string, any>) => e?.showSettingCheck)\n\t\t\t\t\t.map((e) => e?.title || unknown)\n\t\t\t}\n\t\t}\n\n\t\tnextTick(function () {\n\t\t\tif (!buttonRef.value || !popperRef.value) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\t_popper = new Popper(buttonRef.value, popperRef.value, {\n\t\t\t\tplacement: props.placement,\n\t\t\t\teventsEnabled: props.eventsEnabled,\n\t\t\t\tmodifiers: {\n\t\t\t\t\tcomputeStyle: {\n\t\t\t\t\t\tgpuAcceleration: false\n\t\t\t\t\t},\n\t\t\t\t\tpreventOverflow: {\n\t\t\t\t\t\tboundariesElement: 'window'\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonUpdate: (d: any) => {\n\t\t\t\t\tif (d?.popper && d.instance?.popper) {\n\t\t\t\t\t\tconst c = calcPopperHeight(d)\n\t\t\t\t\t\tconst { needChange } = c\n\t\t\t\t\t\tif (needChange) {\n\t\t\t\t\t\t\tconst { height } = c\n\t\t\t\t\t\t\tconst el = d.instance.popper\n\t\t\t\t\t\t\tif (el.style) {\n\t\t\t\t\t\t\t\tel.style.height = `${height}px`\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t})\n\t\t})\n\n\t\tsetTimeout(() => {\n\t\t\tshow.value = true\n\t\t\t_popper?.update?.()\n\t\t\tnextTick(function () {\n\t\t\t\tshow.value = false\n\t\t\t})\n\t\t}, 0)\n\t})\n\n\tonBeforeUnmount(function () {\n\t\t_popper?.destroy?.()\n\t})\n\n\tfunction calcPopperHeight(d: Record<string, any>) {\n\t\tconst { height } = d.popper\n\t\tconst el = d.instance.popper\n\t\t//浏览器窗口高度\n\t\tconst h = window.innerHeight\n\t\tlet _h = 0\n\t\tif (el.childNodes?.length) {\n\t\t\tfor (let i = 0; i < el.childNodes.length; i++) {\n\t\t\t\t_h += el.childNodes[i]?.offsetHeight\n\t\t\t}\n\t\t}\n\t\tif (h < height - 10 || height < _h) {\n\t\t\treturn {\n\t\t\t\tneedChange: true,\n\t\t\t\theight: h - 10 < _h ? h - 10 : _h\n\t\t\t}\n\t\t} else {\n\t\t\treturn { needChange: false }\n\t\t}\n\t}\n\n\tfunction checkAllGroupChange(data: any[]) {\n\t\tif (data.length === groupX.value.length) {\n\t\t\tindeterminate.value = false\n\t\t\tcheckAll.value = true\n\t\t} else if (data.length > disabledGroup.value.length) {\n\t\t\tindeterminate.value = true\n\t\t\tcheckAll.value = false\n\t\t} else {\n\t\t\tindeterminate.value = false\n\t\t\tcheckAll.value = false\n\t\t}\n\t}\n\n\twatch(() => checkAllGroup.value, checkAllGroupChange, {\n\t\timmediate: true,\n\t\tdeep: true\n\t})\n\n\tfunction close() {\n\t\tif (show.value) {\n\t\t\tif (getChange()) {\n\t\t\t\tSwalConfirm(t('r.notSave'), '', 'warning', save)\n\t\t\t}\n\t\t\tshow.value = false\n\t\t}\n\t}\n\n\tfunction labelClick() {\n\t\tif (!show.value) {\n\t\t\tshow.value = true\n\t\t\tnextTick(function () {\n\t\t\t\t_popper?.update?.()\n\t\t\t})\n\t\t} else {\n\t\t\tclose()\n\t\t}\n\t}\n\n\tfunction save() {\n\t\tif (locale) {\n\t\t\twindow[props.storage].setItem(props.sKey + '_' + locale, encodeURI(JSON.stringify(checkAllGroup.value)))\n\t\t} else {\n\t\t\twindow[props.storage].setItem(props.sKey, encodeURI(JSON.stringify(checkAllGroup.value)))\n\t\t}\n\t\tclose()\n\t}\n\n\tfunction clickOutsideHandle(event: any) {\n\t\tif (show.value) {\n\t\t\tif (props.transfer) {\n\t\t\t\tconst $el = popperRef.value\n\t\t\t\tif ($el === event?.target || $el?.contains?.(event?.target)) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tevent?.preventDefault?.()\n\t\t\tclose()\n\t\t}\n\t}\n\n\tfunction handleCheckAll() {\n\t\tif (indeterminate.value) {\n\t\t\tcheckAll.value = false\n\t\t} else {\n\t\t\tcheckAll.value = !checkAll.value\n\t\t}\n\t\tindeterminate.value = false\n\n\t\tif (checkAll.value) {\n\t\t\tcheckAllGroup.value = groupX.value.map((e: Record<string, any>) => e?.label)\n\t\t} else {\n\t\t\tcheckAllGroup.value = disabledGroup.value.map((e: Record<string, any>) => e?.label)\n\t\t}\n\t}\n\n\tfunction getStorage() {\n\t\tlet localStr\n\t\tif (locale) {\n\t\t\tlocalStr = window[props.storage].getItem(props.sKey + '_' + locale)\n\t\t} else {\n\t\t\tlocalStr = window[props.storage].getItem(props.sKey)\n\t\t}\n\t\treturn localStr\n\t}\n\n\tfunction getChange() {\n\t\tlet t = getStorage()\n\t\tif (t) {\n\t\t\tt = JSON.parse(decodeURI(t))\n\t\t\tif (t?.length !== checkAllGroup.value?.length) {\n\t\t\t\treturn true\n\t\t\t} else {\n\t\t\t\tfor (let e of t) {\n\t\t\t\t\tif (checkAllGroup.value.indexOf(e) === -1) {\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\treturn true\n\t\t}\n\t\treturn false\n\t}\n</script>\n\n<template>\n\t<div class=\"tabSetF\" v-click-outside=\"clickOutsideHandle\">\n\t\t<div ref=\"buttonRef\" class=\"tabSetBt\" @click=\"labelClick\">\n\t\t\t<Icon type=\"md-settings\" size=\"17\" />\n\t\t\t<span class=\"cannotSelect\">{{ t('r.tabSetting') }}</span>\n\t\t</div>\n\t\t<Teleport to=\"body\" :disabled=\"!props.transfer\">\n\t\t\t<div ref=\"popperRef\" class=\"tabSetCard\" v-show=\"show\" :style=\"{ width: props.width, backgroundColor: props.bg }\">\n\t\t\t\t<div class=\"topCheck\">\n\t\t\t\t\t<Checkbox :indeterminate=\"indeterminate\" v-model=\"checkAll\" @click.prevent.native=\"handleCheckAll\">{{\n\t\t\t\t\t\tt('r.all')\n\t\t\t\t\t}}</Checkbox>\n\t\t\t\t\t<div class=\"btnR\" style=\"float: right; display: inline-block\" @click=\"save\">\n\t\t\t\t\t\t<span class=\"iconfont icon-r-save\"></span>\n\t\t\t\t\t\t<span>{{ t('r.save') }}</span>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<CheckboxGroup v-model=\"checkAllGroup\">\n\t\t\t\t\t<Checkbox\n\t\t\t\t\t\tv-for=\"(itemT, index) in groupX\"\n\t\t\t\t\t\tclass=\"setItem\"\n\t\t\t\t\t\t:label=\"itemT && itemT.label\"\n\t\t\t\t\t\t:key=\"'tabSet_' + props.sKey + index\"\n\t\t\t\t\t\t:disabled=\"itemT && itemT.disabled\"\n\t\t\t\t\t/>\n\t\t\t\t</CheckboxGroup>\n\t\t\t</div>\n\t\t</Teleport>\n\t</div>\n</template>\n","/**\n * @description 公共方法集合，需要单独引用才能使用\n * @author ricky zhangqingcq@foxmail.com\n * @created 2023.07.14\n */\nimport type { Collection } from '../public'\nimport { isObject, isFunction, isPlainObject, cloneDeep, isEmpty } from 'lodash-es'\nimport { myTypeof } from './globalFunc'\n\n// 下划线转换驼峰\nexport function toHump(name: string): string {\n\treturn name.replace(/_(\\w)/g, function (all, letter) {\n\t\treturn letter.toUpperCase()\n\t})\n}\n\n/*用浏览器内部转换器实现html转码*/\nexport function htmlEncode(text: string): string | HTMLElement {\n\t//1.首先动态创建一个容器标签元素，如DIV\n\tlet temp = document.createElement('div')\n\t//2.然后将要转换的字符串设置为这个元素的innerText(ie支持)或者textContent(火狐，google支持)\n\ttemp.textContent !== undefined ? (temp.textContent = text) : (temp.innerText = text)\n\t//3.最后返回这个元素的innerHTML，即得到经过HTML编码转换的字符串了\n\treturn temp.innerHTML\n}\n\n/*用浏览器内部转换器实现html解码*/\nexport function htmlDecode(html: string): string | null {\n\t//1.首先动态创建一个容器标签元素，如DIV\n\tlet temp = document.createElement('div')\n\t//2.然后将要转换的字符串设置为这个元素的innerHTML(ie，火狐，google都支持)\n\ttemp.innerHTML = html\n\t//3.最后返回这个元素的innerText(ie支持)或者textContent(火狐，google支持)，即得到经过HTML解码的字符串了。\n\treturn temp.innerText || temp.textContent\n}\n\n/*根据file文件对象获取文件地址用来预览*/\nexport function getFileSrc(file: File) {\n\treturn new Promise((resolve) => {\n\t\tlet reader = new FileReader()\n\t\treader.readAsDataURL(file) // 读出 base64\n\t\treader.onloadend = () => {\n\t\t\tresolve(reader.result)\n\t\t}\n\t})\n}\n\n/*获取后缀名*/\nexport function getFileTypeByName(name: string): string {\n\treturn name?.split('.').pop()!.toLocaleLowerCase() || ''\n}\n\n/*判断是否为图片（type是否包含‘image’）*/\nexport function isImgByFile(type: string): boolean {\n\treturn myTypeof(type) === 'String' && type.indexOf('image') > -1\n}\n\n/*根据文件名获取图标（上传组件用）*/\nexport function getFileTypeIconByName(name: string): string {\n\tconst format = getFileTypeByName(name)\n\tlet type = 'ios-document-outline'\n\n\tif (['gif', 'jpg', 'jpeg', 'png', 'bmp', 'webp'].indexOf(format) > -1) {\n\t\ttype = 'ios-image'\n\t} else if (['mp4', 'm3u8', 'rmvb', 'avi', 'swf', '3gp', 'mkv', 'flv'].indexOf(format) > -1) {\n\t\ttype = 'ios-film'\n\t} else if (['mp3', 'wav', 'wma', 'ogg', 'aac', 'flac'].indexOf(format) > -1) {\n\t\ttype = 'ios-musical-notes'\n\t} else if (['doc', 'txt', 'docx', 'pages', 'epub', 'pdf'].indexOf(format) > -1) {\n\t\ttype = 'md-document'\n\t} else if (['numbers', 'csv', 'xls', 'xlsx'].indexOf(format) > -1) {\n\t\ttype = 'ios-stats'\n\t} else if (['keynote', 'ppt', 'pptx'].indexOf(format) > -1) {\n\t\ttype = 'ios-videocam'\n\t}\n\n\treturn type\n}\n\n/*下载一个文件（替换容易被浏览器屏蔽的window.open方法）*/\nexport function downloadFileReaderFile(name: string, href: string): void {\n\tlet saveLink = document.createElement('a')\n\tsaveLink.href = href\n\tsaveLink.download = name\n\tfakeALinkClick(saveLink)\n}\n\n/*模拟被点击（比如模拟用户点击链接下载东西）*/\nexport function fakeALinkClick(obj: Record<string, any>): void {\n\tlet ev = document.createEvent('MouseEvents')\n\tev.initMouseEvent('click', true, false, window, 0, 0, 0, 0, 0, false, false, false, false, 0, null)\n\tobj.dispatchEvent(ev)\n}\n\n/**\n * 按条件查找一个元素在集合中的位置（路径），返回找到的第一个符合条件的位置\n * 仅适用于[{children:[{...},...],...},...]类似树结构集合（最外层也可以是一个对象）或一维数组\n * @param  {Object} option 参数\n * @param {Array|Object} option.group - 集合，被查找的集合，必填\n * @param {Function|String|Number|Boolean} option.condition - 查找条件，为常量时，将常量和集合元素直接对比，必填\n * @param {String} option.pathKey - 查找结果（路径）元素在集合中的key，在集合为数组时，可以不填，返回index（索引）\n * @param {String} option.childKey - 集合子元素的key，默认值 children\n * @param {Array} option.path - 递归用参数，逻辑内部参数，不用传\n * @return {Array} 返回带有路径（层级）信息的数组\n * @example group: {id:1,name:'爸爸',children:[{id:2,name:'大儿子'},{id:3,name:'二儿子'}]}\n *          condition: e=>e?.id === 3\n *          pathKey: 'name'\n *          childKey: 'children'\n *\n *          返回：['爸爸','二儿子']\n */\nexport function findPath({\n\tgroup,\n\tcondition,\n\tpathKey,\n\tchildKey = 'children',\n\tpath = []\n}: {\n\tgroup: Collection\n\tcondition: (item: any) => boolean\n\tpathKey?: any\n\tchildKey?: any\n\tpath?: string[]\n}): Array<string | number> {\n\tif (group && isObject(group)) {\n\t\tif (isFunction(condition)) {\n\t\t\tif (isPlainObject(group)) {\n\t\t\t\tlet item = group\n\t\t\t\tlet temp = cloneDeep(path)\n\t\t\t\tif (condition(item)) {\n\t\t\t\t\tif (pathKey && item[pathKey]) {\n\t\t\t\t\t\ttemp.push(item[pathKey])\n\t\t\t\t\t}\n\t\t\t\t\treturn temp\n\t\t\t\t} else if (item[childKey] && !isEmpty(item[childKey])) {\n\t\t\t\t\tif (pathKey && item[pathKey]) {\n\t\t\t\t\t\ttemp.push(item[pathKey])\n\t\t\t\t\t}\n\t\t\t\t\tlet rr = findPath({\n\t\t\t\t\t\tgroup: item[childKey],\n\t\t\t\t\t\tcondition: condition,\n\t\t\t\t\t\tpathKey: pathKey,\n\t\t\t\t\t\tchildKey: childKey,\n\t\t\t\t\t\tpath: temp\n\t\t\t\t\t})\n\t\t\t\t\tif (!isEmpty(rr)) {\n\t\t\t\t\t\treturn rr\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else if (Array.isArray(group)) {\n\t\t\t\tfor (let item of group) {\n\t\t\t\t\tlet temp = cloneDeep(path)\n\t\t\t\t\tif (condition(item)) {\n\t\t\t\t\t\tif (pathKey && item[pathKey]) {\n\t\t\t\t\t\t\ttemp.push(item[pathKey])\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttemp.push(String(group.indexOf(item)))\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn temp\n\t\t\t\t\t} else if (item[childKey] && item[childKey].length > 0) {\n\t\t\t\t\t\tif (pathKey && item[pathKey]) {\n\t\t\t\t\t\t\ttemp.push(item[pathKey])\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttemp.push(String(group.indexOf(item)))\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet rr = findPath({\n\t\t\t\t\t\t\tgroup: item[childKey],\n\t\t\t\t\t\t\tcondition: condition,\n\t\t\t\t\t\t\tpathKey: pathKey,\n\t\t\t\t\t\t\tchildKey: childKey,\n\t\t\t\t\t\t\tpath: temp\n\t\t\t\t\t\t})\n\t\t\t\t\t\tif (!isEmpty(rr)) {\n\t\t\t\t\t\t\treturn rr\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else if (Array.isArray(group)) {\n\t\t\t//条件为常量，集合为数组，这种情况只会有一种业务场景：在一维数组中查找某个常量在数组中第一次出现的index\n\t\t\tfor (let item of group) {\n\t\t\t\tlet temp = cloneDeep(path)\n\t\t\t\tif (item === condition) {\n\t\t\t\t\ttemp.push(String(group.indexOf(item)))\n\t\t\t\t\treturn temp\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn []\n}\n\n/*获取字符串width*/\nexport function getStringWidth(str: string, fontSize: number = 12): number {\n\tif (myTypeof(str) === 'String' && str.length > 0) {\n\t\tlet nodesH = document.createElement('span')\n\t\tnodesH.style.fontSize = fontSize + 'px'\n\t\tnodesH.style.fontFamily = 'inherit'\n\t\tnodesH.innerHTML = str\n\t\tnodesH.style.opacity = '0'\n\t\tnodesH.style.position = 'fixed'\n\t\tnodesH.style.top = '3000px'\n\t\tdocument.body.append(nodesH)\n\t\tconst width = nodesH.clientWidth\n\t\tdocument.body.removeChild(nodesH)\n\t\treturn width\n\t}\n\treturn 0\n}\n\n/**\n * 如果值为''则将其替换为null\n * @param val 被替换的值\n * @returns {*}\n */\n\nexport function emptyInput(val: any) {\n\tif (val === '') {\n\t\treturn null\n\t}\n\treturn val\n}\n\n//阻止冒泡\nexport function stopBubbling(e: any): void {\n\te = e || window.Event\n\tif (e?.stopPropagation) {\n\t\t//W3C阻止冒泡方法\n\t\te.stopPropagation?.()\n\t} else if (e) {\n\t\te.cancelBubble = true //IE阻止冒泡方法\n\t}\n}\n","/**\r\n * @description 基于view-ui:Modal的对话框插件\r\n * @author Ricky email:zhangqingcq@foxmail.com\r\n * @created 2023.05.04\r\n */\r\nimport { h } from 'vue'\r\nimport type { VNode } from 'vue'\r\nimport { Modal, Button } from 'view-ui-plus'\r\nimport { myTypeof } from './globalFunc'\r\nimport { t } from '../locale'\r\nimport type { RenderFunc } from '../public'\r\n\r\nlet loading: boolean = false\r\n\r\n/**\r\n * 对话框\r\n * @param {object} options 对话框配置\r\n * @param {string|VNode|Function} options.content 提示框内容，必填，传`''`触发默认值，1.string，直接将文字插入对应位置；\r\n * 2.VNode，如：h('div',{style:{color:'red'}},'123')；注意此处h是vue的渲染函数，需要引入：import {h} from 'vue'\r\n * 3.Function,如：(_h)=>_h('div',{class:'my-class'},'123')；此处_h作为参数，不需要单独引入\r\n * @param {number} [options.height] 弹框高度,默认值130,最小值130\r\n * @param {number} [options.width] 弹框宽度，默认值416,最小值416\r\n * @param {string} [options.title] 弹框标题内容，默认值“提示”\r\n * @param {Function} [options.onOk] 确定按钮回调函数\r\n * @param {Function} [options.onCancel] 取消按钮回调函数\r\n * @param {Function} [options.onClose] 关闭（右上角叉叉）按钮回调函数\r\n * @param {string} [options.okText] 确定按钮文字，默认值“确定”\r\n * @param {string} [options.cancelText] 取消按钮文字，默认值“取消”\r\n * @param {boolean} [options.noWarnIcon] 不展示内容开头的警告图标(非字符串内容默认不展示)，默认值“false”\r\n * @param {string} [options.footerAlign] 底部对齐方式，string，默认值“center”\r\n * @param {boolean} [options.cancelBt] 展示取消按钮，boolean，默认值“true”\r\n * 组件中调用示例：this.messageBox({\r\n *                      content:'确定执行操作？'\r\n *                    })\r\n */\r\nexport default function messageBox(\r\n\tthis: any,\r\n\t{\r\n\t\theight,\r\n\t\twidth = 416,\r\n\t\ttitle,\r\n\t\tcontent,\r\n\t\tonOk,\r\n\t\tonCancel,\r\n\t\tonClose,\r\n\t\tokText,\r\n\t\tcancelText,\r\n\t\tnoWarnIcon,\r\n\t\tfooterAlign,\r\n\t\tcancelBt = true\r\n\t}: {\r\n\t\theight?: number\r\n\t\twidth?: number\r\n\t\ttitle?: string\r\n\t\tcontent: string | VNode | RenderFunc\r\n\t\tonOk?: () => void | Promise<any>\r\n\t\tonCancel?: () => void\r\n\t\tonClose?: () => void\r\n\t\tokText?: string\r\n\t\tcancelText?: string\r\n\t\tnoWarnIcon?: boolean\r\n\t\tfooterAlign?: string\r\n\t\tcancelBt?: boolean\r\n\t}\r\n): void {\r\n\tconst T = (...arg: Parameters<typeof t>) => t.apply(this, arg)\r\n\r\n\tlet heightTemp = height && Number(height) - 90 > 100 ? Number(height) - 90 + 'px' : 0\r\n\tlet heightT = heightTemp || '100px'\r\n\tlet stringContent = myTypeof(content) === 'String'\r\n\tconst functionContent = typeof content === 'function'\r\n\r\n\tModal.warning({\r\n\t\twidth: width,\r\n\t\tfooterHide: true,\r\n\t\trender: () => {\r\n\t\t\treturn h(\r\n\t\t\t\t'div',\r\n\t\t\t\t{\r\n\t\t\t\t\tclass: 'customMessageBox',\r\n\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\theight: heightT\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\t\t\t\t[\r\n\t\t\t\t\th(\r\n\t\t\t\t\t\t'div',\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\tclass: 'containerN'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\th(\r\n\t\t\t\t\t\t\t\t'div',\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tclass: 'titleN'\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t\th('span', title || T('r.info.title')),\r\n\t\t\t\t\t\t\t\t\th(\r\n\t\t\t\t\t\t\t\t\t\tButton,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tclass: 'fr closeN',\r\n\t\t\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\t\t\tonClick() {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (loading) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tModal.remove()\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (onClose && myTypeof(onClose) === 'Function') {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonClose()\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t() =>\r\n\t\t\t\t\t\t\t\t\t\t\th('i', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass: 'ivu-icon ivu-icon-ios-close',\r\n\t\t\t\t\t\t\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tfontSize: '30px'\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\th(\r\n\t\t\t\t\t\t\t\t'div',\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tclass: 'contentN',\r\n\t\t\t\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\t\t\t\ttextAlign: stringContent ? 'center' : 'left'\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t\th('i', {\r\n\t\t\t\t\t\t\t\t\t\tclass: stringContent && !noWarnIcon ? 'ivu-icon ivu-icon-ios-alert-outline' : 'hide',\r\n\t\t\t\t\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\t\t\t\t\tfontSize: '60px',\r\n\t\t\t\t\t\t\t\t\t\t\tcolor: '#f8bb86'\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\th('div', { class: 'msgBoxConO' }, functionContent ? [content(h)] : content || T('r.info.text'))\r\n\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\th(\r\n\t\t\t\t\t\t\t\t'div',\r\n\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\tclass: 'footerN',\r\n\t\t\t\t\t\t\t\t\tstyle: {\r\n\t\t\t\t\t\t\t\t\t\ttextAlign: footerAlign || 'center'\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t[\r\n\t\t\t\t\t\t\t\t\th(\r\n\t\t\t\t\t\t\t\t\t\tButton,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tclass: 'okBtN',\r\n\t\t\t\t\t\t\t\t\t\t\tonClick(e: any) {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (onOk && typeof onOk === 'function') {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tconst p = onOk()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (p && myTypeof(p) === 'Promise') {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tloading = true\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst el = e?.currentTarget || e?.target\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (el) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tel.classList?.add?.('ivu-btn-loading')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tel.nextSibling?.setAttribute?.('disabled', 'disabled')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tconst c = el.parentElement?.parentElement?.querySelector?.('.titleN .closeN')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tc.classList?.add?.('disabled')\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tPromise.resolve(p)\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.then(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tloading = false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tModal.remove()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tloading = false\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tModal.remove()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tModal.remove()\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t() => [\r\n\t\t\t\t\t\t\t\t\t\t\th('i', {\r\n\t\t\t\t\t\t\t\t\t\t\t\tclass: 'ivu-load-loop ivu-icon ivu-icon-ios-loading'\r\n\t\t\t\t\t\t\t\t\t\t\t}),\r\n\t\t\t\t\t\t\t\t\t\t\th('span', okText || T('r.confirm'))\r\n\t\t\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t\t\t),\r\n\t\t\t\t\t\t\t\t\th(\r\n\t\t\t\t\t\t\t\t\t\tButton,\r\n\t\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\t\tclass: ['cancelBtN', !cancelBt && 'hide'],\r\n\t\t\t\t\t\t\t\t\t\t\tonClick() {\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (loading) {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t\tModal.remove()\r\n\t\t\t\t\t\t\t\t\t\t\t\tif (myTypeof(onCancel) === 'Function') {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tonCancel && onCancel()\r\n\t\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\t() => cancelText || T('r.cancel')\r\n\t\t\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t\t\t]\r\n\t\t\t\t\t\t\t)\r\n\t\t\t\t\t\t]\r\n\t\t\t\t\t)\r\n\t\t\t\t]\r\n\t\t\t)\r\n\t\t}\r\n\t})\r\n}\r\n","let count = 0\r\nlet loader = document.createElement('div')\r\nloader.setAttribute('class', 'spinModal')\r\n\r\nloader.innerHTML =\r\n\t'<div class=\"loader\"><svg class=\"circular\" viewBox=\"25 25 50 50\"><circle class=\"path\" cx=\"50\" cy=\"50\" r=\"20\" fill=\"none\" stroke-width=\"5\" stroke-miterlimit=\"10\" /></svg></div>'\r\n\r\nwindow.onload = function () {\r\n\tdocument.getElementsByTagName('body')[0].append(loader)\r\n}\r\n\r\n/**\r\n * 开关spin\r\n * @param d 开为：true，关：不传\r\n */\r\nexport function toggleSpin(d?: boolean): void {\r\n\tif (d) {\r\n\t\tloader.classList.add('show')\r\n\t} else {\r\n\t\tloader.classList.remove('show')\r\n\t}\r\n}\r\n\r\n/**\r\n * 网络请求计数\r\n * @param d 增加计数：true，减少计数：不传\r\n */\r\nexport function counts(d?: boolean) {\r\n\tlet t = count\r\n\tif (d) {\r\n\t\tcount++\r\n\t} else if (count > 0) {\r\n\t\tcount--\r\n\t}\r\n\r\n\tif (t !== count) {\r\n\t\tif (count === 0) {\r\n\t\t\ttoggleSpin(false)\r\n\t\t} else if (t === 0) {\r\n\t\t\ttoggleSpin(true)\r\n\t\t}\r\n\t}\r\n}\r\n","/**\r\n * @description 基于axios的网络请求插件\r\n * @author Ricky email:zhangqingcq@foxmail.com\r\n * @created 2023.05.10\r\n */\r\nimport type { AxiosInstance, AxiosRequestConfig, AxiosResponse } from 'axios'\r\nimport { isEmpty } from 'lodash-es'\r\nimport { t } from '../locale'\r\nimport messageBox from './messageBox'\r\n\r\nimport { counts } from './spin'\r\nimport type { Collection } from '../public'\r\n\r\nconst host = window.location.origin\r\n\r\nlet proxy: any = null\r\nconst T = (...arg: Parameters<typeof t>) => t.apply(proxy, arg)\r\n\r\nexport interface ServiceR extends AxiosInstance {\r\n\tstore?: any\r\n}\r\n\r\nexport interface RequestConfigR extends AxiosRequestConfig {\r\n\tspin?: boolean\r\n\tnoEmptyStr?: boolean\r\n}\r\n\r\n// 创建自定义对象\r\nlet service: ServiceR = axios.create({\r\n\tbaseURL: host,\r\n\twithCredentials: true // 允许携带cookie\r\n})\r\n\r\nfunction notInitYet() {\r\n\tconsole.info(\r\n\t\t'store为空，请在安装插件时传入store实例，vuex：app.use(plugRQw,{store})，Pinia：app.use(plugRQw,{useStore})'\r\n\t)\r\n}\r\n\r\n/**\r\n * 拦截器，在发起请求前调用\r\n */\r\nservice.interceptors.request.use(\r\n\t(q) => {\r\n\t\treturn q\r\n\t},\r\n\t(e) => {\r\n\t\treturn Promise.reject(e)\r\n\t}\r\n)\r\n\r\nfunction logoutHandle() {\r\n\tif (service.store) {\r\n\t\tif (typeof service.store === 'function') {\r\n\t\t\tconst store = service.store()\r\n\t\t\tif (store.logout) {\r\n\t\t\t\tstore.logout()\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tservice.store?.dispatch?.('logout')\r\n\t\t}\r\n\t} else {\r\n\t\tnotInitYet()\r\n\t}\r\n}\r\n\r\n/**\r\n * 拦截器，在请求返回时调用\r\n */\r\nservice.interceptors.response.use(\r\n\t(r) => {\r\n\t\tif (proxy && (r?.data?.code === 403 || r?.data?.code === 409)) {\r\n\t\t\tmessageBox({\r\n\t\t\t\tcontent: T('r.http.' + r.data.code),\r\n\t\t\t\tonOk: logoutHandle\r\n\t\t\t})\r\n\t\t}\r\n\t\treturn r\r\n\t},\r\n\t(e) => {\r\n\t\tif (proxy && (e?.response?.status === 403 || e?.response?.status === 409)) {\r\n\t\t\tmessageBox({\r\n\t\t\t\tcontent: T('r.http.' + e.response.status),\r\n\t\t\t\tonOk: logoutHandle\r\n\t\t\t})\r\n\t\t}\r\n\t\tconsole.warn('请求出错：', e)\r\n\t\treturn Promise.reject(e)\r\n\t}\r\n)\r\n\r\n/**\r\n * 封装请求结果和错误处理\r\n */\r\nfunction checkResult(r: Partial<AxiosResponse>, msg?: string | null, rPath?: string[], config?: RequestConfigR) {\r\n\tif (config && config.spin) {\r\n\t\tcounts(false)\r\n\t}\r\n\tlet y = true\r\n\tlet d = r && r.data\r\n\tif (d) {\r\n\t\trPath = rPath ? rPath : []\r\n\t\tfor (let e of rPath) {\r\n\t\t\td = d[e]\r\n\t\t\ty = y && d\r\n\t\t}\r\n\t\tif (y) {\r\n\t\t\treturn d\r\n\t\t}\r\n\t\tmsg && console.warn(msg)\r\n\t\treturn false\r\n\t}\r\n\tmsg && console.warn(msg)\r\n\treturn false\r\n}\r\n\r\nfunction handleRequest(\r\n\tmethod: string,\r\n\turl: string,\r\n\tdata?: Collection,\r\n\tmsg?: string | null,\r\n\trPath?: string[],\r\n\tconfig?: RequestConfigR,\r\n\tisUrlData?: boolean\r\n) {\r\n\treturn new Promise((s, j) => {\r\n\t\tswitch (method) {\r\n\t\t\tcase 'get':\r\n\t\t\t\tservice\r\n\t\t\t\t\t.get(url, { params: data })\r\n\t\t\t\t\t.then((r) => {\r\n\t\t\t\t\t\tlet d = checkResult(r, msg, rPath, config)\r\n\t\t\t\t\t\tif (d) {\r\n\t\t\t\t\t\t\ts(d)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tj(r)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\tcheckResult({}, msg, rPath, config)\r\n\t\t\t\t\t\tj(e)\r\n\t\t\t\t\t})\r\n\t\t\t\tbreak\r\n\t\t\tcase 'delete':\r\n\t\t\t\tlet keyT = isUrlData ? 'params' : 'data'\r\n\t\t\t\tservice\r\n\t\t\t\t\t.delete(url, { [keyT]: data })\r\n\t\t\t\t\t.then((r) => {\r\n\t\t\t\t\t\tlet d = checkResult(r, msg, rPath, config)\r\n\t\t\t\t\t\tif (d) {\r\n\t\t\t\t\t\t\ts(d)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tj(r)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\tcheckResult({}, msg, rPath, config)\r\n\t\t\t\t\t\tj(e)\r\n\t\t\t\t\t})\r\n\t\t\t\tbreak\r\n\t\t\tcase 'post':\r\n\t\t\t\tservice\r\n\t\t\t\t\t.post(url, data, config)\r\n\t\t\t\t\t.then((r) => {\r\n\t\t\t\t\t\tlet d = checkResult(r, msg, rPath, config)\r\n\t\t\t\t\t\tif (d) {\r\n\t\t\t\t\t\t\ts(d)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tj(r)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\tcheckResult({}, msg, rPath, config)\r\n\t\t\t\t\t\tj(e)\r\n\t\t\t\t\t})\r\n\t\t\t\tbreak\r\n\t\t\tcase 'put':\r\n\t\t\t\tservice\r\n\t\t\t\t\t.put(url, data, config)\r\n\t\t\t\t\t.then((r) => {\r\n\t\t\t\t\t\tlet d = checkResult(r, msg, rPath, config)\r\n\t\t\t\t\t\tif (d) {\r\n\t\t\t\t\t\t\ts(d)\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tj(r)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((e) => {\r\n\t\t\t\t\t\tcheckResult({}, msg, rPath, config)\r\n\t\t\t\t\t\tj(e)\r\n\t\t\t\t\t})\r\n\t\t\t\tbreak\r\n\t\t\tdefault:\r\n\t\t}\r\n\t})\r\n}\r\n\r\n/**\r\n * 检查请求传入的各个参数\r\n * @param method 请求方法\r\n * @param url 地址\r\n * @param data 餐宿\r\n * @param msg 错误信息\r\n * @param rPath 返回数据路径（提取）\r\n * @param config 请求配置\r\n * @param isUrlData delete方法传参模式 true:params,false:data\r\n * @returns {Promise<*>}\r\n */\r\nfunction checkRequest(\r\n\tmethod: string,\r\n\turl: string,\r\n\tdata: Collection = {},\r\n\tmsg?: string | null,\r\n\trPath?: string[],\r\n\tconfig?: RequestConfigR,\r\n\tisUrlData?: boolean\r\n) {\r\n\treturn new Promise((s, j) => {\r\n\t\tif (url) {\r\n\t\t\tif (config && config.spin) {\r\n\t\t\t\tcounts(true)\r\n\t\t\t}\r\n\t\t\tlet url_ = url\r\n\t\t\tif (window && window.hasOwnProperty('g')) {\r\n\t\t\t\t/*所有特定缩写字母开头的地址，都会被改变加上config.js（public里的全局配置文件，在index.html引入，在打包后通过更改该文件用于不\r\n\t\t\t\t 同环境的部署）里配置的地址变成绝对地址，如:\r\n\t\t\t\t config.js里配置了 window.g={mgrURL:'http://mgr.myweb.com'}\r\n\t\t\t\t 请求地址 ‘/mgr/file’ 会被改变为 'http://mgr.myweb.com/file'\r\n\t\t\t\t */\r\n\r\n\t\t\t\t// @ts-ignore\r\n\t\t\t\tconst _g = window.g\r\n\t\t\t\tlet httpEnv = Object.keys(_g)\r\n\t\t\t\t\t.filter((e) => e?.indexOf?.('URL') > -1)\r\n\t\t\t\t\t.map((e) => e.replace?.('URL', ''))\r\n\r\n\t\t\t\tfor (let e of httpEnv) {\r\n\t\t\t\t\tlet regExp = new RegExp('^/' + e + '(?=/.*$)', 'i')\r\n\t\t\t\t\tif (regExp.test(url) && _g[e + 'URL']) {\r\n\t\t\t\t\t\turl_ = _g[e + 'URL'] + url.replace(regExp, '')\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet data_: Collection | undefined\r\n\t\t\tif (config?.headers?.['Content-Type'] === 'multipart/form-data') {\r\n\t\t\t\tdata_ = data\r\n\t\t\t} else {\r\n\t\t\t\tif (data && !isEmpty(data)) {\r\n\t\t\t\t\tif (Array.isArray(data)) {\r\n\t\t\t\t\t\tdata_ = []\r\n\t\t\t\t\t\tfor (let e of data) {\r\n\t\t\t\t\t\t\tif (e || e === 0 || e === false || (e === '' && config && !config.noEmptyStr)) {\r\n\t\t\t\t\t\t\t\tdata_.push(e)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tdata_ = {}\r\n\t\t\t\t\t\tfor (let key in data) {\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tdata.hasOwnProperty(key) &&\r\n\t\t\t\t\t\t\t\t(data[key] ||\r\n\t\t\t\t\t\t\t\t\tdata[key] === 0 ||\r\n\t\t\t\t\t\t\t\t\tdata[key] === false ||\r\n\t\t\t\t\t\t\t\t\t(data[key] === '' && config && !config.noEmptyStr))\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tdata_[key] = data[key]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tlet method_ = method.toLowerCase()\r\n\t\t\thandleRequest(method_, url_, data_, msg, rPath, config, isUrlData)\r\n\t\t\t\t.then((r) => {\r\n\t\t\t\t\ts(r)\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tj(e)\r\n\t\t\t\t})\r\n\t\t} else {\r\n\t\t\tconsole.error('没有请求地址:url')\r\n\t\t\tj('没有请求地址:url')\r\n\t\t}\r\n\t})\r\n}\r\n\r\n/**\r\n * @description 基于axios封装的请求插件，引入库时使用this.$fetch时直接调用以下方法（选项式），例如：this.$fetch.get(\"/getData\",{id:1})，\r\n * vue3的setup模式使用：proxy调用（更推荐单独引用：import {$fetch} from '@zhangqingcq/plug-r-qw'）\r\n * 单独引入时遵循Es Modules规范即可\r\n * @class\r\n */\r\nexport default {\r\n\t/**\r\n\t * @description 初始化该请求插件，单独引入的话调用一次后，方可实现spin等功能，默认在该库安装时已自动化初始化了该请求插件\r\n\t * @function\r\n\t * @param {object} store 项目中vuex的store，或pinia的useStore\r\n\t * @param app 当前vue实例\r\n\t */\r\n\tinit(store: any, app: any) {\r\n\t\tservice.store = store\r\n\t\tproxy = app.config.globalProperties\r\n\t} /**\r\n\t * post 请求\r\n\t * @function\r\n\t * @param {string} url 请求地址\r\n\t * @param {object} data 请求数据\r\n\t * @param {string} msg 错误信息，在控制台输出，方便调试，不用可以不传，例如：\r\n\t * @example this.$fetch.post(\"/getDataB\",{name:'ricky'},\"获取数据B失败\")\r\n\t * @param {Array.<string>} rPath 请求结果提取路径，如：[data,list]表示data.list,如不需过滤可不传\r\n\t * @param {object} config 请求配置  如请求过程需要遮罩层，设置 spin:true即可\r\n\t * @return {Promise<object>}\r\n\t * @example this.$fetch.post(\"/getData\",{id:1},null,['result','list'])\r\n\t *  .then(r=>{\r\n\t *      console.log(r)\r\n\t *      r相当于:data.result.list,data是网络请求结果\r\n\t *  })\r\n\t *\r\n\t * 注意：\r\n\t *  请求最多支持5个入参，最少一个(url)，依次为：url,data,msg,rPath,config。如果要传靠后的入参，但不想传前面的，应该这样传：\r\n\t *  this.$fetch.post(\"/setData\",{},null,[],{\r\n\t *     headers: {\r\n\t *         'Content-Type': 'multipart/form-data'\r\n\t *       },\r\n\t *       spin:true\r\n\t *   }\r\n\t *  )\r\n\t */,\r\n\tpost(url: string, data?: Collection, msg?: string | null, rPath?: string[], config?: RequestConfigR) {\r\n\t\treturn new Promise((s, j) => {\r\n\t\t\tcheckRequest('post', url, data, msg, rPath, config)\r\n\t\t\t\t.then((r) => {\r\n\t\t\t\t\ts(r)\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tj(e)\r\n\t\t\t\t})\r\n\t\t})\r\n\t} /**\r\n\t * put请求\r\n\t * @param {string} url 请求地址\r\n\t * @param {object} data 请求数据\r\n\t * @param {string} msg 错误信息，在控制台输出，方便调试，不用可以不传\r\n\t * @param {Array.<string>} rPath 请求结果提取路径\r\n\t * @param {object} config 请求配置  如请求过程需要遮罩层，设置 spin:true即可\r\n\t * @return {Promise<unknown>}\r\n\t */,\r\n\tput(url: string, data?: Collection, msg?: string | null, rPath?: string[], config?: RequestConfigR) {\r\n\t\treturn new Promise((s, j) => {\r\n\t\t\tcheckRequest('put', url, data, msg, rPath, config)\r\n\t\t\t\t.then((r) => {\r\n\t\t\t\t\ts(r)\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tj(e)\r\n\t\t\t\t})\r\n\t\t})\r\n\t} /**\r\n\t * get请求\r\n\t * @param {string} url 请求地址\r\n\t * @param {object} data 请求数据\r\n\t * @param {string} msg 错误信息，在控制台输出，方便调试，不用可以不传\r\n\t * @param {Array.<string>} rPath 请求结果提取路径\r\n\t * @param {object} config 请求配置  如请求过程需要遮罩层，设置 spin:true即可\r\n\t * @return {Promise<unknown>}\r\n\t * PS: get请求时(delete请求同理)，可以把请求参数写在url里，也可以写在data里，注意写在data里时，data是对象\r\n\t * 以请求'/devices',找到id=2,name=meter举例：\r\n\t *  只传url时，url = '/devices?id=2&name=meter'\r\n\t *  url和data都传时,url = '/devices',data={id:2,name:'meter'}\r\n\t */,\r\n\tget(url: string, data?: Collection, msg?: string | null, rPath?: string[], config?: RequestConfigR) {\r\n\t\treturn new Promise((s, j) => {\r\n\t\t\tcheckRequest('get', url, data, msg, rPath, config)\r\n\t\t\t\t.then((r) => {\r\n\t\t\t\t\ts(r)\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tj(e)\r\n\t\t\t\t})\r\n\t\t})\r\n\t} /**\r\n\t * delete 请求\r\n\t * @param {string} url 请求地址\r\n\t * @param {object} data 请求数据\r\n\t * @param {string} msg 错误信息，在控制台输出，方便调试，不用可以不传\r\n\t * @param {Array.<string>} rPath 请求结果提取路径\r\n\t * @param {object} config 请求配置  如请求过程需要遮罩层，设置 spin:true即可\r\n\t * @param isUrlData 传参模式 true:params,false:data\r\n\t * @return {Promise<unknown>}\r\n\t */,\r\n\tdelete(\r\n\t\turl: string,\r\n\t\tdata?: Collection,\r\n\t\tmsg?: string | null,\r\n\t\trPath?: string[],\r\n\t\tconfig?: RequestConfigR,\r\n\t\tisUrlData: boolean = true\r\n\t) {\r\n\t\treturn new Promise((s, j) => {\r\n\t\t\tcheckRequest('delete', url, data, msg, rPath, config, isUrlData)\r\n\t\t\t\t.then((r) => {\r\n\t\t\t\t\ts(r)\r\n\t\t\t\t})\r\n\t\t\t\t.catch((e) => {\r\n\t\t\t\t\tj(e)\r\n\t\t\t\t})\r\n\t\t})\r\n\t} /**\r\n\t * 并发请求   例如：\r\n\t * @example this.$fetch.all(\r\n\t *  [\r\n\t *    this.$fetch.get(\"/getData\"),\r\n\t *    this.$fetch.post(\"/getDataB\",{name:'ricky'})\r\n\t *  ]\r\n\t * )\r\n\t */,\r\n\tall: axios.all /**\r\n\t * 并发请求结果分离 例如：\r\n\t * @example this.$fetch.all(\r\n\t *  [\r\n\t *    this.$fetch.get(\"/getData\"),\r\n\t *    this.$fetch.post(\"/getDataB\",{name:'ricky'})\r\n\t *  ]\r\n\t * )\r\n\t *  .then(\r\n\t *    this.$fetch.spread((result1,result2)=>{\r\n\t *        console.log(result1,result2)\r\n\t *    })\r\n\t *   )\r\n\t */,\r\n\tspread: axios.spread /**\r\n\t * 该请求插件暴露给外界的配置对象，为axios.create创建的实例对象，使用方法见axios官方网站\r\n\t */,\r\n\tconfig: service\r\n}\r\n","<!--PagePro 极简页签，支持v-model绑定当前页数，可选每页条数，可禁用\r\n@created 2024.04.18\r\n@author Ricky email:zhangqingcq@foxmail.com-->\r\n\r\n<script setup lang=\"ts\">\r\n\timport t from '../../locale/i18nSFC'\r\n\timport Proxy from '../../utils/proxy'\r\n\timport { getStringWidth } from '../../utils/needImportFunc'\r\n\r\n\tconst emit = defineEmits(['update:modelValue', 'on-change', 'on-page-size-change'])\r\n\tconst pageRef = ref()\r\n\r\n\tconst props = withDefaults(\r\n\t\tdefineProps<{\r\n\t\t\tmodelValue?: number\r\n\t\t\ttotal?: number\r\n\t\t\tpageSize?: number\r\n\t\t\tsize?: 'small' | 'default'\r\n\t\t\tpageSizeOpts?: number[]\r\n\t\t\tshowTotal?: boolean /*是否展示total*/\r\n\t\t\tshowSizer?: boolean /*是否展示sizer*/\r\n\t\t\ttransfer?: boolean\r\n\t\t\tdisabled?: boolean\r\n\t\t}>(),\r\n\t\t{\r\n\t\t\tmodelValue: 1,\r\n\t\t\ttotal: 0,\r\n\t\t\tpageSize: 10,\r\n\t\t\tsize: 'default',\r\n\t\t\tpageSizeOpts: () => Proxy()?.pageSizes || [10, 20, 50, 100],\r\n\t\t\tshowTotal: () => Proxy()?.pageShowTotal,\r\n\t\t\tshowSizer: () => Proxy()?.pageShowSizer,\r\n\t\t\ttransfer: true,\r\n\t\t\tdisabled: false\r\n\t\t}\r\n\t)\r\n\r\n\tconst _fontSizeBase = Proxy?.()?.fontSizeBase || 14\r\n\tconst currentPadding = ref(16)\r\n\r\n\tconst current = computed({\r\n\t\tget() {\r\n\t\t\treturn props.modelValue\r\n\t\t},\r\n\t\tset(v) {\r\n\t\t\temit('update:modelValue', v)\r\n\t\t\temit('on-change', v)\r\n\t\t}\r\n\t})\r\n\r\n\tconst pageSizeT = computed({\r\n\t\tget() {\r\n\t\t\treturn props.pageSize\r\n\t\t},\r\n\t\tset(v) {\r\n\t\t\temit('on-page-size-change', v)\r\n\t\t\tif (current.value !== 1) {\r\n\t\t\t\tcurrent.value = 1\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\tconst currentSize = computed(() => {\r\n\t\tconst t = getStringWidth(String(props.total || 0), _fontSizeBase) + currentPadding.value + 2\r\n\t\treturn t < 32 ? 32 : t\r\n\t})\r\n\r\n\twatch(\r\n\t\tcurrentSize,\r\n\t\t(v) => {\r\n\t\t\tnextTick(function () {\r\n\t\t\t\tchangeCurrentSize(v)\r\n\t\t\t})\r\n\t\t},\r\n\t\t{ immediate: true }\r\n\t)\r\n\r\n\tfunction getPadding() {\r\n\t\tconst $inputEl = pageRef.value?.$el?.querySelector?.('input')\r\n\t\tif (!$inputEl) {\r\n\t\t\treturn 16\r\n\t\t}\r\n\t\tconst inputStyle = window.getComputedStyle($inputEl)\r\n\t\tconst paddingL = inputStyle?.paddingLeft\r\n\t\tconst paddingR = inputStyle?.paddingRight\r\n\t\tif (!paddingL || !paddingR) {\r\n\t\t\treturn 16\r\n\t\t}\r\n\t\treturn Number(paddingL.replace('px', '')) + Number(paddingR.replace('px', ''))\r\n\t}\r\n\r\n\tfunction changeCurrentSize(val: any) {\r\n\t\tconst $inputEl = pageRef.value?.$el?.querySelector?.('input')\r\n\t\tif ($inputEl?.style) {\r\n\t\t\t$inputEl.style.width = `${val}px`\r\n\t\t}\r\n\t}\r\n\r\n\tonMounted(() => {\r\n\t\tcurrentPadding.value = getPadding()\r\n\t})\r\n</script>\r\n\r\n<template>\r\n\t<div class=\"pagePro\" :class=\"{ pageProDefault: props.size === 'default' }\">\r\n\t\t<span v-if=\"props.showTotal\" class=\"pageTotal\"\r\n\t\t\t>{{ t('r.total') + ' ' }}{{ props.total }}{{ ' ' + t('r.items') }}</span\r\n\t\t>\r\n\t\t<Page\r\n\t\t\tref=\"pageRef\"\r\n\t\t\tv-model=\"current\"\r\n\t\t\t:page-size=\"pageSizeT\"\r\n\t\t\t:total=\"props.total\"\r\n\t\t\t:size=\"props.size\"\r\n\t\t\t:page-size-opts=\"props.pageSizeOpts\"\r\n\t\t\t:disabled=\"props.disabled\"\r\n\t\t\tsimple\r\n\t\t/>\r\n\t\t<div class=\"pageProSize\" v-if=\"props.showSizer\">\r\n\t\t\t<Select v-model=\"pageSizeT\" :size=\"props.size\" :transfer=\"props.transfer\" :disabled=\"props.disabled\">\r\n\t\t\t\t<Option v-for=\"item in props.pageSizeOpts\" :value=\"item\" :key=\"item\">{{ item }} {{ t('r.page') }}</Option>\r\n\t\t\t</Select>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n","<!--BtTablePage 表格-页签-表顶操作（如：批量XX，导出）集成UI组件\n@created 2023.08.15\n@author Ricky email:zhangqingcq@foxmail.com-->\n\n<script lang=\"ts\" setup>\n\timport { h } from 'vue'\n\timport { cloneDeep } from 'lodash-es'\n\timport { TableColumnConfig, Radio } from 'view-ui-plus'\n\timport type { PredicateFunc } from '../../public'\n\timport Proxy from '../../utils/proxy'\n\timport { toLine, tooltipManual } from '../../utils/globalFunc'\n\timport { toHump } from '../../utils/needImportFunc'\n\timport $fetch from '../../utils/fetch.js'\n\timport { setTimeout } from '../../utils/timer'\n\timport PagePro from '../PagePro/PagePro.vue'\n\n\tconst emit = defineEmits(['on-selection-change', 'on-data-change'])\n\n\tlet tc: { showSettingCheck?: boolean; disableShowSetting?: boolean } = {\n\t\tshowSettingCheck: false,\n\t\tdisableShowSetting: false\n\t}\n\n\tconst TableColumnR = { ...tc, ...TableColumnConfig }\n\n\tconst props = withDefaults(\n\t\tdefineProps<{\n\t\t\turl?: string /*表格拉取数据的接口地址*/\n\t\t\tmethod?: 'get' | 'post' /*表格拉取数据的接口的请求类型,get、post*/\n\t\t\tsearchData?: Record<string, any> /*表格条件查询数据*/\n\t\t\tcolumns?: Array<typeof TableColumnR> /*表格表头结构数据，同view-ui-plus*/\n\t\t\tdataHandler?: (d: any) => {\n\t\t\t\tdata: Record<string, any>\n\t\t\t\ttotal: number\n\t\t\t\t[k: keyof any]: any\n\t\t\t} /*接口数据处理方法，处理后格式须为{data:[...],total:xx}*/\n\t\t\tselection?: boolean /*是否展示每列开头选择框*/\n\t\t\tradio?: boolean /*表格是否是单选表格，每次只能选中一行*/\n\t\t\tselectionFixed?: 'left' | 'right' | false /*每列开头选择框固定*/\n\t\t\trowClickSelect?: boolean /*是否点击行操作开头选择框*/\n\t\t\tdata?: any[] /*表格默认数据，没有url的本地静态表格使用*/\n\t\t\tsortable?: 'custom' | '' /*排序模式*/\n\t\t\tinitData?: boolean /*初始化数据，即组件创建后自动拉取第一次数据*/\n\t\t\thighlightRow?: boolean /*高亮当前行*/\n\t\t\trowClickNum?: number /*自动拉取第一次数据时点击第几行，默认-1，不点击*/\n\t\t\ttableEmptyTdHandle?: boolean /*表格内容为空是否显示为‘--’*/\n\t\t\tnoBorderTable?: boolean /*表格无边框*/\n\t\t\torderDefault?: 'asc' | 'desc' /*排序是升是降*/\n\t\t\torderKey?: string /*排序的key*/\n\t\t\torderKeyFormat?: 'underline' | 'camelcase' /*排序key的格式*/\n\t\t\tgetDataLoading?: boolean /*拉取表格数据时显示遮罩层*/\n\t\t\tshowTopRow?: boolean /*展示顶行（列表设置、批量操作按钮、导出等按钮、统计信息等）,各项子内容通过slot接入*/\n\t\t\tlightHead?: boolean /*浅色背景表头，避免和headerBar菜单紧邻时页面局部颜色不平衡*/\n\t\t\tnoPage?: boolean /*表格页签*/\n\t\t\tusePagePro?: boolean /*是否使用pagePro组件作为页签*/\n\t\t\tshowTotal?: boolean /*page是否展示total*/\n\t\t\tshowSizer?: boolean /*page是否展示sizer*/\n\t\t\tpageSize?: number /*每页条数*/\n\t\t\tpageComponentSize?: 'small' | 'default' /*页签大小*/\n\t\t\tnoElevator?: boolean /*页签不带电梯*/\n\t\t}>(),\n\t\t{\n\t\t\turl: '',\n\t\t\tmethod: 'get',\n\t\t\tsearchData: () => ({}),\n\t\t\tcolumns: () => [],\n\t\t\tselection: false,\n\t\t\tradio: false,\n\t\t\tselectionFixed: false,\n\t\t\trowClickSelect: true,\n\t\t\tdata: () => [],\n\t\t\tsortable: '',\n\t\t\tinitData: true,\n\t\t\thighlightRow: false,\n\t\t\trowClickNum: -1,\n\t\t\ttableEmptyTdHandle: false,\n\t\t\tnoBorderTable: false,\n\t\t\torderDefault: 'desc',\n\t\t\torderKey: 'id',\n\t\t\torderKeyFormat: 'underline',\n\t\t\tgetDataLoading: false,\n\t\t\tshowTopRow: false,\n\t\t\tlightHead: false,\n\t\t\tnoPage: false,\n\t\t\tusePagePro: () => Proxy()?.btTablePageUsePagePro,\n\t\t\tshowTotal: () => Proxy()?.pageShowTotal,\n\t\t\tshowSizer: () => Proxy()?.pageShowSizer,\n\t\t\tpageSize: 10,\n\t\t\tpageComponentSize: 'default',\n\t\t\tnoElevator: false\n\t\t}\n\t)\n\n\tconst pageSizes = Proxy()?.pageSizes || [10, 20, 50, 100]\n\tconst dataT = ref(props.data)\n\tconst pageSizeT = ref<number>(\n\t\t(localStorage.getItem('btPageSize') && Number(localStorage.getItem('btPageSize'))) || props.pageSize\n\t)\n\tconst current = ref(1)\n\tconst total = ref(0)\n\tlet selected: Record<string, any>[] = []\n\tlet currentKey: string | null\n\tlet currentIndex: number | null\n\tlet _key: string = props.orderKey\n\tlet _order: string = props.orderDefault\n\tconst tableContainerHeight = 300\n\n\tconst columnsFixed = computed(() => {\n\t\tfor (let e of props.columns) {\n\t\t\tif (e?.fixed) {\n\t\t\t\treturn true\n\t\t\t}\n\t\t}\n\t\treturn false\n\t})\n\n\tconst fixedTable = computed(() => props.selectionFixed || columnsFixed.value)\n\n\tconst queryData = computed(() => {\n\t\tlet t: Record<string, any> = {\n\t\t\t...props.searchData,\n\t\t\tcurrent: current.value,\n\t\t\tsize: pageSizeT.value\n\t\t}\n\t\tif (props.sortable === 'custom') {\n\t\t\tif (props.orderKeyFormat === 'underline') {\n\t\t\t\tt[_order] = toLine(_key)\n\t\t\t} else if (props.orderKeyFormat === 'camelcase') {\n\t\t\t\tt[_order] = toHump(_key)\n\t\t\t}\n\t\t}\n\t\treturn t\n\t})\n\n\tconst columnsT = computed(() => {\n\t\tlet t = props.columns.filter((e) => {\n\t\t\treturn e && e.type !== 'selection'\n\t\t})\n\t\tif (props.selection || props.radio) {\n\t\t\tlet c: Record<string, any>\n\t\t\tif (props.radio) {\n\t\t\t\tc = {\n\t\t\t\t\ttitle: ' ',\n\t\t\t\t\twidth: 65,\n\t\t\t\t\trender: (_h: any, params: Record<string, any>) => {\n\t\t\t\t\t\treturn h(Radio, {\n\t\t\t\t\t\t\tmodelValue: params.row.btChecked\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tc = {\n\t\t\t\t\ttype: 'selection',\n\t\t\t\t\twidth: 60\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (props.selectionFixed) {\n\t\t\t\tc.fixed = props.selectionFixed\n\t\t\t}\n\t\t\tt.unshift(c)\n\t\t}\n\t\tt.forEach((e) => {\n\t\t\tif (!e) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tif (props.sortable === 'custom') {\n\t\t\t\tif (e.key && e.sortable !== true && e.sortable !== false) {\n\t\t\t\t\te.sortable = 'custom'\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\te.sortable = false\n\t\t\t}\n\t\t\tif (!e.align) {\n\t\t\t\te.align = Proxy()?.btTablePageAlign || 'center'\n\t\t\t}\n\t\t})\n\n\t\tt.forEach((e) => {\n\t\t\tif (e?.key && e.render === undefined) {\n\t\t\t\tif (e.tooltip) {\n\t\t\t\t\te.render = tooltipManual(e.key, props.tableEmptyTdHandle)\n\t\t\t\t} else {\n\t\t\t\t\te.render = (_h: any, params: any) => {\n\t\t\t\t\t\tlet td = ''\n\t\t\t\t\t\tif (e?.key) {\n\t\t\t\t\t\t\ttd = params.row[e.key]\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (props.tableEmptyTdHandle) {\n\t\t\t\t\t\t\treturn h('span', td === '' ? '--' : (td ?? '--'))\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn h('span', td)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\n\t\treturn t\n\t})\n\n\tconst dataS = computed({\n\t\tget() {\n\t\t\treturn dataT.value.map((e: Record<string, any>, i: number) => {\n\t\t\t\treturn Object.assign({}, e, {\n\t\t\t\t\tbtKey: 'bt-' + i,\n\t\t\t\t\tbtChecked: Boolean(e.btChecked)\n\t\t\t\t})\n\t\t\t})\n\t\t},\n\t\tset(v: any) {\n\t\t\tdataT.value = v\n\t\t}\n\t})\n\n\tconst selectedIds = computed(() => selected.map((e: Record<string, any>) => e?.id))\n\n\tconst selectedKeys = computed(() => selected.map((e: Record<string, any>) => e?.btKey))\n\n\tconst tableRef = ref()\n\n\twatch(() => props.searchData, search, { deep: true })\n\n\twatch(\n\t\t() => props.orderDefault,\n\t\t(after) => {\n\t\t\t_order = after\n\t\t}\n\t)\n\n\twatch(\n\t\t() => props.orderKey,\n\t\t(after) => {\n\t\t\t_key = after\n\t\t}\n\t)\n\n\tfunction search() {\n\t\t/*私有*/\n\t\tcurrent.value = 1\n\t\tgetDataAndClickRow()\n\t}\n\n\tfunction initTable() {\n\t\t/*私有*/\n\t\tif (props.initData) {\n\t\t\tgetDataAndClickRow()\n\t\t}\n\t}\n\n\tfunction addRow(row: Record<string, any>) {\n\t\t/*添加行（公开），分页时不推荐使用，详细见说明文档*/\n\t\tdataT.value.unshift(cloneDeep(row))\n\t\tsetTimeout(() => {\n\t\t\ttableRef.value?.clickCurrentRow?.(0)\n\t\t}, 100)\n\t}\n\n\t/**\n\t * 更新行数据（公开）\n\t * @param {object} row 新的行数据（只更新旧数据和新数据都有的字段，如想更新的其中一个字段为row.name，那么旧row数据需要有name这个字段）\n\t * @param {number|boolean} setCurrentRow 1.数字，行在表数据中的index；2.布尔值，更新当前行\n\t * @param {boolean} clickCurrentRow 更新完数据点击更新的行\n\t */\n\tfunction setRowData(row: Record<string, any>, setCurrentRow: boolean, clickCurrentRow: boolean) {\n\t\tlet index: number | null = null\n\t\tif (setCurrentRow) {\n\t\t\tindex = currentIndex\n\t\t} else if (typeof setCurrentRow === 'number') {\n\t\t\tindex = setCurrentRow\n\t\t}\n\t\tif (index !== null) {\n\t\t\tlet t = dataT.value[index]\n\t\t\tfor (let key in row) {\n\t\t\t\tif (row.hasOwnProperty(key)) {\n\t\t\t\t\tt[key] = row[key]\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (clickCurrentRow) {\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\ttableRef.value?.clickCurrentRow?.(index)\n\t\t\t\t}, 10)\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction deleteRow(index: number) {\n\t\t/*根据索引数字删除行（公开），分页时不推荐使用，详细见说明文档*/\n\t\tdataT.value.splice(index, 1)\n\t\tsetTimeout(() => {\n\t\t\ttableRef.value?.clickCurrentRow?.(0)\n\t\t}, 100)\n\t}\n\n\tfunction onRowClick(row: Record<string, any>, i: number) {\n\t\t/*私有*/\n\t\tif (row.btChecked && props.radio) {\n\t\t\treturn\n\t\t}\n\t\tif ((props.selection || props.radio) && props.rowClickSelect) {\n\t\t\ttableRef.value?.toggleSelect?.(i)\n\t\t}\n\t}\n\n\tfunction onSelect(s: any, row: Record<string, any>) {\n\t\t/*私有*/\n\t\tcurrentKey = row.btKey\n\t\tcurrentIndex = Number(row.btKey.split('-')[1])\n\t\tif (props.radio) {\n\t\t\tdataT.value[currentIndex].btChecked = true\n\t\t}\n\t}\n\n\tfunction selectionHandle(selection: any) {\n\t\t/*私有*/\n\t\tif (props.radio) {\n\t\t\tfor (let e of dataS.value) {\n\t\t\t\tif (e?.btKey && e.btKey !== currentKey) {\n\t\t\t\t\tdataT.value[Number(e.btKey.split('-')[1])].btChecked = false\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tselected = selection\n\t\temit('on-selection-change', selection)\n\t}\n\n\tfunction getSelected() {\n\t\t/*获取已选行数据（公开）*/\n\t\treturn cloneDeep(selected)\n\t}\n\n\tfunction changePage() {\n\t\t/*私有*/\n\t\tgetDataAndClickRow()\n\t}\n\n\tfunction pageSizeChange(v: number) {\n\t\t/*私有*/\n\t\tpageSizeT.value = v\n\t\tlocalStorage.setItem('btPageSize', String(v))\n\t\tif (current.value === 1) {\n\t\t\tgetDataAndClickRow()\n\t\t}\n\t}\n\n\tfunction onSortChange({ key, order }: { key: string; order: string }) {\n\t\t/*表头排序(私有)*/\n\t\tif (_order === 'normal') {\n\t\t\t/*恢复到默认页面排序*/\n\t\t\t_key = props.orderKey\n\t\t\t_order = props.orderDefault\n\t\t} else {\n\t\t\t_key = key\n\t\t\t_order = order\n\t\t}\n\t\tcurrent.value = 1\n\t\tgetTableData()\n\t}\n\n\t/**\n\t * 主动选中行（公开）多选、单选模式皆可用\n\t * @param {Number|Array|Function} predicate 断言,选中的条件：\n\t * 1. Number:根据索引index选中行\n\t * 2. Array:根据索引index数组选中行(仅多选)\n\t * 3. Function:根据断言函数返回true的行选中\n\t */\n\tfunction selectRow(predicate: number | number[] | PredicateFunc) {\n\t\tconst _p = predicate\n\t\tif (typeof _p === 'number') {\n\t\t\tclearSelect()\n\t\t\tcurrentIndex = _p\n\t\t\tcurrentKey = dataS.value?.[_p]?.btKey\n\t\t\ttableRef.value?.clickCurrentRow?.(_p)\n\t\t} else if (Array.isArray(_p)) {\n\t\t\tif (props.radio || !props.selection) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tclearSelect()\n\t\t\tfor (let i of _p) {\n\t\t\t\ttableRef.value?.clickCurrentRow?.(i)\n\t\t\t}\n\t\t} else if (typeof _p === 'function') {\n\t\t\tfor (let i = 0; i < dataS.value.length; i++) {\n\t\t\t\tconst e = dataS.value[i]\n\t\t\t\tif (_p(e)) {\n\t\t\t\t\ttableRef.value?.clickCurrentRow?.(i)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction clearSelect() {\n\t\t/*清空选择（公开）*/\n\t\tif (props.radio) {\n\t\t\tif (selectedKeys.value.length > 0 && dataS.value.length > 0) {\n\t\t\t\tlet i = selectedKeys.value[0].split('-')[1]\n\t\t\t\tdataS.value[i].btChecked = false\n\t\t\t}\n\t\t} else {\n\t\t\ttableRef.value?.selectAll?.(false)\n\t\t}\n\t\tif (selected.length > 0) {\n\t\t\tselected = []\n\t\t\temit('on-selection-change', [])\n\t\t}\n\t\tcurrentKey = null\n\t\tcurrentIndex = null\n\t}\n\n\tfunction clearTableData() {\n\t\t/*清空选择（公开）,用于特殊场景下重置表格，不拉取数据，如需刷新数据直接调用getTableData*/\n\t\tdataT.value = []\n\t\tclearSelect()\n\t\tcurrent.value = 1\n\t\ttotal.value = 0\n\t}\n\n\tfunction getTableData(order?: string, orderKey?: string, keepSelect?: boolean) {\n\t\t/*拉取表格数据（公开）*/\n\t\treturn new Promise((resolve) => {\n\t\t\tif (order) {\n\t\t\t\t_order = order\n\t\t\t}\n\t\t\tif (orderKey) {\n\t\t\t\t_key = orderKey\n\t\t\t}\n\t\t\tif (props.url) {\n\t\t\t\t$fetch[props.method](props.url, queryData.value, '', [], { spin: props.getDataLoading })\n\t\t\t\t\t.then((d: any) => {\n\t\t\t\t\t\tlet r: Record<string, any>\n\t\t\t\t\t\tif (!keepSelect) {\n\t\t\t\t\t\t\tclearSelect()\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (typeof props.dataHandler === 'function') {\n\t\t\t\t\t\t\tr = props.dataHandler(d)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tr = d\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (r.data) {\n\t\t\t\t\t\t\t/*接口返回数据为空时可能是用null表示，所以有下面逻辑*/\n\t\t\t\t\t\t\tif (r.data.records || r.data.records === null) {\n\t\t\t\t\t\t\t\tdataT.value = r.data.records || []\n\t\t\t\t\t\t\t} else if (r.data.page) {\n\t\t\t\t\t\t\t\tif (r.data.page.records || r.data.page.records === null) {\n\t\t\t\t\t\t\t\t\tdataT.value = r.data.page.records || []\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (r.data.data) {\n\t\t\t\t\t\t\t\tif (r.data.data.records || r.data.data.records === null) {\n\t\t\t\t\t\t\t\t\tdataT.value = r.data.data.records || []\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tdataT.value = r.data\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttotal.value = r.data.page?.total || r.data.data?.total || r.data.total || r.total || 0\n\t\t\t\t\t\t\tif (total.value === 0 && current.value > 1 && dataT.value && dataT.value.length === 0) {\n\t\t\t\t\t\t\t\t/*如果没有数据，将当前页置为1*/\n\t\t\t\t\t\t\t\tcurrent.value = 1\n\t\t\t\t\t\t\t} else if (current.value > 1 && total.value <= (current.value - 1) * pageSizeT.value) {\n\t\t\t\t\t\t\t\t/*当前页并没有数据，自动拉取前一页数据*/\n\t\t\t\t\t\t\t\tcurrent.value--\n\t\t\t\t\t\t\t\tnextTick(function () {\n\t\t\t\t\t\t\t\t\tgetTableData(order, orderKey)\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\temit('on-data-change', r)\n\t\t\t\t\t\t\tresolve(r)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconsole.warn('请求返回数据有误，无法使用')\n\t\t\t\t\t\t\tclearTableData()\n\t\t\t\t\t\t\temit('on-data-change', r)\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.catch((e: any) => {\n\t\t\t\t\t\tclearSelect()\n\t\t\t\t\t\tclearTableData()\n\t\t\t\t\t\temit('on-data-change', e)\n\t\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tconsole.warn('没有有效的请求地址，无法获取表格数据')\n\t\t\t}\n\t\t})\n\t}\n\n\tfunction getDataAndClickRow(clickCurrentRow?: boolean, order?: string, orderKey?: string) {\n\t\t/*单选模式时（非单选模式只拉数据不点击），拉取表格数据并且点击行，如果传true，则点击当前行，不传则点击 rowClickNum 指定行（公开）*/\n\t\tif (props.radio && (clickCurrentRow || props.rowClickNum !== -1)) {\n\t\t\tgetTableData(order, orderKey, clickCurrentRow).then(() => {\n\t\t\t\t//点击对应行\n\t\t\t\tif (dataT.value.length > 0) {\n\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\tif (clickCurrentRow) {\n\t\t\t\t\t\t\ttableRef.value?.clickCurrentRow?.(currentIndex || 0)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttableRef.value?.clickCurrentRow?.(props.rowClickNum)\n\t\t\t\t\t\t}\n\t\t\t\t\t}, 10)\n\t\t\t\t}\n\t\t\t})\n\t\t} else {\n\t\t\tgetTableData()\n\t\t}\n\t}\n\n\tonMounted(initTable)\n\n\tdefineExpose({\n\t\tdataS,\n\t\tselectedIds,\n\t\taddRow,\n\t\tsetRowData,\n\t\tdeleteRow,\n\t\tgetSelected,\n\t\tselectRow,\n\t\tclearSelect,\n\t\tclearTableData,\n\t\tgetTableData,\n\t\tgetDataAndClickRow\n\t})\n</script>\n\n<template>\n\t<div class=\"btTablePage fullHeight flexColumnBox\" ref=\"tableBox\">\n\t\t<div class=\"topBtn\" v-show=\"props.showTopRow\">\n\t\t\t<slot name=\"tableSetting\" />\n\n\t\t\t<slot name=\"topMsg\" />\n\n\t\t\t<slot name=\"topBtnGroup\" />\n\t\t</div>\n\t\t<div class=\"tableContainer growFlexItem\">\n\t\t\t<div class=\"fullHeight relativeBox\">\n\t\t\t\t<div ref=\"tableContainerLOI\" class=\"fullFlowContent\">\n\t\t\t\t\t<Table\n\t\t\t\t\t\tref=\"tableRef\"\n\t\t\t\t\t\tv-bind=\"$attrs\"\n\t\t\t\t\t\t:height=\"(fixedTable && tableContainerHeight) || null\"\n\t\t\t\t\t\t:class=\"{ noBorderTable: props.noBorderTable, fullHeightTable: !fixedTable, lightHeadO: props.lightHead }\"\n\t\t\t\t\t\t:columns=\"columnsT\"\n\t\t\t\t\t\t:data=\"dataS\"\n\t\t\t\t\t\t:highlight-row=\"props.radio || props.highlightRow\"\n\t\t\t\t\t\t@on-select=\"onSelect\"\n\t\t\t\t\t\t@on-selection-change=\"selectionHandle\"\n\t\t\t\t\t\t@on-sort-change=\"onSortChange\"\n\t\t\t\t\t\t@on-row-click=\"onRowClick\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t\t<div class=\"pageContainer\" v-show=\"!props.noPage\">\n\t\t\t<PagePro\n\t\t\t\tv-if=\"props.usePagePro\"\n\t\t\t\tv-model=\"current\"\n\t\t\t\t:total=\"total\"\n\t\t\t\t:showTotal=\"props.showTotal\"\n\t\t\t\t:pageSize=\"pageSizeT\"\n\t\t\t\t:showSizer=\"props.showSizer\"\n\t\t\t\t:pageSizeOpts=\"pageSizes\"\n\t\t\t\t:size=\"props.pageComponentSize\"\n\t\t\t\t@on-change=\"changePage\"\n\t\t\t\t@on-page-size-change=\"pageSizeChange\"\n\t\t\t/>\n\t\t\t<Page\n\t\t\t\tv-else\n\t\t\t\tv-model=\"current\"\n\t\t\t\t:total=\"total\"\n\t\t\t\t:pageSize=\"pageSizeT\"\n\t\t\t\t:pageSizeOpts=\"pageSizes\"\n\t\t\t\t:showSizer=\"props.showSizer\"\n\t\t\t\t:showTotal=\"props.showTotal\"\n\t\t\t\t:size=\"props.pageComponentSize\"\n\t\t\t\t:showElevator=\"!props.noElevator\"\n\t\t\t\t@on-change=\"changePage\"\n\t\t\t\t@on-page-size-change=\"pageSizeChange\"\n\t\t\t/>\n\t\t</div>\n\t</div>\n</template>\n","<!--SelectInput 下拉选择和输入框组合，select选择要输入的key,input输入val\n@created 2023.08.16\n@author Ricky email:zhangqingcq@foxmail.com-->\n\n<script lang=\"ts\" setup>\n\timport { debounce } from 'lodash-es'\n\timport t from '../../locale/i18nSFC'\n\n\tconst emit = defineEmits(['update:modelValue', 'on-change'])\n\tconst props = withDefaults(\n\t\tdefineProps<{\n\t\t\tmodelValue?: Record<string, any> /*组件的值，建议使用v-model绑定，key对应select值，val对应input值*/\n\t\t\tlabelWidth?: number /*表单项标签宽度*/\n\t\t\tlabelTextAlign?: 'left' | 'center' | 'right' /*select内容对齐方式*/\n\t\t\titemWidth?: number | string /*表单项内容宽度,用于行内表单*/\n\t\t\tselectOption?: any[] /*选择框待选项*/\n\t\t\tplaceholder?: string\n\t\t\tclearable?: boolean\n\t\t\tdisabled?: boolean /*禁用，仅展示*/\n\t\t}>(),\n\t\t{\n\t\t\tmodelValue: () => ({\n\t\t\t\tkey: null,\n\t\t\t\tval: null\n\t\t\t}),\n\t\t\tlabelWidth: 160,\n\t\t\tlabelTextAlign: 'right',\n\t\t\titemWidth: 200,\n\t\t\tselectOption: () => [],\n\t\t\tclearable: false,\n\t\t\tdisabled: false\n\t\t}\n\t)\n\n\tconst selectVal = computed({\n\t\tget() {\n\t\t\treturn props.modelValue?.key\n\t\t},\n\t\tset(v: any) {\n\t\t\tlet temp: Record<string, any> = {\n\t\t\t\tkey: v,\n\t\t\t\tval: null\n\t\t\t}\n\t\t\tif (selectVal.value && selectVal.value !== v) {\n\t\t\t\ttemp.beforeKey = selectVal.value\n\t\t\t}\n\t\t\temit('update:modelValue', temp)\n\t\t\temit('on-change', temp)\n\t\t}\n\t})\n\n\tconst inputVal = computed({\n\t\tget() {\n\t\t\treturn (props.modelValue && props.modelValue.val) || null\n\t\t},\n\t\tset(v: any) {\n\t\t\temit('update:modelValue', {\n\t\t\t\tkey: selectVal.value,\n\t\t\t\tval: v\n\t\t\t})\n\t\t}\n\t})\n\n\tconst labelSelectStyle = computed(() => ({\n\t\twidth: props.labelWidth + 'px',\n\t\ttextAlign: props.labelTextAlign\n\t}))\n\n\tconst inputStyle = computed(() => ({\n\t\twidth: typeof props.itemWidth === 'number' ? props.itemWidth + 'px' : props.itemWidth\n\t}))\n\n\tfunction inputChange(e: Record<string, any>) {\n\t\tif (e?.target && e.target.value !== undefined) {\n\t\t\thandleChange({\n\t\t\t\tkey: selectVal.value,\n\t\t\t\tval: e.target.value\n\t\t\t})\n\t\t}\n\t}\n\n\tconst handleChange = debounce((data) => {\n\t\temit('on-change', data)\n\t}, 500)\n</script>\n\n<template>\n\t<div>\n\t\t<Select v-model=\"selectVal\" :style=\"labelSelectStyle\" :disabled=\"Boolean(props.disabled)\" transfer>\n\t\t\t<Option\n\t\t\t\tv-for=\"(item, index) in props.selectOption\"\n\t\t\t\t:value=\"item?.val\"\n\t\t\t\t:label=\"item?.label\"\n\t\t\t\t:key=\"'selectInputOp' + item?.value + index\"\n\t\t\t\t:style=\"{ textAlign: props.labelTextAlign }\"\n\t\t\t/>\n\t\t</Select>\n\t\t<Input\n\t\t\tv-model=\"inputVal\"\n\t\t\t:placeholder=\"props.placeholder || t('r.pInput')\"\n\t\t\t:style=\"inputStyle\"\n\t\t\t:clearable=\"props.clearable\"\n\t\t\t:disabled=\"Boolean(props.disabled)\"\n\t\t\t@on-change=\"inputChange\"\n\t\t/>\n\t</div>\n</template>\n","type AmapR = { securityJsCode: string; key: string }\nlet _amap: AmapR = { securityJsCode: '', key: '' }\n\nexport function set({ securityJsCode, key }: AmapR): void {\n\t_amap.securityJsCode = securityJsCode\n\t_amap.key = key\n}\n\nexport function get(d: 'securityJsCode' | 'key'): string {\n\treturn _amap[d]\n}\n","<!--InputMap 带搜索框的地图组件，支持搜索地点，经纬度回显地点，缩放，移动地图，拖动标记，点击标记显示地点信息\n@created 2023.08.16\n@author Ricky email:zhangqingcq@foxmail.com-->\n\n<script lang=\"ts\" setup>\n\timport { cloneDeep, isNumber } from 'lodash-es'\n\timport t from '../../locale/i18nSFC'\n\timport { setTimeout } from '../../utils/timer'\n\timport AMapLoader from '@amap/amap-jsapi-loader'\n\timport { get } from '../../utils/amap'\n\timport { Input } from 'view-ui-plus'\n\n\tconst emit = defineEmits(['update:modelValue', 'on-change'])\n\tconst props = withDefaults(\n\t\tdefineProps<{\n\t\t\tmodelValue?: Record<string, any>\n\t\t\twidth?: string | number\n\t\t\theight?: string | number\n\t\t\tplaceholder?: string\n\t\t\tdisabled?: boolean\n\t\t\tshowMap?: boolean\n\t\t}>(),\n\t\t{\n\t\t\tmodelValue: () => ({}),\n\t\t\twidth: '100%',\n\t\t\tdisabled: false,\n\t\t\tshowMap: true\n\t\t}\n\t)\n\n\tconst valueT = computed({\n\t\tget() {\n\t\t\tlet temp\n\t\t\tif (!props.modelValue) {\n\t\t\t\ttemp = {\n\t\t\t\t\tname: null\n\t\t\t\t}\n\t\t\t} else if (!props.modelValue.name) {\n\t\t\t\ttemp = {\n\t\t\t\t\t...props.modelValue,\n\t\t\t\t\tname: null\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttemp = cloneDeep(props.modelValue)\n\t\t\t}\n\t\t\treturn temp\n\t\t},\n\t\tset(val) {\n\t\t\temit('update:modelValue', cloneDeep(val))\n\t\t}\n\t})\n\n\tconst widthT = computed(() => {\n\t\tif (isNumber(props.width)) {\n\t\t\treturn props.width + 'px'\n\t\t} else {\n\t\t\treturn props.width\n\t\t}\n\t})\n\n\tconst heightT = computed(() => {\n\t\tif (isNumber(props.height)) {\n\t\t\treturn props.height + 'px'\n\t\t} else if (props.height) {\n\t\t\treturn props.height\n\t\t} else if (isNumber(props.width)) {\n\t\t\treturn props.width * 0.66 + 'px'\n\t\t} else {\n\t\t\treturn '200px'\n\t\t}\n\t})\n\n\tconst containerStyle = computed<Record<string, any>>(() => ({\n\t\twidth: widthT.value,\n\t\tposition: 'relative'\n\t}))\n\n\tconst mapStyle = computed<Record<string, any>>(() => ({\n\t\twidth: widthT.value,\n\t\theight: heightT.value,\n\t\tmarginTop: '6px',\n\t\topacity: props.showMap ? 1 : 0,\n\t\tposition: props.showMap ? 'relative' : 'absolute',\n\t\ttop: props.showMap ? 0 : '-10000px'\n\t}))\n\n\twatch(\n\t\t() => props.modelValue,\n\t\t(after) => {\n\t\t\t//更新地图mark\n\t\t\tif (after && after.lng && after.lat) {\n\t\t\t\tif (!Map || !GeoCoder) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tcreateMarker({\n\t\t\t\t\tlng: after.lng,\n\t\t\t\t\tlat: after.lat,\n\t\t\t\t\tname: after.name\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t)\n\n\tconst mapId = 'mapId' + Math.floor(Math.random() * 1000000000)\n\tconst mapInputRef = ref<InstanceType<typeof Input> | null>(null)\n\tconst mapRef = ref<HTMLDivElement | null>(null)\n\tlet infoWindow: Record<string, any> | null\n\n\tfunction checkHeight() {\n\t\tif ((mapRef.value && mapRef.value.clientHeight < 10) || !mapRef.value) {\n\t\t\tsetTimeout(checkHeight, 300)\n\t\t} else {\n\t\t\t/*高德地图实例初始化较慢，暂时延时1秒，后面寻找完美解决方案*/\n\t\t\tsetTimeout(initMap, 100)\n\t\t}\n\t}\n\n\tlet AMap: any\n\tlet Map: any\n\tlet GeoCoder: any\n\tlet AutoComplete: any\n\n\tfunction initMap() {\n\t\tAMapLoader.load({\n\t\t\tkey: get('key'),\n\t\t\tversion: '2.0',\n\t\t\tplugins: ['AMap.AutoComplete', 'AMap.Geocoder']\n\t\t}).then((_map) => {\n\t\t\tAMap = _map\n\t\t\tMap = new AMap.Map(mapId).on('complete', () => {\n\t\t\t\tGeoCoder = new AMap.Geocoder()\n\n\t\t\t\tif (props.modelValue?.lng && props.modelValue?.lat) {\n\t\t\t\t\tcreateMarker({\n\t\t\t\t\t\tlng: props.modelValue.lng,\n\t\t\t\t\t\tlat: props.modelValue.lat,\n\t\t\t\t\t\tname: props.modelValue.name\n\t\t\t\t\t})\n\t\t\t\t}\n\t\t\t\tconst iEl = mapInputRef.value?.$el?.children\n\t\t\t\tif (iEl && iEl.length > 1) {\n\t\t\t\t\tAutoComplete = new AMap.AutoComplete({\n\t\t\t\t\t\tinput: iEl[1]\n\t\t\t\t\t}).on('select', (val: Record<string, any>) => {\n\t\t\t\t\t\tif (val?.poi?.name) {\n\t\t\t\t\t\t\tif (val.poi.location?.lng && val.poi.location?.lat) {\n\t\t\t\t\t\t\t\tcreateMarker({\n\t\t\t\t\t\t\t\t\tname: val.poi.name,\n\t\t\t\t\t\t\t\t\tlng: val.poi.location.lng,\n\t\t\t\t\t\t\t\t\tlat: val.poi.location.lat\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\tvalueT.value = {\n\t\t\t\t\t\t\t\t\tname: val.poi.name,\n\t\t\t\t\t\t\t\t\tlng: val.poi.location.lng,\n\t\t\t\t\t\t\t\t\tlat: val.poi.location.lat\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tMap?.setCity(val.poi.name, () => {\n\t\t\t\t\t\t\t\t\tlet center = Map.getCenter()\n\t\t\t\t\t\t\t\t\tcreateMarker({\n\t\t\t\t\t\t\t\t\t\tname: val.poi.name,\n\t\t\t\t\t\t\t\t\t\tlng: center.lng,\n\t\t\t\t\t\t\t\t\t\tlat: center.lat\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\tvalueT.value = {\n\t\t\t\t\t\t\t\t\t\tname: val.poi.name,\n\t\t\t\t\t\t\t\t\t\tlng: center.lng,\n\t\t\t\t\t\t\t\t\t\tlat: center.lat\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\temit('on-change', valueT.value)\n\t\t\t\t\t})\n\t\t\t\t}\n\n\t\t\t\tMap?.on('hotspotclick', (d: Record<string, any>) => {\n\t\t\t\t\tcreateMarker({\n\t\t\t\t\t\tname: d.name,\n\t\t\t\t\t\tlng: d.lnglat.lng,\n\t\t\t\t\t\tlat: d.lnglat.lat\n\t\t\t\t\t})\n\t\t\t\t\tvalueT.value = {\n\t\t\t\t\t\tname: d.name,\n\t\t\t\t\t\tlng: d.lnglat.lng,\n\t\t\t\t\t\tlat: d.lnglat.lat\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t})\n\t\t})\n\t}\n\n\tfunction createMarker({ lng, lat, name }: { lng: number; lat: number; name: string }) {\n\t\tMap?.clearMap()\n\t\tlet point = new AMap.LngLat(lng, lat)\n\t\tlet marker = new AMap.Marker({\n\t\t\tmap: Map,\n\t\t\tposition: point,\n\t\t\tdraggable: true\n\t\t})\n\t\tMap?.add(marker)\n\t\tgetAddress(lng, lat)\n\t\tmarker.on('dragend', () => {\n\t\t\tlet dragPoint = marker.getPosition()\n\t\t\tvalueT.value = {\n\t\t\t\tname: name || null,\n\t\t\t\tlng: dragPoint.lng,\n\t\t\t\tlat: dragPoint.lat\n\t\t\t}\n\t\t\tgetAddress(lng, lat)\n\t\t})\n\t\tmarker.on('click', (e: Record<string, any>) => {\n\t\t\tif (infoWindow) {\n\t\t\t\tinfoWindow.open(Map, e?.target?.getPosition?.())\n\t\t\t}\n\t\t})\n\t\tMap?.setFitView()\n\t}\n\n\tfunction getAddress(lng: number, lat: number) {\n\t\tGeoCoder?.getAddress([lng, lat], (status: string, result: Record<string, any>) => {\n\t\t\tif (status === 'complete' && result.info === 'OK' && result.regeocode && result.regeocode.formattedAddress) {\n\t\t\t\tinfoWindow = new AMap.InfoWindow({\n\t\t\t\t\t//创建信息窗体\n\t\t\t\t\tisCustom: true,\n\t\t\t\t\tcontent: '<div class=\"mapInfoWindowIKJ\">' + result.regeocode.formattedAddress + '</div>',\n\t\t\t\t\toffset: new AMap.Pixel(16, -45),\n\t\t\t\t\tcloseWhenClickMap: true\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tinfoWindow = null\n\t\t\t\tconsole.warn('地图获取位置信息失败', result)\n\t\t\t}\n\t\t})\n\t}\n\n\tonMounted(checkHeight)\n\n\tonUnmounted(() => {\n\t\tif (!Map) {\n\t\t\treturn\n\t\t}\n\t\tMap.destroy()\n\t\t//@ts-ignore\n\t\tAMapLoader?.reset()\n\t\tMap = null\n\t\tGeoCoder = null\n\t\tAutoComplete = null\n\t\tinfoWindow = null\n\t})\n</script>\n\n<template>\n\t<div :style=\"containerStyle\" class=\"containerIKJ\">\n\t\t<Input\n\t\t\tref=\"mapInputRef\"\n\t\t\tv-model=\"valueT.name\"\n\t\t\t:class=\"{ mapInputIKJ: props.showMap }\"\n\t\t\t:placeholder=\"props.placeholder || t('r.search')\"\n\t\t\t:disabled=\"props.disabled\"\n\t\t\ticon=\"ios-search\"\n\t\t/>\n\t\t<div :style=\"mapStyle\" ref=\"mapRef\" :id=\"mapId\"></div>\n\t</div>\n</template>\n","<!--AsyncCascader 远程拉取数据的级联下拉选择框，依据url属性从后端拉取数据，失焦时选择，v-model绑定选中的ID\n@created 2023.08.17\n@author Ricky email:zhangqingcq@foxmail.com-->\n\n<script lang=\"ts\" setup>\n\timport { myTypeof } from '../../utils/globalFunc'\n\timport { findPath } from '../../utils/needImportFunc'\n\timport $fetch from '../../utils/fetch'\n\timport t from '../../locale/i18nSFC'\n\timport { isEmpty, last, isEqual, isString, isNumber, cloneDeep } from 'lodash-es'\n\n\tconst emit = defineEmits(['update:modelValue', 'on-label-change'])\n\tconst props = withDefaults(\n\t\tdefineProps<{\n\t\t\tmodelValue?: any[] | number | string /*级联绑定值(v-model)*/\n\t\t\turl?: string /*级联数据接口地址*/\n\t\t\toptionVal?: string /*v-model收集节点的哪些字段*/\n\t\t\toptionLabel?: string /*选项的标签对应接口字段*/\n\t\t\toptionFilter?: <T>(\n\t\t\t\td: T[]\n\t\t\t) => T[] /*筛选待选项的方法，入参是接口请求回来的待选项数据，返回处理后的待选项（仅进行筛选操作，不要做其它处理）*/\n\t\t\tseparator?: string /*选中的label分隔符（多级展示时）,valProp为String（多级）时分隔符*/\n\t\t\tonlyLastVal?: boolean /*只取最后一级*/\n\t\t\tonlyLastLabel?: boolean /*只显示最后一级*/\n\t\t\tfilterable?: boolean\n\t\t\tplaceholder?: string\n\t\t\tdisabled?: boolean\n\t\t}>(),\n\t\t{\n\t\t\turl: window?.g?.mgrURL ? window.g.mgrURL + '/web/v1/umc/orgs' : '',\n\t\t\toptionVal: 'id',\n\t\t\toptionLabel: 'name',\n\t\t\tseparator: '/',\n\t\t\tonlyLastVal: true,\n\t\t\tonlyLastLabel: true,\n\t\t\tfilterable: false,\n\t\t\tplaceholder: '',\n\t\t\tdisabled: false\n\t\t}\n\t)\n\tconst dataC = ref<any[]>([])\n\n\tconst value = computed<any[]>({\n\t\tget() {\n\t\t\tlet valProp = props.modelValue\n\t\t\tif (Array.isArray(valProp)) {\n\t\t\t\treturn cloneDeep(valProp)\n\t\t\t} else if (isNumber(valProp)) {\n\t\t\t\treturn findPath({\n\t\t\t\t\tgroup: dataC.value,\n\t\t\t\t\tcondition: (item) => item?.value === valProp,\n\t\t\t\t\tpathKey: 'value'\n\t\t\t\t})\n\t\t\t} else if (isString(valProp)) {\n\t\t\t\treturn valProp.split(props.separator)\n\t\t\t}\n\t\t\treturn []\n\t\t},\n\t\tset(v: any[]) {\n\t\t\tif (props.onlyLastVal) {\n\t\t\t\tif (isEmpty(v)) {\n\t\t\t\t\temit('update:modelValue', null)\n\t\t\t\t\temit('on-label-change', null)\n\t\t\t\t} else {\n\t\t\t\t\temit('update:modelValue', last(v))\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (isEqual(props.modelValue, v)) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\temit('update:modelValue', cloneDeep(v))\n\t\t\t}\n\t\t}\n\t})\n\n\tfunction getData() {\n\t\tif (!props.url) {\n\t\t\tconsole.error('没有用于拉取级联数据的有效接口地址')\n\t\t\treturn\n\t\t}\n\t\t$fetch\n\t\t\t.get(props.url)\n\t\t\t.then((r: any) => {\n\t\t\t\tlet d: any[] | null = null\n\t\t\t\tif (r?.data?.records) {\n\t\t\t\t\td = r.data.records\n\t\t\t\t} else if (r?.data) {\n\t\t\t\t\td = r.data\n\t\t\t\t} else if (r) {\n\t\t\t\t\td = r\n\t\t\t\t}\n\t\t\t\tif (d) {\n\t\t\t\t\tif (typeof props.optionFilter === 'function' && myTypeof(props.optionFilter) === 'Function') {\n\t\t\t\t\t\td = props.optionFilter(d)\n\t\t\t\t\t}\n\t\t\t\t\tdataC.value = dataFilter(d)\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn('级联数据错误，不能使用')\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tconsole.warn('拉取级联数据出错')\n\t\t\t})\n\t}\n\n\tfunction dataFilter(d: any[]): any[] {\n\t\tlet temp: any[] = []\n\t\tfor (let item of d) {\n\t\t\tlet tt: Record<string, any> = {\n\t\t\t\tvalue: item[props.optionVal],\n\t\t\t\tlabel: item[props.optionLabel]\n\t\t\t}\n\t\t\tif (item?.children && !isEmpty(item.children)) {\n\t\t\t\ttt.children = dataFilter(item.children)\n\t\t\t}\n\t\t\ttemp.push(tt)\n\t\t}\n\t\treturn temp\n\t}\n\n\tfunction format(labels: any[]) {\n\t\tif (props.onlyLastLabel) {\n\t\t\treturn last(labels)\n\t\t}\n\t\treturn labels.join(props.separator)\n\t}\n\n\tfunction onChange(v: any, selectedDetail: any[]) {\n\t\tlet label: string = ''\n\t\tif (!isEmpty(selectedDetail)) {\n\t\t\tlabel = selectedDetail\n\t\t\t\t.map((item) => {\n\t\t\t\t\treturn item?.label\n\t\t\t\t})\n\t\t\t\t.join(props.separator)\n\t\t}\n\t\temit('on-label-change', label)\n\t}\n\n\tonMounted(getData)\n</script>\n\n<template>\n\t<Cascader\n\t\t:data=\"dataC\"\n\t\tv-model=\"value\"\n\t\t@on-change=\"onChange\"\n\t\tchange-on-select\n\t\ttransfer\n\t\t:disabled=\"props.disabled\"\n\t\t:render-format=\"format\"\n\t\t:placeholder=\"props.placeholder || t('r.pSelect')\"\n\t\t:filterable=\"props.filterable\"\n\t/>\n</template>\n","<!--AlCascaderMC 行政区域级联，v-model绑定区域代码，内置数据，可设置地址级别\n@created 2023.08.21\n@author Ricky email:zhangqingcq@foxmail.com-->\n\n<script lang=\"ts\" setup>\n\timport { cloneDeep, isEmpty, last } from 'lodash-es'\n\timport t from '../../locale/i18nSFC'\n\timport ArCascader from 'ar-cascader'\n\n\tconst emit = defineEmits(['update:modelValue', 'on-name-change'])\n\tconst props = withDefaults(\n\t\tdefineProps<{\n\t\t\tmodelValue?: string | number | any[] | null /*组件绑定的值（v-model）*/\n\t\t\tlevel?: 0 | 1 | 2 | '0' | '1' | '2' /*精确至几级行政区域（0：省级，1：市级，2：县级）*/\n\t\t\tdisabled?: boolean /*禁用组件*/\n\t\t\ttransfer?: boolean /*弹出框元素直接放置于body下*/\n\t\t\tfilterable?: boolean /*可搜索*/\n\t\t\tseparator?: string /*地址名称分隔符*/\n\t\t\tplaceholder?: string /*占位符*/\n\t\t}>(),\n\t\t{\n\t\t\tlevel: 2,\n\t\t\tdisabled: false,\n\t\t\ttransfer: true,\n\t\t\tfilterable: true,\n\t\t\tseparator: '/'\n\t\t}\n\t)\n\tconst valueT = computed({\n\t\tget() {\n\t\t\tif (props.modelValue && (typeof props.modelValue === 'string' || typeof props.modelValue === 'number')) {\n\t\t\t\tlet temp = String(props.modelValue).trim()\n\n\t\t\t\tlet regP = /^\\d+$/\n\t\t\t\tif (regP.test(temp)) {\n\t\t\t\t\tlet lv1 = temp.substring(0, 2) + '0000000000'\n\t\t\t\t\tlet lv2 = temp.substring(0, 4) + '00000000'\n\t\t\t\t\treturn [lv1, lv2, temp]\n\t\t\t\t}\n\n\t\t\t\tif (temp.indexOf(props.separator) !== -1) {\n\t\t\t\t\t/*以中文名称和分隔符拼接的String地址*/\n\t\t\t\t\treturn temp.split(props.separator)\n\t\t\t\t}\n\n\t\t\t\treturn [temp]\n\t\t\t} else if (Array.isArray(props.modelValue)) {\n\t\t\t\treturn cloneDeep(props.modelValue)\n\t\t\t} else {\n\t\t\t\treturn []\n\t\t\t}\n\t\t},\n\t\tset(val) {\n\t\t\tif (isEmpty(val)) {\n\t\t\t\temit('update:modelValue', null)\n\t\t\t\temit('on-name-change', null)\n\t\t\t} else {\n\t\t\t\tlet l: Record<string, any> = last(val)\n\t\t\t\tlet code = ''\n\t\t\t\tlet name = ''\n\t\t\t\tif (l) {\n\t\t\t\t\tcode = l.code\n\t\t\t\t}\n\t\t\t\tif (code && code.length < 12) {\n\t\t\t\t\tlet t: any[] = [...code]\n\t\t\t\t\twhile (t.length < 12) {\n\t\t\t\t\t\tt.push(0)\n\t\t\t\t\t}\n\t\t\t\t\tcode = t.join('')\n\t\t\t\t}\n\t\t\t\tif (Array.isArray(val)) {\n\t\t\t\t\tname = val\n\t\t\t\t\t\t.map((item) => {\n\t\t\t\t\t\t\treturn item?.name\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.join(props.separator)\n\t\t\t\t}\n\t\t\t\tif (code) {\n\t\t\t\t\tif (code === props.modelValue) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\temit('update:modelValue', code)\n\t\t\t\t}\n\t\t\t\tif (name) {\n\t\t\t\t\temit('on-name-change', name)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t})\n</script>\n\n<template>\n\t<ar-cascader\n\t\tv-bind=\"$attrs\"\n\t\tclass=\"alCascaderMC\"\n\t\tv-model=\"valueT\"\n\t\t:level=\"props.level\"\n\t\t:disabled=\"props.disabled\"\n\t\t:placeholder=\"props.placeholder || t('r.pSelect')\"\n\t\t:transfer=\"props.transfer\"\n\t\t:searchable=\"props.filterable\"\n\t/>\n</template>\n","/**\n * @description 全屏预览，原生dom技术\n * @author ricky zhangqingcq@foxmail.com\n * @created 2023.08.23\n */\n\nimport { first } from 'lodash-es'\nimport { t } from '../locale'\n\nlet _index = 0\n\nfunction domHandle(src: any, _i: number, imgEl: any, nameEl: any) {\n\tif (nameEl) {\n\t\tnameEl.innerHTML = src[_i]?.name ?? ''\n\t\tif (src[_i]?.name) {\n\t\t\tif (nameEl.classList.contains('hide')) {\n\t\t\t\tnameEl.classList.remove('hide')\n\t\t\t}\n\t\t} else if (!nameEl.classList.contains('hide')) {\n\t\t\tnameEl.classList.add('hide')\n\t\t}\n\t}\n\tif (imgEl) {\n\t\timgEl.src = src[_i]?.src ?? src[_i]\n\t\t_index = _i\n\t}\n}\n\nfunction lastImg(arrSrc: boolean, src: any, imgEl: any, nameEl: any) {\n\tif (arrSrc) {\n\t\tlet _i\n\t\tif (_index - 1 < 0) {\n\t\t\t_i = src.length - 1\n\t\t} else {\n\t\t\t_i = _index - 1\n\t\t}\n\t\tdomHandle(src, _i, imgEl, nameEl)\n\t}\n}\n\nfunction nextImg(arrSrc: boolean, src: any, imgEl: any, nameEl: any) {\n\tif (arrSrc) {\n\t\tlet _i\n\t\tif (_index + 1 > src.length - 1) {\n\t\t\t_i = 0\n\t\t} else {\n\t\t\t_i = _index + 1\n\t\t}\n\t\tdomHandle(src, _i, imgEl, nameEl)\n\t}\n}\n\n/**\n * 全屏图片预览，支持单张图片预览，或多张图片轮播\n * @param {string|Array<string>|Array<Record<string,any>>} src 图片地址，或者地址组成的数组，或包含地址src和名字name的对象组成的数组\n * @param {number} index src为数组时默认展示图的索引值，默认：0\n */\nexport default function fullScreenImgByDom(this: any, src: any, index: number = 0) {\n\tconst T = (...arg: Parameters<typeof t>) => t.apply(this, arg)\n\n\tconst close = T('r.closePreview')\n\tconst fullImg = T('r.fullImg')\n\tconst last = T('r.last')\n\tconst next = T('r.next')\n\tlet notice\n\n\tlet _src\n\tlet _name\n\t_index = index\n\tconst arrSrc = Array.isArray(src)\n\tif (arrSrc) {\n\t\t_src = src[_index]?.src ?? src[_index]\n\t\t_name = src[_index]?.name\n\t} else {\n\t\t_src = src\n\t}\n\n\tif (arrSrc && src.length > 1) {\n\t\tnotice = `${last} ： ←, ↑, A, W | ${next} ： →, ↓, D, S | ${close} ： Esc`\n\t} else {\n\t\tnotice = `${close} ： Esc`\n\t}\n\n\tlet bodyEl = first(document.getElementsByTagName('body'))\n\tlet child = document.createElement('div')\n\tchild.setAttribute('class', 'fullScreenImgByDom')\n\tchild.innerHTML = `<div class='previewInner'><div class='pageFBt left${\n\t\tarrSrc && src.length > 1 ? '' : ' hide'\n\t}'><i class='ivu-icon ivu-icon-ios-arrow-back' title='${last}' ></i></div><img src='${_src}' alt='${fullImg}' ><div class='pageFBt right${\n\t\tarrSrc && src.length > 1 ? '' : ' hide'\n\t}'><i class='ivu-icon ivu-icon-ios-arrow-forward' title='${next}' ></i></div><i class='ivu-icon ivu-icon-md-close' title='${close}' ></i></div><p class='pNotice cannotSelect'>${notice}</p><p class='pName ${\n\t\t_name ? '' : 'hide'\n\t}'>${_name}</p>`\n\n\tfunction closeHandler() {\n\t\tlet bb = first(document.getElementsByTagName('body'))\n\t\tif (bb) {\n\t\t\tbb.removeChild(child)\n\t\t}\n\t\tdocument.removeEventListener('keyup', keyupHandler)\n\t}\n\n\tchild.querySelector('.ivu-icon-md-close')?.addEventListener?.('click', closeHandler)\n\tconst imgEl = child.querySelector('img')\n\tconst nameEl = child.querySelector('.pName')\n\tchild.querySelector('.pageFBt.left')?.addEventListener('click', function () {\n\t\tlastImg(arrSrc, src, imgEl, nameEl)\n\t})\n\tchild.querySelector('.pageFBt.right')?.addEventListener('click', function () {\n\t\tnextImg(arrSrc, src, imgEl, nameEl)\n\t})\n\n\tfunction keyupHandler(e: any) {\n\t\tif (e.keyCode === 37 || e.keyCode === 38 || e.keyCode === 87 || e.keyCode === 65) {\n\t\t\t//上、左、w、a\n\t\t\tlastImg(arrSrc, src, imgEl, nameEl)\n\t\t} else if (e.keyCode === 39 || e.keyCode === 40 || e.keyCode === 83 || e.keyCode === 68) {\n\t\t\t//下、右、s、d\n\t\t\tnextImg(arrSrc, src, imgEl, nameEl)\n\t\t} else if (e.keyCode === 27) {\n\t\t\t//Esc\n\t\t\tcloseHandler()\n\t\t}\n\t}\n\n\tdocument.addEventListener('keyup', keyupHandler)\n\tbodyEl?.appendChild?.(child)\n\tchild.focus({ preventScroll: true })\n}\n","<!--UploadGroup 支持本地上传或直接上传到服务器、上传文件列表展示或缩略图展示或不展示等功能的上传组件\n@created 2023.08.23\n@author Ricky email:zhangqingcq@foxmail.com-->\n\n<script lang=\"ts\" setup>\n\timport t from '../../locale/i18nSFC'\n\timport { first, cloneDeep, indexOf, last, find, findIndex } from 'lodash-es'\n\timport { myTypeof } from '../../utils/globalFunc'\n\timport {\n\t\tgetFileSrc,\n\t\tgetFileTypeByName,\n\t\tisImgByFile,\n\t\tgetFileTypeIconByName,\n\t\tdownloadFileReaderFile\n\t} from '../../utils/needImportFunc'\n\timport $fetch from '../../utils/fetch.js'\n\timport fullScreenImgByDom from '../../utils/fullScreenImgByDom'\n\timport $swal from '../../utils/swal'\n\n\tconst emit = defineEmits(['update:modelValue', 'on-change'])\n\tconst props = withDefaults(\n\t\tdefineProps<{\n\t\t\tmodelValue?: number | string | File | any[]\n\t\t\turl?: string /*文件上传的地址*/\n\t\t\tdata?: Record<string, any> /*文件上传接口其他参数*/\n\t\t\tmanualUpload?: boolean\n\t\t\tmaxSize?: number\n\t\t\tlength?: number\n\t\t\tshowUploadList?: boolean\n\t\t\twithCredentials?: boolean\n\t\t\tmultiple?: boolean\n\t\t\tformat?: string[]\n\t\t\tshowImg?: boolean\n\t\t\tdisabled?: boolean /*禁用，仅展示*/\n\t\t}>(),\n\t\t{\n\t\t\tmodelValue: () => [],\n\t\t\turl: window?.g?.mgrURL ? window.g.mgrURL + '/web/v1/fsc/file' : '',\n\t\t\tdata: () => ({\n\t\t\t\tappId: 0,\n\t\t\t\tmoduleId: 0,\n\t\t\t\ttypeId: 0\n\t\t\t}),\n\t\t\tmanualUpload: false,\n\t\t\tmaxSize: 0,\n\t\t\tlength: 0,\n\t\t\tshowUploadList: true,\n\t\t\twithCredentials: true,\n\t\t\tmultiple: false,\n\t\t\tformat: () => [],\n\t\t\tshowImg: false,\n\t\t\tdisabled: false\n\t\t}\n\t)\n\tconst fileSrcList = shallowRef<any[]>([]) //本地图片模式图片文件地址集合\n\tconst fileDefaultList = shallowRef<any[]>([]) //从服务器返回的数据整理完成的文件集合\n\tconst localImgSrcList = shallowRef<any[]>([])\n\tlet tempStorage: Record<string, any> = {}\n\tconst previewType = computed(() => {\n\t\tif (!props.manualUpload && props.showImg && fileListItemIsIMG.value) {\n\t\t\t//上传到服务器，图片模式\n\t\t\treturn 'img'\n\t\t} else if (props.manualUpload && props.showImg && fileListItemIsIMG.value) {\n\t\t\t//上传到本地，图片模式\n\t\t\treturn 'localImg'\n\t\t} else if (props.manualUpload && props.showUploadList && (!props.showImg || !fileListItemIsIMG.value)) {\n\t\t\t//上传到本地\n\t\t\treturn 'localList'\n\t\t} else if (!props.manualUpload && props.showUploadList && (!props.showImg || !fileListItemIsIMG.value)) {\n\t\t\t//上传到服务器\n\t\t\treturn 'list'\n\t\t} else {\n\t\t\treturn ''\n\t\t}\n\t})\n\tconst urlT = computed(() => {\n\t\tif (props.manualUpload) {\n\t\t\treturn '//jsonplaceholder.typicode.com/posts/'\n\t\t} else {\n\t\t\treturn props.url\n\t\t}\n\t})\n\tconst fileList = computed({\n\t\t//文件集合\n\t\tget() {\n\t\t\tif (props.manualUpload) {\n\t\t\t\treturn fileIdList.value\n\t\t\t} else {\n\t\t\t\treturn fileIdList.value.map((e) => ({ id: e }))\n\t\t\t}\n\t\t},\n\t\tset(val) {\n\t\t\tif (props.manualUpload) {\n\t\t\t\tfileIdList.value = val || []\n\t\t\t} else {\n\t\t\t\tfileIdList.value = val?.map((e) => e?.id) || []\n\t\t\t}\n\t\t}\n\t})\n\tconst fileIdList = computed({\n\t\t//文件ID集合\n\t\tget() {\n\t\t\tswitch (typeof props.modelValue) {\n\t\t\t\tcase 'number':\n\t\t\t\t\treturn [props.modelValue]\n\t\t\t\tcase 'string':\n\t\t\t\t\tif (props.modelValue.indexOf('--') !== -1) {\n\t\t\t\t\t\treturn []\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (/^\\d*$/.test(props.modelValue)) {\n\t\t\t\t\t\t\treturn [Number(props.modelValue)]\n\t\t\t\t\t\t}\n\t\t\t\t\t\treturn [props.modelValue]\n\t\t\t\t\t}\n\t\t\t\tcase 'object':\n\t\t\t\t\tif (Array.isArray(props.modelValue)) {\n\t\t\t\t\t\treturn props.modelValue.filter((e) => e !== '--')\n\t\t\t\t\t} else if (myTypeof(props.modelValue) === 'File') {\n\t\t\t\t\t\treturn [props.modelValue]\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn []\n\t\t\t\t\t}\n\t\t\t\tdefault:\n\t\t\t\t\treturn []\n\t\t\t}\n\t\t},\n\t\tset(val) {\n\t\t\tif (props.length === 1) {\n\t\t\t\tlet temp = first(val)\n\t\t\t\temit('update:modelValue', temp ?? null)\n\t\t\t\temit('on-change', temp ?? null)\n\t\t\t} else {\n\t\t\t\temit('update:modelValue', cloneDeep(val))\n\t\t\t\temit('on-change', cloneDeep(val))\n\t\t\t}\n\t\t}\n\t})\n\tconst fileListItemIsIMG = computed(() => {\n\t\t//文件集合是否全为图片\n\t\tlet temp\n\t\tif (props.manualUpload) {\n\t\t\ttemp = fileList.value\n\t\t} else {\n\t\t\ttemp = fileDefaultList.value\n\t\t}\n\t\tif (!temp) {\n\t\t\treturn false\n\t\t}\n\t\tfor (let item of temp) {\n\t\t\tlet type\n\t\t\tif (props.manualUpload) {\n\t\t\t\ttype = item?.type\n\t\t\t} else {\n\t\t\t\ttype = item?.mimeType\n\t\t\t}\n\t\t\tif (!type || (type && !(isImgByFile(type) || type === 'loading'))) {\n\t\t\t\treturn false\n\t\t\t}\n\t\t}\n\t\treturn true\n\t})\n\n\tconst fileDefaultImgList = computed(() => {\n\t\t//图片文件集合\n\t\treturn fileDefaultList.value.filter((e) => isImgByFile(e?.mimeType))\n\t})\n\n\tconst fileImgSrcList = computed(() => {\n\t\t//图片地址、名字集合\n\t\treturn fileDefaultImgList.value.map((e: any) => ({\n\t\t\tsrc: props.url + '/' + e?.id + '/download?preview=true',\n\t\t\tname: e?.name\n\t\t}))\n\t})\n\n\tconst localImgList = computed(() => {\n\t\t// 本地图片集合\n\t\treturn fileList.value.filter((e: any) => isImgByFile(e?.type))\n\t})\n\n\twatch(localImgList, async (after) => {\n\t\tlocalImgSrcList.value = await getFileSrcList(after)\n\t})\n\n\twatch(\n\t\t() => fileList.value,\n\t\tasync (after) => {\n\t\t\tif (previewType.value === 'localImg') {\n\t\t\t\tif (after?.length) {\n\t\t\t\t\tfileSrcList.value = await getFileSrcList(after)\n\t\t\t\t} else {\n\t\t\t\t\tfileSrcList.value = []\n\t\t\t\t}\n\t\t\t} else if (after?.length && previewType.value !== 'localList') {\n\t\t\t\tlet temp: any = cloneDeep(after)\n\t\t\t\tconst _fileDefaultList = cloneDeep(fileDefaultList.value)\n\t\t\t\tfor (let item of temp) {\n\t\t\t\t\tif (item?.name === undefined) {\n\t\t\t\t\t\t//根据id获取文件名字\n\t\t\t\t\t\tif (item.id) {\n\t\t\t\t\t\t\tconst fileT = find(_fileDefaultList, (e) => e?.id === item.id)\n\t\t\t\t\t\t\tif (fileT) {\n\t\t\t\t\t\t\t\t//本地有名字，在本地拿\n\t\t\t\t\t\t\t\titem.name = fileT.name\n\t\t\t\t\t\t\t\titem.mimeType = fileT.mimeType\n\t\t\t\t\t\t\t} else if (tempStorage.hasOwnProperty(item.id)) {\n\t\t\t\t\t\t\t\t//缓存有信息，在缓存拿取\n\t\t\t\t\t\t\t\titem.name = tempStorage[item.id].name\n\t\t\t\t\t\t\t\titem.mimeType = tempStorage[item.id].mimeType\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t//本地没有，去服务器拿\n\t\t\t\t\t\t\t\titem.mimeType = 'loading'\n\t\t\t\t\t\t\t\t$fetch\n\t\t\t\t\t\t\t\t\t.get(props.url + '/' + item.id)\n\t\t\t\t\t\t\t\t\t.then((r: any) => {\n\t\t\t\t\t\t\t\t\t\titem.name = r?.data?.returnValue?.[0]?.name || t('r.file') + indexOf(after, item)\n\t\t\t\t\t\t\t\t\t\titem.mimeType = r?.data?.returnValue?.[0]?.mimeType || 'unknown'\n\t\t\t\t\t\t\t\t\t\ttriggerRef(fileDefaultList)\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\t\t\t\titem.name = t('r.file') + indexOf(temp, item)\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\titem.name = t('r.unknown')\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tfileDefaultList.value = temp\n\t\t\t} else {\n\t\t\t\tfileDefaultList.value = []\n\t\t\t}\n\t\t},\n\t\t{\n\t\t\timmediate: true,\n\t\t\tdeep: true\n\t\t}\n\t)\n\n\tfunction clear() {\n\t\tfileList.value = []\n\t}\n\n\tfunction getName(item: any) {\n\t\treturn item?.name || (item?.split && last(item.split('/'))) || item\n\t}\n\n\tasync function getFileSrcList(data: any[]) {\n\t\tlet temp: any[] = []\n\t\tfor (let item of data) {\n\t\t\t//图片的 base64 格式, 可以直接当成 img 的 src 属性值\n\t\t\tlet src = await getFileSrc(item)\n\t\t\ttemp.push(src)\n\t\t}\n\t\treturn temp\n\t}\n\n\tfunction clearManualItem(index: number) {\n\t\tif (!props.disabled) {\n\t\t\t//触发computed的set\n\t\t\tlet _f = fileList.value\n\t\t\t_f?.splice(index, 1)\n\t\t\tfileList.value = _f\n\t\t}\n\t}\n\n\tfunction downloadDefaultFile(item: Record<string, any>) {\n\t\tif (item?.id) {\n\t\t\twindow.open(props.url + '/' + item.id + '/download')\n\t\t}\n\t}\n\n\tfunction showPreview(file: any) {\n\t\tif (props.manualUpload) {\n\t\t\treturn file?.type && isImgByFile(file.type)\n\t\t}\n\t\treturn file?.id && file.mimeType && isImgByFile(file.mimeType)\n\t}\n\n\tasync function listExpand(file: any) {\n\t\t//列表图片预览\n\t\tif (props.manualUpload) {\n\t\t\t//本地上传\n\t\t\tlet index\n\t\t\tlet tt\n\t\t\tif (typeof file === 'number') {\n\t\t\t\t//直接传的index预览，本地图片模式\n\t\t\t\tindex = file\n\t\t\t\ttt = fileSrcList.value\n\t\t\t} else if (file) {\n\t\t\t\t//传的file对象预览，本地列表\n\t\t\t\tindex = findIndex(localImgList.value, (e: any) => e.size === file.size && e.lastModified === file.lastModified)\n\t\t\t\ttt = localImgSrcList.value\n\t\t\t}\n\t\t\tif (!tt) {\n\t\t\t\treturn\n\t\t\t}\n\t\t\tfullScreenImgByDom(\n\t\t\t\ttt.map((e: any, i: number) => ({\n\t\t\t\t\tsrc: e,\n\t\t\t\t\tname: localImgList.value[i]?.name\n\t\t\t\t})),\n\t\t\t\tindex\n\t\t\t)\n\t\t} else if (file?.id) {\n\t\t\t//上传到服务器，远程列表模式\n\t\t\tconst index = findIndex(fileDefaultImgList.value, (e) => e.id === file.id)\n\t\t\tfullScreenImgByDom(fileImgSrcList.value, index)\n\t\t}\n\t}\n\n\tfunction downloadManualFile(file: any) {\n\t\tif (myTypeof(file) === 'String' && file.indexOf('http') > -1) {\n\t\t\twindow.open(file)\n\t\t} else if (myTypeof(file) === 'File') {\n\t\t\tgetFileSrc(file).then((r: any) => {\n\t\t\t\tdownloadFileReaderFile(file.name, r)\n\t\t\t})\n\t\t}\n\t}\n\n\tfunction handelManualUpload(file: any) {\n\t\tif (props.manualUpload) {\n\t\t\tif (file) {\n\t\t\t\tlet type = getFileTypeByName(file.name)\n\t\t\t\tif (props.format?.length && props.format.indexOf(type) < 0) {\n\t\t\t\t\t$swal(\n\t\t\t\t\t\tt('r.wrongFileType'),\n\t\t\t\t\t\tt('r.supportType') + ((props.format?.length && String(props.format)) || t('r.none')),\n\t\t\t\t\t\t'warning'\n\t\t\t\t\t)\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\tif (props.maxSize && file.size > props.maxSize * 1024) {\n\t\t\t\t\t$swal(t('r.fileIsBig'), t('r.supportSize') + props.maxSize + 'kb', 'warning')\n\t\t\t\t\treturn false\n\t\t\t\t}\n\t\t\t\t//触发computed的set\n\t\t\t\tlet _f = fileList.value\n\t\t\t\t_f?.push(file)\n\t\t\t\tfileList.value = _f\n\t\t\t}\n\t\t\treturn false\n\t\t} else {\n\t\t\treturn true\n\t\t}\n\t}\n\n\tfunction uploadError(error: any) {\n\t\tconsole.warn(error)\n\t\t$swal(t('r.uploadError'), '', 'error')\n\t}\n\n\tfunction uploadSuccess(response: any, file: any, _fileList: any) {\n\t\tif (response?.code === 0) {\n\t\t\t//触发computed的set\n\t\t\tlet _f = fileList.value\n\t\t\tfile.id = response.data?.[0]?.id\n\t\t\tfile.name = response.data?.[0]?.name\n\t\t\tfile.mimeType = response.data?.[0]?.mimeType //将文件信息存起来，不用再去服务器拉取了\n\t\t\ttempStorage[file.id] = { name: file.name, mimeType: file.mimeType }\n\t\t\t_f?.push(file)\n\t\t\tfileList.value = _f\n\t\t} else {\n\t\t\t$swal(t('r.uploadFail'), response?.message || '', 'error')\n\t\t}\n\t}\n\n\tfunction overSize() {\n\t\t$swal(t('r.fileIsBig'), t('r.supportSize') + props.maxSize + ' kb', 'warning')\n\t}\n\n\tfunction onFormatError() {\n\t\t$swal(\n\t\t\tt('r.wrongFileType'),\n\t\t\tt('r.supportType') + ((props.format?.length && String(props.format)) || t('r.none')),\n\t\t\t'warning'\n\t\t)\n\t}\n\n\tfunction onPreview(file: any) {\n\t\tlet id = file?.id\n\t\tlet type = file?.mimeType\n\t\tif (id) {\n\t\t\tif (myTypeof(type) === 'String' && type.indexOf('image') > -1) {\n\t\t\t\tfullScreenImgByDom(props.url + '/' + id + '/download?preview=true')\n\t\t\t} else {\n\t\t\t\twindow.open(props.url + '/' + id + '/download?preview=true')\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction onRemove(file: any) {\n\t\tlet id = file?.response?.data?.[0]?.id\n\t\tdeleteById(null, id)\n\t}\n\n\tfunction deleteById(e: any, id: any) {\n\t\tif (!id && id !== 0) {\n\t\t\treturn\n\t\t}\n\t\tif (!props.disabled && fileIdList.value.indexOf(id) !== -1) {\n\t\t\tconst _fileIdList = cloneDeep(fileIdList.value)\n\t\t\t//触发computed的set\n\t\t\tlet _f = fileList.value\n\t\t\t_f?.splice(_fileIdList.indexOf(id), 1)\n\t\t\tfileList.value = _f\n\t\t}\n\t}\n</script>\n\n<template>\n\t<div>\n\t\t<Upload\n\t\t\tname=\"files\"\n\t\t\t:action=\"urlT\"\n\t\t\t:before-upload=\"handelManualUpload\"\n\t\t\t:on-error=\"uploadError\"\n\t\t\t:on-success=\"uploadSuccess\"\n\t\t\t:on-exceeded-size=\"overSize\"\n\t\t\t:on-preview=\"onPreview\"\n\t\t\t:on-remove=\"onRemove\"\n\t\t\t:on-format-error=\"onFormatError\"\n\t\t\t:data=\"props.data\"\n\t\t\t:max-size=\"props.maxSize\"\n\t\t\t:show-upload-list=\"false\"\n\t\t\t:with-credentials=\"props.withCredentials\"\n\t\t\t:format=\"props.format\"\n\t\t\t:multiple=\"props.multiple || false\"\n\t\t\t:disabled=\"(props.length > 0 && fileList?.length >= props.length) || Boolean(props.disabled)\"\n\t\t>\n\t\t\t<Button\n\t\t\t\ticon=\"md-cloud-upload\"\n\t\t\t\t:class=\"{\n\t\t\t\t\tdisabledR: (props.length > 0 && fileList?.length >= props.length) || Boolean(props.disabled)\n\t\t\t\t}\"\n\t\t\t\t>{{ t('r.selectFile') }}\n\t\t\t</Button>\n\t\t</Upload>\n\t\t<div class=\"previewBoxM\" v-if=\"previewType === 'img' && fileDefaultList?.length > 0\">\n\t\t\t<template v-for=\"(item, index) of fileDefaultList\" :key=\"item?.id\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"previewImg\"\n\t\t\t\t\t:class=\"{ previewLoading: item.mimeType === 'loading' }\"\n\t\t\t\t\tv-if=\"!props.manualUpload && item?.id !== null\"\n\t\t\t\t>\n\t\t\t\t\t<div class=\"imgLoading\" v-show=\"item.mimeType === 'loading'\">\n\t\t\t\t\t\t<div data-loader=\"circle-side\" class=\"loader-div\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<img\n\t\t\t\t\t\t:src=\"url + '/' + item.id + '/download?preview=true'\"\n\t\t\t\t\t\t:alt=\"item.name\"\n\t\t\t\t\t\tv-show=\"item.mimeType !== 'loading'\"\n\t\t\t\t\t/>\n\t\t\t\t\t<div class=\"deleteModal\" v-show=\"item.mimeType !== 'loading'\">\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\ttype=\"ios-expand\"\n\t\t\t\t\t\t\tsize=\"40\"\n\t\t\t\t\t\t\tclass=\"previewExpand\"\n\t\t\t\t\t\t\t:title=\"t('r.fView')\"\n\t\t\t\t\t\t\t@click=\"fullScreenImgByDom(fileImgSrcList, index)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\ttype=\"ios-trash-outline\"\n\t\t\t\t\t\t\tsize=\"40\"\n\t\t\t\t\t\t\tclass=\"previewDelete\"\n\t\t\t\t\t\t\t@click=\"deleteById($event, item.id)\"\n\t\t\t\t\t\t\t:title=\"t('r.delete')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t\t<div class=\"previewBoxM\" v-if=\"previewType === 'localImg' && fileSrcList?.length > 0\">\n\t\t\t<template v-for=\"(item, index) of fileSrcList\" :key=\"'manualImg' + index\">\n\t\t\t\t<div class=\"previewImg\" v-if=\"props.manualUpload && item !== null\">\n\t\t\t\t\t<img :src=\"item\" :alt=\"'manualImg' + index\" />\n\t\t\t\t\t<div class=\"deleteModal\">\n\t\t\t\t\t\t<Icon type=\"ios-expand\" size=\"40\" class=\"previewExpand\" @click=\"listExpand(index)\" :title=\"t('r.fView')\" />\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\ttype=\"ios-trash-outline\"\n\t\t\t\t\t\t\tsize=\"40\"\n\t\t\t\t\t\t\tclass=\"previewDelete\"\n\t\t\t\t\t\t\t@click=\"clearManualItem(index)\"\n\t\t\t\t\t\t\t:title=\"t('r.delete')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t\t<div class=\"customFileListM\" v-if=\"previewType === 'localList' && fileList?.length > 0\">\n\t\t\t<template v-for=\"(item, index) of fileList\" :key=\"'manualItem' + index\">\n\t\t\t\t<p class=\"customFileListItem\" v-if=\"props.manualUpload && item !== null\">\n\t\t\t\t\t<Icon v-if=\"item.name\" class=\"fileTypeIco\" :type=\"getFileTypeIconByName(item.name)\" size=\"20\" />\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"upNameT\"\n\t\t\t\t\t\t:class=\"{ previewName: showPreview(item) }\"\n\t\t\t\t\t\t@click=\"downloadManualFile(item)\"\n\t\t\t\t\t\t:title=\"t('r.download')\"\n\t\t\t\t\t\t>{{ getName(item) }}</span\n\t\t\t\t\t>\n\t\t\t\t\t<span class=\"btBoxJ\">\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\tv-if=\"showPreview(item)\"\n\t\t\t\t\t\t\ttype=\"md-qr-scanner\"\n\t\t\t\t\t\t\tsize=\"22\"\n\t\t\t\t\t\t\tclass=\"listBtH\"\n\t\t\t\t\t\t\t@click=\"listExpand(item)\"\n\t\t\t\t\t\t\t:title=\"t('r.fView')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Icon type=\"md-close\" size=\"22\" class=\"listBtH\" @click=\"clearManualItem(index)\" :title=\"t('r.delete')\" />\n\t\t\t\t\t</span>\n\t\t\t\t</p>\n\t\t\t</template>\n\t\t</div>\n\t\t<div class=\"customFileListM\" v-if=\"previewType === 'list' && fileDefaultList?.length > 0\">\n\t\t\t<template v-for=\"(item, index) of fileDefaultList\" :key=\"'defaultItem' + index\">\n\t\t\t\t<div class=\"customFileListItem\" v-if=\"!props.manualUpload && item\">\n\t\t\t\t\t<div class=\"listLoading\" v-show=\"item.mimeType === 'loading'\">\n\t\t\t\t\t\t<div data-loader=\"circle-side\" class=\"loader-div\" />\n\t\t\t\t\t</div>\n\t\t\t\t\t<Icon\n\t\t\t\t\t\t:type=\"getFileTypeIconByName(item.name)\"\n\t\t\t\t\t\tclass=\"fileTypeIco\"\n\t\t\t\t\t\tv-show=\"item.mimeType !== 'loading'\"\n\t\t\t\t\t\tsize=\"20\"\n\t\t\t\t\t/>\n\t\t\t\t\t<span\n\t\t\t\t\t\tclass=\"upNameT\"\n\t\t\t\t\t\t@click=\"downloadDefaultFile(item)\"\n\t\t\t\t\t\t:title=\"t('r.download')\"\n\t\t\t\t\t\tv-show=\"item.mimeType !== 'loading'\"\n\t\t\t\t\t\t>{{ item.name || t('r.file') + (index + 1) }}</span\n\t\t\t\t\t>\n\t\t\t\t\t<span class=\"btBoxJ\" v-show=\"item.mimeType !== 'loading'\">\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\tv-if=\"showPreview(item)\"\n\t\t\t\t\t\t\ttype=\"md-qr-scanner\"\n\t\t\t\t\t\t\tsize=\"22\"\n\t\t\t\t\t\t\tclass=\"listBtH\"\n\t\t\t\t\t\t\t@click=\"listExpand(item)\"\n\t\t\t\t\t\t\t:title=\"t('r.fView')\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t\t<Icon type=\"md-close\" size=\"22\" class=\"listBtH\" @click=\"clearManualItem(index)\" :title=\"t('r.delete')\" />\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t</template>\n\t\t</div>\n\t</div>\n</template>\n","<!--MonthRange 月份区间选择器\n@created 2023.08.28\n@author Ricky email:zhangqingcq@foxmail.com-->\n\n<script lang=\"ts\" setup>\n\timport t from '../../locale/i18nSFC'\n\n\tconst emit = defineEmits(['update:modelValue', 'on-change'])\n\tconst props = withDefaults(\n\t\tdefineProps<{\n\t\t\tmodelValue?: string[]\n\t\t\tplacement?:\n\t\t\t\t| 'top'\n\t\t\t\t| 'top-start'\n\t\t\t\t| 'top-end'\n\t\t\t\t| 'bottom'\n\t\t\t\t| 'bottom-start'\n\t\t\t\t| 'bottom-end'\n\t\t\t\t| 'left'\n\t\t\t\t| 'left-start'\n\t\t\t\t| 'left-end'\n\t\t\t\t| 'right'\n\t\t\t\t| 'right-start'\n\t\t\t\t| 'right-end'\n\t\t\tplaceholder?: string\n\t\t\toptions1?: Record<string, any>\n\t\t\toptions2?: Record<string, any>\n\t\t\tdisabled?: boolean\n\t\t}>(),\n\t\t{\n\t\t\tmodelValue: () => ['', ''],\n\t\t\tplacement: 'bottom-start',\n\t\t\tdisabled: false\n\t\t}\n\t)\n\n\tconst openA = ref(false)\n\tconst openB = ref(false)\n\tconst mouseOver = ref(false)\n\n\tconst valueA = computed({\n\t\tget() {\n\t\t\treturn (props.modelValue && props.modelValue[0]) || null\n\t\t},\n\t\tset(v: any) {\n\t\t\temit('update:modelValue', [v, valueB.value])\n\t\t\temit('on-change', [v, valueB.value])\n\t\t}\n\t})\n\tconst valueB = computed({\n\t\tget() {\n\t\t\treturn (props.modelValue && props.modelValue[1]) || null\n\t\t},\n\t\tset(v: any) {\n\t\t\temit('update:modelValue', [valueA.value, v])\n\t\t\temit('on-change', [valueA.value, v])\n\t\t}\n\t})\n\tconst valueT = computed(\n\t\t() => (valueA.value || '') + (((valueA.value || valueB.value) && ' - ') || '') + (valueB.value || '')\n\t)\n\n\tconst mPickerRef = ref()\n\n\tonMounted(() => {\n\t\tmPickerRef.value.querySelector('.aRoot .ivu-input-suffix').addEventListener('mouseover', () => {\n\t\t\tmouseOver.value = true\n\t\t})\n\t\tmPickerRef.value.querySelector('.aRoot .ivu-input-suffix').addEventListener('mouseout', () => {\n\t\t\tmouseOver.value = false\n\t\t})\n\t\tmPickerRef.value.querySelector('.aRoot .ivu-input-suffix').addEventListener('click', (e: any) => {\n\t\t\tif (!props.disabled && (valueA.value || valueB.value)) {\n\t\t\t\te?.stopPropagation?.()\n\t\t\t\tclear()\n\t\t\t}\n\t\t})\n\t})\n\n\tfunction focus() {\n\t\tif (!props.disabled) {\n\t\t\topenA.value = true\n\t\t}\n\t}\n\n\tfunction changeA(d: any) {\n\t\tvalueA.value = d\n\t\topenA.value = false\n\t\topenB.value = true\n\t}\n\n\tfunction changeB(d: any) {\n\t\tvalueB.value = d\n\t\topenB.value = false\n\t}\n\n\tfunction clear() {\n\t\temit('update:modelValue', [null, null])\n\t\temit('on-change', [null, null])\n\t}\n\n\tfunction close() {\n\t\topenA.value = false\n\t\topenB.value = false\n\t\tif (valueA.value && valueB.value === null) {\n\t\t\tvalueA.value = null\n\t\t}\n\t}\n</script>\n\n<template>\n\t<div class=\"monthRangeBoxR\" ref=\"mPickerRef\">\n\t\t<DatePicker\n\t\t\t:open=\"openB\"\n\t\t\t:modelValue=\"valueB\"\n\t\t\ttransfer\n\t\t\ttype=\"month\"\n\t\t\t:placement=\"props.placement\"\n\t\t\t:options=\"props.options2\"\n\t\t\t@on-change=\"changeB\"\n\t\t\t@on-clickoutside=\"close\"\n\t\t>\n\t\t\t<div class=\"bRoot\"></div>\n\t\t</DatePicker>\n\t\t<DatePicker\n\t\t\t:open=\"openA\"\n\t\t\t:modelValue=\"valueA\"\n\t\t\ttransfer\n\t\t\ttype=\"month\"\n\t\t\t:placement=\"props.placement\"\n\t\t\t:options=\"props.options1\"\n\t\t\t@on-change=\"changeA\"\n\t\t\t@on-clickoutside=\"close\"\n\t\t>\n\t\t\t<!--suppress HtmlExtraClosingTag -->\n\t\t\t<div @click=\"focus\">\n\t\t\t\t<Input\n\t\t\t\t\tclass=\"aRoot\"\n\t\t\t\t\tv-model=\"valueT\"\n\t\t\t\t\treadonly\n\t\t\t\t\t:placeholder=\"props.placeholder || t('r.selectDate')\"\n\t\t\t\t\t:disabled=\"props.disabled\"\n\t\t\t\t>\n\t\t\t\t\t<template #suffix>\n\t\t\t\t\t\t<Icon\n\t\t\t\t\t\t\t:type=\"mouseOver && (valueA || valueB) && !props.disabled ? 'ios-close-circle' : 'ios-calendar-outline'\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</template>\n\t\t\t\t</Input>\n\t\t\t</div>\n\t\t</DatePicker>\n\t</div>\n</template>\n","<script setup lang=\"ts\">\r\n\timport { myTypeof } from '../../utils/globalFunc'\r\n\timport { setTimeout } from '../../utils/timer'\r\n\r\n\tconst emit = defineEmits(['update:modelValue'])\r\n\tconst props = withDefaults(\r\n\t\tdefineProps<{\r\n\t\t\tmodelValue?: string | any[] | Date\r\n\t\t\ttype?: 'date' | 'daterange' | 'datetime' | 'datetimerange' | 'year' | 'month'\r\n\t\t\toptions?: Record<string, any>\r\n\t\t\tplacement?:\r\n\t\t\t\t| 'top'\r\n\t\t\t\t| 'top-start'\r\n\t\t\t\t| 'top-end'\r\n\t\t\t\t| 'bottom'\r\n\t\t\t\t| 'bottom-start'\r\n\t\t\t\t| 'bottom-end'\r\n\t\t\t\t| 'left'\r\n\t\t\t\t| 'left-start'\r\n\t\t\t\t| 'left-end'\r\n\t\t\t\t| 'right'\r\n\t\t\t\t| 'right-start'\r\n\t\t\t\t| 'right-end'\r\n\t\t\tplaceholder?: string\r\n\t\t\tclearable?: boolean\r\n\t\t\tdisabled?: boolean\r\n\t\t}>(),\r\n\t\t{\r\n\t\t\ttype: 'date',\r\n\t\t\toptions: () => ({}),\r\n\t\t\tplacement: 'bottom-end',\r\n\t\t\tclearable: true,\r\n\t\t\tdisabled: false\r\n\t\t}\r\n\t)\r\n\tconst dateC = ref()\r\n\tconst transferId = 'date-c-r-' + Math.floor(Math.random() * 10000000 + 10000000)\r\n\tconst optionsT = ref<Record<string, any>>({})\r\n\tconst valueT = computed({\r\n\t\tget() {\r\n\t\t\treturn props.modelValue\r\n\t\t},\r\n\t\tset(v) {\r\n\t\t\temit('update:modelValue', v)\r\n\t\t}\r\n\t})\r\n\tconst otherOptions = computed(() => {\r\n\t\tif (myTypeof(props.options) === 'Object') {\r\n\t\t\tconst { disabledDate, ...others } = props.options\r\n\t\t\treturn others\r\n\t\t}\r\n\t\treturn {}\r\n\t})\r\n\r\n\tfunction getOptions(d: any) {\r\n\t\tconst t = d.target\r\n\t\tif (t.classList?.contains?.('ivu-date-picker-cells-cell') || t.tagName === 'EM') {\r\n\t\t\tsetTimeout(() => {\r\n\t\t\t\tconst r = dateC?.value?.$refs.pickerPanel?.rangeState\r\n\t\t\t\tif (r) {\r\n\t\t\t\t\tconst from = r.from\r\n\t\t\t\t\tconst selecting = r.selecting\r\n\t\t\t\t\toptionsT.value = {\r\n\t\t\t\t\t\t...otherOptions.value,\r\n\t\t\t\t\t\tdisabledDate: (d: any) => {\r\n\t\t\t\t\t\t\tif (typeof props.options?.disabledDate === 'function') {\r\n\t\t\t\t\t\t\t\treturn props.options.disabledDate(d, from, selecting)\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}, 1)\r\n\t\t}\r\n\t}\r\n\r\n\twatch(\r\n\t\t() => props.options,\r\n\t\t(d: any) => {\r\n\t\t\toptionsT.value = d\r\n\t\t},\r\n\t\t{ immediate: true }\r\n\t)\r\n\r\n\tonMounted(() => {\r\n\t\tconst el = document.getElementsByClassName(transferId)[0]\r\n\t\tel?.addEventListener?.('click', getOptions, true)\r\n\t})\r\n</script>\r\n\r\n<template>\r\n\t<DatePicker\r\n\t\tref=\"dateC\"\r\n\t\tv-model=\"valueT\"\r\n\t\t:type=\"type\"\r\n\t\t:options=\"optionsT\"\r\n\t\t:placement=\"placement\"\r\n\t\t:placeholder=\"placeholder\"\r\n\t\t:clearable=\"clearable\"\r\n\t\t:disabled=\"disabled\"\r\n\t\t:editable=\"false\"\r\n\t\t:transferClassName=\"transferId\"\r\n\t\ttransfer\r\n\t/>\r\n</template>\r\n","<!--EditorPro 富文本编辑器\n@created 2023.08.28\n@author Ricky email:zhangqingcq@foxmail.com-->\n\n<script lang=\"ts\" setup>\n\t//@ts-ignore\n\timport { Editor, Toolbar } from '@wangeditor/editor-for-vue'\n\timport t from '../../locale/i18nSFC'\n\timport $fetch from '../../utils/fetch'\n\timport $swal from '../../utils/swal'\n\n\tconst emit = defineEmits(['update:modelValue', 'on-change'])\n\tconst props = withDefaults(\n\t\tdefineProps<{\n\t\t\tmodelValue?: string\n\t\t\ttoolbarConfig?: Record<string, any>\n\t\t\teditorConfig?: Record<string, any>\n\t\t\tmode?: 'default' | 'simple'\n\t\t\theight?: string | number\n\t\t\timgUploadUrl?: string\n\t\t\tvideoUploadUrl?: string\n\t\t\tplaceholder?: string\n\t\t\tdisabled?: boolean\n\t\t}>(),\n\t\t{\n\t\t\tmodelValue: '<p></p>',\n\t\t\ttoolbarConfig: () => ({}),\n\t\t\teditorConfig: () => ({}),\n\t\t\tmode: 'default',\n\t\t\theight: 300,\n\t\t\tplaceholder: '',\n\t\t\tdisabled: false\n\t\t}\n\t)\n\n\tconst _editor = shallowRef()\n\tconst valueT = computed({\n\t\tget() {\n\t\t\treturn props.modelValue\n\t\t},\n\t\tset(v: any) {\n\t\t\temit('update:modelValue', v)\n\t\t\temit('on-change', v)\n\t\t}\n\t})\n\tconst toolbarConfigT = computed(() =>\n\t\tObject.assign(\n\t\t\t{\n\t\t\t\tplaceholder: props.placeholder || t('r.pInput'),\n\t\t\t\tinsertKeys: {\n\t\t\t\t\tindex: 31,\n\t\t\t\t\tkeys: ['previewX']\n\t\t\t\t}\n\t\t\t},\n\t\t\tprops.toolbarConfig\n\t\t)\n\t)\n\tconst editorConfigT = computed(() =>\n\t\tObject.assign(\n\t\t\t{\n\t\t\t\treadOnly: props.disabled,\n\t\t\t\tMENU_CONF: {\n\t\t\t\t\tuploadImage: {\n\t\t\t\t\t\tasync customUpload(file: any, insertFn: any) {\n\t\t\t\t\t\t\t// file 是 input 中选中的文件列表\n\t\t\t\t\t\t\t// insertFn 是获取图片 url 后，插入到编辑器的方法\n\t\t\t\t\t\t\t// 自己实现上传，并得到图片 url alt href\n\t\t\t\t\t\t\tlet temp = new FormData()\n\t\t\t\t\t\t\ttemp.append('files', file)\n\t\t\t\t\t\t\tconst n = file.name\n\t\t\t\t\t\t\tconst u = props.imgUploadUrl ?? '/node-serve/file'\n\t\t\t\t\t\t\t$fetch\n\t\t\t\t\t\t\t\t.post(u, temp, null, [], {\n\t\t\t\t\t\t\t\t\tspin: true,\n\t\t\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\t\t'Content-Type': 'multipart/form-data'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.then((r: any) => {\n\t\t\t\t\t\t\t\t\tif (r && r.data) {\n\t\t\t\t\t\t\t\t\t\tif (Array.isArray(r.data)) {\n\t\t\t\t\t\t\t\t\t\t\tfor (let e of r.data) {\n\t\t\t\t\t\t\t\t\t\t\t\tconst url = u + '/' + e?.id + '/download'\n\t\t\t\t\t\t\t\t\t\t\t\t// 上传图片，返回结果，将图片插入到编辑器中\n\t\t\t\t\t\t\t\t\t\t\t\tinsertFn(url, n, url)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tconst url = u + '/' + r.data.id + '/download'\n\t\t\t\t\t\t\t\t\t\t\t// 上传图片，返回结果，将图片插入到编辑器中\n\t\t\t\t\t\t\t\t\t\t\tinsertFn(url, n, url)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\t\t\t$swal(t('r.uploadFail'), '', 'error')\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tuploadVideo: {\n\t\t\t\t\t\tasync customUpload(file: any, insertFn: any) {\n\t\t\t\t\t\t\t// file 即选中的文件\n\t\t\t\t\t\t\t// insertFn 是获取视频 url 后，插入到编辑器的方法\n\t\t\t\t\t\t\t// 自己实现上传，并得到视频 url poster(封面地址,可选)\n\t\t\t\t\t\t\tlet temp = new FormData()\n\t\t\t\t\t\t\ttemp.append('files', file)\n\t\t\t\t\t\t\tconst u = props.videoUploadUrl ?? '/node-serve/file'\n\t\t\t\t\t\t\t$fetch\n\t\t\t\t\t\t\t\t.post(u, temp, null, [], {\n\t\t\t\t\t\t\t\t\tspin: true,\n\t\t\t\t\t\t\t\t\theaders: {\n\t\t\t\t\t\t\t\t\t\t'Content-Type': 'multipart/form-data'\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.then((r: any) => {\n\t\t\t\t\t\t\t\t\tif (r && r.data) {\n\t\t\t\t\t\t\t\t\t\tif (Array.isArray(r.data)) {\n\t\t\t\t\t\t\t\t\t\t\tfor (let e of r.data) {\n\t\t\t\t\t\t\t\t\t\t\t\tconst url = u + '/' + e?.id + '/download'\n\t\t\t\t\t\t\t\t\t\t\t\t// 最后插入视频\n\t\t\t\t\t\t\t\t\t\t\t\tinsertFn(url)\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tconst url = u + '/' + r.data.id + '/download'\n\t\t\t\t\t\t\t\t\t\t\t// 最后插入视频\n\t\t\t\t\t\t\t\t\t\t\tinsertFn(url)\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t.catch(() => {\n\t\t\t\t\t\t\t\t\t$swal(t('r.uploadFail'), '', 'error')\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\tprops.editorConfig\n\t\t)\n\t)\n\tconst editorTextareaStyle = computed(() => ({\n\t\theight: typeof props.height === 'number' ? props.height + 'px' : props.height\n\t}))\n\n\tfunction onCreated(d: any) {\n\t\t_editor.value = d\n\t}\n\n\twatch(\n\t\t() => props.disabled,\n\t\t(a: any) => {\n\t\t\tif (a) {\n\t\t\t\t_editor.value.disable()\n\t\t\t} else {\n\t\t\t\t_editor.value.enable()\n\t\t\t}\n\t\t}\n\t)\n\n\tonBeforeUnmount(() => {\n\t\tif (!_editor.value) {\n\t\t\treturn\n\t\t}\n\t\t_editor.value.destroy()\n\t})\n</script>\n\n<template>\n\t<div class=\"editor-pro-root\">\n\t\t<Toolbar\n\t\t\tclass=\"editor-pro-toolbar\"\n\t\t\t:editor=\"_editor\"\n\t\t\t:defaultConfig=\"toolbarConfigT\"\n\t\t\t:mode=\"mode\"\n\t\t\tv-show=\"!disabled\"\n\t\t/>\n\t\t<Editor\n\t\t\tclass=\"editor-pro-editor\"\n\t\t\tv-model=\"valueT\"\n\t\t\t:defaultConfig=\"editorConfigT\"\n\t\t\t:mode=\"mode\"\n\t\t\t@onCreated=\"onCreated\"\n\t\t\t:style=\"editorTextareaStyle\"\n\t\t/>\n\t</div>\n</template>\n","<!--ItemR 表单项组件\n@created 2023.08.21\n@author Ricky email:zhangqingcq@foxmail.com-->\n<script lang=\"ts\" setup>\n\timport t from '../../locale/i18nSFC'\n\timport SelectInput from '../SelectInput/SelectInput.vue'\n\timport AlCascaderMC from '../AlCascaderMC/AlCascaderMC.vue'\n\timport AsyncCascader from '../AsyncCascader/AsyncCascader.vue'\n\timport UploadGroup from '../UploadGroup/UploadGroup.vue'\n\timport EditorPro from '../EditorPro/EditorPro.vue'\n\timport InputMap from '../InputMap/InputMap.vue'\n\timport MonthRange from '../MonthRange/MonthRange.vue'\n\timport Date from '../Date/Date.vue'\n\n\tconst emit = defineEmits([\n\t\t'item-change',\n\t\t're-validate',\n\t\t'select-input-change',\n\t\t'al-name-change',\n\t\t'async-label-change'\n\t])\n\tconst props = defineProps<{\n\t\titem: any\n\t\titemStyle: Record<string, any>\n\t\tvalGroup: Record<string, any>\n\t\ttempKeys: Record<string, any>\n\t\tinline: boolean\n\t\tdisabled: boolean\n\t\tlabelWidth: number\n\t\titemWidth: number\n\t\tmgrUrl: string\n\t\tuploadUrl: string\n\t}>()\n\n\tconst selectContentWidth = computed(() => {\n\t\tif (props.inline) {\n\t\t\treturn props.itemWidth\n\t\t} else {\n\t\t\tconst t = props.itemStyle?.width\n\t\t\tif (t) {\n\t\t\t\tif (t.indexOf('%') > -1) {\n\t\t\t\t\tconst p = Number(t.replace('%', ''))\n\t\t\t\t\tif (window.isNaN(p)) {\n\t\t\t\t\t\treturn `calc(100% - ${props.labelWidth}px)`\n\t\t\t\t\t}\n\t\t\t\t\treturn `calc((100% - ${props.labelWidth}px)*${p / 100})`\n\t\t\t\t} else if (t.indexOf('px') > -1) {\n\t\t\t\t\treturn t\n\t\t\t\t}\n\t\t\t\treturn `calc(100% - ${props.labelWidth}px)`\n\t\t\t}\n\t\t\treturn `calc(100% - ${props.labelWidth}px)`\n\t\t}\n\t})\n\n\tfunction itemClass(root: any) {\n\t\treturn {\n\t\t\twithInfo: Boolean(root.info),\n\t\t\twithTitle: Boolean(root.title),\n\t\t\tinlineFormItemXN: props.inline,\n\t\t\tnoLabel: root.type === 'selectInput',\n\t\t\t[root.class]: root.class,\n\t\t\tslotInput: root.slotPosition\n\t\t}\n\t}\n\n\tfunction itemChange(e: any, root: any) {\n\t\temit('item-change', {\n\t\t\te,\n\t\t\troot\n\t\t})\n\t}\n\n\tfunction reValidateAndChangeHandle(e: any, root: any) {\n\t\temit('re-validate', {\n\t\t\te,\n\t\t\troot\n\t\t})\n\t}\n\n\tfunction onSelectInputChange(d: any) {\n\t\temit('select-input-change', d)\n\t}\n\n\tfunction alNameChange(name: any, root: any) {\n\t\temit('al-name-change', {\n\t\t\tname,\n\t\t\troot\n\t\t})\n\t}\n\n\tfunction asyncLabelChange(label: any, root: any) {\n\t\temit('async-label-change', {\n\t\t\tlabel,\n\t\t\troot\n\t\t})\n\t}\n</script>\n\n<template>\n\t<!--suppress HtmlExtraClosingTag -->\n\t<FormItem\n\t\tv-if=\"props.item\"\n\t\t:label=\"props.item.type !== 'radio' && props.item.type !== 'checkbox' ? props.item.label : ' '\"\n\t\t:prop=\"props.item.key || ''\"\n\t\tclass=\"relativeBox\"\n\t\t:class=\"itemClass(props.item)\"\n\t>\n\t\t<!--纯文本,也可以不传label和val,单纯用来布局占位-->\n\t\t<div\n\t\t\tv-if=\"props.item.type === 'txt'\"\n\t\t\t:style=\"props.itemStyle\"\n\t\t\tstyle=\"display: inline-block\"\n\t\t\t:class=\"{ likeInputX: props.item.likeInput, disabled: Boolean(props.item.disabled) || props.disabled }\"\n\t\t\t>{{ props.item.valKey ? props.valGroup[props.item.valKey] || '无' : props.item.val }}\n\t\t</div>\n\t\t<!--数字输入框-->\n\t\t<InputNumber\n\t\t\t:style=\"props.itemStyle\"\n\t\t\tv-else-if=\"props.item.type === 'inputNumber'\"\n\t\t\tv-model=\"props.tempKeys[props.item.tempKey]\"\n\t\t\t:max=\"props.item.max || props.item.max === 0 ? props.item.max : Infinity\"\n\t\t\t:min=\"props.item.min || props.item.min === 0 ? props.item.min : -Infinity\"\n\t\t\t:precision=\"props.item.precision\"\n\t\t\t:step=\"props.item.step || 1\"\n\t\t\t:placeholder=\"props.item.placeholder || t('r.pInput')\"\n\t\t\t:disabled=\"Boolean(props.item.disabled) || props.disabled\"\n\t\t\t:readonly=\"Boolean(props.item.readonly)\"\n\t\t\t:editable=\"props.item.editable !== false\"\n\t\t\t@on-blur=\"itemChange($event, props.item)\"\n\t\t\t:active-change=\"Boolean(props.item.activeChange)\"\n\t\t\t:clearable=\"props.item.clearable !== false\"\n\t\t/>\n\t\t<!--输入框-->\n\t\t<Input\n\t\t\t:style=\"itemStyle\"\n\t\t\tv-else-if=\"props.item.type === 'input'\"\n\t\t\tv-model=\"props.tempKeys[props.item.tempKey]\"\n\t\t\t:type=\"props.item.inputType ?? (props.item.password ? 'password' : 'text')\"\n\t\t\t:maxlength=\"props.item.maxLength || null\"\n\t\t\t:password=\"Boolean(props.item.password)\"\n\t\t\t:icon=\"props.item.icon\"\n\t\t\t:prefix=\"props.item.prefix\"\n\t\t\t:suffix=\"props.item.suffix\"\n\t\t\t:placeholder=\"props.item.placeholder || t('r.pInput')\"\n\t\t\t:disabled=\"Boolean(props.item.disabled) || props.disabled\"\n\t\t\t@on-blur=\"itemChange($event, props.item)\"\n\t\t\t:clearable=\"!props.item.password && props.item.inputType === 'text' && props.item.clearable !== false\"\n\t\t>\n\t\t\t<template v-if=\"props.item.slotPosition && props.item.slotName\" #[props.item.slotPosition]>\n\t\t\t\t<slot :name=\"props.item.slotName\" :valGroup=\"props.valGroup\" />\n\t\t\t</template>\n\t\t\t<template v-if=\"props.item.slotPosition !== 'prepend' && props.item.prepend\" #prepend>\n\t\t\t\t<span>{{ props.item.prepend }}</span>\n\t\t\t</template>\n\t\t\t<template v-if=\"props.item.slotPosition !== 'append' && props.item.append\" #append>\n\t\t\t\t<span>{{ props.item.append }}</span>\n\t\t\t</template>\n\t\t</Input>\n\t\t<!--下拉框-->\n\t\t<Select\n\t\t\tv-else-if=\"props.item.type === 'select'\"\n\t\t\tv-model=\"tempKeys[props.item.tempKey]\"\n\t\t\t:style=\"itemStyle\"\n\t\t\t:filterable=\"props.item.filterable === true || props.item.filterable === false ? props.item.filterable : false\"\n\t\t\t:disabled=\"Boolean(props.item.disabled) || props.disabled\"\n\t\t\t:multiple=\"Boolean(props.item.multiple)\"\n\t\t\t:placeholder=\"props.item.placeholder || t('r.pSelect')\"\n\t\t\t@on-change=\"itemChange($event, props.item)\"\n\t\t\ttransfer\n\t\t\t:clearable=\"props.item.clearable !== false\"\n\t\t>\n\t\t\t<Option\n\t\t\t\tv-for=\"(optionItem, i) in props.item.options\"\n\t\t\t\t:value=\"optionItem.val\"\n\t\t\t\t:label=\"optionItem.label || optionItem.val\"\n\t\t\t\t:key=\"'option-' + props.item.key + i\"\n\t\t\t\t:disabled=\"!!optionItem.disabled\"\n\t\t\t/>\n\t\t</Select>\n\t\t<!--选择输入框（可以选择输入的key，比如选择是想收集体重还是身高）-->\n\t\t<select-input\n\t\t\tv-else-if=\"props.item.type === 'selectInput'\"\n\t\t\tv-model=\"tempKeys[props.item.tempKey]\"\n\t\t\t:label-width=\"labelWidth\"\n\t\t\t:item-width=\"selectContentWidth\"\n\t\t\t:select-option=\"props.item.options || []\"\n\t\t\t:placeholder=\"props.item.placeholder || t('r.pInput')\"\n\t\t\t:clearable=\"props.item.clearable !== false\"\n\t\t\t:disabled=\"Boolean(props.item.disabled) || props.disabled\"\n\t\t\t@on-change=\"onSelectInputChange\"\n\t\t/>\n\t\t<!--行政区域级联-->\n\t\t<al-cascader-m-c\n\t\t\t:style=\"itemStyle\"\n\t\t\tclass=\"inlineBlock\"\n\t\t\tv-else-if=\"props.item.type === 'alCascader'\"\n\t\t\tv-model=\"props.valGroup[props.item.key]\"\n\t\t\t:level=\"props.item.level || props.item.level === 0 ? props.item.level : 2\"\n\t\t\t:disabled=\"Boolean(props.item.disabled) || props.disabled\"\n\t\t\t:filterable=\"props.item.filterable !== false\"\n\t\t\t:placeholder=\"props.item.placeholder || t('r.pSelect')\"\n\t\t\t:change-on-select=\"Boolean(props.item.changeOnSelect)\"\n\t\t\t@on-name-change=\"alNameChange($event, props.item)\"\n\t\t/>\n\t\t<!--远程数据级联-->\n\t\t<async-cascader\n\t\t\t:style=\"itemStyle\"\n\t\t\tv-else-if=\"props.item.type === 'asyncCascader'\"\n\t\t\tv-model=\"props.valGroup[props.item.key]\"\n\t\t\t:url=\"props.item.url || mgrUrl + '/web/v1/umc/orgs'\"\n\t\t\t:option-val=\"props.item.optionVal || 'id'\"\n\t\t\t:option-label=\"props.item.optionLabel || 'name'\"\n\t\t\t:option-filter=\"props.item.optionFilter || null\"\n\t\t\t:only-last-val=\"props.item.onlyLastVal !== false\"\n\t\t\t:only-last-label=\"props.item.onlyLastLabel !== false\"\n\t\t\t:separator=\"props.item.separator || '/'\"\n\t\t\t:placeholder=\"props.item.placeholder || t('r.pSelect')\"\n\t\t\t:filterable=\"Boolean(props.item.filterable)\"\n\t\t\t:disabled=\"Boolean(props.item.disabled) || props.disabled\"\n\t\t\t@on-label-change=\"asyncLabelChange($event, props.item)\"\n\t\t/>\n\t\t<!--单选（不可取消选择）-->\n\t\t<Radio\n\t\t\tv-else-if=\"props.item.type === 'radio'\"\n\t\t\tv-model=\"props.valGroup[props.item.key]\"\n\t\t\t:disabled=\"Boolean(props.item.disabled) || props.disabled\"\n\t\t\t@on-change=\"itemChange($event, props.item)\"\n\t\t\t>{{ props.item.label }}</Radio\n\t\t>\n\t\t<!--单选组-->\n\t\t<RadioGroup\n\t\t\t:style=\"itemStyle\"\n\t\t\tv-else-if=\"props.item.type === 'radioGroup'\"\n\t\t\t@on-change=\"reValidateAndChangeHandle($event, props.item)\"\n\t\t\t:type=\"props.item.buttonType ? 'button' : null\"\n\t\t\tv-model=\"tempKeys[props.item.tempKey]\"\n\t\t>\n\t\t\t<Radio\n\t\t\t\tv-for=\"radioItem of props.item.options\"\n\t\t\t\t:key=\"'radioItem' + radioItem.val\"\n\t\t\t\t:label=\"radioItem.val\"\n\t\t\t\t:border=\"Boolean(props.item.itemBorder)\"\n\t\t\t\t:disabled=\"Boolean(props.item.disabled) || props.disabled || radioItem.disabled\"\n\t\t\t>\n\t\t\t\t<Icon v-if=\"radioItem.icon && !props.item.buttonType\" :type=\"radioItem.icon\" />\n\t\t\t\t<span>{{ radioItem.label || radioItem.val }}</span>\n\t\t\t</Radio>\n\t\t</RadioGroup>\n\t\t<!--单选（可取消选择）-->\n\t\t<Checkbox\n\t\t\tv-else-if=\"props.item.type === 'checkbox'\"\n\t\t\tv-model=\"props.valGroup[props.item.key]\"\n\t\t\t:disabled=\"!!props.item.disabled\"\n\t\t\t@on-change=\"itemChange($event, props.item)\"\n\t\t\t>{{ props.item.label }}</Checkbox\n\t\t>\n\t\t<!--多选组-->\n\t\t<CheckboxGroup\n\t\t\t:style=\"itemStyle\"\n\t\t\tv-else-if=\"props.item.type === 'checkboxGroup'\"\n\t\t\tv-model=\"tempKeys[props.item.tempKey]\"\n\t\t\t@on-change=\"reValidateAndChangeHandle($event, props.item)\"\n\t\t>\n\t\t\t<Checkbox\n\t\t\t\tv-for=\"checkItem of props.item.options\"\n\t\t\t\t:key=\"'checkItem' + checkItem.val\"\n\t\t\t\t:label=\"checkItem.val\"\n\t\t\t\t:disabled=\"Boolean(props.item.disabled) || props.disabled || checkItem.disabled\"\n\t\t\t>\n\t\t\t\t<Icon v-if=\"checkItem.icon\" :type=\"checkItem.icon\" />\n\t\t\t\t<span>{{ checkItem.label || checkItem.val }}</span>\n\t\t\t</Checkbox>\n\t\t</CheckboxGroup>\n\t\t<!--文本框-->\n\t\t<!--suppress HtmlWrongAttributeValue -->\n\t\t<Input\n\t\t\tv-else-if=\"props.item.type === 'textarea'\"\n\t\t\ttype=\"textarea\"\n\t\t\tv-model=\"tempKeys[props.item.tempKey]\"\n\t\t\t:autosize=\"props.item.autosize || { minRows: 2 }\"\n\t\t\t:style=\"itemStyle\"\n\t\t\t:maxlength=\"props.item.maxLength || null\"\n\t\t\t:show-word-limit=\"Boolean(props.item.showWordLimit)\"\n\t\t\t:placeholder=\"props.item.placeholder || t('r.pInput')\"\n\t\t\t:disabled=\"Boolean(props.item.disabled) || props.disabled\"\n\t\t\t@on-blur=\"itemChange($event, props.item)\"\n\t\t\t:clearable=\"props.item.clearable !== false\"\n\t\t/>\n\t\t<!--上传组件-->\n\t\t<upload-group\n\t\t\t:style=\"itemStyle\"\n\t\t\tclass=\"inlineBlock\"\n\t\t\tv-else-if=\"props.item.type === 'upload'\"\n\t\t\tv-model=\"props.valGroup[props.item.key]\"\n\t\t\t:url=\"props.item.url || uploadUrl\"\n\t\t\t:manual-upload=\"Boolean(props.item.manualUpload)\"\n\t\t\t:format=\"props.item.format || []\"\n\t\t\t:data=\"props.item.data\"\n\t\t\t:max-size=\"props.item.maxSize || 0\"\n\t\t\t:show-img=\"Boolean(props.item.showImg)\"\n\t\t\t:length=\"props.item.length || 0\"\n\t\t\t:disabled=\"Boolean(props.item.disabled) || props.disabled\"\n\t\t\t:with-credentials=\"props.item.withCredentials !== false\"\n\t\t\t@on-file-id-change=\"reValidateAndChangeHandle($event, props.item)\"\n\t\t/>\n\t\t<!--日期选择器-->\n\t\t<Date\n\t\t\t:style=\"itemStyle\"\n\t\t\tv-else-if=\"props.item.type === 'date'\"\n\t\t\tv-model=\"tempKeys[props.item.tempKey]\"\n\t\t\t:type=\"props.item.dateType\"\n\t\t\t:disabled=\"Boolean(props.item.disabled) || props.disabled\"\n\t\t\t:placeholder=\"props.item.placeholder || t('r.selectDate')\"\n\t\t\t:options=\"props.item.dateOptions || {}\"\n\t\t\t:time-picker-options=\"item.timePickerOptions || {}\"\n\t\t\t:clearable=\"props.item.clearable !== false\"\n\t\t\t@on-change=\"itemChange($event, props.item)\"\n\t\t/>\n\t\t<!--时间选择器-->\n\t\t<TimePicker\n\t\t\t:style=\"itemStyle\"\n\t\t\tv-else-if=\"props.item.type === 'time'\"\n\t\t\tv-model=\"tempKeys[props.item.tempKey]\"\n\t\t\t:type=\"props.item.dateType\"\n\t\t\t:disabled=\"Boolean(props.item.disabled) || props.disabled\"\n\t\t\tplacement=\"bottom-end\"\n\t\t\t:placeholder=\"props.item.placeholder || t('r.selectTime')\"\n\t\t\t:steps=\"props.item.steps || []\"\n\t\t\t:clearable=\"props.item.clearable !== false\"\n\t\t\t:editable=\"false\"\n\t\t\t:format=\"props.item.format || 'HH:mm:ss'\"\n\t\t\ttransfer\n\t\t\t@on-change=\"itemChange($event, props.item)\"\n\t\t/>\n\t\t<!--月份区间选择-->\n\t\t<month-range\n\t\t\t:style=\"itemStyle\"\n\t\t\tv-else-if=\"props.item.type === 'monthRange'\"\n\t\t\tv-model=\"tempKeys[props.item.tempKey]\"\n\t\t\t:disabled=\"Boolean(props.item.disabled) || props.disabled\"\n\t\t\tplacement=\"bottom-end\"\n\t\t\t:placeholder=\"props.item.placeholder || t('r.selectDate')\"\n\t\t\t:options1=\"props.item.dateOptions1 || null\"\n\t\t\t:options2=\"props.item.dateOptions2 || null\"\n\t\t\t@on-change=\"itemChange($event, props.item)\"\n\t\t/>\n\t\t<!--富文本编辑器Pro-->\n\t\t<editor-pro\n\t\t\tclass=\"inlineBlock\"\n\t\t\t:style=\"itemStyle\"\n\t\t\tv-else-if=\"props.item.type === 'editorPro'\"\n\t\t\tv-model=\"props.valGroup[props.item.key]\"\n\t\t\t:placeholder=\"props.item.placeholder || t('r.pInput')\"\n\t\t\t:disabled=\"Boolean(props.item.disabled) || props.disabled\"\n\t\t\t:toolbar-config=\"props.item.toolbarConfig || {}\"\n\t\t\t:editor-config=\"props.item.editorConfig || {}\"\n\t\t\t:mode=\"props.item.mode || 'simple'\"\n\t\t\t:height=\"props.item.height || 300\"\n\t\t\t@input=\"itemChange($event, props.item)\"\n\t\t/>\n\t\t<input-map\n\t\t\tv-else-if=\"props.item.type === 'inputMap'\"\n\t\t\tv-model=\"tempKeys[props.item.tempKey]\"\n\t\t\t:style=\"itemStyle\"\n\t\t\t:placeholder=\"props.item.placeholder || t('r.search')\"\n\t\t\t:disabled=\"Boolean(props.item.disabled) || props.disabled\"\n\t\t\t:show-map=\"props.item.showMap !== false\"\n\t\t\t:height=\"props.item.mapHeight || '250px'\"\n\t\t\t@on-change=\"itemChange($event, props.item)\"\n\t\t/>\n\t\t<div v-else-if=\"props.item.type === 'custom'\" class=\"inlineBlock\" :style=\"itemStyle\">\n\t\t\t<slot :name=\"props.item.slotName\" :val-group=\"props.valGroup\" />\n\t\t</div>\n\t\t<!--表单项提示文字-->\n\t\t<div v-if=\"Boolean(props.item.info)\" class=\"formInfoTxtXN\">{{ props.item.info }}</div>\n\t\t<!--表单项标题-->\n\t\t<div v-if=\"Boolean(props.item.title)\" class=\"formTitleTxtXN\">{{ props.item.title }}</div>\n\t\t<!--给验证信息和表单内容间增加间隙-->\n\t\t<span v-if=\"!props.inline\" style=\"display: inline-block; width: 4px\"></span>\n\t</FormItem>\n</template>\n","<!--FormR 表单组件，支持formData属性定义结构，formRules定义规则，submit方法提交收集到的数据\n@created 2023.08.18\n@author Ricky email:zhangqingcq@foxmail.com-->\n\n<script lang=\"ts\" setup>\n\timport { cloneDeep, remove, isEmpty, findIndex } from 'lodash-es'\n\timport moment from 'moment'\n\timport t from '../../locale/i18nSFC'\n\timport { setValue, myTypeof, isValidValue, trimObj, findCollection } from '../../utils/globalFunc'\n\timport $fetch from '../../utils/fetch'\n\timport { setTimeout } from '../../utils/timer'\n\timport type { FormItem } from '../../public'\n\timport ItemR from './ItemR.vue'\n\n\tconst emit = defineEmits(['on-item-change', 'on-options-request-back', 'on-reset', 'on-re-render', 'on-submit'])\n\tconst props = withDefaults(\n\t\tdefineProps<{\n\t\t\tformData?: Array<FormItem | FormItem[]> /*表单结构数据*/\n\t\t\tformRules?: Record<string, any> /*表单结构规则*/\n\t\t\tshowMessage?: boolean /*显示校验信息*/\n\t\t\tlabelWidth?: number /*表单项标签宽度*/\n\t\t\tcontentWidth?: string /*表单项内容宽度，默认70%*/\n\t\t\titemWidth?: number /*表单项内容宽度,用于行内表单*/\n\t\t\tinline?: boolean /*行内表单*/\n\t\t\tshowLongOkBt?: boolean /*是否展示长确定按钮*/\n\t\t\tlongOkBtTxt?: string /*长确定按钮内容*/\n\t\t\tshowInlineOkBt?: boolean /*是否展示行内短确定按钮*/\n\t\t\tinlineOkBtTxt?: string /*短确定按钮内容*/\n\t\t\tshowInlineClearBt?: boolean /*是否展示行内短清空按钮*/\n\t\t\tinlineClearBtTxt?: string /*短清空按钮内容*/\n\t\t\tdisabled?: boolean /*全表禁用，仅展示*/\n\t\t\tbtnLoading?: boolean /*提交按钮显示loading*/\n\t\t\ttrim?: boolean /*是否去除提交数据中的字符串首尾空格*/\n\t\t\tteamClass?: string /*分组表单-组容器class*/\n\t\t}>(),\n\t\t{\n\t\t\tformData: () => [],\n\t\t\tformRules: () => ({}),\n\t\t\tshowMessage: true,\n\t\t\tlabelWidth: 160,\n\t\t\tcontentWidth: '70%',\n\t\t\titemWidth: 200,\n\t\t\tinline: false,\n\t\t\tshowLongOkBt: false,\n\t\t\tshowInlineOkBt: false,\n\t\t\tshowInlineClearBt: false,\n\t\t\tdisabled: false,\n\t\t\tbtnLoading: false,\n\t\t\ttrim: true,\n\t\t\tteamClass: 'formTeamBox'\n\t\t}\n\t)\n\tconst formGroupXRef = ref<any>(null)\n\n\tconst valGroup = ref<Record<string, any>>({}) /*表单项值，对外公开，提交时传递到外层*/\n\tconst formDataT = ref<any>([]) /*表单结构数据*/\n\tconst tempKeys = ref<Record<string, any>>({}) /*不对外暴露表单项值*/\n\tlet watchGroup: any[] = []\n\tconst mgrUrl = window?.g?.mgrURL ?? ''\n\t/*selectInput的key没有写死在formData中（因为是动态的）,为了在showingKeys中能捕捉到这类组件的key,特声明此变量*/\n\tlet selectInputKeys: string[] = []\n\tlet hiddenKeys: string[] = []\n\tconst showLoading = ref(false)\n\tconst formReRenderKey = ref<number>(Math.random() * 100000000 + 1000) /*刷新表单*/\n\t/*上传组件的文件上传地址，远程上传（直接上传到服务器）时，如果没设置，则用该地址*/\n\tconst uploadUrl = window?.g?.mgrURL ? window.g.mgrURL + '/web/v1/fsc/file' : '/file'\n\tlet debounceCount = false\n\n\tconst formTeam = computed<boolean>(() => Array.isArray(props.formData.length ? props.formData[0] : false))\n\tconst formStyle = computed<Record<string, any>>(() =>\n\t\tprops.inline\n\t\t\t? {\n\t\t\t\t\twidth: props.itemWidth + props.labelWidth + 'px'\n\t\t\t\t}\n\t\t\t: {}\n\t)\n\tconst itemStyle = computed<Record<string, any>>(() =>\n\t\tprops.inline\n\t\t\t? {\n\t\t\t\t\twidth: '100%'\n\t\t\t\t}\n\t\t\t: { width: props.contentWidth }\n\t)\n\t/*计算表单规则*/\n\tconst formRulesT = computed<Record<string, any>>(() => {\n\t\tlet tr = cloneDeep(props.formRules)\n\t\tfor (let k in tr) {\n\t\t\tif (tr.hasOwnProperty(k)) {\n\t\t\t\tif (Array.isArray(tr[k])) {\n\t\t\t\t\tfor (let e of tr[k]) {\n\t\t\t\t\t\tif (!e) {\n\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (e && !(e.message || e.validator)) {\n\t\t\t\t\t\t\te.message = t('r.required')\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t} else if (myTypeof(tr[k]) === 'Object') {\n\t\t\t\t\tif (!(tr[k].message || tr[k].validator)) {\n\t\t\t\t\t\ttr[k].message = t('r.required')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn tr\n\t})\n\t/*展示的key(需要提交的)*/\n\tconst submitKeys = computed<string[]>(() => {\n\t\tlet t: string[] = []\n\t\tif (formTeam.value) {\n\t\t\tfor (let e of formDataT.value) {\n\t\t\t\tsubmitItems(e as FormItem[], t)\n\t\t\t}\n\t\t} else {\n\t\t\tsubmitItems(formDataT.value as FormItem[], t)\n\t\t}\n\t\treturn t.concat(selectInputKeys, hiddenKeys)\n\t})\n\tconst showingKeys = computed<string[]>(() => {\n\t\tlet t: any[] = []\n\t\tif (formTeam.value) {\n\t\t\tfor (let e of formDataT.value) {\n\t\t\t\tshowingItems(e as FormItem[], t)\n\t\t\t}\n\t\t} else {\n\t\t\tshowingItems(formDataT.value as FormItem[], t)\n\t\t}\n\t\treturn t\n\t})\n\n\tfunction getSlotFormData(d: any[]) {\n\t\t/*私有，获取插槽数据*/\n\t\treturn d.filter((e: Record<string, any>) => e?.slotName)\n\t}\n\n\t/**\n\t * 计算需要提交的key\n\t * @param d 表单结构数据\n\t * @param t 储存需要提交的key的对象\n\t */\n\tfunction submitItems(d: FormItem[], t: string[]) {\n\t\tfor (let root of d) {\n\t\t\tif (root?.showing === true && root.key && root.type !== 'selectInput') {\n\t\t\t\tt.push(root.key)\n\t\t\t\tif (root.key2) {\n\t\t\t\t\tt.push(root.key2)\n\t\t\t\t}\n\t\t\t\tif (root.collectLabel) {\n\t\t\t\t\tif (!Array.isArray(root.collectLabel) && root.collectLabel.key) {\n\t\t\t\t\t\tt.push(root.collectLabel.key)\n\t\t\t\t\t} else if (Array.isArray(root.collectLabel)) {\n\t\t\t\t\t\tfor (let l of root.collectLabel) {\n\t\t\t\t\t\t\tif (l.key) {\n\t\t\t\t\t\t\t\tt.push(l.key)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * 计算需要展示的key\n\t * @param d 表单结构数据\n\t * @param t 储存需要展示的key的对象\n\t */\n\tfunction showingItems(d: FormItem[], t: string[]) {\n\t\tfor (let root of d) {\n\t\t\tif (root?.showing === true && root.key && root.type !== 'selectInput') {\n\t\t\t\tt.push(root.key)\n\t\t\t}\n\t\t}\n\t}\n\n\t/*重置表单，会清空表单值并刷新表单dom，异步方法（公开）*/\n\tfunction resetForm() {\n\t\treturn new Promise((r) => {\n\t\t\tclearForm()\n\t\t\trefreshFormDom().then(() => {\n\t\t\t\temit('on-reset')\n\t\t\t\tr(true)\n\t\t\t})\n\t\t})\n\t}\n\n\t/*重新渲染表单，异步方法（公开）*/\n\tfunction reRenderForm() {\n\t\treturn new Promise((r) => {\n\t\t\tfor (let f of watchGroup) {\n\t\t\t\tf()\n\t\t\t}\n\t\t\twatchGroup = []\n\t\t\ttempKeys.value = {}\n\t\t\tinitValGroup()\n\t\t\tinitFormDataT()\n\n\t\t\trefreshFormDom().then(() => {\n\t\t\t\temit('on-re-render')\n\t\t\t\tr(true)\n\t\t\t})\n\t\t})\n\t}\n\n\t/*刷新表单dom，异步方法（公开）*/\n\tfunction refreshFormDom() {\n\t\treturn new Promise((r) => {\n\t\t\tformReRenderKey.value = Math.floor(Math.random() * 100000000 + 1000)\n\t\t\t/*刷新表单*/\n\t\t\tnextTick(function () {\n\t\t\t\tr(true)\n\t\t\t})\n\t\t})\n\t}\n\n\t/*清空表单值（私有，不推荐直接调用，可以调用resetForm）*/\n\tfunction clearForm() {\n\t\tlet defaultV = getDefaultValues()\n\n\t\tfor (let k in valGroup.value) {\n\t\t\tif (valGroup.value.hasOwnProperty(k)) {\n\t\t\t\tif (isValidValue(defaultV[k])) {\n\t\t\t\t\tvalGroup.value[k] = defaultV[k]\n\t\t\t\t} else {\n\t\t\t\t\tif (Array.isArray(valGroup.value[k])) {\n\t\t\t\t\t\tvalGroup.value[k] = []\n\t\t\t\t\t} else if (myTypeof(valGroup.value[k]) === 'Boolean') {\n\t\t\t\t\t\tvalGroup.value[k] = false\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst formItem = findCollection(props.formData, (e) => e?.key === k)\n\t\t\t\t\t\tif (formItem && (formItem.type === 'editor' || formItem.type === 'editorPro')) {\n\t\t\t\t\t\t\tvalGroup.value[k] = ''\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvalGroup.value[k] = null\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tclearTempKeys(defaultV)\n\t}\n\n\t/*清空缓存表单值（私有，不推荐直接调用，可以调用resetForm）*/\n\tfunction clearTempKeys(defaultV: Record<string, any>) {\n\t\tfor (let k in tempKeys.value) {\n\t\t\tif (tempKeys.value.hasOwnProperty(k)) {\n\t\t\t\tif (isValidValue(defaultV[k])) {\n\t\t\t\t\ttempKeys.value[k] = defaultV[k]\n\t\t\t\t} else {\n\t\t\t\t\tif (Array.isArray(tempKeys.value[k])) {\n\t\t\t\t\t\ttempKeys.value[k] = []\n\t\t\t\t\t} else if (\n\t\t\t\t\t\tmyTypeof(tempKeys.value[k]) === 'Object' &&\n\t\t\t\t\t\ttempKeys.value[k].hasOwnProperty('key') &&\n\t\t\t\t\t\ttempKeys.value[k].hasOwnProperty('val')\n\t\t\t\t\t) {\n\t\t\t\t\t\t/*selectInput*/\n\t\t\t\t\t\ttempKeys.value[k].val = null\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttempKeys.value[k] = null\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/*清空缓存表单项值（私有）*/\n\tfunction clearTempKeyItem(k: string) {\n\t\tlet defaultV = getDefaultValues()\n\t\tif (isValidValue(defaultV[k])) {\n\t\t\ttempKeys.value[k] = defaultV[k]\n\t\t} else {\n\t\t\tif (Array.isArray(tempKeys.value[k])) {\n\t\t\t\ttempKeys.value[k] = []\n\t\t\t} else {\n\t\t\t\ttempKeys.value[k] = null\n\t\t\t}\n\t\t}\n\t}\n\n\t/*获取默认值（私有）*/\n\tfunction getDefaultValues(): Record<string, any> {\n\t\tlet t: Record<string, any> = {}\n\t\tif (formTeam.value) {\n\t\t\tfor (let e of formDataT.value) {\n\t\t\t\tdefaultValItems(e as FormItem[], t)\n\t\t\t}\n\t\t} else {\n\t\t\tdefaultValItems(formDataT.value as FormItem[], t)\n\t\t}\n\t\treturn t\n\t}\n\n\t/**\n\t * 从表单结构数据获取默认值(私有)\n\t * @param d 表单结构数据\n\t * @param a 储存默认值的对象\n\t */\n\tfunction defaultValItems(d: FormItem[], a: Record<string, any>) {\n\t\tfor (let root of d) {\n\t\t\tif (root.tempKey && isValidValue(root.defaultVal)) {\n\t\t\t\t/*将默认值转换为表单项绑定值对应的格式*/\n\t\t\t\tgetTempKeyDefaultVal(root, a)\n\t\t\t}\n\t\t\tif (root.key && isValidValue(root.defaultVal)) {\n\t\t\t\ta[root.key] = root.defaultVal\n\t\t\t}\n\t\t\tif (root.key2 && isValidValue(root.defaultVal2)) {\n\t\t\t\ta[root.key2] = root.defaultVal2\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * 判断是否展示表单项（私有，高频被调用方法，每次表单中有任何值更改，都会被调用formDataT的长度<formDataT.length>次，而且还可能触发连锁反应）\n\t * @param root 表单项结构数据\n\t */\n\tfunction getFormItemIfVal(root: FormItem) {\n\t\tif (root.show) {\n\t\t\tif (myTypeof(root.show) === 'Object') {\n\t\t\t\treturn returnIfVal(root, dealIfItem(root.show))\n\t\t\t} else if (Array.isArray(root.show)) {\n\t\t\t\tif (root.showOr) {\n\t\t\t\t\tfor (let x of root.show) {\n\t\t\t\t\t\tif (dealIfItem(x) === true) {\n\t\t\t\t\t\t\treturn returnIfVal(root, true)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn returnIfVal(root, false)\n\t\t\t\t} else {\n\t\t\t\t\tfor (let x of root.show) {\n\t\t\t\t\t\tif (dealIfItem(x) === false) {\n\t\t\t\t\t\t\treturn returnIfVal(root, false)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn returnIfVal(root, true)\n\t\t\t\t}\n\t\t\t} else if (typeof root.show === 'function') {\n\t\t\t\treturn returnIfVal(root, root.show(valGroup.value))\n\t\t\t}\n\t\t} else if (!root.showing) {\n\t\t\troot.showing = true\n\t\t}\n\t\treturn true\n\t}\n\n\t/**\n\t * 判断表单项是否展示（私有）\n\t * @param show 表单项的展示配置数据\n\t */\n\tfunction dealIfItem(show: Record<string, any>) {\n\t\tif (show.reg && typeof show.reg.test === 'function') {\n\t\t\treturn show.reg.test(valGroup.value[show.key])\n\t\t} else if (Array.isArray(show.val)) {\n\t\t\tfor (let v of show.val) {\n\t\t\t\tif (\n\t\t\t\t\t(valGroup.value[show.key] || valGroup.value[show.key] === 0 || valGroup.value[show.key] === false) &&\n\t\t\t\t\tv === '.'\n\t\t\t\t) {\n\t\t\t\t\t/*只要控制项有值及展示*/\n\t\t\t\t\treturn true\n\t\t\t\t} else if (valGroup.value[show.key] === v) {\n\t\t\t\t\treturn true\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false\n\t\t} else {\n\t\t\treturn false\n\t\t}\n\t}\n\n\t/**\n\t * 将是否展示的结果写入表单结构对象，同时处理默认值相关逻辑（私有）\n\t * @param root 表单项结构数据\n\t * @param {boolean} val 是否展示的结果\n\t */\n\tfunction returnIfVal(root: FormItem, val: boolean) {\n\t\tif (!root?.showing && val && root?.key) {\n\t\t\troot.showing = val\n\n\t\t\tif (root.defaultVal !== undefined) {\n\t\t\t\t/*对之前没展示且没值的表单项赋默认值*/\n\t\t\t\tif (root.tempKey) {\n\t\t\t\t\tif (\n\t\t\t\t\t\ttempKeys.value[root.tempKey] === null ||\n\t\t\t\t\t\ttempKeys.value[root.tempKey] === undefined ||\n\t\t\t\t\t\t((myTypeof(tempKeys.value[root.tempKey]) === 'Object' || Array.isArray(tempKeys.value[root.tempKey])) &&\n\t\t\t\t\t\t\tisEmpty(tempKeys.value[root.tempKey]))\n\t\t\t\t\t) {\n\t\t\t\t\t\tgetTempKeyDefaultVal(root, tempKeys.value)\n\t\t\t\t\t}\n\t\t\t\t} else if (valGroup.value[root.key] === null || valGroup.value[root.key] === undefined) {\n\t\t\t\t\tvalGroup.value[root.key] = root.defaultVal\n\t\t\t\t}\n\t\t\t\tif (\n\t\t\t\t\troot.key2 &&\n\t\t\t\t\troot.deafultVal2 !== undefined &&\n\t\t\t\t\t(valGroup.value[root.key2] === null || valGroup.value[root.key2] === undefined) &&\n\t\t\t\t\troot.type !== 'inputMap'\n\t\t\t\t) {\n\t\t\t\t\tvalGroup.value[root.key2] = root.defaultVal2\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (root.tempKey) {\n\t\t\t\t/*在隐藏表单项展示时把它的值赋给统计对象*/\n\t\t\t\ttempKeysWatchHandle(tempKeys.value[root.tempKey], root)\n\t\t\t}\n\t\t} else {\n\t\t\troot.showing = val\n\t\t}\n\t\treturn val\n\t}\n\n\t/**\n\t * 将使用tempKey的表单项的默认值赋转换成对应格式并储存(私有)\n\t * @param root 表单项结构数据\n\t * @param a 储存默认值的容器\n\t */\n\tfunction getTempKeyDefaultVal(root: FormItem, a: Record<string, any>) {\n\t\tif (root?.type) {\n\t\t\tswitch (root.type) {\n\t\t\t\tcase 'selectInput':\n\t\t\t\t\ta[root.tempKey] = {\n\t\t\t\t\t\tkey: root.key,\n\t\t\t\t\t\tval: root.defaultVal\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t\tcase 'inputMap':\n\t\t\t\t\tif (root.key3) {\n\t\t\t\t\t\ta[root.tempKey] = {\n\t\t\t\t\t\t\tlng: root.defaultVal || 0,\n\t\t\t\t\t\t\tlat: root.defaultVal2 || 0,\n\t\t\t\t\t\t\tname: root.defaultVal3 || ''\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\ta[root.tempKey] = {\n\t\t\t\t\t\t\tlng: root.defaultVal || 0,\n\t\t\t\t\t\t\tlat: root.defaultVal2 || 0\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t\tcase 'input':\n\t\t\t\tcase 'inputNumber':\n\t\t\t\tcase 'textarea':\n\t\t\t\t\ta[root.tempKey] = root.defaultVal\n\t\t\t\t\tbreak\n\t\t\t\tcase 'radioGroup':\n\t\t\t\tcase 'select':\n\t\t\t\tcase 'checkboxGroup':\n\t\t\t\t\tif (root.booleanVal) {\n\t\t\t\t\t\ta[root.tempKey] = Boolean(root.defaultVal) ? 1 : 0\n\t\t\t\t\t} else {\n\t\t\t\t\t\ta[root.tempKey] = root.defaultVal\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t\tcase 'date':\n\t\t\t\tcase 'time':\n\t\t\t\tcase 'monthRange':\n\t\t\t\t\tif (\n\t\t\t\t\t\troot.dateType === 'date' ||\n\t\t\t\t\t\troot.dateType === 'datetime' ||\n\t\t\t\t\t\troot.dateType === 'time' ||\n\t\t\t\t\t\troot.dateType === 'year' ||\n\t\t\t\t\t\troot.dateType === 'month'\n\t\t\t\t\t) {\n\t\t\t\t\t\ta[root.tempKey] = root.defaultVal\n\t\t\t\t\t} else if (\n\t\t\t\t\t\troot.dateType === 'daterange' ||\n\t\t\t\t\t\troot.dateType === 'datetimerange' ||\n\t\t\t\t\t\troot.dateType === 'timerange' ||\n\t\t\t\t\t\troot.type === 'monthRange'\n\t\t\t\t\t) {\n\t\t\t\t\t\ta[root.tempKey] = (root.defaultVal && root.defaultVal2 && [root.defaultVal, root.defaultVal2]) || []\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n\n\t/*初始化表单结构（私有）*/\n\tfunction initFormDataT() {\n\t\tlet t = cloneDeep(props.formData)\n\t\tif (formTeam.value) {\n\t\t\tfor (let box of t) {\n\t\t\t\tinitItems(box as FormItem[])\n\t\t\t}\n\t\t} else {\n\t\t\tinitItems(t as FormItem[])\n\t\t}\n\t\tformDataT.value = t\n\t}\n\n\tfunction initItems(d: FormItem[]) {\n\t\tfor (let root of d) {\n\t\t\tif (root?.type) {\n\t\t\t\tswitch (root.type) {\n\t\t\t\t\tcase 'selectInput':\n\t\t\t\t\t\tconst tempKeyF = 'selectInput' + Math.floor(Math.random() * 100000000)\n\t\t\t\t\t\troot.tempKey = tempKeyF\n\t\t\t\t\t\ttempKeys.value[tempKeyF] = ref<Record<string, any>>({\n\t\t\t\t\t\t\tkey: root.key || null,\n\t\t\t\t\t\t\tval: root.defaultVal || null\n\t\t\t\t\t\t})\n\t\t\t\t\t\twatchGroup.push(\n\t\t\t\t\t\t\twatch(\n\t\t\t\t\t\t\t\t() => tempKeys.value[tempKeyF],\n\t\t\t\t\t\t\t\t(after) => {\n\t\t\t\t\t\t\t\t\ttempKeysWatchHandle(after, root)\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{ immediate: true }\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'inputMap':\n\t\t\t\t\t\tconst tempKeyE = 'inputMap' + Math.floor(Math.random() * 100000000)\n\t\t\t\t\t\tif (root.key) {\n\t\t\t\t\t\t\troot.tempKey = tempKeyE\n\t\t\t\t\t\t\tif (root.key3) {\n\t\t\t\t\t\t\t\ttempKeys.value[tempKeyE] =\n\t\t\t\t\t\t\t\t\troot.defaultVal !== undefined && root.defaultVal2 !== undefined\n\t\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\t\tlng: root.defaultVal,\n\t\t\t\t\t\t\t\t\t\t\t\tlat: root.defaultVal2,\n\t\t\t\t\t\t\t\t\t\t\t\tname: root.defaultVal3 || ''\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\t\t\tlng: null,\n\t\t\t\t\t\t\t\t\t\t\t\tlat: null,\n\t\t\t\t\t\t\t\t\t\t\t\tname: null\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttempKeys.value[tempKeyE] =\n\t\t\t\t\t\t\t\t\troot.defaultVal !== undefined && root.defaultVal2 !== undefined\n\t\t\t\t\t\t\t\t\t\t? {\n\t\t\t\t\t\t\t\t\t\t\t\tlng: root.defaultVal,\n\t\t\t\t\t\t\t\t\t\t\t\tlat: root.defaultVal2\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t: {\n\t\t\t\t\t\t\t\t\t\t\t\tlng: null,\n\t\t\t\t\t\t\t\t\t\t\t\tlat: null\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\twatchGroup.push(\n\t\t\t\t\t\t\t\twatch(\n\t\t\t\t\t\t\t\t\t() => tempKeys.value[tempKeyE],\n\t\t\t\t\t\t\t\t\t(after) => {\n\t\t\t\t\t\t\t\t\t\ttempKeysWatchHandle(after, root)\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{ immediate: true }\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'input':\n\t\t\t\t\tcase 'inputNumber':\n\t\t\t\t\tcase 'textarea':\n\t\t\t\t\t\tconst tempKeyD = 'inputT' + Math.floor(Math.random() * 100000000)\n\t\t\t\t\t\tif (root.key) {\n\t\t\t\t\t\t\troot.tempKey = tempKeyD\n\t\t\t\t\t\t\ttempKeys.value[tempKeyD] = root.defaultVal !== undefined ? root.defaultVal : null\n\t\t\t\t\t\t\twatchGroup.push(\n\t\t\t\t\t\t\t\twatch(\n\t\t\t\t\t\t\t\t\t() => tempKeys.value[tempKeyD],\n\t\t\t\t\t\t\t\t\t(after) => {\n\t\t\t\t\t\t\t\t\t\ttempKeysWatchHandle(after, root)\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{ immediate: true }\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'select':\n\t\t\t\t\tcase 'radioGroup':\n\t\t\t\t\tcase 'checkboxGroup':\n\t\t\t\t\t\tif (!root.options) {\n\t\t\t\t\t\t\troot.options = []\n\t\t\t\t\t\t}\n\t\t\t\t\t\t/*为checkboxGroup和radioGroup的options做响应式，因为它们和select不同，选项一开始就是展示出来的，大多数时候不会有机会主动重新渲染*/\n\t\t\t\t\t\tif (root.type === 'checkboxGroup' || root.type === 'radioGroup') {\n\t\t\t\t\t\t\troot.options = ref(cloneDeep(root.options))\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (root.asyncOption) {\n\t\t\t\t\t\t\t/*远程待选项*/\n\t\t\t\t\t\t\tif (root.changeOption) {\n\t\t\t\t\t\t\t\t/*待选项会根据条件改变*/\n\t\t\t\t\t\t\t\tif (Array.isArray(root.changeOption)) {\n\t\t\t\t\t\t\t\t\tlet go = true\n\t\t\t\t\t\t\t\t\tfor (let cp of root.changeOption) {\n\t\t\t\t\t\t\t\t\t\t/*检验changeOption参数是否可用*/\n\t\t\t\t\t\t\t\t\t\tif (!cp.valKey || !cp.key) {\n\t\t\t\t\t\t\t\t\t\t\tgo = false\n\t\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (go) {\n\t\t\t\t\t\t\t\t\t\twatchGroup.push(\n\t\t\t\t\t\t\t\t\t\t\twatch(\n\t\t\t\t\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet tUrl = ''\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (Array.isArray(root.changeOption)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tfor (let cp of root.changeOption) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet vT = valGroup.value[cp.valKey]\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(vT && !Array.isArray(vT)) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(Array.isArray(vT) && vT.length) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvT === 0 ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tvT === false\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/*如果条件有有效值，则拉取待选项*/\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttUrl += '&' + cp.key + '=' + vT\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else if (!cp.notRequired) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/*条件为必填（notRequired!==true,默认必填），且没有有效值，则不拉取待选项*/\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn tUrl\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t(after) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet tV = cloneDeep(tempKeys.value[root.tempKey])\n\t\t\t\t\t\t\t\t\t\t\t\t\ttempKeys.value[root.tempKey] = null\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (after && root.optionUrl) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet urlT = root.optionUrl.indexOf('?') !== -1 ? root.optionUrl : root.optionUrl + '?'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinitOption((urlT + after).replace(/\\?&/, '?'), root, tV)\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (root.localOption) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetValue(root, 'options', [...root.localOption])\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetValue(root, 'options', [])\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (isValidValue(tV)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecoverVal(tV, root)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\t\timmediate: true\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tif (root.localOption) {\n\t\t\t\t\t\t\t\t\t\t\tsetValue(root, 'options', [...root.localOption])\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\tsetValue(root, 'options', [])\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (typeof root.changeOption === 'object') {\n\t\t\t\t\t\t\t\t\tif (root.changeOption.valKey && root.changeOption.key) {\n\t\t\t\t\t\t\t\t\t\twatchGroup.push(\n\t\t\t\t\t\t\t\t\t\t\twatch(\n\t\t\t\t\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (typeof root.changeOption === 'object' && !Array.isArray(root.changeOption)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\treturn valGroup.value[root.changeOption.valKey]\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\treturn false\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t(after) => {\n\t\t\t\t\t\t\t\t\t\t\t\t\tlet tV = cloneDeep(tempKeys.value[root.tempKey])\n\t\t\t\t\t\t\t\t\t\t\t\t\ttempKeys.value[root.tempKey] = null\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t((after && !Array.isArray(after)) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(Array.isArray(after) && after.length) ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tafter === 0 ||\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tafter === false) &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\troot.optionUrl &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\ttypeof root.changeOption === 'object' &&\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t!Array.isArray(root.changeOption)\n\t\t\t\t\t\t\t\t\t\t\t\t\t) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tlet urlT = root.optionUrl.indexOf('?') !== -1 ? root.optionUrl : root.optionUrl + '?'\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tinitOption((urlT + '&' + root.changeOption.key + '=' + after).replace(/\\?&/, '?'), root, tV)\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (root.localOption) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetValue(root, 'options', [...root.localOption])\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetValue(root, 'options', [])\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tif (isValidValue(tV)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\trecoverVal(tV, root)\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t\t{ immediate: true }\n\t\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else if (myTypeof(root.changeOption) === 'Boolean') {\n\t\t\t\t\t\t\t\t\t/*设置changeOption为true时,当待选项地址改变后重新拉取待选项，在使用该表单组件的地方改变传入的formData对应项的optionUrl*/\n\t\t\t\t\t\t\t\t\twatchGroup.push(\n\t\t\t\t\t\t\t\t\t\twatch(\n\t\t\t\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\t\t\t\tconst t = findCollection(props.formData, (e) => e?.key === root.key)\n\t\t\t\t\t\t\t\t\t\t\t\tt.optionUrl = toRef(t.optionUrl)\n\t\t\t\t\t\t\t\t\t\t\t\treturn t.optionUrl.value\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t(after) => {\n\t\t\t\t\t\t\t\t\t\t\t\tlet tV = cloneDeep(tempKeys.value[root.tempKey])\n\t\t\t\t\t\t\t\t\t\t\t\ttempKeys.value[root.tempKey] = null\n\n\t\t\t\t\t\t\t\t\t\t\t\tif (after) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tinitOption(after, root, tV)\n\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (root.localOption) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetValue(root, 'options', [...root.localOption])\n\t\t\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tsetValue(root, 'options', [])\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\t\t\t\tif (isValidValue(tV)) {\n\t\t\t\t\t\t\t\t\t\t\t\t\t\trecoverVal(tV, root)\n\t\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\t\t\timmediate: true\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else if (root.optionUrl) {\n\t\t\t\t\t\t\t\tinitOption(root.optionUrl, root)\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (myTypeof(root.borrowOption) === 'String') {\n\t\t\t\t\t\t\t/*借用待选项*/\n\t\t\t\t\t\t\tnextTick(function () {\n\t\t\t\t\t\t\t\troot.options = findCollection(formDataT.value, (e) => e?.key === root.borrowOption).options\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst tempKeyC = 'opEle' + Math.floor(Math.random() * 100000000)\n\t\t\t\t\t\tif (root.key) {\n\t\t\t\t\t\t\troot.tempKey = tempKeyC\n\t\t\t\t\t\t\tif ((root.type === 'select' && root.multiple) || root.type === 'checkboxGroup') {\n\t\t\t\t\t\t\t\ttempKeys.value[tempKeyC] = root.defaultVal !== undefined ? root.defaultVal : []\n\t\t\t\t\t\t\t} else if (root.booleanVal) {\n\t\t\t\t\t\t\t\ttempKeys.value[tempKeyC] = root.defaultVal !== undefined ? (Boolean(root.defaultVal) ? 1 : 0) : null\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttempKeys.value[tempKeyC] = root.defaultVal !== undefined ? root.defaultVal : null\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\twatchGroup.push(\n\t\t\t\t\t\t\t\twatch(\n\t\t\t\t\t\t\t\t\t() => tempKeys.value[tempKeyC],\n\t\t\t\t\t\t\t\t\t(after) => {\n\t\t\t\t\t\t\t\t\t\ttempKeysWatchHandle(after, root)\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\t\timmediate: true\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'date':\n\t\t\t\t\tcase 'time':\n\t\t\t\t\tcase 'monthRange':\n\t\t\t\t\t\tconst tempKeyB = 'date' + Math.floor(Math.random() * 100000000)\n\t\t\t\t\t\troot.tempKey = tempKeyB\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\troot.dateType === 'date' ||\n\t\t\t\t\t\t\troot.dateType === 'datetime' ||\n\t\t\t\t\t\t\troot.dateType === 'time' ||\n\t\t\t\t\t\t\troot.dateType === 'year' ||\n\t\t\t\t\t\t\troot.dateType === 'month'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\ttempKeys.value[tempKeyB] = root.defaultVal || null\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\troot.dateType === 'daterange' ||\n\t\t\t\t\t\t\troot.dateType === 'datetimerange' ||\n\t\t\t\t\t\t\troot.dateType === 'timerange' ||\n\t\t\t\t\t\t\troot.type === 'monthRange'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\ttempKeys.value[tempKeyB] =\n\t\t\t\t\t\t\t\t(root.defaultVal && root.defaultVal2 && [root.defaultVal, root.defaultVal2]) || []\n\t\t\t\t\t\t}\n\t\t\t\t\t\twatchGroup.push(\n\t\t\t\t\t\t\twatch(\n\t\t\t\t\t\t\t\t() => tempKeys.value[tempKeyB],\n\t\t\t\t\t\t\t\t(after) => {\n\t\t\t\t\t\t\t\t\ttempKeysWatchHandle(after, root)\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * 初始化表单项的选项，如下拉选项，多选、单选组选项（私有）\n\t * @param url 远程选项接口地址\n\t * @param root 表单项结构数据对象\n\t * @param itemVal 缓存的表单项旧值\n\t */\n\tfunction initOption(url: string, root: FormItem, itemVal?: any) {\n\t\t$fetch\n\t\t\t.get(url)\n\t\t\t.then((r: any) => {\n\t\t\t\tlet o\n\t\t\t\tif (isRef(root.options)) {\n\t\t\t\t\to = root.options.value\n\t\t\t\t} else {\n\t\t\t\t\to = root.options\n\t\t\t\t}\n\t\t\t\tif (!o) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tlet tOption = r?.data?.records || r?.data || r || []\n\t\t\t\tif (Array.isArray(tOption)) {\n\t\t\t\t\tif (root.optionFilter && myTypeof(root.optionFilter) === 'Function') {\n\t\t\t\t\t\ttOption = root.optionFilter(tOption)\n\t\t\t\t\t}\n\t\t\t\t\tif (root.optionLabel && root.optionVal) {\n\t\t\t\t\t\t/*label由多个字段组合成*/\n\t\t\t\t\t\to.length = 0\n\t\t\t\t\t\to.push(\n\t\t\t\t\t\t\t...tOption.map((eP: Record<string, any>) => {\n\t\t\t\t\t\t\t\tlet rP: Record<string, any>\n\t\t\t\t\t\t\t\tif (Array.isArray(root.optionLabel)) {\n\t\t\t\t\t\t\t\t\t/*组合成的label*/\n\t\t\t\t\t\t\t\t\tlet rL = ''\n\t\t\t\t\t\t\t\t\troot.optionLabel.forEach((v, i) => {\n\t\t\t\t\t\t\t\t\t\t/*需要在label中显示的字段的值*/\n\t\t\t\t\t\t\t\t\t\tlet lVal = String(eP[v])\n\t\t\t\t\t\t\t\t\t\tif (i === 1) {\n\t\t\t\t\t\t\t\t\t\t\trL += '（' + lVal\n\t\t\t\t\t\t\t\t\t\t} else if (i > 1) {\n\t\t\t\t\t\t\t\t\t\t\trL += '、' + lVal\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\trL += lVal\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t\t\trP = {\n\t\t\t\t\t\t\t\t\t\tlabel: rL + '）',\n\t\t\t\t\t\t\t\t\t\tval: root.optionVal && eP[root.optionVal]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\trP = {\n\t\t\t\t\t\t\t\t\t\tlabel: root.optionLabel && eP[root.optionLabel],\n\t\t\t\t\t\t\t\t\t\tval: root.optionVal && eP[root.optionVal]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t/*除了要收集绑定值，还要一并收集其他字段,则将其他字段加入到待选列表项*/\n\t\t\t\t\t\t\t\tif (root.collectLabel) {\n\t\t\t\t\t\t\t\t\tif (Array.isArray(root.collectLabel)) {\n\t\t\t\t\t\t\t\t\t\tfor (let tC of root.collectLabel) {\n\t\t\t\t\t\t\t\t\t\t\tif (tC.valKey && tC.valKey !== 'label') {\n\t\t\t\t\t\t\t\t\t\t\t\trP[tC.valKey] = eP[tC.valKey]\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tif (root.collectLabel.valKey && root.collectLabel.valKey !== 'label') {\n\t\t\t\t\t\t\t\t\t\t\trP[root.collectLabel.valKey] = eP[root.collectLabel.valKey]\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\tif (rP.val !== null && rP.val !== undefined) {\n\t\t\t\t\t\t\t\t\treturn rP\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t)\n\t\t\t\t\t} else {\n\t\t\t\t\t\to.length = 0\n\t\t\t\t\t\to.push(...tOption)\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\to.length = 0\n\t\t\t\t}\n\t\t\t\tif (root.localOption) {\n\t\t\t\t\to.unshift(...root.localOption)\n\t\t\t\t}\n\t\t\t\tif (isValidValue(itemVal)) {\n\t\t\t\t\trecoverVal(itemVal, root)\n\t\t\t\t}\n\n\t\t\t\t/*待选项禁用*/\n\t\t\t\tif (root.disableOptionByOthers) {\n\t\t\t\t\tif (myTypeof(root.disableOptionByOthers) === 'String') {\n\t\t\t\t\t\twatchGroup.push(\n\t\t\t\t\t\t\twatch(\n\t\t\t\t\t\t\t\t() => valGroup.value[root.disableOptionByOthers],\n\t\t\t\t\t\t\t\t(after) => {\n\t\t\t\t\t\t\t\t\tclearTempKeyItem(root.tempKey)\n\t\t\t\t\t\t\t\t\tif (!o) {\n\t\t\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor (let iP of o) {\n\t\t\t\t\t\t\t\t\t\tif (iP.disabled) {\n\t\t\t\t\t\t\t\t\t\t\tiP.disabled = false\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (after || after === 0 || after === false) {\n\t\t\t\t\t\t\t\t\t\tfor (let iP of o) {\n\t\t\t\t\t\t\t\t\t\t\tif (iP.val === after) {\n\t\t\t\t\t\t\t\t\t\t\t\tiP.disabled = true\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\timmediate: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t} else if (Array.isArray(root.disableOptionByOthers)) {\n\t\t\t\t\t\twatchGroup.push(\n\t\t\t\t\t\t\twatch(\n\t\t\t\t\t\t\t\t() => {\n\t\t\t\t\t\t\t\t\treturn root.disableOptionByOthers.filter((e: any) => e).map((e: string) => valGroup.value[e])\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t(after) => {\n\t\t\t\t\t\t\t\t\tclearTempKeyItem(root.tempKey)\n\t\t\t\t\t\t\t\t\tif (!o) {\n\t\t\t\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tfor (let iP of o) {\n\t\t\t\t\t\t\t\t\t\tif (iP.disabled) {\n\t\t\t\t\t\t\t\t\t\t\tiP.disabled = false\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (after) {\n\t\t\t\t\t\t\t\t\t\tfor (let iP of o) {\n\t\t\t\t\t\t\t\t\t\t\tfor (let i = 0; i < after.length; i++) {\n\t\t\t\t\t\t\t\t\t\t\t\tif (iP.val === after[i]) {\n\t\t\t\t\t\t\t\t\t\t\t\t\tiP.disabled = true\n\t\t\t\t\t\t\t\t\t\t\t\t\tafter.splice(i, 1)\n\t\t\t\t\t\t\t\t\t\t\t\t\tbreak\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\timmediate: true\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\temit(\n\t\t\t\t\t'on-options-request-back',\n\t\t\t\t\tJSON.parse(\n\t\t\t\t\t\tJSON.stringify({\n\t\t\t\t\t\t\te: root,\n\t\t\t\t\t\t\tvalGroup: valGroup.value\n\t\t\t\t\t\t})\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t})\n\t\t\t.catch(() => {\n\t\t\t\tconsole.warn('拉取选项出错')\n\t\t\t})\n\t}\n\n\t/**\n\t * 如果options中选项的值和缓存的表单项旧值相等,则为表单项恢复之前因待选项改变而清除的值（私有）\n\t * @param itemVal 缓存的旧值\n\t * @param root 表单项结构数据对象\n\t */\n\tfunction recoverVal(itemVal: any, root: FormItem) {\n\t\tif (Array.isArray(toValue(root.options))) {\n\t\t\tif (findIndex(toValue(root.options), { val: itemVal }) !== -1) {\n\t\t\t\ttempKeys.value[root.tempKey] = itemVal\n\t\t\t}\n\t\t}\n\t}\n\n\t/*初始化表单项值（私有）*/\n\tfunction initValGroup() {\n\t\tvalGroup.value = {}\n\t\tif (formTeam.value) {\n\t\t\tfor (let e of props.formData) {\n\t\t\t\tinitValItems(e as FormItem[])\n\t\t\t}\n\t\t} else {\n\t\t\tinitValItems(props.formData as FormItem[])\n\t\t}\n\t}\n\n\t/**\n\t * 根据表单结构数据，初始化valGroup（私有）\n\t * @param d 表单结构数据\n\t */\n\tfunction initValItems(d: FormItem[]) {\n\t\tfor (let root of d) {\n\t\t\tif (root?.key) {\n\t\t\t\tif (root.type === 'checkboxGroup' || (root.type === 'select' && root.multiple)) {\n\t\t\t\t\tvalGroup.value[root.key] = root.defaultVal !== undefined && root.show === undefined ? root.defaultVal : []\n\t\t\t\t} else if (root.type === 'editor' || root.type === 'editorPro') {\n\t\t\t\t\tvalGroup.value[root.key] = root.defaultVal !== undefined && root.show === undefined ? root.defaultVal : ''\n\t\t\t\t} else {\n\t\t\t\t\tvalGroup.value[root.key] = root.defaultVal !== undefined && root.show === undefined ? root.defaultVal : null\n\t\t\t\t\tif (root.key2) {\n\t\t\t\t\t\tvalGroup.value[root.key2] =\n\t\t\t\t\t\t\troot.defaultVal2 !== undefined && root.show === undefined ? root.defaultVal2 : null\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/*将缓存表单值给统计对象（私有）*/\n\tfunction tempKeysWatchHandle(after: any, root: FormItem) {\n\t\tif (root?.showing) {\n\t\t\tswitch (root.type) {\n\t\t\t\tcase 'selectInput':\n\t\t\t\t\tif (after) {\n\t\t\t\t\t\tif (after.beforeKey) {\n\t\t\t\t\t\t\tdelete valGroup.value[after.beforeKey]\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvalGroup.value[after.key] = after.val\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t\tcase 'inputMap':\n\t\t\t\t\tif (!root.key || !root.key2) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tif (after) {\n\t\t\t\t\t\tvalGroup.value[root.key] = after.lng\n\t\t\t\t\t\tvalGroup.value[root.key2] = after.lat\n\t\t\t\t\t\tif (root.key3) {\n\t\t\t\t\t\t\tvalGroup.value[root.key3] = after.name\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalGroup.value[root.key] = null\n\t\t\t\t\t\tvalGroup.value[root.key2] = null\n\t\t\t\t\t\tif (root.key3) {\n\t\t\t\t\t\t\tvalGroup.value[root.key3] = null\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t\tcase 'input':\n\t\t\t\tcase 'inputNumber':\n\t\t\t\tcase 'textarea':\n\t\t\t\t\tif (!root.key) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tif (after || after === 0) {\n\t\t\t\t\t\tlet reg = /^-?\\d+(.\\d+)?$/\n\t\t\t\t\t\tif (root.numberVal && reg.test(after)) {\n\t\t\t\t\t\t\tvalGroup.value[root.key] = Number(after)\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvalGroup.value[root.key] = after\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalGroup.value[root.key] = null\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t\tcase 'select':\n\t\t\t\tcase 'radioGroup':\n\t\t\t\tcase 'checkboxGroup':\n\t\t\t\t\tif (!root.key) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tif (root.booleanVal && !root.multiple) {\n\t\t\t\t\t\tvalGroup.value[root.key] = after === undefined || after === '' || after === null ? null : Boolean(after)\n\t\t\t\t\t} else if (root.multiple || root.type === 'checkboxGroup') {\n\t\t\t\t\t\tvalGroup.value[root.key] = Object.assign([], after)\n\t\t\t\t\t} else {\n\t\t\t\t\t\tvalGroup.value[root.key] = after\n\t\t\t\t\t}\n\t\t\t\t\t/*除了要收集绑定值，还要一并收集其他字段*/\n\t\t\t\t\tif (root.collectLabel) {\n\t\t\t\t\t\tconst targetOption = findOptions(root, after)\n\n\t\t\t\t\t\tif (Array.isArray(root.collectLabel)) {\n\t\t\t\t\t\t\tfor (let l of root.collectLabel) {\n\t\t\t\t\t\t\t\tif (l?.key && l.valKey) {\n\t\t\t\t\t\t\t\t\tconst collectTempKey = findTempKey(l.key)\n\t\t\t\t\t\t\t\t\tlet t: any = null\n\n\t\t\t\t\t\t\t\t\tif (Array.isArray(targetOption)) {\n\t\t\t\t\t\t\t\t\t\tt = targetOption.map((e) => e[l.valKey])\n\t\t\t\t\t\t\t\t\t\tvalGroup.value[l.key] = t\n\t\t\t\t\t\t\t\t\t\tif (collectTempKey) {\n\t\t\t\t\t\t\t\t\t\t\ttempKeys.value[collectTempKey.tempKey] = t\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\tif (targetOption && isValidValue(targetOption[l.valKey])) {\n\t\t\t\t\t\t\t\t\t\t\tt = targetOption[l.valKey]\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tvalGroup.value[l.key] = t\n\t\t\t\t\t\t\t\t\t\tif (collectTempKey) {\n\t\t\t\t\t\t\t\t\t\t\tif (collectTempKey.booleanVal && typeof t === 'boolean') {\n\t\t\t\t\t\t\t\t\t\t\t\ttempKeys.value[collectTempKey.tempKey] = t ? 1 : 0\n\t\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\t\ttempKeys.value[collectTempKey.tempKey] = t\n\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else if (typeof root.collectLabel === 'object') {\n\t\t\t\t\t\t\tif (root.collectLabel.key && root.collectLabel.valKey) {\n\t\t\t\t\t\t\t\tconst collectTempKey = findTempKey(root.collectLabel.key)\n\t\t\t\t\t\t\t\tlet t: any = null\n\t\t\t\t\t\t\t\tif (Array.isArray(targetOption)) {\n\t\t\t\t\t\t\t\t\tt = targetOption.map(\n\t\t\t\t\t\t\t\t\t\t(e) => root.collectLabel && !Array.isArray(root.collectLabel) && e[root.collectLabel.valKey]\n\t\t\t\t\t\t\t\t\t)\n\t\t\t\t\t\t\t\t\tvalGroup.value[root.collectLabel.key] = t\n\t\t\t\t\t\t\t\t\tif (collectTempKey) {\n\t\t\t\t\t\t\t\t\t\ttempKeys.value[collectTempKey.tempKey] = t\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (targetOption && isValidValue(targetOption[root.collectLabel.valKey])) {\n\t\t\t\t\t\t\t\t\t\tt = targetOption[root.collectLabel.valKey]\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tvalGroup.value[root.collectLabel.key] = t\n\t\t\t\t\t\t\t\t\tif (collectTempKey) {\n\t\t\t\t\t\t\t\t\t\tif (collectTempKey.booleanVal && typeof t === 'boolean') {\n\t\t\t\t\t\t\t\t\t\t\ttempKeys.value[collectTempKey.tempKey] = t ? 1 : 0\n\t\t\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\t\t\ttempKeys.value[collectTempKey.tempKey] = t\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t\tcase 'date':\n\t\t\t\tcase 'time':\n\t\t\t\tcase 'monthRange':\n\t\t\t\t\tif (!root.key) {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\t\t\t\t\tlet tp = root.dateType\n\n\t\t\t\t\tconst fm: Record<string, any> = {\n\t\t\t\t\t\tdate: 'YYYY-MM-DD',\n\t\t\t\t\t\tdaterange: 'YYYY-MM-DD',\n\t\t\t\t\t\tdatetime: 'YYYY-MM-DD HH:mm:ss',\n\t\t\t\t\t\tdatetimerange: 'YYYY-MM-DD HH:mm:ss',\n\t\t\t\t\t\tyear: 'YYYY',\n\t\t\t\t\t\tmonth: 'YYYY-MM'\n\t\t\t\t\t}\n\n\t\t\t\t\tif (tp === 'date' || tp === 'datetime' || tp === 'time' || tp === 'year' || tp === 'month') {\n\t\t\t\t\t\tif (after) {\n\t\t\t\t\t\t\tif (tp === 'time') {\n\t\t\t\t\t\t\t\tvalGroup.value[root.key] = after\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvalGroup.value[root.key] = moment(after).format(typeof root.format === 'string' ? root.format : fm[tp])\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (tp === 'date' && root.addTime) {\n\t\t\t\t\t\t\t\tvalGroup.value[root.key] += ' 00:00:00'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvalGroup.value[root.key] = null\n\t\t\t\t\t\t}\n\t\t\t\t\t} else if (root.type === 'monthRange' || tp === 'daterange' || tp === 'datetimerange' || tp === 'timerange') {\n\t\t\t\t\t\tif (!root.key2) {\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (after && after[0] && after[1]) {\n\t\t\t\t\t\t\tif (tp === 'timerange') {\n\t\t\t\t\t\t\t\tvalGroup.value[root.key] = after[0]\n\t\t\t\t\t\t\t\tvalGroup.value[root.key2] = after[1]\n\t\t\t\t\t\t\t} else if (root.type === 'monthRange') {\n\t\t\t\t\t\t\t\tvalGroup.value[root.key] =\n\t\t\t\t\t\t\t\t\t(typeof root.format === 'string' && moment(after[0]).format(root.format)) || after[0]\n\t\t\t\t\t\t\t\tvalGroup.value[root.key2] =\n\t\t\t\t\t\t\t\t\t(typeof root.format === 'string' && root.format && moment(after[1]).format(root.format)) || after[1]\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\tvalGroup.value[root.key] = moment(after[0]).format(root.format || (tp && fm[tp]))\n\t\t\t\t\t\t\t\tvalGroup.value[root.key2] = moment(after[1]).format(root.format || (tp && fm[tp]))\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (tp === 'daterange' && root.addTime) {\n\t\t\t\t\t\t\t\tvalGroup.value[root.key] += ' 00:00:00'\n\t\t\t\t\t\t\t\tvalGroup.value[root.key2] += ' 23:59:59'\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tvalGroup.value[root.key] = null\n\t\t\t\t\t\t\tvalGroup.value[root.key2] = null\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tbreak\n\t\t\t}\n\t\t}\n\t}\n\n\t/*collectLabel时找出选中的选项（私有）*/\n\tfunction findOptions(root: FormItem, after: any) {\n\t\tconst o = toValue(root?.options)\n\t\tif (!o) {\n\t\t\treturn\n\t\t}\n\t\tif (root?.multiple || root?.type === 'checkboxGroup') {\n\t\t\tif (after) {\n\t\t\t\tlet t: any[] = []\n\t\t\t\tfor (let e of o) {\n\t\t\t\t\tif (after.indexOf(e?.val) !== -1) {\n\t\t\t\t\t\tt.push(e)\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn t\n\t\t\t}\n\t\t\treturn false\n\t\t} else {\n\t\t\tif (after || after === 0 || after === false) {\n\t\t\t\tfor (let e of o) {\n\t\t\t\t\tif (e?.val === after) {\n\t\t\t\t\t\treturn e\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false\n\t\t}\n\t}\n\n\t/*找到需要收集的key对应的tempKey(私有)*/\n\tfunction findTempKey(k: string) {\n\t\tif (formTeam.value) {\n\t\t\tfor (let e of formDataT.value) {\n\t\t\t\tconst t = findTempKeyItem(e as FormItem[], k)\n\t\t\t\tif (t) {\n\t\t\t\t\treturn t\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn false\n\t\t}\n\t\treturn findTempKeyItem(formDataT.value as FormItem[], k)\n\t}\n\n\tfunction findTempKeyItem(d: FormItem[], k: string) {\n\t\tfor (let root of d) {\n\t\t\tif (root.key === k) {\n\t\t\t\treturn root\n\t\t\t}\n\t\t}\n\t\treturn false\n\t}\n\n\t/*设置表单项的值（可添加新字段，例如添加隐藏字段，需要提交这个值，但页面不展示，公开）*/\n\tfunction setItemToValGroup(data: Record<string, any>, notClearOthers?: boolean) {\n\t\tlet t: Record<string, any> = {}\n\t\tfor (let k in valGroup.value) {\n\t\t\tif (valGroup.value.hasOwnProperty(k) && data[k] !== undefined) {\n\t\t\t\tt[k] = data[k]\n\t\t\t\tdelete data[k]\n\t\t\t}\n\t\t}\n\t\tupdateValGroup(t, notClearOthers)\n\t\tfor (let kk in data) {\n\t\t\t/*用Object.assign出错，只有第一次能正常合并*/\n\t\t\tif (data.hasOwnProperty(kk)) {\n\t\t\t\tif (hiddenKeys.indexOf(kk) < 0) {\n\t\t\t\t\thiddenKeys.push(kk)\n\t\t\t\t}\n\t\t\t\tvalGroup.value[kk] = data[kk]\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * 获取需要校验的表单项的key（私有）\n\t * @param d 更新的数据对象\n\t */\n\tfunction getValidateKeys(d: Record<string, any>) {\n\t\tlet t = cloneDeep(d)\n\t\tif (formTeam.value) {\n\t\t\tlet r: any[] = []\n\t\t\tfor (let e of props.formData) {\n\t\t\t\tr.push(...getValidateItems(e as FormItem[], t))\n\t\t\t}\n\t\t\treturn r\n\t\t}\n\t\treturn getValidateItems(props.formData as FormItem[], t)\n\t}\n\n\t/**\n\t * 获取需要校验的表单项的key（私有）\n\t * @param a 表单结构数据\n\t * @param d 更新的数据对象\n\t */\n\tfunction getValidateItems(a: FormItem[], d: Record<string, any>) {\n\t\treturn a\n\t\t\t.filter((e) => {\n\t\t\t\tfor (let k of Object.keys(d)) {\n\t\t\t\t\t/*需要校验的表单项满足条件：1.在更新队列；2.没有处于隐藏状态；3.不能是手动置空的表单项；*/\n\t\t\t\t\tif (\n\t\t\t\t\t\te?.key === k &&\n\t\t\t\t\t\tshowingKeys.value.indexOf(k) > -1 &&\n\t\t\t\t\t\t!(d[k] === null || ((Array.isArray(d[k]) || myTypeof(d[k]) === 'Object') && isEmpty(d[k])))\n\t\t\t\t\t) {\n\t\t\t\t\t\tdelete d[k]\n\t\t\t\t\t\treturn true\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false\n\t\t\t})\n\t\t\t.map((e) => e?.key)\n\t}\n\n\t/**\n\t * 更新表单项的值（只能更新已有字段，公开）\n\t * @param data 新数据\n\t * @param notClearOthers 是否清空其他表单项，默认清空\n\t */\n\tfunction updateValGroup(data: Record<string, any>, notClearOthers: boolean = false) {\n\t\tlet t = cloneDeep(data)\n\t\tupdateTempKeys(data, notClearOthers)\n\t\t/*先更新tempKeys再更新valGroup 避免更新同key的tempKeys元素清空valGroup元素*/\n\t\tfor (let k in valGroup.value) {\n\t\t\tif (valGroup.value.hasOwnProperty(k) && data[k] !== undefined && data[k] !== '--') {\n\t\t\t\tif (Array.isArray(data[k])) {\n\t\t\t\t\tdata[k] = data[k].filter((e: any) => e !== '--')\n\t\t\t\t} else if (myTypeof(data[k]) === 'Object') {\n\t\t\t\t\tfor (let n in data[k]) {\n\t\t\t\t\t\tif (data[k].hasOwnProperty(n) && data[k][n] === '--') {\n\t\t\t\t\t\t\tdata[k][n] = null\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tvalGroup.value[k] = data[k]\n\t\t\t} else if (!notClearOthers) {\n\t\t\t\tvalGroup.value[k] = Array.isArray(valGroup.value[k]) ? [] : null\n\t\t\t}\n\t\t}\n\t\tnextTick(function () {\n\t\t\tvalidateFields(getValidateKeys(t))\n\t\t})\n\t}\n\n\t/**\n\t * 更新未暴露表单项值（私有）\n\t * @param data 新数据\n\t * @param notClearOthers 是否清空其他表单项，默认清空\n\t */\n\tfunction updateTempKeys(data: Record<string, any>, notClearOthers: boolean = false) {\n\t\tif (formTeam.value) {\n\t\t\tfor (let t of formDataT.value) {\n\t\t\t\tupdateTempKeyItem(t as FormItem[], data, notClearOthers)\n\t\t\t}\n\t\t} else {\n\t\t\tupdateTempKeyItem(formDataT.value as FormItem[], data, notClearOthers)\n\t\t}\n\t}\n\n\t/**\n\t * 更新tampKey\n\t * @param a 表单结构数据\n\t * @param d 新数据\n\t * @param notClearOthers 是否清空其他表单项，默认清空\n\t */\n\tfunction updateTempKeyItem(a: FormItem[], d: Record<string, any>, notClearOthers: boolean = false) {\n\t\tfor (let root of a) {\n\t\t\tif (!root?.key) {\n\t\t\t\tcontinue\n\t\t\t}\n\t\t\tif (\n\t\t\t\t((notClearOthers && (d[root.key] !== undefined || (root.key2 && d[root.key2] !== undefined))) ||\n\t\t\t\t\t!notClearOthers) &&\n\t\t\t\troot.tempKey\n\t\t\t) {\n\t\t\t\tswitch (root.type) {\n\t\t\t\t\tcase 'inputMap':\n\t\t\t\t\t\tif (!root.key2) {\n\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (myTypeof(d[root.key]) === 'Number' && myTypeof(d[root.key2] === 'Number')) {\n\t\t\t\t\t\t\tif (root.key3) {\n\t\t\t\t\t\t\t\ttempKeys.value[root.tempKey] = {\n\t\t\t\t\t\t\t\t\tlng: d[root.key],\n\t\t\t\t\t\t\t\t\tlat: d[root.key2],\n\t\t\t\t\t\t\t\t\tname: d[root.key3]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttempKeys.value[root.tempKey] = {\n\t\t\t\t\t\t\t\t\tlng: d[root.key],\n\t\t\t\t\t\t\t\t\tlat: d[root.key2]\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (root.key3) {\n\t\t\t\t\t\t\t\ttempKeys.value[root.tempKey] = {\n\t\t\t\t\t\t\t\t\tlng: null,\n\t\t\t\t\t\t\t\t\tlat: null,\n\t\t\t\t\t\t\t\t\tname: null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttempKeys.value[root.tempKey] = {\n\t\t\t\t\t\t\t\t\tlng: null,\n\t\t\t\t\t\t\t\t\tlat: null\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'input':\n\t\t\t\t\tcase 'inputNumber':\n\t\t\t\t\tcase 'textarea':\n\t\t\t\t\t\tif ((d[root.key] && d[root.key] !== '--') || d[root.key] === 0) {\n\t\t\t\t\t\t\ttempKeys.value[root.tempKey] = d[root.key]\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\ttempKeys.value[root.tempKey] = null\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'select':\n\t\t\t\t\tcase 'radioGroup':\n\t\t\t\t\tcase 'checkboxGroup':\n\t\t\t\t\t\tif ((d[root.key] && d[root.key] !== '--') || d[root.key] === 0 || d[root.key] === false) {\n\t\t\t\t\t\t\tif (root.multiple || root.type === 'checkboxGroup') {\n\t\t\t\t\t\t\t\ttempKeys.value[root.tempKey] = [...d[root.key]]\n\t\t\t\t\t\t\t} else if (root.booleanVal) {\n\t\t\t\t\t\t\t\ttempKeys.value[root.tempKey] = Boolean(d[root.key]) ? 1 : 0\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttempKeys.value[root.tempKey] = d[root.key]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tif (root.multiple || root.type === 'checkboxGroup') {\n\t\t\t\t\t\t\t\t/*当notClearOthers为false时用来清空*/\n\t\t\t\t\t\t\t\ttempKeys.value[root.tempKey] = []\n\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\ttempKeys.value[root.tempKey] = null\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t\tcase 'date':\n\t\t\t\t\tcase 'time':\n\t\t\t\t\t\tif (\n\t\t\t\t\t\t\troot.dateType === 'date' ||\n\t\t\t\t\t\t\troot.dateType === 'datetime' ||\n\t\t\t\t\t\t\troot.dateType === 'year' ||\n\t\t\t\t\t\t\troot.dateType === 'month' ||\n\t\t\t\t\t\t\troot.dateType === 'time'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\ttempKeys.value[root.tempKey] = d[root.key] && d[root.key] !== '--' ? d[root.key] : null\n\t\t\t\t\t\t} else if (\n\t\t\t\t\t\t\troot.dateType === 'daterange' ||\n\t\t\t\t\t\t\troot.dateType === 'datetimerange' ||\n\t\t\t\t\t\t\troot.dateType === 'timerange'\n\t\t\t\t\t\t) {\n\t\t\t\t\t\t\tif (!root.key2) {\n\t\t\t\t\t\t\t\tcontinue\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\ttempKeys.value[root.tempKey] =\n\t\t\t\t\t\t\t\t(d[root.key] &&\n\t\t\t\t\t\t\t\t\td[root.key] !== '--' &&\n\t\t\t\t\t\t\t\t\td[root.key2] &&\n\t\t\t\t\t\t\t\t\td[root.key2] !== '--' && [d[root.key], d[root.key2]]) ||\n\t\t\t\t\t\t\t\t[]\n\t\t\t\t\t\t}\n\t\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/**\n\t * 更新表单结构，例如设置或取消禁用,或者给type为txt的表单项（没有key）赋值（公开）；\n\t * @param {Object|Array} d 为对象（改变单个）或数组（改变多个），支持的属性：index（必填）-需要改变的formData项的索引值、\n\t * indexB-当表单为`分组表单`时必填（表示表单项的二位数组索引第二位）、需要改变的属性，如要改变第二个表单组件的label和title,\n\t * 则为:{index:1,label:XXX,title:XXX}\n\t */\n\tfunction updateFormDataT(d: Record<string, any> | Record<string, any>[]) {\n\t\tif (Array.isArray(d)) {\n\t\t\tfor (let e of d) {\n\t\t\t\tchangeDataHandle(e)\n\t\t\t}\n\t\t} else if (myTypeof(d) === 'Object') {\n\t\t\tchangeDataHandle(d)\n\t\t}\n\t}\n\n\t/**\n\t * 改变表单结构（私有）\n\t * @param d 同updateFormDataT的 d\n\t */\n\tfunction changeDataHandle(d: Record<string, any>) {\n\t\tconst { index, indexB, key, val } = d\n\t\tif (typeof index !== 'number') {\n\t\t\treturn\n\t\t}\n\t\tif (Array.isArray(formDataT.value[index])) {\n\t\t\tif (typeof indexB === 'number') {\n\t\t\t\tif (key && d.hasOwnProperty('val')) {\n\t\t\t\t\tformDataT.value[index][indexB][key] = val\n\t\t\t\t} else {\n\t\t\t\t\tfor (let k of Object.keys(d)) {\n\t\t\t\t\t\tif (k !== 'index' && key !== 'indexB') {\n\t\t\t\t\t\t\tformDataT.value[index][indexB][k] = d[k]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tif (key && d.hasOwnProperty('val')) {\n\t\t\t\tformDataT.value[index][key] = val\n\t\t\t} else {\n\t\t\t\tfor (let k of Object.keys(d)) {\n\t\t\t\t\tif (k !== 'index') {\n\t\t\t\t\t\tformDataT.value[index][k] = d[k]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t/*更新远程数据级联名称（私有）*/\n\tfunction asyncLabelChange({ label, root }: { label: string; root: FormItem }) {\n\t\tif (root.key2) {\n\t\t\tvalGroup.value[root.key2] = label\n\t\t}\n\t\titemChange({\n\t\t\te: label,\n\t\t\troot\n\t\t})\n\t}\n\n\t/*更新选择输入框值（私有）*/\n\tfunction onSelectInputChange(d: any) {\n\t\tif (d.beforeKey) {\n\t\t\tremove(selectInputKeys, (o) => o === d.beforeKey)\n\t\t}\n\t\tif (d.key) {\n\t\t\tif (selectInputKeys.indexOf(d.key) === -1) {\n\t\t\t\tselectInputKeys.push(d.key)\n\t\t\t}\n\t\t\titemChange({\n\t\t\t\te: null,\n\t\t\t\troot: d\n\t\t\t})\n\t\t}\n\t}\n\n\t/*更新行政区域名称（私有）*/\n\tfunction alNameChange({ name, root }: { name: string; root: FormItem }) {\n\t\tif (root.key2) {\n\t\t\tvalGroup.value[root.key2] = name\n\t\t}\n\t\titemChange({\n\t\t\te: name,\n\t\t\troot\n\t\t})\n\t}\n\n\t/**\n\t * 重新校验（私有）\n\t * @param e 事件的$event对象，一般是组件change事件的值\n\t * @param root 表单项结构数据\n\t */\n\tfunction reValidateAndChangeHandle({ e, root }: { e: any; root: FormItem }) {\n\t\titemChange({\n\t\t\te: e,\n\t\t\troot\n\t\t})\n\t\tnextTick(function () {\n\t\t\tformGroupXRef.value?.validateField?.(root.key)\n\t\t})\n\t}\n\n\t/**\n\t * 表单项值更新（私有）\n\t * @param e 事件的$event对象，一般是组件change事件的值\n\t * @param root 表单项结构数据\n\t */\n\tfunction itemChange({ e, root }: { e: any; root: FormItem }) {\n\t\tsetTimeout(() => {\n\t\t\tlet d: Record<string, any> = {\n\t\t\t\tevent: e\n\t\t\t}\n\t\t\tif (root.key) {\n\t\t\t\td[root.key] = valGroup.value[root.key]\n\t\t\t}\n\t\t\tif (root.key2) {\n\t\t\t\td[root.key2] = valGroup.value[root.key2]\n\t\t\t}\n\t\t\tif (Array.isArray(root.collectLabel)) {\n\t\t\t\tfor (let l of root.collectLabel) {\n\t\t\t\t\td[l.key] = valGroup.value[l.key]\n\t\t\t\t}\n\t\t\t} else if (root.collectLabel?.key) {\n\t\t\t\td[root.collectLabel.key] = valGroup.value[root.collectLabel.key]\n\t\t\t}\n\t\t\temit('on-item-change', d)\n\t\t}, 300)\n\t}\n\n\t/**\n\t * 获取需要提交的数据(私有)\n\t */\n\tfunction getValGroup() {\n\t\tlet t: Record<string, any> = {}\n\t\tfor (let e of submitKeys.value) {\n\t\t\tt[e] = valGroup.value[e]\n\t\t}\n\t\tif (props.trim) {\n\t\t\tt = trimObj(t)\n\t\t}\n\t\treturn t\n\t}\n\n\t/*主动验证整个表单（公开）*/\n\tfunction validate() {\n\t\tformGroupXRef.value?.validate?.()\n\t}\n\n\t/**\n\t * 手动验证表单项（公开）\n\t * @param prop 需要校验的表单项(rules中对应的key)\n\t */\n\tfunction reValidate(prop: any) {\n\t\tsetTimeout(() => {\n\t\t\tformGroupXRef.value?.validateField?.(prop, () => {})\n\t\t}, 10)\n\t}\n\n\t/**\n\t * 批量校验部分表单\n\t * @param {Array} props 需要校验的表单prop集合\n\t */\n\tfunction validateFields(props: any[]) {\n\t\tsetTimeout(() => {\n\t\t\tif (Array.isArray(props)) {\n\t\t\t\tfor (let e of props) {\n\t\t\t\t\tformGroupXRef.value?.validateField?.(e, () => {})\n\t\t\t\t}\n\t\t\t}\n\t\t}, 10)\n\t}\n\n\t/*主动改变表单按钮loading状态（在开启btnLoading的前提下，公开）*/\n\tfunction changeLoading(v: any) {\n\t\tif (v === undefined) {\n\t\t\treturn\n\t\t}\n\t\tshowLoading.value = Boolean(v)\n\t}\n\n\t/*触发提交事件（一般不需要调用，会通过插件内部提交按钮触发，公开）*/\n\tfunction submit() {\n\t\tif (props.disabled) {\n\t\t\treturn\n\t\t}\n\t\tformGroupXRef.value?.validate?.((valid: any) => {\n\t\t\tif (!debounceCount) {\n\t\t\t\tdebounceCount = true\n\t\t\t\tif (valid) {\n\t\t\t\t\tshowLoading.value = true\n\n\t\t\t\t\temit('on-submit', getValGroup())\n\t\t\t\t}\n\t\t\t\tsetTimeout(() => {\n\t\t\t\t\tdebounceCount = false\n\t\t\t\t}, 2000)\n\t\t\t}\n\t\t})\n\t}\n\n\tonMounted(() => {\n\t\tinitValGroup()\n\t\tinitFormDataT()\n\t})\n\n\tdefineExpose({\n\t\tresetForm,\n\t\trefreshFormDom,\n\t\treRenderForm,\n\t\tsetItemToValGroup,\n\t\tupdateValGroup,\n\t\tupdateFormDataT,\n\t\tvalidate,\n\t\treValidate,\n\t\tchangeLoading,\n\t\tgetValGroup,\n\t\tsubmit\n\t})\n</script>\n\n<template>\n\t<Form\n\t\tref=\"formGroupXRef\"\n\t\t:model=\"valGroup\"\n\t\t:rules=\"formRulesT\"\n\t\t:label-width=\"props.labelWidth\"\n\t\t:inline=\"props.inline\"\n\t\t:show-message=\"props.showMessage\"\n\t\tclass=\"formXN\"\n\t\t:key=\"formReRenderKey\"\n\t>\n\t\t<!--解决form只有一个input时enter触发页面刷新的问题-->\n\t\t<FormItem style=\"display: none\"><input type=\"text\" /></FormItem>\n\t\t<div v-for=\"(box, n) of formDataT\" v-if=\"formTeam\" :class=\"[teamClass, 'formTeamBox' + n]\" :key=\"'formTeamBox' + n\">\n\t\t\t<template v-for=\"(item, i) of box\" :key=\"'formItem' + i\">\n\t\t\t\t<item-r\n\t\t\t\t\t:item=\"item\"\n\t\t\t\t\tv-if=\"getFormItemIfVal(item)\"\n\t\t\t\t\t:style=\"formStyle\"\n\t\t\t\t\t:item-style=\"itemStyle\"\n\t\t\t\t\t:val-group=\"valGroup\"\n\t\t\t\t\t:temp-keys=\"tempKeys\"\n\t\t\t\t\t:inline=\"props.inline\"\n\t\t\t\t\t:disabled=\"props.disabled\"\n\t\t\t\t\t:label-width=\"props.labelWidth\"\n\t\t\t\t\t:item-width=\"props.itemWidth\"\n\t\t\t\t\t:mgr-url=\"mgrUrl\"\n\t\t\t\t\t:upload-url=\"uploadUrl\"\n\t\t\t\t\t@item-change=\"itemChange\"\n\t\t\t\t\t@re-validate=\"reValidateAndChangeHandle\"\n\t\t\t\t\t@clear-temp-key-item=\"clearTempKeyItem\"\n\t\t\t\t\t@select-input-change=\"onSelectInputChange\"\n\t\t\t\t\t@al-name-change=\"alNameChange\"\n\t\t\t\t\t@async-label-change=\"asyncLabelChange\"\n\t\t\t\t>\n\t\t\t\t\t<template #[s.slotName]=\"slotProps\" v-for=\"s in getSlotFormData(box)\">\n\t\t\t\t\t\t<slot :name=\"s.slotName\" :val-group=\"slotProps.valGroup\" />\n\t\t\t\t\t</template>\n\t\t\t\t</item-r>\n\t\t\t</template>\n\t\t</div>\n\t\t<template v-for=\"(item, i) of formDataT\" :key=\"'formItem' + i\">\n\t\t\t<item-r\n\t\t\t\t:item=\"item\"\n\t\t\t\tv-if=\"!formTeam && getFormItemIfVal(item)\"\n\t\t\t\t:style=\"formStyle\"\n\t\t\t\t:item-style=\"itemStyle\"\n\t\t\t\t:val-group=\"valGroup\"\n\t\t\t\t:temp-keys=\"tempKeys\"\n\t\t\t\t:inline=\"props.inline\"\n\t\t\t\t:disabled=\"props.disabled\"\n\t\t\t\t:label-width=\"props.labelWidth\"\n\t\t\t\t:item-width=\"props.itemWidth\"\n\t\t\t\t:mgr-url=\"mgrUrl\"\n\t\t\t\t:upload-url=\"uploadUrl\"\n\t\t\t\t@item-change=\"itemChange\"\n\t\t\t\t@re-validate=\"reValidateAndChangeHandle\"\n\t\t\t\t@clear-temp-key-item=\"clearTempKeyItem\"\n\t\t\t\t@select-input-change=\"onSelectInputChange\"\n\t\t\t\t@al-name-change=\"alNameChange\"\n\t\t\t\t@async-label-change=\"asyncLabelChange\"\n\t\t\t>\n\t\t\t\t<template #[s.slotName]=\"slotProps\" v-for=\"s in getSlotFormData(formData)\">\n\t\t\t\t\t<slot :name=\"s.slotName\" :val-group=\"slotProps.valGroup\" />\n\t\t\t\t</template>\n\t\t\t</item-r>\n\t\t</template>\n\t\t<!--长提交按钮-->\n\t\t<FormItem v-if=\"props.showLongOkBt\">\n\t\t\t<!--suppress HtmlWrongAttributeValue -->\n\t\t\t<Button\n\t\t\t\t@click=\"submit\"\n\t\t\t\t:style=\"itemStyle\"\n\t\t\t\ttype=\"primary\"\n\t\t\t\t:loading=\"props.btnLoading && showLoading\"\n\t\t\t\t:disabled=\"props.disabled\"\n\t\t\t\t>{{ props.longOkBtTxt || t('r.confirm') }}\n\t\t\t</Button>\n\t\t</FormItem>\n\t\t<div class=\"inlineBlock\">\n\t\t\t<!--短提交按钮（查询）-->\n\t\t\t<!--suppress HtmlWrongAttributeValue -->\n\t\t\t<Button\n\t\t\t\tv-if=\"props.showInlineOkBt\"\n\t\t\t\ttype=\"primary\"\n\t\t\t\t:class=\"{ inlineFormBtXN: props.inline, okBtnXN: true }\"\n\t\t\t\t@click=\"submit\"\n\t\t\t\t:loading=\"props.btnLoading && showLoading\"\n\t\t\t\t:disabled=\"props.disabled\"\n\t\t\t\t>{{ props.inlineOkBtTxt || t('r.confirm') }}\n\t\t\t</Button>\n\t\t\t<!--取消按钮（清除）-->\n\t\t\t<!--suppress HtmlWrongAttributeValue -->\n\t\t\t<Button v-if=\"props.showInlineClearBt\" @click=\"resetForm\" :class=\"{ inlineFormBtXN: props.inline }\" type=\"dashed\"\n\t\t\t\t>{{ props.inlineClearBtTxt || t('r.clear') }}\n\t\t\t</Button>\n\t\t</div>\n\t</Form>\n</template>\n","<!--FormGroup 表单群组件，表单相关用法参考FormR,组件自带确定和取消按钮\n@created 2023.08.30\n@author Ricky email:zhangqingcq@foxmail.com-->\n\n<script lang=\"ts\" setup>\n\timport FormR from '../FormR/FormR.vue'\n\timport t from '../../locale/i18nSFC'\n\timport { setTimeout } from '../../utils/timer'\n\timport type { FormItem } from '../../public'\n\timport Proxy from '../../utils/proxy'\n\n\tconst emit = defineEmits(['on-cancel'])\n\tconst props = withDefaults(\n\t\tdefineProps<{\n\t\t\tformData?: Array<FormItem | FormItem[]>\n\t\t\twith?: string\n\t\t\tlabelWidth?: number\n\t\t\tcontentWidth?: string\n\t\t\titemWidth?: number\n\t\t\tshowOkBt?: boolean\n\t\t\tshowCancelBt?: boolean\n\t\t\tokBtTxt?: string\n\t\t\tcancelBtTxt?: string\n\t\t\tbtnLoading?: boolean\n\t\t\tdisabled?: boolean /*组件禁用（只展示信息）*/\n\t\t}>(),\n\t\t{\n\t\t\tformData: () => [],\n\t\t\twith: () => Proxy().formGroupWidth,\n\t\t\tlabelWidth: () => Proxy().formGroupLabelWidth,\n\t\t\tcontentWidth: '70%',\n\t\t\titemWidth: 200,\n\t\t\tshowOkBt: true,\n\t\t\tshowCancelBt: true,\n\t\t\tbtnLoading: false,\n\t\t\tdisabled: false\n\t\t}\n\t)\n\n\tconst formGroupStyle = ref({ width: props.with })\n\tconst showLoading = ref(false)\n\tconst formRRef = ref()\n\tconst formDataC = computed(() => {\n\t\tif (Array.isArray(props.formData)) {\n\t\t\tif (Array.isArray(props.formData[0])) {\n\t\t\t\tlet t: any[] = []\n\t\t\t\tfor (let f of props.formData) {\n\t\t\t\t\tif (!f) {\n\t\t\t\t\t\tcontinue\n\t\t\t\t\t}\n\t\t\t\t\tt = t.concat(\n\t\t\t\t\t\tf.filter((e: any) => e?.type === 'custom' || (e?.type === 'input' && e.slotName && e.slotPosition))\n\t\t\t\t\t)\n\t\t\t\t}\n\t\t\t\treturn t\n\t\t\t} else {\n\t\t\t\treturn props.formData?.filter?.(\n\t\t\t\t\t(e: any) => e?.type === 'custom' || (e?.type === 'input' && e.slotName && e.slotPosition)\n\t\t\t\t)\n\t\t\t}\n\t\t}\n\t\treturn []\n\t})\n\n\tfunction resetForm() {\n\t\t/*重置表单，会清空表单值并刷新表单dom，异步方法，公开*/\n\t\treturn new Promise((resolve) => {\n\t\t\tformRRef.value.resetForm?.().then((r: any) => {\n\t\t\t\tresolve(r)\n\t\t\t})\n\t\t})\n\t}\n\n\tfunction refreshFormDom() {\n\t\t/*刷新表单dom，公开*/\n\t\treturn new Promise((resolve) => {\n\t\t\tformRRef.value.refreshFormDom?.().then((r: any) => {\n\t\t\t\tresolve(r)\n\t\t\t})\n\t\t})\n\t}\n\n\tfunction reRenderForm() {\n\t\t/*重新渲染表单，异步方法（公开）*/\n\t\treturn new Promise((resolve) => {\n\t\t\tformRRef.value.reRenderForm?.().then((r: any) => {\n\t\t\t\tresolve(r)\n\t\t\t})\n\t\t})\n\t}\n\n\tfunction setItemToValGroup(data: Record<string, any>, notClearOthers: boolean) {\n\t\t/*设置表单项的值（可添加新字段，例如添加隐藏字段，需要提交这个值，但页面不展示），公开*/\n\t\tformRRef.value.setItemToValGroup?.(data, notClearOthers)\n\t}\n\n\tfunction updateValGroup(data: Record<string, any>, notClearOthers: boolean) {\n\t\t/*更新表单项的值（只能更新已有字段），公开*/\n\t\tformRRef.value.updateValGroup?.(data, notClearOthers)\n\t}\n\n\tfunction updateFormDataT(data: Record<string, any> | Record<string, any>[]) {\n\t\t/*更新表单结构，例如设置或取消禁用，公开*/\n\t\tformRRef.value.updateFormDataT?.(data)\n\t}\n\n\tfunction validate() {\n\t\t/*验证表单，公开*/\n\t\tformRRef.value.validate?.()\n\t}\n\n\tfunction reValidate(prop: any) {\n\t\t/*手动验证表单项（公开）*/\n\t\tformRRef.value.reValidate?.(prop)\n\t}\n\n\tfunction changeLoading(val: any) {\n\t\t/*改变确定按钮loading状态，私有*/\n\t\tif (val === undefined) {\n\t\t\treturn\n\t\t}\n\t\tshowLoading.value = Boolean(val)\n\t\tformRRef.value.changeLoading?.(showLoading.value)\n\t}\n\n\tfunction getValGroup() {\n\t\t/*获取用户已填数据，公开*/\n\t\treturn formRRef.value.getValGroup?.()\n\t}\n\n\tfunction onSubmit() {\n\t\t/*响应提交事件提交数据，私有*/\n\t\tshowLoading.value = true\n\t}\n\n\tfunction submit() {\n\t\t/*触发提交事件，公开*/\n\t\tformRRef.value.submit?.()\n\t}\n\n\tfunction close() {\n\t\t/*触发取消按钮点击事件，公开*/\n\t\temit('on-cancel')\n\t\tsetTimeout(() => {\n\t\t\tshowLoading.value = false\n\t\t\tformRRef.value.changeLoading?.(false)\n\t\t}, 1000)\n\t}\n\n\tdefineExpose({\n\t\tresetForm,\n\t\trefreshFormDom,\n\t\treRenderForm,\n\t\tsetItemToValGroup,\n\t\tupdateValGroup,\n\t\tupdateFormDataT,\n\t\tvalidate,\n\t\treValidate,\n\t\tchangeLoading,\n\t\tgetValGroup,\n\t\tsubmit,\n\t\tclose\n\t})\n</script>\n\n<template>\n\t<div :style=\"formGroupStyle\" class=\"formGroupBoxVM\">\n\t\t<form-r\n\t\t\tref=\"formRRef\"\n\t\t\tv-bind=\"$attrs\"\n\t\t\t:form-data=\"props.formData\"\n\t\t\t:label-width=\"props.labelWidth\"\n\t\t\t:content-width=\"props.contentWidth\"\n\t\t\t:item-width=\"props.itemWidth\"\n\t\t\t:btnLoading=\"props.btnLoading\"\n\t\t\t:disabled=\"props.disabled\"\n\t\t\t@on-submit=\"onSubmit\"\n\t\t>\n\t\t\t<template #[item.slotName]=\"{ valGroup }\" v-for=\"item in formDataC\">\n\t\t\t\t<slot :name=\"item.slotName\" :val-group=\"valGroup\" />\n\t\t\t</template>\n\t\t</form-r>\n\t\t<div\n\t\t\tclass=\"formFooterVM\"\n\t\t\tv-show=\"props.showOkBt || props.showCancelBt\"\n\t\t\t:style=\"{ marginLeft: props.labelWidth + 'px' }\"\n\t\t>\n\t\t\t<div :style=\"{ width: props.contentWidth }\" class=\"btnBoxKAL\">\n\t\t\t\t<Button\n\t\t\t\t\t@click=\"submit\"\n\t\t\t\t\tclass=\"form-save-btn\"\n\t\t\t\t\tv-if=\"props.showOkBt\"\n\t\t\t\t\t:loading=\"props.btnLoading && showLoading\"\n\t\t\t\t\t:disabled=\"props.disabled\"\n\t\t\t\t\t>{{ props.okBtTxt || t('r.confirm') }}</Button\n\t\t\t\t>\n\t\t\t\t<Button @click=\"close\" class=\"form-cancel-btn\" v-if=\"props.showCancelBt\">{{\n\t\t\t\t\tprops.cancelBtTxt || t('r.cancel')\n\t\t\t\t}}</Button>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n","<!--SearchForm 页面条件查询表单（行内）组件，一般配合btTablePage组件使用，自带查询按钮和清空按钮，用户只需要监听on-search事件取得表单采集的数据进行处理即可\n@created 2023.08.31\n@author Ricky email:zhangqingcq@foxmail.com-->\n\n<script lang=\"ts\" setup>\n\timport FormR from '../FormR/FormR.vue'\n\timport t from '../../locale/i18nSFC'\n\timport Proxy from '../../utils/proxy'\n\timport type { FormItem } from '../../public'\n\n\tconst emit = defineEmits(['on-search'])\n\tconst props = withDefaults(\n\t\tdefineProps<{\n\t\t\tformData?: Array<FormItem | FormItem[]> /*搜索表单结构数据*/\n\t\t\tlabelWidth?: number /*表单项标签宽度*/\n\t\t\titemWidth?: number /*表单项内容宽度,用于行内表单*/\n\t\t\tshowInlineOkBt?: boolean /*显示搜索按钮*/\n\t\t\tshowInlineClearBt?: boolean /*显示清空按钮*/\n\t\t}>(),\n\t\t{\n\t\t\tformData: () => [],\n\t\t\tlabelWidth: () => Proxy().searchFormLabelWidth,\n\t\t\titemWidth: () => Proxy().searchFormItemWidth,\n\t\t\tshowInlineOkBt: true,\n\t\t\tshowInlineClearBt: true\n\t\t}\n\t)\n\n\tconst formRRef = ref()\n\n\tconst formDataC = computed(() => {\n\t\tif (Array.isArray(props.formData[0])) {\n\t\t\tlet t: any[] = []\n\t\t\tfor (let f of props.formData) {\n\t\t\t\tif (!f) {\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\tt = t.concat(\n\t\t\t\t\tf.filter((e: any) => e?.type === 'custom' || (e?.type === 'input' && e.slotName && e.slotPosition))\n\t\t\t\t)\n\t\t\t}\n\t\t\treturn t\n\t\t}\n\t\treturn props.formData?.filter?.(\n\t\t\t(e: any) => e?.type === 'custom' || (e?.type === 'input' && e.slotName && e.slotPosition)\n\t\t)\n\t})\n\n\tfunction resetForm() {\n\t\t/*重置表单，会清空表单值并刷新表单dom，异步方法，公开*/\n\t\treturn new Promise((resolve: any) => {\n\t\t\tformRRef.value.resetForm?.().then(() => {\n\t\t\t\tresolve()\n\t\t\t})\n\t\t})\n\t}\n\n\tfunction refreshFormDom() {\n\t\t/*刷新表单dom，公开*/\n\t\treturn new Promise((resolve: any) => {\n\t\t\tformRRef.value.refreshFormDom?.().then(() => {\n\t\t\t\tresolve()\n\t\t\t})\n\t\t})\n\t}\n\n\tfunction reRenderForm() {\n\t\t/*重新渲染表单，异步方法（公开）*/\n\t\treturn new Promise((resolve: any) => {\n\t\t\tformRRef.value.reRenderForm?.().then(() => {\n\t\t\t\tresolve()\n\t\t\t})\n\t\t})\n\t}\n\n\tfunction setItemToValGroup(data: Record<string, any>, notClearOthers: boolean) {\n\t\t/*设置表单项的值（可添加新字段，例如添加隐藏字段，需要提交这个值，但页面不展示），公开*/\n\t\tformRRef.value.setItemToValGroup?.(data, notClearOthers)\n\t}\n\n\tfunction updateValGroup(data: Record<string, any>, notClearOthers: boolean) {\n\t\t/*更新表单项的值（只能更新已有字段），公开*/\n\t\tformRRef.value.updateValGroup?.(data, notClearOthers)\n\t}\n\n\tfunction updateFormDataT(data: Record<string, any> | Record<string, any>[]) {\n\t\t/*更新表单结构，例如设置或取消禁用，公开*/\n\t\tformRRef.value.updateFormDataT?.(data)\n\t}\n\n\tfunction validate() {\n\t\t/*验证表单，公开*/\n\t\tformRRef.value.validate?.()\n\t}\n\n\tfunction reValidate(prop: any) {\n\t\t/*手动验证表单项（公开）*/\n\t\tformRRef.value.reValidate?.(prop)\n\t}\n\n\tfunction changeLoading(val: any) {\n\t\t/*改变弹框loading状态，私有*/\n\t\tformRRef.value.changeLoading?.(val === undefined ? false : val)\n\t}\n\n\tfunction getValGroup() {\n\t\t/*获取用户已填数据，公开*/\n\t\treturn formRRef.value.getValGroup?.()\n\t}\n\n\tfunction onSubmit(data: any) {\n\t\t/*响应提交事件提交数据，私有*/\n\t\temit('on-search', data)\n\t}\n\n\tfunction submit() {\n\t\t/*触发提交事件，公开*/\n\t\tformRRef.value.submit?.()\n\t}\n\n\tonMounted(() => {\n\t\tconst el = formRRef.value.$el\n\t\tif (el?.parentNode) {\n\t\t\tel.parentNode.addEventListener('keyup', (e: any) => {\n\t\t\t\tif (e?.keyCode === 13) {\n\t\t\t\t\t//回车\n\t\t\t\t\tsubmit()\n\t\t\t\t}\n\t\t\t})\n\t\t}\n\t})\n\n\tdefineExpose({\n\t\tresetForm,\n\t\trefreshFormDom,\n\t\treRenderForm,\n\t\tsetItemToValGroup,\n\t\tupdateValGroup,\n\t\tupdateFormDataT,\n\t\tvalidate,\n\t\treValidate,\n\t\tchangeLoading,\n\t\tgetValGroup,\n\t\tsubmit\n\t})\n</script>\n\n<template>\n\t<form-r\n\t\tref=\"formRRef\"\n\t\tv-bind=\"$attrs\"\n\t\t:form-data=\"props.formData\"\n\t\t:label-width=\"props.labelWidth\"\n\t\t:item-width=\"props.itemWidth\"\n\t\tinline\n\t\t:show-long-ok-bt=\"false\"\n\t\t:show-inline-ok-bt=\"props.showInlineOkBt\"\n\t\t:inline-ok-bt-txt=\"t('r.check')\"\n\t\t:show-inline-clear-bt=\"props.showInlineClearBt\"\n\t\t:show-message=\"false\"\n\t\t@on-submit=\"onSubmit\"\n\t>\n\t\t<template #[item.slotName]=\"{ valGroup }\" v-for=\"item in formDataC\">\n\t\t\t<slot :name=\"item.slotName\" :val-group=\"valGroup\" />\n\t\t</template>\n\t</form-r>\n</template>\n","<!--FormModal 表单和弹框的组合组件，表单相关用法参考FormR，弹框支持调用方法开关，通过属性配置等，常被当作新增、编辑弹框使用\n@created 2023.08.31\n@author Ricky email:zhangqingcq@foxmail.com-->\n\n<script lang=\"ts\" setup>\n\timport t from '../../locale/i18nSFC'\n\timport Proxy from '../../utils/proxy'\n\timport { setTimeout } from '../../utils/timer'\n\timport FormR from '../FormR/FormR.vue'\n\timport type { FormItem } from '../../public'\n\n\tconst emit = defineEmits(['on-close', 'on-open'])\n\tconst props = withDefaults(\n\t\tdefineProps<{\n\t\t\ttitle?: string /*弹框标题*/\n\t\t\tformData?: Array<FormItem | FormItem[]> /*弹框结构数据*/\n\t\t\twidth?: number | string /*弹框宽度*/\n\t\t\tlabelWidth?: number /*表单项标签宽度*/\n\t\t\tokBtTxt?: string /*确定按钮内容*/\n\t\t\tcancelBtTxt?: string /*取消按钮内容*/\n\t\t\thideCancelBt?: boolean /*隐藏取消按钮（只显示确定按钮，点击确定关闭弹框，如“查看”弹框）*/\n\t\t\thideFooter?: boolean /*隐藏底栏*/\n\t\t\tbtnLoading?: boolean /*提交按钮显示loading*/\n\t\t\tdisabled?: boolean /*组件禁用（只展示信息）*/\n\t\t}>(),\n\t\t{\n\t\t\tformData: () => [],\n\t\t\twidth: () => Proxy().formModalWidth,\n\t\t\tlabelWidth: () => Proxy().formModalLabelWidth,\n\t\t\thideCancelBt: false,\n\t\t\thideFooter: false,\n\t\t\tbtnLoading: false,\n\t\t\tdisabled: false\n\t\t}\n\t)\n\n\tconst formRRef = ref()\n\tconst openModal = ref(false)\n\tconst showLoading = ref(false)\n\n\tconst formDataC = computed(() => {\n\t\tif (Array.isArray(props.formData[0])) {\n\t\t\tlet t: any[] = []\n\t\t\tfor (let f of props.formData) {\n\t\t\t\tif (!f) {\n\t\t\t\t\tcontinue\n\t\t\t\t}\n\t\t\t\tt = t.concat(\n\t\t\t\t\tf.filter((e: any) => e?.type === 'custom' || (e?.type === 'input' && e.slotName && e.slotPosition))\n\t\t\t\t)\n\t\t\t}\n\t\t\treturn t\n\t\t}\n\t\treturn props.formData?.filter?.(\n\t\t\t(e: any) => e?.type === 'custom' || (e?.type === 'input' && e.slotName && e.slotPosition)\n\t\t)\n\t})\n\n\tfunction resetForm() {\n\t\t/*重置表单，会清空表单值并刷新表单dom，异步方法，公开*/\n\t\treturn new Promise((resolve: any) => {\n\t\t\tformRRef.value.resetForm?.().then(() => {\n\t\t\t\tresolve()\n\t\t\t})\n\t\t})\n\t}\n\n\tfunction refreshFormDom() {\n\t\t/*刷新表单dom，公开*/\n\t\treturn new Promise((resolve: any) => {\n\t\t\tformRRef.value.refreshFormDom?.().then(() => {\n\t\t\t\tresolve()\n\t\t\t})\n\t\t})\n\t}\n\n\tfunction reRenderForm() {\n\t\t/*重新渲染表单，异步方法（公开）*/\n\t\treturn new Promise((resolve: any) => {\n\t\t\tformRRef.value.reRenderForm?.().then(() => {\n\t\t\t\tresolve()\n\t\t\t})\n\t\t})\n\t}\n\n\tfunction setItemToValGroup(data: Record<string, any>, notClearOthers: boolean) {\n\t\t/*设置表单项的值（公开，可添加新字段，例如添加隐藏字段，需要提交这个值，但页面不展示）*/\n\t\tformRRef.value.setItemToValGroup?.(data, notClearOthers)\n\t}\n\n\tfunction updateValGroup(data: Record<string, any>, notClearOthers: boolean) {\n\t\t/*更新表单项的值（公开，只能更新已有字段）*/\n\t\tformRRef.value.updateValGroup?.(data, notClearOthers)\n\t}\n\n\tfunction updateFormDataT(data: Record<string, any> | Record<string, any>[]) {\n\t\t/*更新表单结构，例如设置或取消禁用，公开*/\n\t\tformRRef.value.updateFormDataT?.(data)\n\t}\n\n\tfunction validate() {\n\t\t/*验证表单，公开*/\n\t\tformRRef.value.validate?.()\n\t}\n\n\tfunction reValidate(prop: any) {\n\t\t/*手动验证表单项（公开）*/\n\t\tformRRef.value.reValidate?.(prop)\n\t}\n\n\tfunction changeLoading(val: any) {\n\t\t/*改变弹框loading状态，私有*/\n\t\tif (val === undefined) {\n\t\t\treturn\n\t\t}\n\t\tshowLoading.value = Boolean(val)\n\t\tformRRef.value.changeLoading?.(showLoading.value)\n\t}\n\n\tfunction getValGroup() {\n\t\t/*获取用户已填数据，公开*/\n\t\treturn formRRef.value.getValGroup?.()\n\t}\n\n\tfunction onSubmit() {\n\t\t/*响应提交事件提交数据，私有*/\n\t\tshowLoading.value = true\n\t}\n\n\tfunction submit() {\n\t\t/*触发提交事件，公开*/\n\t\tif (props.hideCancelBt) {\n\t\t\tclose()\n\t\t} else {\n\t\t\tformRRef.value.submit?.()\n\t\t}\n\t}\n\n\tfunction open() {\n\t\t/*触发打开弹框事件，公开*/\n\t\topenModal.value = true\n\t}\n\n\tfunction close() {\n\t\t/*触发关闭弹框事件，公开*/\n\t\topenModal.value = false\n\t\tsetTimeout(() => {\n\t\t\tshowLoading.value = false\n\t\t\tformRRef.value.changeLoading?.(false)\n\t\t}, 1000)\n\t}\n\n\tfunction handleVisibleChange(show: any) {\n\t\t/*弹框开关状况改变处理，私有*/\n\t\tif (!show) {\n\t\t\temit('on-close')\n\t\t} else {\n\t\t\temit('on-open')\n\t\t}\n\t}\n\n\tdefineExpose({\n\t\tresetForm,\n\t\trefreshFormDom,\n\t\treRenderForm,\n\t\tsetItemToValGroup,\n\t\tupdateValGroup,\n\t\tupdateFormDataT,\n\t\tvalidate,\n\t\treValidate,\n\t\tchangeLoading,\n\t\tgetValGroup,\n\t\tsubmit,\n\t\topen,\n\t\tclose\n\t})\n</script>\n\n<template>\n\t<Modal\n\t\tclass=\"formModal\"\n\t\t:title=\"props.title || t('r.title')\"\n\t\tv-model=\"openModal\"\n\t\t:mask-closable=\"false\"\n\t\t:footer-hide=\"props.hideFooter\"\n\t\t:class=\"{ hideFooter: props.hideFooter }\"\n\t\t:width=\"props.width\"\n\t\t@on-visible-change=\"handleVisibleChange\"\n\t>\n\t\t<form-r\n\t\t\tref=\"formRRef\"\n\t\t\tv-bind=\"$attrs\"\n\t\t\t:form-data=\"props.formData\"\n\t\t\t:label-width=\"props.labelWidth\"\n\t\t\t:btnLoading=\"props.btnLoading\"\n\t\t\t:disabled=\"props.disabled\"\n\t\t\t@on-submit=\"onSubmit\"\n\t\t>\n\t\t\t<template #[item.slotName]=\"{ valGroup }\" v-for=\"item in formDataC\">\n\t\t\t\t<slot :name=\"item.slotName\" :val-group=\"valGroup\" />\n\t\t\t</template>\n\t\t</form-r>\n\t\t<template #footer>\n\t\t\t<Button\n\t\t\t\t@click=\"submit\"\n\t\t\t\tclass=\"modal-save-btn\"\n\t\t\t\t:loading=\"props.btnLoading && showLoading\"\n\t\t\t\t:disabled=\"props.disabled\"\n\t\t\t\t>{{ props.okBtTxt || t('r.confirm') }}</Button\n\t\t\t>\n\t\t\t<Button @click=\"close\" class=\"modal-cancel-btn\" v-if=\"!props.hideCancelBt\">{{\n\t\t\t\tprops.cancelBtTxt || t('r.cancel')\n\t\t\t}}</Button>\n\t\t</template>\n\t</Modal>\n</template>\n","<!--CheckboxTree 复选框树，支持v-model，可自定义label和v-model收集字段，可定义v-model只收集叶子节点数据或全部选中的节点数据\n@created 2023.09.01\n@author Ricky email:zhangqingcq@foxmail.com-->\n\n<script lang=\"ts\" setup>\n\timport { setValByOption } from '../../utils/globalFunc'\n\timport { findIndex, find, cloneDeep } from 'lodash-es'\n\n\tconst emit = defineEmits(['update:modelValue', 'on-change'])\n\tconst props = withDefaults(\n\t\tdefineProps<{\n\t\t\tmodelValue?: any[] /*选中的节点的集合（内容依据collectVal中的字段）*/\n\t\t\tdata?: any[] /*树结构数据*/\n\t\t\texpandAll?: boolean /*是否默认全部展开*/\n\t\t\tlabel?: string /*节点的标签*/\n\t\t\tcollectVal?: string | string[] /*v-model收集节点的哪些字段*/\n\t\t\tleaf?: boolean /*叶子节点模式，v-model只返回叶子节点数据，任何选择操作都会选择叶子节点*/\n\t\t\tinlineLeaf?: boolean /*叶子节点为行内模式，横向排列*/\n\t\t\tdisabled?: boolean /*禁用整颗树的checkbox选择功能*/\n\t\t}>(),\n\t\t{\n\t\t\tmodelValue: () => [],\n\t\t\tdata: () => [],\n\t\t\texpandAll: false,\n\t\t\tlabel: 'name',\n\t\t\tcollectVal: 'id',\n\t\t\tleaf: true,\n\t\t\tinlineLeaf: false,\n\t\t\tdisabled: false\n\t\t}\n\t)\n\n\tconst initTree = ref(true)\n\tconst dataT = ref<any[]>([])\n\tconst id = 'CKT' + Math.floor(Math.random() * 10000000 + 10000000)\n\tlet valueE: any[] = []\n\tconst collectValT = computed(() => {\n\t\tif (Array.isArray(props.collectVal)) {\n\t\t\treturn props.collectVal\n\t\t} else if (typeof props.collectVal === 'string') {\n\t\t\treturn [props.collectVal]\n\t\t}\n\t\treturn []\n\t})\n\tconst valueT = computed(() => {\n\t\tif (Array.isArray(props.modelValue)) {\n\t\t\treturn props.modelValue\n\t\t}\n\t\treturn []\n\t})\n\n\twatch(\n\t\t() => props.data,\n\t\t(after: any) => {\n\t\t\tinitTree.value = false\n\t\t\tlet temp: any[] = []\n\t\t\tinitData(after, temp)\n\t\t\tdataT.value = temp\n\t\t\tnextTick(function () {\n\t\t\t\tinitTree.value = true\n\n\t\t\t\tif (props.inlineLeaf) {\n\t\t\t\t\tnextTick(changeStyle)\n\t\t\t\t}\n\t\t\t})\n\t\t},\n\t\t{\n\t\t\timmediate: true,\n\t\t\tdeep: true\n\t\t}\n\t)\n\n\twatch(\n\t\t() => valueT.value,\n\t\t(after: any) => {\n\t\t\tlet key: string\n\t\t\tlet type = 's'\n\t\t\tif (Array.isArray(props.collectVal)) {\n\t\t\t\tkey = props.collectVal[0] || ''\n\t\t\t\ttype = 'a'\n\t\t\t} else {\n\t\t\t\tkey = props.collectVal\n\t\t\t}\n\t\t\tif (!key || JSON.stringify(after) === JSON.stringify(valueE)) {\n\t\t\t\tvalueE = []\n\t\t\t\treturn\n\t\t\t}\n\t\t\t/*清空dataT已选*/\n\t\t\tsetValByOption({\n\t\t\t\tgroup: dataT.value,\n\t\t\t\tcondition: (e: any) => e?.checked === true,\n\t\t\t\tkey: 'checked',\n\t\t\t\tval: false\n\t\t\t})\n\t\t\t/*根据value设置dataT的已选*/\n\t\t\tif (type === 'a') {\n\t\t\t\tsetValByOption({\n\t\t\t\t\tgroup: dataT.value,\n\t\t\t\t\tcondition: (e) => findIndex(after, [key, e?.[key]]) !== -1,\n\t\t\t\t\tkey: 'checked',\n\t\t\t\t\tval: true\n\t\t\t\t})\n\t\t\t} else {\n\t\t\t\tsetValByOption({\n\t\t\t\t\tgroup: dataT.value,\n\t\t\t\t\tcondition: (e) => after.indexOf(e?.[key]) !== -1,\n\t\t\t\t\tkey: 'checked',\n\t\t\t\t\tval: true\n\t\t\t\t})\n\t\t\t}\n\t\t}\n\t)\n\n\twatch(\n\t\t() => props.disabled,\n\t\t(after: any) => {\n\t\t\tsetValByOption({\n\t\t\t\tgroup: dataT.value,\n\t\t\t\tcondition: (e) => e && e.disableCheckbox !== after,\n\t\t\t\tkey: 'disableCheckbox',\n\t\t\t\tval: after\n\t\t\t})\n\t\t\tif (props.inlineLeaf) {\n\t\t\t\tnextTick(changeStyle)\n\t\t\t}\n\t\t},\n\t\t{ immediate: true }\n\t)\n\n\tfunction initData(data: any[], root: any[] = []) {\n\t\tfor (let item of data) {\n\t\t\tlet checked = false\n\t\t\tif (collectValT.value.length > 1) {\n\t\t\t\t/*valueT的元素为Object*/\n\t\t\t\tchecked = find(valueT.value, (e: any) => e[collectValT.value[0]] === item[collectValT.value[0]]) !== undefined\n\t\t\t} else {\n\t\t\t\tchecked = collectValT.value[0] ? valueT.value.indexOf(item[collectValT.value[0]]) !== -1 : false\n\t\t\t}\n\t\t\tlet temp: Record<string, any> = {\n\t\t\t\tname: item?.[props.label],\n\t\t\t\texpand: Boolean(props.expandAll || item?.expand),\n\t\t\t\tchecked: checked,\n\t\t\t\tdisableCheckbox: props.disabled\n\t\t\t}\n\t\t\tfor (let keyI of collectValT.value) {\n\t\t\t\ttemp[keyI] = item[keyI]\n\t\t\t}\n\t\t\troot.push(temp)\n\t\t\tif (item?.children && item.children.length > 0) {\n\t\t\t\ttemp.children = []\n\t\t\t\tinitDataB(item.children, temp.children)\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction initDataB(data: any[], root: any[] = []) {\n\t\tfor (let item of data) {\n\t\t\tlet checked = false\n\t\t\tif (collectValT.value.length > 1) {\n\t\t\t\t/*valueT的元素为Object*/\n\t\t\t\tchecked = find(valueT.value, (e) => e[collectValT.value[0]] === item[collectValT.value[0]]) !== undefined\n\t\t\t} else {\n\t\t\t\tchecked = collectValT.value[0] ? valueT.value.indexOf(item[collectValT.value[0]]) !== -1 : false\n\t\t\t}\n\t\t\tlet temp: Record<string, any> = {\n\t\t\t\tname: item?.[props.label],\n\t\t\t\texpand: Boolean(props.expandAll || item?.expand),\n\t\t\t\tchecked: checked,\n\t\t\t\tdisableCheckbox: props.disabled\n\t\t\t}\n\t\t\tfor (let keyI of collectValT.value) {\n\t\t\t\ttemp[keyI] = item[keyI]\n\t\t\t}\n\t\t\troot.push(temp)\n\t\t\tif (item?.children && item.children.length > 0) {\n\t\t\t\ttemp.children = []\n\t\t\t\tinitData(item.children, temp.children)\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction renderContent(\n\t\th: any,\n\t\t{\n\t\t\tdata\n\t\t}: {\n\t\t\tdata: any\n\t\t}\n\t) {\n\t\tlet classA = ''\n\t\tlet isLeaf = true\n\t\tif (data.children && data.children.length > 0) {\n\t\t\tfor (let ii of data.children) {\n\t\t\t\tif (ii.children !== undefined) {\n\t\t\t\t\tisLeaf = false\n\t\t\t\t\tbreak\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (isLeaf && props.inlineLeaf) {\n\t\t\t\tclassA = 'inlineChildXA'\n\t\t\t}\n\t\t}\n\t\treturn h(\n\t\t\t'div',\n\t\t\t{\n\t\t\t\tstyle: {\n\t\t\t\t\tdisplay: 'inline-block',\n\t\t\t\t\twidth: '100%'\n\t\t\t\t},\n\t\t\t\tclass: classA\n\t\t\t},\n\t\t\t[\n\t\t\t\th(\n\t\t\t\t\t'span',\n\t\t\t\t\t{\n\t\t\t\t\t\tstyle: {\n\t\t\t\t\t\t\tfontWeight: data.children ? 'bold' : 'normal'\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdata.name\n\t\t\t\t)\n\t\t\t]\n\t\t)\n\t}\n\n\tfunction changeStyle(data?: Record<string, any>) {\n\t\tif (data) {\n\t\t\tif (data.expand) {\n\t\t\t\tnextTick(changeStyle)\n\t\t\t}\n\t\t\treturn\n\t\t}\n\t\tlet arr = document.querySelectorAll('#' + id + ' .inlineChildXA')\n\t\tif (arr.length > 0) {\n\t\t\tfor (let item of arr) {\n\t\t\t\tlet parent = item?.parentElement\n\t\t\t\tlet tt = parent?.nextElementSibling\n\t\t\t\tif (!tt) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tif (tt.tagName !== 'BR') {\n\t\t\t\t\tlet grandParent = parent?.parentElement\n\t\t\t\t\tlet br = document.createElement('br')\n\t\t\t\t\tgrandParent?.insertBefore(br, tt)\n\t\t\t\t\ttt = br.nextElementSibling\n\t\t\t\t\tif (tt?.className.indexOf('inlineTreeNodeF') === -1) {\n\t\t\t\t\t\ttt.setAttribute('class', tt.className + ' inlineTreeNodeF')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\twhile (tt?.nextElementSibling) {\n\t\t\t\t\ttt = tt.nextElementSibling\n\t\t\t\t\tif (tt.className.indexOf('inlineTreeNodeF') === -1) {\n\t\t\t\t\t\ttt.setAttribute('class', tt.className + ' inlineTreeNodeF')\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction updateVal(data: any[]) {\n\t\tlet temp: any[] = []\n\t\tif (props.leaf) {\n\t\t\tfor (let item of data) {\n\t\t\t\tif (!item.children) {\n\t\t\t\t\tif (Array.isArray(props.collectVal)) {\n\t\t\t\t\t\tlet valT: Record<string, any> = {}\n\t\t\t\t\t\tfor (let keyI of props.collectVal) {\n\t\t\t\t\t\t\tvalT[keyI] = item[keyI]\n\t\t\t\t\t\t}\n\t\t\t\t\t\ttemp.push(valT)\n\t\t\t\t\t} else {\n\t\t\t\t\t\ttemp.push(item[props.collectVal])\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let item of data) {\n\t\t\t\tif (Array.isArray(props.collectVal)) {\n\t\t\t\t\tlet valT: Record<string, any> = {}\n\t\t\t\t\tfor (let keyI of props.collectVal) {\n\t\t\t\t\t\tvalT[keyI] = item[keyI]\n\t\t\t\t\t}\n\t\t\t\t\ttemp.push(valT)\n\t\t\t\t} else {\n\t\t\t\t\ttemp.push(item[props.collectVal])\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tvalueE = temp\n\t\temit('update:modelValue', temp)\n\t\temit('on-change', cloneDeep(temp))\n\t}\n</script>\n\n<template>\n\t<Tree\n\t\t:id=\"id\"\n\t\tclass=\"checkboxTreeGA\"\n\t\tv-if=\"initTree\"\n\t\t:data=\"dataT\"\n\t\t:render=\"renderContent\"\n\t\t@on-check-change=\"updateVal\"\n\t\t@on-toggle-expand=\"changeStyle\"\n\t\tshow-checkbox\n\t/>\n</template>\n","<!--TransferBox 穿梭框，左右两套由筛选表单-表格-页签集成的UI组件之间的数据穿梭，左右表格数据皆来自接口，穿梭时自动请求接口，然后自动刷新数据\n@created 2023.09.04\n@author Ricky email:zhangqingcq@foxmail.com-->\n<script lang=\"ts\" setup>\n\timport { isEmpty } from 'lodash-es'\n\timport t from '../../locale/i18nSFC'\n\timport $fetch from '../../utils/fetch'\n\timport $swal from '../../utils/swal'\n\timport ShowHidePanel from '../ShowHidePanel/ShowHidePanel.vue'\n\timport SearchForm from '../SearchForm/SearchForm.vue'\n\timport BtTablePage from '../BtTablePage/BtTablePage.vue'\n\timport Proxy from '../../utils/proxy'\n\n\tconst emit = defineEmits(['transferred', 'on-data-change-l', 'on-data-change-r'])\n\tconst props = withDefaults(\n\t\tdefineProps<{\n\t\t\ttitleLeft?: string\n\t\t\ttitleRight?: string\n\t\t\tformDataLeft?: any[]\n\t\t\tformDataRight?: any[]\n\t\t\tformRulesLeft?: Record<string, any>\n\t\t\tformRulesRight?: Record<string, any>\n\t\t\tconstSearchDataLeft?: Record<string, any>\n\t\t\tconstSearchDataRight?: Record<string, any>\n\t\t\tleftTableColumns?: any[]\n\t\t\trightTableColumns?: any[]\n\t\t\tleftTableUrl?: string\n\t\t\trightTableUrl?: string\n\t\t\taddUrl?: string\n\t\t\tdeleteUrl?: string\n\t\t\taddAllUrl?: string\n\t\t\tdeleteAllUrl?: string\n\t\t\taddParamsHandle?: (d: any) => any\n\t\t\tdeleteParamsHandle?: (d: any) => any\n\t\t\taddAllParamsHandle?: (d: any) => any\n\t\t\tdeleteAllParamsHandle?: (d: any) => any\n\t\t\taddMethod?: 'post' | 'put' | 'get'\n\t\t\taddAllMethod?: 'post' | 'put' | 'get'\n\t\t\tdeleteMethod?: 'delete' | 'post' | 'put' | 'get'\n\t\t\tdeleteAllMethod?: 'delete' | 'post' | 'put' | 'get'\n\t\t\tsearchFormLabelWith?: number\n\t\t\tusePagePro?: boolean /*是否使用pagePro组件作为页签*/\n\t\t\tshowTotal?: boolean /*page是否展示total*/\n\t\t\tshowSizer?: boolean /*page是否展示sizer*/\n\t\t\tleftSearchDataFilter?: (d: any) => any\n\t\t\trightSearchDataFilter?: (d: any) => any\n\t\t}>(),\n\t\t{\n\t\t\tformDataLeft: () => [],\n\t\t\tformDataRight: () => [],\n\t\t\tformRulesLeft: () => ({}),\n\t\t\tformRulesRight: () => ({}),\n\t\t\tconstSearchDataLeft: () => ({}),\n\t\t\tconstSearchDataRight: () => ({}),\n\t\t\tleftTableColumns: () => [],\n\t\t\trightTableColumns: () => [],\n\t\t\taddParamsHandle: (selection: any[]) => selection.map((e: any) => e?.id),\n\t\t\tdeleteParamsHandle: (selection: any[]) => selection.map((e: any) => e?.id),\n\t\t\taddAllParamsHandle: (searchData: Record<string, any>) => searchData,\n\t\t\tdeleteAllParamsHandle: (searchData: Record<string, any>) => searchData,\n\t\t\taddMethod: 'post',\n\t\t\taddAllMethod: 'post',\n\t\t\tdeleteMethod: 'delete',\n\t\t\tdeleteAllMethod: 'delete',\n\t\t\tusePagePro: () => Proxy()?.btTablePageUsePagePro,\n\t\t\tshowTotal: () => Proxy()?.pageShowTotal,\n\t\t\tshowSizer: () => Proxy()?.pageShowSizer\n\t\t}\n\t)\n\n\tlet searchDataLeft = ref<Record<string, any>>({})\n\tlet searchDataRight = ref<Record<string, any>>({})\n\tlet lSelection = ref<any[]>([])\n\tlet rSelection = ref<any[]>([])\n\tlet leftTotal = ref(0)\n\tlet rightTotal = ref(0)\n\n\tconst leftTableSearchData = computed(() => ({ ...props.constSearchDataLeft, ...searchDataLeft.value }))\n\tconst rightTableSearchData = computed(() => ({ ...props.constSearchDataRight, ...searchDataRight.value }))\n\tconst delAllDis = computed(() => leftTotal.value < 1)\n\tconst deleteDis = computed(() => lSelection.value.length < 1)\n\tconst addDis = computed(() => rSelection.value.length < 1)\n\tconst addAllDis = computed(() => rightTotal.value < 1)\n\n\tconst leftFormRef = ref()\n\tconst rightFormRef = ref()\n\tconst lTabRef = ref()\n\tconst rTabRef = ref()\n\n\t/*重置穿梭框（公开）*/\n\tfunction reset() {\n\t\tleftFormRef.value.resetForm()\n\t\trightFormRef.value.resetForm()\n\t\tif (!isEmpty(searchDataLeft.value)) {\n\t\t\tsearchDataLeft.value = {}\n\t\t}\n\t\tif (!isEmpty(searchDataRight.value)) {\n\t\t\tsearchDataRight.value = {}\n\t\t}\n\t\tlTabRef.value.clearSelect()\n\t\trTabRef.value.clearSelect()\n\t}\n\n\t/*主动触发筛选/刷新数据（公开）*/\n\tfunction search() {\n\t\tlTabRef.value.search()\n\t\trTabRef.value.search()\n\t}\n\n\t/*私有*/\n\tfunction lSelectionChange(s: any) {\n\t\tlSelection.value = s\n\t}\n\n\t/*私有*/\n\tfunction rSelectionChange(s: any) {\n\t\trSelection.value = s\n\t}\n\n\t/*私有*/\n\tfunction dataChangeL(d: Record<string, any>) {\n\t\tleftTotal.value = d?.data?.page?.total || d?.data?.data?.total || d?.data?.total || d?.total || 0\n\t\temit('on-data-change-l', d)\n\t}\n\n\t/*私有*/\n\tfunction dataChangeR(d: Record<string, any>) {\n\t\trightTotal.value = d?.data?.page?.total || d?.data?.data?.total || d?.data?.total || d?.total || 0\n\t\temit('on-data-change-r', d)\n\t}\n\n\t/*私有*/\n\tfunction searchLeft(d: any) {\n\t\tif (typeof props.leftSearchDataFilter === 'function') {\n\t\t\tsearchDataLeft.value = props.leftSearchDataFilter(d)\n\t\t} else {\n\t\t\tsearchDataLeft.value = d\n\t\t}\n\t}\n\n\t/*私有*/\n\tfunction searchRight(d: any) {\n\t\tif (typeof props.rightSearchDataFilter === 'function') {\n\t\t\tsearchDataRight.value = props.rightSearchDataFilter(d)\n\t\t} else {\n\t\t\tsearchDataRight.value = d\n\t\t}\n\t}\n\n\t/*私有*/\n\tfunction add() {\n\t\tif (props.addUrl) {\n\t\t\tfetchX('add')\n\t\t}\n\t}\n\n\t/*私有*/\n\tfunction remove() {\n\t\tif (props.deleteUrl) {\n\t\t\tfetchX('delete')\n\t\t}\n\t}\n\n\t/*私有*/\n\tfunction addAll() {\n\t\tif (props.addAllUrl && props.addUrl) {\n\t\t\tfetchX('addAll')\n\t\t}\n\t}\n\n\t/*私有*/\n\tfunction removeAll() {\n\t\tif (props.deleteAllUrl) {\n\t\t\tfetchX('deleteAll')\n\t\t}\n\t}\n\n\t/*私有*/\n\tfunction fetchX(action: 'add' | 'delete' | 'addAll' | 'deleteAll') {\n\t\tlet method\n\t\tlet url\n\t\tlet data: Record<string, any> = {}\n\t\tlet msg = ''\n\t\tswitch (action) {\n\t\t\tcase 'add':\n\t\t\t\tmethod = props.addMethod\n\t\t\t\turl = props.addUrl\n\t\t\t\tdata = props.addParamsHandle(rSelection.value)\n\t\t\t\tmsg = t('r.add')\n\t\t\t\tbreak\n\t\t\tcase 'delete':\n\t\t\t\tmethod = props.deleteMethod\n\t\t\t\turl = props.deleteUrl\n\t\t\t\tdata = props.deleteParamsHandle(lSelection.value)\n\t\t\t\tmsg = t('r.remove')\n\t\t\t\tbreak\n\t\t\tcase 'addAll':\n\t\t\t\tmethod = props.addAllMethod\n\t\t\t\turl = props.addAllUrl\n\t\t\t\tdata = props.addAllParamsHandle(rightTableSearchData.value)\n\t\t\t\tmsg = t('r.addAll')\n\t\t\t\tbreak\n\t\t\tcase 'deleteAll':\n\t\t\t\tmethod = props.deleteAllMethod\n\t\t\t\turl = props.deleteAllUrl\n\t\t\t\tdata = props.deleteAllParamsHandle(leftTableSearchData.value)\n\t\t\t\tmsg = t('r.removeAll')\n\t\t\t\tbreak\n\t\t}\n\t\tif (url && method) {\n\t\t\t$fetch[method](url, data, null, [], { spin: true }, false)\n\t\t\t\t.then((r: any) => {\n\t\t\t\t\tif (r?.code === 0) {\n\t\t\t\t\t\t$swal(msg + t('r.success'), r?.message || '', 'success')\n\t\t\t\t\t\tif (lTabRef.value) {\n\t\t\t\t\t\t\tlTabRef.value.getTableData()\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (rTabRef.value) {\n\t\t\t\t\t\t\trTabRef.value.getTableData()\n\t\t\t\t\t\t}\n\t\t\t\t\t\temit('transferred')\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$swal(msg + t('r.failed'), r?.message || '', 'error')\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t\t.catch(() => {\n\t\t\t\t\t$swal(msg + t('r.error'), '', 'error')\n\t\t\t\t})\n\t\t}\n\t}\n\n\tdefineExpose({\n\t\treset,\n\t\tsearch\n\t})\n</script>\n\n<template>\n\t<div class=\"transferBoxRL\">\n\t\t<div class=\"leftBoxLLL\">\n\t\t\t<div class=\"fullHeight flexColumnBox\">\n\t\t\t\t<div class=\"notGrow\">\n\t\t\t\t\t<div class=\"titleLLL\">{{ props.titleLeft || t('r.added') }}</div>\n\t\t\t\t\t<show-hide-panel>\n\t\t\t\t\t\t<search-form\n\t\t\t\t\t\t\tref=\"leftFormRef\"\n\t\t\t\t\t\t\t:form-data=\"props.formDataLeft\"\n\t\t\t\t\t\t\t:form-rules=\"props.formRulesLeft\"\n\t\t\t\t\t\t\t:label-width=\"props.searchFormLabelWith\"\n\t\t\t\t\t\t\t@on-search=\"searchLeft\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</show-hide-panel>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"growFlexItem\">\n\t\t\t\t\t<bt-table-page\n\t\t\t\t\t\tref=\"lTabRef\"\n\t\t\t\t\t\t:columns=\"props.leftTableColumns\"\n\t\t\t\t\t\t:url=\"props.leftTableUrl\"\n\t\t\t\t\t\t:search-data=\"leftTableSearchData\"\n\t\t\t\t\t\t@on-selection-change=\"lSelectionChange\"\n\t\t\t\t\t\t@on-data-change=\"dataChangeL\"\n\t\t\t\t\t\t:init-data=\"Boolean(isEmpty(props.constSearchDataLeft) && props.leftTableUrl)\"\n\t\t\t\t\t\tget-data-loading\n\t\t\t\t\t\tselection\n\t\t\t\t\t\t:usePagePro=\"props.usePagePro\"\n\t\t\t\t\t\t:showTotal=\"props.showTotal\"\n\t\t\t\t\t\t:showSizer=\"props.showSizer\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\n\t\t<div class=\"middleBoxLLL\">\n\t\t\t<Button class=\"middleBtLLL\" type=\"default\" @click=\"removeAll\" :disabled=\"delAllDis\"\n\t\t\t\t>{{ t('r.removeAll') }}\n\t\t\t\t<Icon type=\"ios-arrow-forward\" />\n\t\t\t</Button>\n\t\t\t<Button class=\"middleBtLLL\" type=\"default\" @click=\"remove\" :disabled=\"deleteDis\"\n\t\t\t\t>{{ t('r.remove') }}\n\t\t\t\t<Icon type=\"ios-arrow-forward\" />\n\t\t\t</Button>\n\t\t\t<Button class=\"middleBtLLL\" type=\"primary\" @click=\"add\" :disabled=\"addDis\">\n\t\t\t\t<Icon type=\"ios-arrow-back\" />\n\t\t\t\t{{ t('r.add') }}</Button\n\t\t\t>\n\t\t\t<Button class=\"middleBtLLL\" type=\"primary\" @click=\"addAll\" :disabled=\"addAllDis\">\n\t\t\t\t<Icon type=\"ios-arrow-back\" />\n\t\t\t\t{{ t('r.addAll') }}</Button\n\t\t\t>\n\t\t</div>\n\n\t\t<div class=\"rightBoxLLL\">\n\t\t\t<div class=\"fullHeight flexColumnBox\">\n\t\t\t\t<div class=\"notGrow\">\n\t\t\t\t\t<div class=\"titleLLL\">{{ props.titleRight || t('r.notAdded') }}</div>\n\n\t\t\t\t\t<show-hide-panel>\n\t\t\t\t\t\t<search-form\n\t\t\t\t\t\t\tref=\"rightFormRef\"\n\t\t\t\t\t\t\t:form-data=\"props.formDataRight\"\n\t\t\t\t\t\t\t:form-rules=\"props.formRulesRight\"\n\t\t\t\t\t\t\t:label-width=\"props.searchFormLabelWith\"\n\t\t\t\t\t\t\t@on-search=\"searchRight\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</show-hide-panel>\n\t\t\t\t</div>\n\n\t\t\t\t<div class=\"growFlexItem\">\n\t\t\t\t\t<bt-table-page\n\t\t\t\t\t\tref=\"rTabRef\"\n\t\t\t\t\t\t:columns=\"props.rightTableColumns\"\n\t\t\t\t\t\t:url=\"props.rightTableUrl\"\n\t\t\t\t\t\t:search-data=\"rightTableSearchData\"\n\t\t\t\t\t\t@on-selection-change=\"rSelectionChange\"\n\t\t\t\t\t\t@on-data-change=\"dataChangeR\"\n\t\t\t\t\t\t:init-data=\"Boolean(isEmpty(props.constSearchDataRight) && props.rightTableUrl)\"\n\t\t\t\t\t\tget-data-loading\n\t\t\t\t\t\tselection\n\t\t\t\t\t\t:usePagePro=\"props.usePagePro\"\n\t\t\t\t\t\t:showTotal=\"props.showTotal\"\n\t\t\t\t\t\t:showSizer=\"props.showSizer\"\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</template>\n","<!--CheckboxGroupTwoClass 二级复选框组，支持v-model，可自定义label和v-model收集字段，可定义v-model只收集叶子节点数据或全部选中的节点数据\r\n@created 2023.10.17\r\n@author Ricky email:zhangqingcq@foxmail.com-->\r\n\r\n<script lang=\"ts\" setup>\r\n\timport { cloneDeep, isEmpty, isEqual } from 'lodash-es'\r\n\timport { myTypeof } from '../../utils/globalFunc'\r\n\timport t from '../../locale/i18nSFC'\r\n\timport type { TreeNode } from '../../public'\r\n\r\n\tconst props = withDefaults(\r\n\t\tdefineProps<{\r\n\t\t\tmodelValue?: any[]\r\n\t\t\tdata?: TreeNode[]\r\n\t\t\tfirstTitle?: string\r\n\t\t\tsecondTitle?: string\r\n\t\t\tlabel?: string /*节点的标签*/\r\n\t\t\tcollectVal?: string | string[] /*v-model收集节点的哪些字段*/\r\n\t\t\tleaf?: boolean /*叶子节点模式，v-model只返回叶子节点数据，任何选择操作都会选择叶子节点*/\r\n\t\t\tdisabled?: boolean /*禁用整颗树的checkbox选择功能*/\r\n\t\t}>(),\r\n\t\t{\r\n\t\t\tmodelValue: () => [],\r\n\t\t\tdata: () => [],\r\n\t\t\tlabel: 'name',\r\n\t\t\tcollectVal: 'id',\r\n\t\t\tleaf: true\r\n\t\t}\r\n\t)\r\n\tconst emit = defineEmits(['update:modelValue', 'on-change'])\r\n\tconst leafChecked = ref<any[]>([])\r\n\tconst dataT = computed(() => {\r\n\t\tlet temp = cloneDeep(props.data)\r\n\t\tlet valTemp = cloneDeep(leafChecked.value)\r\n\t\tfor (let item of temp) {\r\n\t\t\t/*遍历data添加勾选信息*/\r\n\t\t\tlet checkCount = 0\r\n\t\t\tif (item?.children && !isEmpty(item.children)) {\r\n\t\t\t\tfor (let secItem of item.children) {\r\n\t\t\t\t\t/*更深一层遍历children*/\r\n\t\t\t\t\tfor (let valIndex = 0, len = valTemp?.length; valIndex < len; valIndex++) {\r\n\t\t\t\t\t\t/*遍历继承的value*/\r\n\t\t\t\t\t\tif (Array.isArray(props.collectVal)) {\r\n\t\t\t\t\t\t\t/*收集多个字段的情况*/\r\n\t\t\t\t\t\t\tlet equalI = true\r\n\t\t\t\t\t\t\tfor (let collectKey of props.collectVal) {\r\n\t\t\t\t\t\t\t\tif (valTemp[valIndex]?.[collectKey] !== secItem?.[collectKey]) {\r\n\t\t\t\t\t\t\t\t\t/*遍历中当前节点和value的当前遍历元素不等（收集字段对应的值有不等的），判断为当前节点没有被选中，不在判断其他收集字段，跳出循环*/\r\n\t\t\t\t\t\t\t\t\tequalI = false\r\n\t\t\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/*循环结束，如果equalI的值没被改为false,则表示当前节点被选中*/\r\n\t\t\t\t\t\t\tif (equalI) {\r\n\t\t\t\t\t\t\t\t/*如果当前节点被选中，当前父级中选中的子节点数加一，不在遍历value其他元素，跳出循环*/\r\n\t\t\t\t\t\t\t\tsecItem.checked = true\r\n\t\t\t\t\t\t\t\tcheckCount++\r\n\t\t\t\t\t\t\t\tvalTemp.splice(valIndex, 1)\r\n\t\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else if (valTemp[valIndex] === secItem[props.collectVal]) {\r\n\t\t\t\t\t\t\t/*收集单个字段且当前节点的对应字段的值和value中当前遍历元素相等,判断为选中，不在遍历value其他元素，跳出循环*/\r\n\t\t\t\t\t\t\tsecItem.checked = true\r\n\t\t\t\t\t\t\tcheckCount++\r\n\t\t\t\t\t\t\tvalTemp.splice(valIndex, 1)\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t/*避免checked为Undefined*/\r\n\t\t\t\t\t!secItem.checked && (secItem.checked = false)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (checkCount === 0) {\r\n\t\t\t\titem.checked = false\r\n\t\t\t\titem.indeterminate = false\r\n\t\t\t} else if (item.children && checkCount === item.children.length) {\r\n\t\t\t\titem.checked = true\r\n\t\t\t\titem.indeterminate = false\r\n\t\t\t} else {\r\n\t\t\t\titem.checked = false\r\n\t\t\t\titem.indeterminate = true\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn temp\r\n\t})\r\n\r\n\twatch(\r\n\t\t() => props.modelValue,\r\n\t\t(after, before) => {\r\n\t\t\tif (isEqual(leafChecked.value, after) || isEqual(after, before)) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tleafChecked.value = after\r\n\t\t},\r\n\t\t{\r\n\t\t\timmediate: true,\r\n\t\t\tdeep: true\r\n\t\t}\r\n\t)\r\n\r\n\tfunction checkAll(root: TreeNode, isCheck: boolean) {\r\n\t\tif (root.children) {\r\n\t\t\tfor (let item of root.children) {\r\n\t\t\t\titem.checked = isCheck\r\n\t\t\t}\r\n\t\t}\r\n\t\tupdateDataT()\r\n\t}\r\n\r\n\tfunction updateDataT() {\r\n\t\tgetLeafChecked(dataT.value, true)\r\n\t}\r\n\r\n\tfunction getLeafChecked(val: TreeNode[], isLeaf?: boolean) {\r\n\t\tlet temp: any[] = []\r\n\t\tfor (let item of val) {\r\n\t\t\tif (!isLeaf && !props.leaf && item.checked && item.indeterminate === false) {\r\n\t\t\t\t/*非叶子节点模式且需要获取parent节点时，如果当前parent节点所有子节点都选中，在value中带上parent节点*/\r\n\t\t\t\tif (Array.isArray(props.collectVal)) {\r\n\t\t\t\t\tlet ttO: Record<string, any> = {}\r\n\t\t\t\t\tfor (let keyI of props.collectVal) {\r\n\t\t\t\t\t\tttO[keyI] = item[keyI]\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttemp.push(ttO)\r\n\t\t\t\t} else if (myTypeof(props.collectVal) === 'String') {\r\n\t\t\t\t\ttemp.push(item[props.collectVal])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (item.children) {\r\n\t\t\t\tfor (let secItem of item.children) {\r\n\t\t\t\t\tif (secItem.checked) {\r\n\t\t\t\t\t\tif (Array.isArray(props.collectVal)) {\r\n\t\t\t\t\t\t\tlet ttO: Record<string, any> = {}\r\n\t\t\t\t\t\t\tfor (let keyI of props.collectVal) {\r\n\t\t\t\t\t\t\t\tttO[keyI] = secItem[keyI]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttemp.push(ttO)\r\n\t\t\t\t\t\t} else if (myTypeof(props.collectVal) === 'String') {\r\n\t\t\t\t\t\t\ttemp.push(secItem[props.collectVal])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isLeaf) {\r\n\t\t\tleafChecked.value = temp\r\n\t\t\tif (props.leaf) {\r\n\t\t\t\temit('update:modelValue', temp)\r\n\t\t\t\temit('on-change', cloneDeep(temp))\r\n\t\t\t} else {\r\n\t\t\t\tnextTick(function () {\r\n\t\t\t\t\tgetLeafChecked(dataT.value)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\temit('update:modelValue', temp)\r\n\t\t\temit('on-change', cloneDeep(temp))\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<template>\r\n\t<div class=\"boxLPA\">\r\n\t\t<div class=\"headerJ\">\r\n\t\t\t<div class=\"firstT borderBoxAS\">{{ firstTitle || t('r.level.1') }}</div>\r\n\t\t\t<div class=\"secondT borderBoxAS\">{{ secondTitle || t('r.level.2') }}</div>\r\n\t\t</div>\r\n\t\t<div class=\"bodyJ\" v-for=\"(item, index) in dataT\" :key=\"'checkboxJ' + index\">\r\n\t\t\t<div class=\"firstCol borderBoxAS\">\r\n\t\t\t\t<Checkbox\r\n\t\t\t\t\tv-model=\"item.checked\"\r\n\t\t\t\t\t:indeterminate=\"item.indeterminate\"\r\n\t\t\t\t\t@on-change=\"checkAll(item, $event)\"\r\n\t\t\t\t\t:disabled=\"disabled\"\r\n\t\t\t\t\t>{{ item[label] }}</Checkbox\r\n\t\t\t\t>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"secondCol borderBoxAS\">\r\n\t\t\t\t<div class=\"secItem\" v-for=\"(secItem, indexSec) in item.children\" :key=\"'secItem' + indexSec\">\r\n\t\t\t\t\t<Checkbox v-model=\"secItem.checked\" @on-change=\"updateDataT\" :disabled=\"disabled\">{{\r\n\t\t\t\t\t\tsecItem[label]\r\n\t\t\t\t\t}}</Checkbox>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n","<!--CheckboxGroupThreeClass 三级复选框组，支持v-model，可自定义label和v-model收集字段，可定义v-model只收集叶子节点数据或全部选中的节点数据\r\n@created 2023.10.24\r\n@author Ricky email:zhangqingcq@foxmail.com-->\r\n\r\n<script lang=\"ts\" setup>\r\n\timport { cloneDeep, isEmpty, isEqual } from 'lodash-es'\r\n\timport { myTypeof } from '../../utils/globalFunc'\r\n\timport t from '../../locale/i18nSFC'\r\n\timport type { TreeNode } from '../../public'\r\n\r\n\tconst emit = defineEmits(['update:modelValue', 'on-change'])\r\n\tconst props = withDefaults(\r\n\t\tdefineProps<{\r\n\t\t\tmodelValue?: any[]\r\n\t\t\tdata?: TreeNode[]\r\n\t\t\tfirstTitle?: string\r\n\t\t\tsecondTitle?: string\r\n\t\t\tthirdTitle?: string\r\n\t\t\tlabel?: string /*节点的标签*/\r\n\t\t\tcollectVal?: string | string[] /*v-model收集节点的哪些字段*/\r\n\t\t\tleaf?: boolean /*叶子节点模式，v-model只返回叶子节点数据，任何选择操作都会选择叶子节点*/\r\n\t\t\tdisabled?: boolean /*禁用整颗树的checkbox选择功能*/\r\n\t\t}>(),\r\n\t\t{\r\n\t\t\tmodelValue: () => [],\r\n\t\t\tdata: () => [],\r\n\t\t\tlabel: 'name',\r\n\t\t\tcollectVal: 'id',\r\n\t\t\tleaf: true,\r\n\t\t\tdisabled: false\r\n\t\t}\r\n\t)\r\n\tconst leafChecked = ref<any[]>([])\r\n\tconst dataT = computed(() => {\r\n\t\tlet temp = cloneDeep(props.data)\r\n\t\tlet valTemp = cloneDeep(leafChecked.value)\r\n\t\tfor (let item of temp) {\r\n\t\t\t/*遍历data添加勾选信息(1级)*/\r\n\t\t\tlet checkCount = 0\r\n\t\t\tlet indeterminateCount = 0\r\n\t\t\tif (item?.children && !isEmpty(item.children)) {\r\n\t\t\t\tfor (let secItem of item.children) {\r\n\t\t\t\t\t/*更深一层遍历children（2级）*/\r\n\t\t\t\t\tlet checkCountB = 0\r\n\t\t\t\t\tif (secItem.children && !isEmpty(secItem.children)) {\r\n\t\t\t\t\t\tfor (let thirdItem of secItem.children) {\r\n\t\t\t\t\t\t\t/*更深一层遍历children（3级）*/\r\n\t\t\t\t\t\t\tfor (let valIndex = 0, len = valTemp.length; valIndex < len; valIndex++) {\r\n\t\t\t\t\t\t\t\t/*遍历继承的value*/\r\n\t\t\t\t\t\t\t\tif (Array.isArray(props.collectVal)) {\r\n\t\t\t\t\t\t\t\t\t/*收集多个字段的情况*/\r\n\t\t\t\t\t\t\t\t\tlet equalI = true\r\n\t\t\t\t\t\t\t\t\tfor (let collectKey of props.collectVal) {\r\n\t\t\t\t\t\t\t\t\t\tif (valTemp[valIndex][collectKey] !== thirdItem[collectKey]) {\r\n\t\t\t\t\t\t\t\t\t\t\t/*遍历中当前节点和value的当前遍历元素不等（收集字段对应的值有不等的），判断为当前节点没有被选中，不在判断其他收集字段，跳出循环*/\r\n\t\t\t\t\t\t\t\t\t\t\tequalI = false\r\n\t\t\t\t\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t/*循环结束，如果equalI的值没被改为false,则表示当前节点被选中*/\r\n\t\t\t\t\t\t\t\t\tif (equalI) {\r\n\t\t\t\t\t\t\t\t\t\t/*如果当前节点被选中，当前父级中选中的子节点数加一，不在遍历value其他元素，跳出循环*/\r\n\t\t\t\t\t\t\t\t\t\tthirdItem.checked = true\r\n\t\t\t\t\t\t\t\t\t\tcheckCountB++\r\n\t\t\t\t\t\t\t\t\t\tvalTemp.splice(valIndex, 1)\r\n\t\t\t\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t} else if (valTemp[valIndex] === thirdItem[props.collectVal]) {\r\n\t\t\t\t\t\t\t\t\t/*收集单个字段且当前节点的对应字段的值和value中当前遍历元素相等,判断为选中，不在遍历value其他元素，跳出循环*/\r\n\t\t\t\t\t\t\t\t\tthirdItem.checked = true\r\n\t\t\t\t\t\t\t\t\tcheckCountB++\r\n\t\t\t\t\t\t\t\t\tvalTemp.splice(valIndex, 1)\r\n\t\t\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t/*避免checked为Undefined*/\r\n\t\t\t\t\t\t\t!thirdItem.checked && (thirdItem.checked = false)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (checkCountB === 0) {\r\n\t\t\t\t\t\tsecItem.checked = false\r\n\t\t\t\t\t\tsecItem.indeterminate = false\r\n\t\t\t\t\t} else if (secItem.children && checkCountB === secItem.children.length) {\r\n\t\t\t\t\t\tsecItem.checked = true\r\n\t\t\t\t\t\tsecItem.indeterminate = false\r\n\t\t\t\t\t\tcheckCount++\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tsecItem.checked = false\r\n\t\t\t\t\t\tsecItem.indeterminate = true\r\n\t\t\t\t\t\tindeterminateCount++\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (checkCount === 0 && indeterminateCount === 0) {\r\n\t\t\t\titem.checked = false\r\n\t\t\t\titem.indeterminate = false\r\n\t\t\t} else if (item.children && checkCount === item.children.length) {\r\n\t\t\t\titem.checked = true\r\n\t\t\t\titem.indeterminate = false\r\n\t\t\t} else {\r\n\t\t\t\titem.checked = false\r\n\t\t\t\titem.indeterminate = true\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn temp\r\n\t})\r\n\r\n\twatch(\r\n\t\t() => props.modelValue,\r\n\t\t(after, before) => {\r\n\t\t\tif (isEqual(leafChecked.value, after) || isEqual(after, before)) {\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\tleafChecked.value = after\r\n\t\t},\r\n\t\t{\r\n\t\t\timmediate: true,\r\n\t\t\tdeep: true\r\n\t\t}\r\n\t)\r\n\r\n\tfunction checkChangeFirst(root: TreeNode, isCheck: boolean) {\r\n\t\tif (root.children) {\r\n\t\t\tfor (let item of root.children) {\r\n\t\t\t\titem.checked = isCheck\r\n\t\t\t\tif (item.children) {\r\n\t\t\t\t\tfor (let itemB of item.children) {\r\n\t\t\t\t\t\titemB.checked = isCheck\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tupdateDataT()\r\n\t}\r\n\r\n\tfunction checkChangeSecond(root: TreeNode, isCheck: boolean) {\r\n\t\tif (root.children) {\r\n\t\t\tfor (let item of root.children) {\r\n\t\t\t\titem.checked = isCheck\r\n\t\t\t}\r\n\t\t}\r\n\t\tupdateDataT()\r\n\t}\r\n\r\n\tfunction updateDataT() {\r\n\t\tgetLeafChecked(dataT.value, true)\r\n\t}\r\n\r\n\tfunction getLeafChecked(val: TreeNode[], isLeaf?: boolean) {\r\n\t\tlet temp: any[] = []\r\n\t\tfor (let item of val) {\r\n\t\t\tif (!isLeaf && !props.leaf && item?.checked && item.indeterminate === false) {\r\n\t\t\t\t/*非叶子节点模式且需要获取parent节点时，如果当前parent节点所有子节点都选中，在value中带上parent节点*/\r\n\t\t\t\tif (Array.isArray(props.collectVal)) {\r\n\t\t\t\t\tlet ttO: Record<string, any> = {}\r\n\t\t\t\t\tfor (let keyI of props.collectVal) {\r\n\t\t\t\t\t\tttO[keyI] = item[keyI]\r\n\t\t\t\t\t}\r\n\t\t\t\t\ttemp.push(ttO)\r\n\t\t\t\t} else if (myTypeof(props.collectVal) === 'String') {\r\n\t\t\t\t\ttemp.push(item[props.collectVal])\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tif (item?.children) {\r\n\t\t\t\tfor (let secItem of item.children) {\r\n\t\t\t\t\tif (!isLeaf && !props.leaf && secItem.checked && secItem.indeterminate === false) {\r\n\t\t\t\t\t\t/*非叶子节点模式且需要获取parent节点时，如果当前parent节点所有子节点都选中，在value中带上parent节点*/\r\n\t\t\t\t\t\tif (Array.isArray(props.collectVal)) {\r\n\t\t\t\t\t\t\tlet ttO: Record<string, any> = {}\r\n\t\t\t\t\t\t\tfor (let keyI of props.collectVal) {\r\n\t\t\t\t\t\t\t\tttO[keyI] = secItem[keyI]\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\ttemp.push(ttO)\r\n\t\t\t\t\t\t} else if (myTypeof(props.collectVal) === 'String') {\r\n\t\t\t\t\t\t\ttemp.push(secItem[props.collectVal])\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (secItem.children) {\r\n\t\t\t\t\t\tfor (let thirdItem of secItem.children) {\r\n\t\t\t\t\t\t\tif (thirdItem.checked) {\r\n\t\t\t\t\t\t\t\tif (Array.isArray(props.collectVal)) {\r\n\t\t\t\t\t\t\t\t\tlet ttO: Record<string, any> = {}\r\n\t\t\t\t\t\t\t\t\tfor (let keyI of props.collectVal) {\r\n\t\t\t\t\t\t\t\t\t\tttO[keyI] = thirdItem[keyI]\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\ttemp.push(ttO)\r\n\t\t\t\t\t\t\t\t} else if (myTypeof(props.collectVal) === 'String') {\r\n\t\t\t\t\t\t\t\t\ttemp.push(thirdItem[props.collectVal])\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (isLeaf) {\r\n\t\t\tleafChecked.value = temp\r\n\t\t\tif (props.leaf) {\r\n\t\t\t\temit('update:modelValue', temp)\r\n\t\t\t\temit('on-change', cloneDeep(temp))\r\n\t\t\t} else {\r\n\t\t\t\tnextTick(function () {\r\n\t\t\t\t\tgetLeafChecked(dataT.value)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\temit('update:modelValue', temp)\r\n\t\t\temit('on-change', cloneDeep(temp))\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<template>\r\n\t<div class=\"boxLPB\">\r\n\t\t<div class=\"headerF\">\r\n\t\t\t<div class=\"firstT borderBoxKa\">{{ firstTitle || t('r.level.1') }}</div>\r\n\t\t\t<div class=\"secondT borderBoxKa\">{{ secondTitle || t('r.level.2') }}</div>\r\n\t\t\t<div class=\"thirdT borderBoxKa\">{{ thirdTitle || t('r.level.3') }}</div>\r\n\t\t</div>\r\n\t\t<div class=\"bodyF\" v-for=\"(item, index) in dataT\" :key=\"'checkboxJ' + index\">\r\n\t\t\t<div class=\"firstCol borderBoxKa\">\r\n\t\t\t\t<Checkbox\r\n\t\t\t\t\tv-model=\"item.checked\"\r\n\t\t\t\t\t:indeterminate=\"item.indeterminate\"\r\n\t\t\t\t\t@on-change=\"checkChangeFirst(item, $event)\"\r\n\t\t\t\t\t:disabled=\"disabled\"\r\n\t\t\t\t\t>{{ item[label] }}</Checkbox\r\n\t\t\t\t>\r\n\t\t\t</div>\r\n\t\t\t<div class=\"rightBoxAL\">\r\n\t\t\t\t<div class=\"rightBoxInner\" v-for=\"(secItem, indexSec) in item.children\" :key=\"'secItem' + indexSec\">\r\n\t\t\t\t\t<div class=\"secondCol borderBoxKa\">\r\n\t\t\t\t\t\t<Checkbox\r\n\t\t\t\t\t\t\tv-model=\"secItem.checked\"\r\n\t\t\t\t\t\t\t:indeterminate=\"secItem.indeterminate\"\r\n\t\t\t\t\t\t\t@on-change=\"checkChangeSecond(secItem, $event)\"\r\n\t\t\t\t\t\t\t:disabled=\"disabled\"\r\n\t\t\t\t\t\t\t>{{ secItem[label] }}</Checkbox\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class=\"thirdCol borderBoxKa\">\r\n\t\t\t\t\t\t<div class=\"thirdItem\" v-for=\"(thirdItem, indexThird) in secItem.children\" :key=\"'thirdItem' + indexThird\">\r\n\t\t\t\t\t\t\t<Checkbox v-model=\"thirdItem.checked\" @on-change=\"updateDataT\" :disabled=\"disabled\">{{\r\n\t\t\t\t\t\t\t\tthirdItem[label]\r\n\t\t\t\t\t\t\t}}</Checkbox>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n","<!--WellCard 带标题和顶部按钮的卡片，全局组件,直接使用\r\n@created 2023.11.16\r\n@author Ricky email:zhangqingcq@foxmail.com-->\r\n<script lang=\"ts\" setup>\r\n\timport t from '../../locale/i18nSFC'\r\n\r\n\tconst props = withDefaults(\r\n\t\tdefineProps<{\r\n\t\t\ttitle?: string\r\n\t\t\tfitToContent?: boolean /*卡片组件尺寸会根据内容改变，该模式下`width`和`height`不再生效，无需再传*/\r\n\t\t\twidth?: number | string\r\n\t\t\theight?: number | string\r\n\t\t\tinline?: boolean\r\n\t\t}>(),\r\n\t\t{\r\n\t\t\tfitToContent: false,\r\n\t\t\twidth: '100%',\r\n\t\t\theight: '100%',\r\n\t\t\tinline: false\r\n\t\t}\r\n\t)\r\n\r\n\tconst wellStyle = computed(() => {\r\n\t\tlet temp: Record<string, any> = {\r\n\t\t\twidth: props.fitToContent ? 'fit-content' : props.width + 'px',\r\n\t\t\theight: props.fitToContent ? 'fit-content' : props.height + 'px'\r\n\t\t}\r\n\t\tif (props.inline) {\r\n\t\t\ttemp.display = 'inline-block'\r\n\t\t}\r\n\t\treturn temp\r\n\t})\r\n</script>\r\n\r\n<template>\r\n\t<div :style=\"wellStyle\">\r\n\t\t<div :class=\"['wellCardR', { flexColumnBox: !props.fitToContent }]\">\r\n\t\t\t<div :class=\"['panelHeader', { notGrow: !props.fitToContent }]\">\r\n\t\t\t\t<div class=\"fl\" style=\"font-weight: bold\">{{ props.title || t('r.title') }}</div>\r\n\t\t\t\t<div class=\"btsF\">\r\n\t\t\t\t\t<slot name=\"bts\" />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div v-if=\"props.fitToContent\">\r\n\t\t\t\t<slot />\r\n\t\t\t</div>\r\n\t\t\t<div v-else class=\"growFlexItem relativeBox\">\r\n\t\t\t\t<div class=\"fullFlowContent\">\r\n\t\t\t\t\t<slot />\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t</div>\r\n</template>\r\n","<!--SelectScrollMore 远程下拉选择框，下拉滚动加载更多选项，支持筛选\r\n@created 2023.11.28\r\n@author Ricky email:zhangqingcq@foxmail.com-->\r\n\r\n<script setup lang=\"ts\">\r\n\timport { debounce, isEmpty, cloneDeep, isString } from 'lodash-es'\r\n\timport { isValidValue, myTypeof } from '../../utils/globalFunc'\r\n\timport $fetch from '../../utils/fetch'\r\n\timport { Message } from 'view-ui-plus'\r\n\timport t from '../../locale/i18nSFC'\r\n\r\n\tconst emit = defineEmits(['update:modelValue', 'on-change', 'update-option-finish'])\r\n\tconst props = withDefaults(\r\n\t\tdefineProps<{\r\n\t\t\tmodelValue?: string | number | any[] /*插件值，支持双向绑定v-model*/\r\n\t\t\turl: string /*待选项接口地址，不带条件*/\r\n\t\t\tsearchData?: Record<string, any> /*待选项接口条件*/\r\n\t\t\tgetOptions?: boolean /*是否拉取待选项,false:不拉取，并清空待选项和值*/\r\n\t\t\toptionFilter?: (d: any) => any /*接口返回数据处理函数，传入接口返回的数据，返回处理后的数据*/\r\n\t\t\toptionsLabelKey?: string | string[] /*待选项label取接口数据中哪个字段*/\r\n\t\t\toptionsValKey?: string /*待选项value取接口数据中哪个字段*/\r\n\t\t\tsearchKey?: string /*搜索框的值在拉取待选项数据的条件中对应的key*/\r\n\t\t\tsearchWordsRequired?: boolean /*只有在searchKey对应字段有值时（用户输入内容搜索时）拉取数据*/\r\n\t\t\tcollectLabel?: boolean /*需要在选中时返回出value以外其他字段*/\r\n\t\t\tplaceholder?: string\r\n\t\t\tdisabled?: boolean\r\n\t\t}>(),\r\n\t\t{\r\n\t\t\tsearchData: () => ({ size: 10 }),\r\n\t\t\tgetOptions: true,\r\n\t\t\toptionsLabelKey: 'name',\r\n\t\t\toptionsValKey: 'id',\r\n\t\t\tsearchKey: 'name',\r\n\t\t\tsearchWordsRequired: false,\r\n\t\t\tcollectLabel: false,\r\n\t\t\tdisabled: false\r\n\t\t}\r\n\t)\r\n\r\n\tlet current = ref(1)\r\n\tlet pages = 1\r\n\tconst searchStr = ref('')\r\n\tconst options = shallowRef<Record<string, any>[]>([])\r\n\tlet historyData: Record<string, any> = {}\r\n\tlet isFresh = true\r\n\tlet urlChanged = false\r\n\tconst transferClass = 'scm' + Math.random()\r\n\r\n\tconst placeholderT = computed(() => {\r\n\t\treturn searchStr.value ? t('r.searchFor') + searchStr.value : props.placeholder || t('r.pInput')\r\n\t})\r\n\r\n\tconst valueT = computed({\r\n\t\tget() {\r\n\t\t\treturn props.modelValue ?? ''\r\n\t\t},\r\n\t\tset(val: any) {\r\n\t\t\temit('update:modelValue', val ?? '')\r\n\t\t\tif (props.collectLabel && val !== undefined) {\r\n\t\t\t\tlet temp = {}\r\n\t\t\t\tfor (let e of options.value) {\r\n\t\t\t\t\tif (e[props.optionsValKey] === val) {\r\n\t\t\t\t\t\ttemp = JSON.parse(JSON.stringify(e))\r\n\t\t\t\t\t\tbreak\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\temit('on-change', temp)\r\n\t\t\t}\r\n\t\t}\r\n\t})\r\n\r\n\tconst searchDataT = computed(() => {\r\n\t\treturn props.searchKey\r\n\t\t\t? {\r\n\t\t\t\t\t...props.searchData,\r\n\t\t\t\t\tcurrent: current.value,\r\n\t\t\t\t\t[props.searchKey]: searchStr.value\r\n\t\t\t\t}\r\n\t\t\t: {\r\n\t\t\t\t\t...props.searchData,\r\n\t\t\t\t\tcurrent: current.value\r\n\t\t\t\t}\r\n\t})\r\n\r\n\twatch(\r\n\t\t() => props.getOptions,\r\n\t\t(after) => {\r\n\t\t\tif (after) {\r\n\t\t\t\tif (isFresh) {\r\n\t\t\t\t\tgetData()\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treset()\r\n\t\t\t}\r\n\t\t},\r\n\t\t{ immediate: true }\r\n\t)\r\n\r\n\twatch(\r\n\t\t() => props.url,\r\n\t\t(after) => {\r\n\t\t\tif (after) {\r\n\t\t\t\turlChanged = true\r\n\t\t\t}\r\n\t\t}\r\n\t)\r\n\r\n\tconst selectScrollSourceRef = ref()\r\n\r\n\tfunction addInputEventListener() {\r\n\t\t/*私有，不可调用*/\r\n\t\tconst inputEl = selectScrollSourceRef.value.$el.querySelector('.ivu-select-input[type=\"text\"]')\r\n\t\tinputEl.addEventListener('keyup', getOption)\r\n\t}\r\n\r\n\tfunction reset() {\r\n\t\t/*私有，不可调用*/\r\n\t\tif (!isFresh) {\r\n\t\t\tvalueT.value = ''\r\n\t\t\tisFresh = true\r\n\t\t\tsearchStr.value = ''\r\n\t\t\toptions.value = []\r\n\t\t\tcurrent.value = 1\r\n\t\t\tpages = 1\r\n\t\t\thistoryData = {}\r\n\t\t\turlChanged = false\r\n\t\t}\r\n\t}\r\n\r\n\tfunction isSelect(val: any) {\r\n\t\t/*私有，不可调用*/\r\n\t\tfor (let item of options.value) {\r\n\t\t\tif (item?.label === val) {\r\n\t\t\t\treturn true\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn false\r\n\t}\r\n\r\n\tconst getOption = debounce(function (e: any) {\r\n\t\t/*私有，不可调用*/\r\n\t\tconst val = e?.target?.value\r\n\t\tif (!isSelect(val)) {\r\n\t\t\tif (isValidValue(val)) {\r\n\t\t\t\tif (urlChanged) {\r\n\t\t\t\t\treset()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tif (isEmpty(historyData)) {\r\n\t\t\t\t\t\thistoryData.current = current.value\r\n\t\t\t\t\t\thistoryData.pages = pages\r\n\t\t\t\t\t\thistoryData.options = cloneDeep(options.value)\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (isValidValue(valueT.value)) {\r\n\t\t\t\t\t\tvalueT.value = ''\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tsearchStr.value = String(val)\r\n\t\t\t\toptions.value = []\r\n\t\t\t\tcurrent.value = 1\r\n\t\t\t\tisFresh = true\r\n\t\t\t\tgetData()\r\n\t\t\t} else {\r\n\t\t\t\tif (urlChanged) {\r\n\t\t\t\t\treset()\r\n\t\t\t\t\tgetData()\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvalueT.value = ''\r\n\t\t\t\t\tsearchStr.value = ''\r\n\t\t\t\t\tif (historyData.current) {\r\n\t\t\t\t\t\tcurrent.value = historyData.current\r\n\t\t\t\t\t\tpages = historyData.pages\r\n\t\t\t\t\t\toptions.value = cloneDeep(historyData.options)\r\n\t\t\t\t\t\thistoryData = {}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tgetData()\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}, 600)\r\n\r\n\tfunction loadMore() {\r\n\t\t/*私有，不可调用*/\r\n\t\tif (urlChanged) {\r\n\t\t\treset()\r\n\t\t}\r\n\t\tif (current.value < pages) {\r\n\t\t\t++current.value\r\n\t\t\tnextTick(function () {\r\n\t\t\t\tgetData()\r\n\t\t\t})\r\n\t\t} else {\r\n\t\t\tMessage.warning({\r\n\t\t\t\tbackground: true,\r\n\t\t\t\tcontent: t('r.noMore')\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\tfunction getData() {\r\n\t\t/*私有，不可调用*/\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tif (props.getOptions) {\r\n\t\t\t\tif (props.searchWordsRequired && !isValidValue(searchStr.value)) {\r\n\t\t\t\t\tresolve(false)\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t$fetch\r\n\t\t\t\t\t.get(props.url, searchDataT.value)\r\n\t\t\t\t\t.then((r: any) => {\r\n\t\t\t\t\t\tisFresh = false\r\n\t\t\t\t\t\tlet temp: any[] = []\r\n\t\t\t\t\t\tif (r?.data?.records) {\r\n\t\t\t\t\t\t\ttemp = r.data.records\r\n\t\t\t\t\t\t\tpages = r.data.pages\r\n\t\t\t\t\t\t} else if (r?.data && myTypeof(r.data) === 'Array') {\r\n\t\t\t\t\t\t\ttemp = r.data\r\n\t\t\t\t\t\t\tpages = r.pages\r\n\t\t\t\t\t\t} else if (r?.data && myTypeof(r.data) === 'Object') {\r\n\t\t\t\t\t\t\ttemp = [r.data]\r\n\t\t\t\t\t\t\tpages = 1\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (typeof props.optionFilter === 'function' && myTypeof(props.optionFilter) === 'Function') {\r\n\t\t\t\t\t\t\ttemp = props.optionFilter(temp)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (!isEmpty(temp)) {\r\n\t\t\t\t\t\t\ttemp = temp.map((e, i) => {\r\n\t\t\t\t\t\t\t\tlet label = t('r.optionLabel') + i\r\n\t\t\t\t\t\t\t\tif (Array.isArray(props.optionsLabelKey)) {\r\n\t\t\t\t\t\t\t\t\tlet labelT: any[] = []\r\n\t\t\t\t\t\t\t\t\tfor (let j = 1, len = props.optionsLabelKey.length; j < len; j++) {\r\n\t\t\t\t\t\t\t\t\t\tlabelT.push(e[props.optionsLabelKey[j]])\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tlabel = `${e[props.optionsLabelKey[0]]}(${String(labelT)})`\r\n\t\t\t\t\t\t\t\t} else if (isString(props.optionsLabelKey)) {\r\n\t\t\t\t\t\t\t\t\tlabel = e[props.optionsLabelKey]\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tif (props.collectLabel) {\r\n\t\t\t\t\t\t\t\t\tlet eT = cloneDeep(e)\r\n\t\t\t\t\t\t\t\t\tdelete eT.value\r\n\t\t\t\t\t\t\t\t\tdelete eT.label\r\n\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\tvalue: e[props.optionsValKey],\r\n\t\t\t\t\t\t\t\t\t\tlabel: label,\r\n\t\t\t\t\t\t\t\t\t\t...eT\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\tvalue: e[props.optionsValKey],\r\n\t\t\t\t\t\t\t\t\tlabel: label\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\toptions.value.push(...temp)\r\n\t\t\t\t\t\t/*去重*/\r\n\t\t\t\t\t\tlet hash: Record<string, any> = {}\r\n\t\t\t\t\t\toptions.value = options.value.filter((e) => {\r\n\t\t\t\t\t\t\tif (!hash[e?.value]) {\r\n\t\t\t\t\t\t\t\thash[e?.value] = true\r\n\t\t\t\t\t\t\t\treturn true\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn false\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tnextTick(function () {\r\n\t\t\t\t\t\t\temit('update-option-finish')\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t\tresolve(true)\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(() => {\r\n\t\t\t\t\t\tMessage.error(t('r.getDataError'))\r\n\t\t\t\t\t\treject(t('r.getDataError'))\r\n\t\t\t\t\t})\r\n\t\t\t} else {\r\n\t\t\t\tresolve(false)\r\n\t\t\t}\r\n\t\t})\r\n\t}\r\n\r\n\tonMounted(addInputEventListener)\r\n</script>\r\n\r\n<template>\r\n\t<Select\r\n\t\tv-model=\"valueT\"\r\n\t\tref=\"selectScrollSourceRef\"\r\n\t\t:transfer-class-name=\"transferClass\"\r\n\t\tv-bind=\"$attrs\"\r\n\t\ttransfer\r\n\t\tfilterable\r\n\t\tv-loadmore:[transferClass]=\"loadMore\"\r\n\t\t:placeholder=\"placeholderT\"\r\n\t\t:disabled=\"disabled\"\r\n\t>\r\n\t\t<Option\r\n\t\t\tv-for=\"(item, index) in options\"\r\n\t\t\t:key=\"'op' + index\"\r\n\t\t\t:value=\"item?.value\"\r\n\t\t\t:label=\"item?.label\"\r\n\t\t\t:disabled=\"item?.disabled\"\r\n\t\t/>\r\n\t</Select>\r\n</template>\r\n","<!--PrintModal 表格打印，可以在预览页面调整每列宽度以及可以选择打印的列\r\n@created 2024.03.14\r\n@author Ricky email:zhangqingcq@foxmail.com-->\r\n\r\n<script setup lang=\"ts\">\r\n\timport t from '../../locale/i18nSFC'\r\n\timport { useRoute } from 'vue-router'\r\n\timport TableSetting from '../../components/TableSetting/TableSetting.vue'\r\n\timport IconTxtBtn from '../../components/IconTxtBtn/IconTxtBtn.vue'\r\n\timport TableIconBtn from '../../components/TableIconBtn/TableIconBtn.vue'\r\n\r\n\tconst route = useRoute()\r\n\tconst title = ref()\r\n\tconst disabled = ref(false)\r\n\tconst domPrint = ref(false)\r\n\tconst autoPrint = ref(false)\r\n\tconst width = ref(715)\r\n\tconst help = ref(false)\r\n\tconst isFrom = ref()\r\n\tconst sKey = 'tablePrint_' + Date.now().toString()\r\n\tconst customClass = ref('')\r\n\tconst columns = ref([])\r\n\tconst tableData = ref([])\r\n\tconst isDrag = ref(false)\r\n\r\n\tconst domContainerStyle = computed(() => {\r\n\t\treturn {\r\n\t\t\twidth: width.value + 'px'\r\n\t\t}\r\n\t})\r\n\r\n\tconst close = () => {\r\n\t\tif (isFrom.value) {\r\n\t\t\twindow.sessionStorage.removeItem('print_' + isFrom.value)\r\n\t\t}\r\n\t\twindow.sessionStorage.removeItem(sKey)\r\n\t\twindow.close()\r\n\t}\r\n\r\n\tconst wallClick = () => {\r\n\t\tif (help.value) {\r\n\t\t\thelp.value = false\r\n\t\t}\r\n\t}\r\n\r\n\tconst dragStart = () => {\r\n\t\tisDrag.value = true\r\n\t}\r\n\tconst handleDrag = (e: any) => {\r\n\t\tif (isDrag.value) {\r\n\t\t\twidth.value = e?.layerX - 20\r\n\t\t}\r\n\t}\r\n\tconst dragEnd = () => {\r\n\t\tif (isDrag.value) {\r\n\t\t\tisDrag.value = false\r\n\t\t}\r\n\t}\r\n\r\n\tconst print = () => {\r\n\t\thelp.value = false\r\n\t\tlet tc = window.setTimeout(() => {\r\n\t\t\twindow.clearTimeout(tc)\r\n\t\t\twindow.print()\r\n\t\t}, 100)\r\n\t}\r\n\r\n\tconst init = () => {\r\n\t\tisFrom.value = route?.params?.isFrom\r\n\t\tif (isFrom.value) {\r\n\t\t\tlet d = window.sessionStorage.getItem('print_' + isFrom.value)\r\n\t\t\tif (d) {\r\n\t\t\t\tconst _d = JSON.parse(d)\r\n\t\t\t\tif (!_d) {\r\n\t\t\t\t\tdisabled.value = true\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tcolumns.value = _d.columns\r\n\t\t\t\ttableData.value = _d.data\r\n\t\t\t\ttitle.value = _d.title\r\n\t\t\t\tcustomClass.value = _d?.config?.customClass || ''\r\n\t\t\t\tdomPrint.value = _d?.config?.domPrint || false\r\n\t\t\t\tautoPrint.value = _d?.config?.autoPrint || false\r\n\t\t\t\twidth.value = _d?.config?.width || 715\r\n\t\t\t\tdocument.title = (title.value || t('r.print')) + '_' + new Date().toLocaleString()\r\n\t\t\t} else {\r\n\t\t\t\tdisabled.value = true\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tonMounted(() => {\r\n\t\tif (autoPrint.value) {\r\n\t\t\tlet tc = window.setTimeout(() => {\r\n\t\t\t\twindow.clearTimeout(tc)\r\n\t\t\t\tprint()\r\n\t\t\t}, 100)\r\n\t\t}\r\n\t\tdocument.addEventListener('click', wallClick)\r\n\t\tdocument.addEventListener('mousemove', handleDrag)\r\n\t\tdocument.addEventListener('mouseup', dragEnd)\r\n\t})\r\n\tinit()\r\n</script>\r\n\r\n<template>\r\n\t<div class=\"tablePrintModal\" :class=\"[customClass]\">\r\n\t\t<div class=\"msgL notPrint\" v-show=\"disabled\">{{ t('r.printGuide.9') }}</div>\r\n\t\t<div class=\"a4Line aL notPrint\" v-show=\"!disabled\"\r\n\t\t\t><p>{{ t('r.printGuide.7') }}</p> <p>{{ t('r.printGuide.5') }}</p></div\r\n\t\t>\r\n\t\t<div class=\"a4Line aR notPrint\" v-show=\"!disabled\"\r\n\t\t\t><p>{{ t('r.printGuide.7') }}</p> <p>{{ t('r.printGuide.6') }}</p></div\r\n\t\t>\r\n\t\t<div class=\"a4Line bL notPrint\" v-show=\"!disabled\"\r\n\t\t\t><p>{{ t('r.printGuide.8') }}</p> <p>{{ t('r.printGuide.5') }}</p></div\r\n\t\t>\r\n\t\t<div class=\"a4Line bR notPrint\" v-show=\"!disabled\"\r\n\t\t\t><p>{{ t('r.printGuide.8') }}</p> <p>{{ t('r.printGuide.6') }}</p></div\r\n\t\t>\r\n\t\t<div class=\"topsL notPrint\" v-show=\"!disabled\">\r\n\t\t\t<div class=\"topsLTitle\">{{ title || t('r.print') }}</div>\r\n\t\t\t<div class=\"topsLBtn\">\r\n\t\t\t\t<IconTxtBtn icon=\"md-help-circle\" :name=\"t('r.help')\" @click.stop=\"help = !help\" />\r\n\t\t\t\t<IconTxtBtn icon=\"md-print\" :name=\"t('r.preview')\" @click=\"print\" />\r\n\t\t\t\t<TableSetting v-if=\"!domPrint\" v-model=\"columns\" :s-key=\"sKey\" storage=\"sessionStorage\" />\r\n\t\t\t\t<TableIconBtn icon=\"md-close\" @click=\"close\" :title=\"t('r.close')\" />\r\n\t\t\t</div>\r\n\t\t\t<div class=\"topsLHelp\" v-show=\"help\">\r\n\t\t\t\t<p v-if=\"!domPrint\">\r\n\t\t\t\t\t<span>1. </span>\r\n\t\t\t\t\t<span>{{ t('r.printGuide.1') }}</span>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p v-if=\"!domPrint\">\r\n\t\t\t\t\t<span>2. </span>\r\n\t\t\t\t\t<span>{{ t('r.printGuide.2') }}</span>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p v-if=\"domPrint\">\r\n\t\t\t\t\t<span>1. </span>\r\n\t\t\t\t\t<span>{{ t('r.printGuide.10') }}</span>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<span>{{ domPrint ? '2. ' : '3. ' }}</span>\r\n\t\t\t\t\t<span>{{ t('r.printGuide.3') }}</span>\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t<span>{{ domPrint ? '3. ' : '4. ' }}</span>\r\n\t\t\t\t\t<span>{{ t('r.printGuide.4') }}</span>\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t<div v-if=\"domPrint\" class=\"domPrintSetting notPrint\" :style=\"domContainerStyle\">\r\n\t\t\t<div class=\"settingLine\" @mousedown.stop=\"dragStart\"></div>\r\n\t\t</div>\r\n\t\t<div v-if=\"domPrint\" class=\"domPrintContent\" v-html=\"tableData\" :style=\"domContainerStyle\"></div>\r\n\t\t<Table v-if=\"!domPrint\" class=\"tablePW\" :columns=\"columns\" :data=\"tableData\" border v-show=\"!disabled\" />\r\n\t</div>\r\n</template>\r\n","import { cloneDeep } from 'lodash-es'\r\nimport PrintModal from './PrintModal.vue'\r\nimport { myTypeof } from '../globalFunc'\r\n\r\nlet _router: any = null\r\n\r\nfunction addStyle() {\r\n\tconst root = document.documentElement\r\n\troot.style.setProperty('overflow', 'auto')\r\n\tconst style = document.createElement('style')\r\n\tstyle.innerHTML = `body,div[data-v-app]{height:100% !important}`\r\n\tdocument.head.appendChild(style)\r\n}\r\n\r\nfunction init(router: any) {\r\n\tif (router?.addRoute) {\r\n\t\tif (!router.hasRoute('tablePrint')) {\r\n\t\t\trouter.addRoute({\r\n\t\t\t\tname: 'tablePrint',\r\n\t\t\t\tpath: '/tablePrint/:isFrom',\r\n\t\t\t\tcomponent: PrintModal\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\r\n\t_router = router\r\n\r\n\t//新打开的浏览器窗口，进入时，该打印插件还未完成初始化，所以打印路由还没加上去，无法直接进入打印页面，在这里路由添加后重新进入打印页面\r\n\tif (location.pathname.indexOf('tablePrint') > -1) {\r\n\t\t//vue-router history模式\r\n\t\t_router.push(location.pathname)\r\n\t\taddStyle()\r\n\t} else if (location.hash.indexOf('tablePrint') > -1) {\r\n\t\t//vue-router hash模式\r\n\t\t_router.push(location.hash.replace(/^#/, ''))\r\n\t\taddStyle()\r\n\t}\r\n}\r\n\r\nfunction columnsHandle(item: any) {\r\n\tif (myTypeof(item) === 'Object') {\r\n\t\titem.width = item.minWidth || 100\r\n\t\titem.sortable = false\r\n\t\tdelete item.minWidth\r\n\t\tdelete item.__id\r\n\t\titem.resizable = true\r\n\t\tif (item.children && myTypeof(item.children) === 'Array') {\r\n\t\t\titem.children = item.children.map(columnsHandle)\r\n\t\t}\r\n\t}\r\n\treturn item\r\n}\r\n\r\n/**\r\n * 供外部使用的打印API\r\n * @param {Array} columns Table的列设置，同view-design\r\n * @param {Array|String} data Table的数据\r\n * @param {String} title 标题(如打印为PDF将是默认文件名)\r\n * @param {Object} config 打印设置，目前支持：1.customClass,用于定制打印页面样式；2.autoPrint,是否直接打印\r\n */\r\nfunction print(columns: any[], data: any[] | string, title?: string, config?: Record<string, any>) {\r\n\tif (!_router) {\r\n\t\treturn\r\n\t}\r\n\tlet columnsB\r\n\tif (!config?.domPrint) {\r\n\t\tlet _columns = cloneDeep(\r\n\t\t\tcolumns.filter((e) => {\r\n\t\t\t\treturn e?.key || e?.children\r\n\t\t\t})\r\n\t\t)\r\n\t\tif (_columns[0].type === 'selection') {\r\n\t\t\t_columns.shift()\r\n\t\t}\r\n\t\tif (!_columns.length) {\r\n\t\t\tcolumnsB = []\r\n\t\t} else {\r\n\t\t\tcolumnsB = _columns.map(columnsHandle)\r\n\t\t}\r\n\t}\r\n\r\n\tlet _p = _router?.currentRoute?.value?.fullPath\r\n\tif (_p) {\r\n\t\t_p = _p.replace?.(/\\//g, '_')\r\n\t}\r\n\tlet _d: Record<string, any> = {\r\n\t\tdata,\r\n\t\ttitle,\r\n\t\tconfig\r\n\t}\r\n\tif (!config?.domPrint) {\r\n\t\t_d.columns = columnsB\r\n\t}\r\n\twindow.sessionStorage.setItem('print_' + _p, JSON.stringify(_d))\r\n\r\n\tconst r = _router.resolve({\r\n\t\tname: 'tablePrint',\r\n\t\tparams: { isFrom: _p }\r\n\t})\r\n\r\n\tlet _w = window.open(r?.href, '_blank')\r\n\tif (!_w) {\r\n\t\tconsole.log('请不要禁用浏览器弹出窗口，否则无法正常使用该打印功能。')\r\n\t}\r\n}\r\n\r\n/**\r\n * @created 2024.03.14\r\n * @author Ricky email:zhangqingcq@foxmail.com\r\n * @description 表格打印，可以在预览页面调整每列宽度以及可以选择打印的列\r\n * 注意：1.该插件依赖于vue-router，需要在安装库时传入router，详见该库使用说明文档；\r\n * 2.打印时会新开一个浏览器窗口，路由为'/tablePrint'，该路由页面需要铺满浏览器窗口，即该路由所在的router-view外部\r\n * 不应有任何dom元素渲染在页面上（隐藏的多余dom元素不影响打印）。\r\n * 3.由于内容较多时需要分页打印，所以需要在打印页面的html、body、div[data-v-app]上添加样式，该插件会自动添加这些样式，\r\n * 如果页面这些dom节点已经存在类似样式，该插件会覆盖已存在的样式（只会影响打印页面，无需担心其他页面被污染）\r\n * 4.虽然插件有调节列宽的功能，但为了用户使用方便，开发人员应该在columns里设置好适合的列宽（minWidth或width）,\r\n * 让打印页面打开时就具备较好的打印布局效果。\r\n */\r\nconst tablePrint = {\r\n\tprint,\r\n\tinit\r\n}\r\n\r\nexport default tablePrint\r\n","import tablePrint from './tablePrint'\r\n\r\n/**\r\n * @description 打印Dom(网页指定的内容)\r\n * @param {String} data 要打印的dom数据，一般使用dom操作获取dom，然后将其outerHTML作为data传进去就行\r\n * @param {String} title 标题(如打印为PDF将是默认文件名)\r\n * @param {Object} config 打印设置，目前支持：1.customClass,用于定制打印页面样式；2.autoPrint,是否直接打印；3.width,dom容器宽度（打印内容将放在这个容器进行打印）\r\n * 注意：\r\n * 1.data只是dom,要打印出带样式的dom，需要将要打印的dom相关样式设置成全局样式，而且这些样式无需进入调用打印的页面即可生效。\r\n * 2.不要限制要打印的dom的高度（实在需要限制可在原来的页面写成局部样式，不要影响打印页面高度），否则无法正常分页打印出全部内容。\r\n */\r\nfunction _p(data: string = '', title: string = '', config: Record<string, any> = {}) {\r\n\tconfig.domPrint = true\r\n\tif (!config.width) {\r\n\t\tconfig.width = 715\r\n\t}\r\n\ttablePrint.print([], data, title, config)\r\n}\r\n\r\nexport default _p\r\n","/**\n * @description 全屏预览\n * @author ricky zhangqingcq@foxmail.com\n * @created 2023.08.24\n * 注意：不能全局调整Modal弹框尺寸，否则预览图片可能不居中，推荐使用另一个插件fullScreenImgByDom\n */\n\nimport { Modal, Icon } from 'view-ui-plus'\nimport { t } from '../locale'\nimport { h } from 'vue'\nimport { setTimeout } from './timer'\n\nexport default function fullScreenImgPreview(this: any, src: string) {\n\tconst T = (...arg: Parameters<typeof t>) => t.apply(this, arg)\n\tconst close = T('r.closePreview')\n\tconst fullImg = T('r.fullImg')\n\n\tlet id = 'previewImg' + Math.floor(Math.random() * 10000000)\n\tModal?.info?.({\n\t\tclosable: false,\n\t\t'transition-names': ['linear', 'fade'],\n\t\trender: (_h: any) => {\n\t\t\treturn h(\n\t\t\t\t'div',\n\t\t\t\t{\n\t\t\t\t\tclass: 'previewModal',\n\t\t\t\t\tid: id\n\t\t\t\t},\n\t\t\t\t[\n\t\t\t\t\th(\n\t\t\t\t\t\t'div',\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tclass: 'previewModalInner'\n\t\t\t\t\t\t},\n\t\t\t\t\t\t[\n\t\t\t\t\t\t\th('img', {\n\t\t\t\t\t\t\t\tsrc: src,\n\t\t\t\t\t\t\t\talt: fullImg\n\t\t\t\t\t\t\t}),\n\t\t\t\t\t\t\th(Icon, {\n\t\t\t\t\t\t\t\ttype: 'md-close',\n\t\t\t\t\t\t\t\ttitle: close,\n\t\t\t\t\t\t\t\tclass: 'previewModalDelete',\n\t\t\t\t\t\t\t\tonClick() {\n\t\t\t\t\t\t\t\t\tModal?.remove?.()\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t]\n\t\t\t\t\t)\n\t\t\t\t]\n\t\t\t)\n\t\t}\n\t})\n\n\tsetTimeout(() => {\n\t\tconst hideEl = document.getElementById(id)?.parentElement?.parentElement?.parentElement?.parentElement\n\t\tconst hideEl2 = document.getElementById(id)?.parentElement?.nextSibling as HTMLElement\n\t\thideEl && (hideEl.style.height = '0')\n\t\thideEl && (hideEl.style.padding = '0')\n\t\thideEl2 && (hideEl2.style.display = 'none')\n\t}, 10)\n}\n","import { Boot } from '@wangeditor/editor'\nimport { t } from '../locale'\n;(() => {\n\tif (window.wangeditorMenuInit) {\n\t\treturn\n\t}\n\n\tclass PreviewButton {\n\t\ttitle: string\n\t\ticonSvg: string\n\t\ttag: string\n\t\talwaysEnable: boolean\n\n\t\tconstructor() {\n\t\t\tthis.title = t('r.preview')\n\t\t\tthis.iconSvg =\n\t\t\t\t'<svg t=\"1656644788547\" class=\"icon\" viewBox=\"0 0 1024 1024\" version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" p-id=\"12356\" width=\"256\" height=\"256\"><path d=\"M512 1024H135.4C60.7 1024 0 963.3 0 888.6V135.4C0 60.7 60.7 0 135.4 0h753.2C963.3 0 1024 60.7 1024 135.4V512c0 24.9-20.1 45-45 45s-45-20.1-45-45V135.4c0-25-20.4-45.4-45.4-45.4H135.4c-25 0-45.4 20.4-45.4 45.4v753.2c0 25 20.4 45.4 45.4 45.4H512c24.9 0 45 20.1 45 45s-20.1 45-45 45z\" p-id=\"12357\"></path><path d=\"M512 802c-77.5 0-150.3-30.2-205.1-84.9C252.2 662.3 222 589.5 222 512s30.2-150.3 84.9-205.1S434.5 222 512 222s150.3 30.2 205.1 84.9C771.8 361.7 802 434.5 802 512s-30.2 150.3-84.9 205.1C662.3 771.8 589.5 802 512 802z m0-490c-110.3 0-200 89.7-200 200s89.7 200 200 200 200-89.7 200-200-89.7-200-200-200z\" p-id=\"12358\"></path><path d=\"M978.5 1023.5c-11.5 0-23-4.4-31.8-13.2L653.2 716.8c-17.6-17.6-17.6-46.1 0-63.6 17.6-17.6 46.1-17.6 63.6 0l293.5 293.5c17.6 17.6 17.6 46.1 0 63.6-8.8 8.8-20.3 13.2-31.8 13.2z\" p-id=\"12359\"></path></svg>'\n\t\t\tthis.tag = 'button'\n\t\t\tthis.alwaysEnable = true\n\t\t}\n\n\t\tgetValue() {\n\t\t\treturn ''\n\t\t}\n\n\t\tisActive() {\n\t\t\treturn false\n\t\t}\n\n\t\tisDisabled() {\n\t\t\treturn false\n\t\t}\n\n\t\texec(d: any) {\n\t\t\tconst e = document.getElementById('editor-preview')\n\t\t\tlet _w = localStorage.getItem('editorPreviewW') || 300\n\t\t\tlet _h = localStorage.getItem('editorPreviewH') || 500\n\t\t\tconst contentR = d?.getHtml?.()\n\n\t\t\tif (e) {\n\t\t\t\tlet wallE = e.children?.[0]?.children?.[1]?.children?.[0] as HTMLElement\n\t\t\t\tlet outWallE = e.children?.[0]?.children?.[1] as HTMLElement\n\t\t\t\tif (wallE) {\n\t\t\t\t\twallE.innerHTML = contentR\n\t\t\t\t\twallE.style.width = _w + 'px'\n\t\t\t\t}\n\t\t\t\tif (outWallE) {\n\t\t\t\t\toutWallE.style.height = _h + 'px'\n\t\t\t\t}\n\t\t\t\te.style.display = 'block'\n\t\t\t} else {\n\t\t\t\tconst body = document.body\n\t\t\t\tconst p = document.createElement('div')\n\t\t\t\tp.setAttribute('id', 'editor-preview')\n\t\t\t\tp.setAttribute('class', 'editor-preview-mask')\n\t\t\t\tp.innerHTML = `<div class='editor-preview-body'><div class='editor-preview-head'><div><span>宽</span><input type='number' value='${_w}' min='200'><span>高</span><input type='number' value='${_h}' min='300'></div><i class='ivu-icon ivu-icon-md-close'></i></div><div class='editor-preview-out-wall'><div class='editor-preview-wall r-editor-view'></div></div></div>`\n\t\t\t\tlet outWallE = p.children[0].children[1] as HTMLElement\n\t\t\t\tlet wallE = p.children[0].children[1].children[0] as HTMLElement\n\n\t\t\t\tlet inputW = p.children[0].children[0].children[0].children[1] as HTMLElement\n\n\t\t\t\tconst spaceW = 40\n\t\t\t\tconst spaceH = 70\n\n\t\t\t\tconst wHandler = (e: any) => {\n\t\t\t\t\tif (e?.type === 'keyup') {\n\t\t\t\t\t\tlet notEnter = false\n\t\t\t\t\t\tif (e.key) {\n\t\t\t\t\t\t\tnotEnter = e.key !== 'Enter'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (notEnter) {\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet val = e?.target?.value\n\t\t\t\t\tval = Number(val)\n\t\t\t\t\tif (wallE.style && wallE.style.width === val + 'px') {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tconst bodyW = body.clientWidth\n\n\t\t\t\t\tif (val < 250) {\n\t\t\t\t\t\tval = 250\n\t\t\t\t\t\te.target.value = 250\n\t\t\t\t\t} else if (val > bodyW - spaceW) {\n\t\t\t\t\t\tval = bodyW - spaceW\n\t\t\t\t\t\te.target.value = bodyW - spaceW\n\t\t\t\t\t}\n\t\t\t\t\twallE.style.width = val + 'px'\n\t\t\t\t\tlocalStorage.setItem('editorPreviewW', val)\n\t\t\t\t}\n\n\t\t\t\tinputW.addEventListener('blur', wHandler)\n\t\t\t\tinputW.addEventListener('keyup', wHandler)\n\t\t\t\tlet inputH = p.children[0].children[0].children[0].children[3]\n\n\t\t\t\tconst hHandler = (e: any) => {\n\t\t\t\t\tif (e?.type === 'keyup') {\n\t\t\t\t\t\tlet notEnter = false\n\t\t\t\t\t\tif (e.key) {\n\t\t\t\t\t\t\tnotEnter = e.key !== 'Enter'\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (notEnter) {\n\t\t\t\t\t\t\treturn\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tlet val = e?.target?.value\n\t\t\t\t\tval = Number(val)\n\n\t\t\t\t\tif (outWallE.style && outWallE.style.height === val + 'px') {\n\t\t\t\t\t\treturn\n\t\t\t\t\t}\n\n\t\t\t\t\tconst bodyH = body.clientHeight\n\n\t\t\t\t\tif (val < 300) {\n\t\t\t\t\t\tval = 300\n\t\t\t\t\t\te.target.value = 300\n\t\t\t\t\t} else if (val > bodyH - spaceH) {\n\t\t\t\t\t\tval = bodyH - spaceH\n\t\t\t\t\t\te.target.value = bodyH - spaceH\n\t\t\t\t\t}\n\t\t\t\t\toutWallE.style.height = val + 'px'\n\t\t\t\t\tlocalStorage.setItem('editorPreviewH', val)\n\t\t\t\t}\n\n\t\t\t\tinputH.addEventListener('blur', hHandler)\n\t\t\t\tinputH.addEventListener('keyup', hHandler)\n\t\t\t\tlet closeE = p.children[0].children[0].children[1]\n\t\t\t\tcloseE.addEventListener('click', () => {\n\t\t\t\t\tp.style.display = 'none'\n\t\t\t\t})\n\n\t\t\t\twallE.innerHTML = contentR\n\t\t\t\twallE.style.width = _w + 'px'\n\t\t\t\toutWallE.style.height = _h + 'px'\n\t\t\t\tbody.append(p)\n\t\t\t}\n\t\t}\n\t}\n\n\tconst configP = {\n\t\tkey: 'previewX',\n\t\tfactory() {\n\t\t\treturn new PreviewButton()\n\t\t}\n\t}\n\n\tBoot.registerMenu(configP)\n\twindow.wangeditorMenuInit = true\n})()\n","/**\n * @description plug-r-qw 源代码入口文件\n * @author Ricky email:zhangqingcq@foxmail.com\n * @created 2023.04.27\n */\n\nimport type { App } from 'vue'\nimport * as components from './components'\nimport * as globalFunc from './utils/globalFunc'\nimport * as outFunc from './utils/output'\nimport localeFile from './locale'\n\nimport { init } from './utils/timer'\nimport { set } from './utils/amap'\nimport './utils/wangeditor5init'\nimport JsonView from 'vue-json-viewer'\nimport clickOutside from './directives/clickOutside'\n\nexport * from './components'\nexport * from './utils/globalFunc'\nexport * from './utils/needImportFunc'\nexport * from './utils/output'\n\nexport const locale = localeFile.use\nexport const i18n = localeFile.i18n\n\nconst methodsR: Record<string, any> = {\n\t...outFunc,\n\t...globalFunc\n}\n\nexport interface plugROption {\n\tnotRegistryGlobal?: boolean\n\tstore?: any\n\tuseStore?: any\n\trouter?: Record<keyof any, any>\n\tlocale?: Record<keyof any, any>\n\ti18n?: Record<keyof any, any>\n\tamap?: { securityJsCode: string; key: string }\n\n\t[k: keyof any]: any\n}\n\nexport const install = function (app: App, options: plugROption = {}) {\n\toutFunc.$fetch.init(options.useStore || options.store, app)\n\n\tapp.use(JsonView)\n\n\tif (options.locale) {\n\t\tlocaleFile.use(options.locale)\n\t}\n\n\tif (options.i18n) {\n\t\tlocaleFile.i18n(options.i18n)\n\t}\n\n\tif (options.router) {\n\t\tinit(options.router)\n\t\toutFunc.tablePrint.init(options.router)\n\t}\n\n\tif (options.amap) {\n\t\tset(options.amap)\n\t}\n\n\tif (!options.notRegistryGlobal) {\n\t\tObject.keys(components).forEach((key) => {\n\t\t\tif (!app.component(key)) {\n\t\t\t\tapp.component(key, (components as Record<string, any>)[key])\n\t\t\t}\n\t\t})\n\n\t\tObject.keys(methodsR).forEach((key) => {\n\t\t\tapp.config.globalProperties[key] = methodsR[key]\n\t\t})\n\t}\n\n\tif (!app.directive('has')) {\n\t\tapp.directive('has', (el, binding) => {\n\t\t\tif (binding.value && !globalFunc.hasPermission(binding.value)) {\n\t\t\t\tel.style.display = 'none'\n\t\t\t}\n\t\t})\n\t}\n\tif (!app.directive('loadmore')) {\n\t\t//select下拉滚动监听事件 可通过指令参数传递class来指定容器\n\t\tapp.directive('loadmore', {\n\t\t\tmounted(el, binding) {\n\t\t\t\t// 获取定义好的scroll盒子\n\t\t\t\tlet SELECT_DOM: any = el\n\n\t\t\t\tif (binding.arg) {\n\t\t\t\t\tSELECT_DOM = document.getElementsByClassName(binding.arg)?.[0]\n\t\t\t\t}\n\t\t\t\tif (!SELECT_DOM) {\n\t\t\t\t\treturn\n\t\t\t\t}\n\t\t\t\tSELECT_DOM.addEventListener('scroll', function () {\n\t\t\t\t\t/*\n\t\t\t\t\t * scrollHeight 获取元素内容高度(只读)\n\t\t\t\t\t * scrollTop 获取或者设置元素的偏移值,常用于, 计算滚动条的位置, 当一个元素的容器没有产生垂直方向的滚动条, 那它的scrollTop的值默认为0.\n\t\t\t\t\t * clientHeight 读取元素的可见高度(只读)\n\t\t\t\t\t * 如果元素滚动到底, 下面等式返回true, 没有则返回false:\n\t\t\t\t\t * ele.scrollHeight - ele.scrollTop === ele.clientHeight;\n\t\t\t\t\t */\n\t\t\t\t\tif (SELECT_DOM.scrollTop > 0 && SELECT_DOM.scrollHeight - SELECT_DOM.scrollTop <= SELECT_DOM.clientHeight) {\n\t\t\t\t\t\tbinding.value()\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t})\n\t}\n\tif (!app.directive('clickOutside')) {\n\t\tapp.directive('clickOutside', clickOutside)\n\t}\n\n\t//库基础字号(应跟你项目设置的view-design基础字号一样)，影响范围：iconTxtBtn的txt与icon的尺寸比例、fullPop的headerFontSize默认值、pagePro的current输入框尺寸。\n\tapp.config.globalProperties.fontSizeBase = 14\n\t// 搜索表单默认label宽度\n\tapp.config.globalProperties.searchFormLabelWidth = 84\n\t// 搜索表单默认表单项内容宽度\n\tapp.config.globalProperties.searchFormItemWidth = 202\n\t// 弹框表单默认label宽度\n\tapp.config.globalProperties.formModalLabelWidth = 140\n\t// 弹框表单默认宽度\n\tapp.config.globalProperties.formModalWidth = 520\n\t// 页内表单默认label宽度\n\tapp.config.globalProperties.formGroupLabelWidth = 160\n\t// 页内表单默认宽度\n\tapp.config.globalProperties.formGroupWidth = '100%'\n\t// iconTxtBtn默认图标大小\n\tapp.config.globalProperties.iconTxtBtnIconSize = 17\n\t// 页签每页可选条数默认配置\n\tapp.config.globalProperties.pageSizes = [10, 20, 50, 100]\n\t// btTablePage是否默认使用pagePro组件作为页签，还会影响transferBox\n\tapp.config.globalProperties.btTablePageUsePagePro = true\n\t// btTablePage表格内容默认对齐方式\n\tapp.config.globalProperties.btTablePageAlign = 'center'\n\t// pagePro和page是否默认展示total，还会影响btTablePage、transferBox\n\tapp.config.globalProperties.pageShowTotal = true\n\t// pagePro和page是否默认展示sizer，还会影响btTablePage、transferBox\n\tapp.config.globalProperties.pageShowSizer = true\n\t// tableSetting默认背景色\n\tapp.config.globalProperties.tableSettingBg = '#fff'\n\t// tableSetting默认transfer\n\tapp.config.globalProperties.tableSettingTransfer = true\n\t// tableSetting默认eventsEnabled\n\tapp.config.globalProperties.tableSettingEventsEnabled = true\n}\n\nconst plugRQw = { install }\n\nexport default plugRQw\n"],"names":["zhLang","REG_NAME","Format","hasOwn","obj","key","template","string","a","args","match","prefix","i","index","result","format","lang","message","nowLang","merged","vueI18n","i18nHandler","path","options","localMessage","newLocalMessage","deepmerge","t","value","array","current","j","property","use","l","i18n","initI18n","localeFile","proxy","_c","_b","_a","getCurrentInstance","props","__props","emit","__emit","click","Proxy","appContext","showPop","ref","hFontSize","computed","popStyle","open","close","getData","__expose","msg","txtSize","e","router","back","$swal","option","text","icon","closeOnClickOutside","T","arg","r","okTxt","cancelTxt","cancelVisible","okClass","cancelClass","reg","myTypeof","swal","res","err","spanRef","contentRef","tooltipDisabled","debounceFunc","maxWidth","getSize","$span","range","rangeWidth","onMounted","debounce","nextTick","onUpdated","onUnmounted","isClient","setValue","target","isRef","v","has","hasPermission","toLine","name","trimObj","p","o","clearObj","val","ignoreList","item","go","formDataHeadConfig","toFormData","data","temp","findCollection","group","condition","getPath","PATH","deepSearch","oneOf","validList","decimalDigitsLimit","num","expStr","valStr","downloadFileByFormSubmit","url","method","form","body","_url","httpEnv","regExp","isPlainObject","input","ta","fileExport","getColumnsKeys","sKey","columns","returnArray","names","isValidValue","isNumberValue","tooltipManual","contentKey","dash","jointMark","_h","params","content","h","TableTooltip","isEmptyValue","stringLength","str","setValByOption","childKey","btnPermissions","isNaN","dataFilterOrToUrl","toUrl","keepEmptyVal","_data","removeEmptyValue","htmlPrint","pWin","siblingElems","elem","nodes","_elem","useRouter","getClass","handleClick","parent","siblings","child","_g","timeoutBox","intervalBox","init","setTimeout","fn","time","handler","setInterval","route","useRoute","menuDisplay","pathName","menuRef","titleC","typeIco","onBeforeMount","watch","after","addOpen","showHideMenu","_e","_d","handleMouseenter","handleMouseleave","ico","icoI","_f","_l","_k","_n","_m","menuProRef","_i","_j","_o","_q","_p","_s","_r","_v","_u","_t","_y","_x","_w","_A","_z","_C","_B","_E","_D","_G","_F","_I","_H","_K","_J","_M","_L","onClick","show","_useModel","getBg","d","isDebounce","openX","iconL","onSearch","clickOutside","el","binding","documentHandler","$swalConfirm","title","onOk","buttonRef","popperRef","indeterminate","checkAll","groupT","groupX","unknown","cloneDeep","disabledGroup","checkAllGroup","subV","locale","_popper","localStr","getStorage","Popper","c","calcPopperHeight","needChange","height","onBeforeUnmount","checkAllGroupChange","getChange","SwalConfirm","save","labelClick","clickOutsideHandle","event","$el","handleCheckAll","toHump","all","letter","htmlEncode","htmlDecode","html","getFileSrc","file","resolve","reader","getFileTypeByName","isImgByFile","type","getFileTypeIconByName","downloadFileReaderFile","href","saveLink","fakeALinkClick","ev","findPath","pathKey","isObject","isFunction","isEmpty","rr","getStringWidth","fontSize","nodesH","width","emptyInput","stopBubbling","loading","messageBox","onCancel","onClose","okText","cancelText","noWarnIcon","footerAlign","cancelBt","heightT","stringContent","functionContent","Modal","Button","count","loader","toggleSpin","counts","host","service","axios","notInitYet","q","logoutHandle","store","checkResult","rPath","config","y","handleRequest","isUrlData","s","keyT","checkRequest","url_","data_","method_","$fetch","app","pageRef","_fontSizeBase","currentPadding","pageSizeT","currentSize","changeCurrentSize","getPadding","$inputEl","inputStyle","paddingL","paddingR","tableContainerHeight","TableColumnConfig","pageSizes","dataT","total","selected","currentKey","currentIndex","_key","_order","columnsFixed","fixedTable","queryData","columnsT","Radio","td","dataS","selectedIds","selectedKeys","tableRef","search","getDataAndClickRow","initTable","addRow","row","setRowData","setCurrentRow","clickCurrentRow","deleteRow","onRowClick","onSelect","selectionHandle","selection","getSelected","changePage","pageSizeChange","onSortChange","order","getTableData","selectRow","predicate","clearSelect","clearTableData","orderKey","keepSelect","selectVal","inputVal","labelSelectStyle","inputChange","handleChange","_amap","set","securityJsCode","get","valueT","widthT","isNumber","containerStyle","mapStyle","Map","GeoCoder","createMarker","mapId","mapInputRef","mapRef","infoWindow","checkHeight","initMap","AMap","AMapLoader","_map","iEl","center","lng","lat","point","marker","getAddress","dragPoint","status","dataC","valProp","isString","last","isEqual","dataFilter","tt","labels","onChange","selectedDetail","label","lv1","lv2","code","_index","domHandle","src","imgEl","nameEl","lastImg","arrSrc","nextImg","fullScreenImgByDom","fullImg","next","notice","_src","_name","bodyEl","first","closeHandler","bb","keyupHandler","fileSrcList","shallowRef","fileDefaultList","localImgSrcList","tempStorage","previewType","fileListItemIsIMG","urlT","fileList","fileIdList","fileDefaultImgList","fileImgSrcList","localImgList","getFileSrcList","_fileDefaultList","fileT","find","indexOf","triggerRef","getName","clearManualItem","downloadDefaultFile","showPreview","listExpand","findIndex","downloadManualFile","handelManualUpload","uploadError","error","uploadSuccess","response","_fileList","overSize","onFormatError","onPreview","id","onRemove","deleteById","_fileIdList","openA","openB","mouseOver","valueA","valueB","mPickerRef","clear","focus","changeA","changeB","dateC","transferId","optionsT","otherOptions","disabledDate","others","getOptions","from","selecting","_editor","toolbarConfigT","editorConfigT","insertFn","n","u","editorTextareaStyle","onCreated","selectContentWidth","itemClass","root","itemChange","reValidateAndChangeHandle","onSelectInputChange","alNameChange","asyncLabelChange","formGroupXRef","valGroup","formDataT","tempKeys","watchGroup","mgrUrl","selectInputKeys","hiddenKeys","showLoading","formReRenderKey","uploadUrl","debounceCount","formTeam","formStyle","itemStyle","formRulesT","tr","k","submitKeys","submitItems","showingKeys","showingItems","getSlotFormData","resetForm","clearForm","refreshFormDom","reRenderForm","f","initValGroup","initFormDataT","defaultV","getDefaultValues","formItem","clearTempKeys","clearTempKeyItem","defaultValItems","getTempKeyDefaultVal","getFormItemIfVal","returnIfVal","dealIfItem","x","tempKeysWatchHandle","box","initItems","tempKeyF","tempKeyE","tempKeyD","cp","tUrl","vT","tV","initOption","recoverVal","toRef","tempKeyC","tempKeyB","itemVal","tOption","eP","rP","rL","lVal","tC","iP","toValue","initValItems","targetOption","findOptions","collectTempKey","findTempKey","tp","fm","moment","findTempKeyItem","setItemToValGroup","notClearOthers","updateValGroup","kk","getValidateKeys","getValidateItems","updateTempKeys","validateFields","updateTempKeyItem","updateFormDataT","changeDataHandle","indexB","remove","getValGroup","validate","reValidate","prop","changeLoading","submit","valid","formGroupStyle","formRRef","formDataC","onSubmit","openModal","handleVisibleChange","initTree","valueE","collectValT","initData","changeStyle","checked","keyI","initDataB","renderContent","classA","isLeaf","ii","arr","grandParent","br","updateVal","valT","searchDataLeft","searchDataRight","lSelection","rSelection","leftTotal","rightTotal","leftTableSearchData","rightTableSearchData","delAllDis","deleteDis","addDis","addAllDis","leftFormRef","rightFormRef","lTabRef","rTabRef","reset","lSelectionChange","rSelectionChange","dataChangeL","dataChangeR","searchLeft","searchRight","add","fetchX","addAll","removeAll","action","leafChecked","valTemp","checkCount","secItem","valIndex","len","equalI","collectKey","before","isCheck","updateDataT","getLeafChecked","ttO","indeterminateCount","checkCountB","thirdItem","checkChangeFirst","itemB","checkChangeSecond","wellStyle","pages","searchStr","historyData","isFresh","urlChanged","transferClass","placeholderT","searchDataT","selectScrollSourceRef","addInputEventListener","getOption","isSelect","loadMore","Message","reject","labelT","eT","hash","disabled","domPrint","autoPrint","help","isFrom","customClass","tableData","isDrag","domContainerStyle","wallClick","dragStart","handleDrag","dragEnd","print","tc","_router","addStyle","style","PrintModal","columnsHandle","columnsB","_columns","tablePrint","fullScreenImgPreview","Icon","hideEl","hideEl2","PreviewButton","__publicField","contentR","wallE","outWallE","inputW","spaceW","spaceH","wHandler","notEnter","bodyW","inputH","hHandler","bodyH","configP","Boot","methodsR","outFunc","globalFunc","install","outFunc.$fetch","JsonView","outFunc.tablePrint","components","globalFunc.hasPermission","SELECT_DOM","plugRQw"],"mappings":"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"}