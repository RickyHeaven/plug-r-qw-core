(function(L,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("deepmerge"),require("lodash-es"),require("sweetalert"),require("view-ui-plus"),require("vue-router"),require("axios"),require("ar-cascader"),require("@wangeditor/editor-for-vue"),require("moment"),require("@wangeditor/editor"),require("vue-json-viewer")):typeof define=="function"&&define.amd?define(["exports","vue","deepmerge","lodash-es","sweetalert","view-ui-plus","vue-router","axios","ar-cascader","@wangeditor/editor-for-vue","moment","@wangeditor/editor","vue-json-viewer"],e):(L=typeof globalThis<"u"?globalThis:L||self,e(L.plugRQw={},L.Vue,L.deepmerge,L.lodashEs,L.swal,L.ViewUIPlus,L.VueRouter,L.axios,L.ArCascader,L.editorForVue,L.moment,L.editor,L.JsonView))})(this,function(L,e,we,D,Ee,oe,Qe,Ze,Ll,At,_e,Il,Dl){var gl,bl;"use strict";var Wa=Object.defineProperty;var ja=(L,e,we)=>e in L?Wa(L,e,{enumerable:!0,configurable:!0,writable:!0,value:we}):L[e]=we;var Me=(L,e,we)=>(ja(L,typeof e!="symbol"?e+"":e,we),we);const xt={r:{locale:"zh-CN",testMsg:"测试国际化",confirm:"确定",cancel:"取消",clear:"清空",info:{title:"提示",text:"确定执行该操作？"},http:{403:"登录状态失效,请重新登录！",409:"该账号已在其他地方登录,点击确定退出。"},pSelect:"请选择",pInput:"请输入",selectDate:"选择日期",selectTime:"选择时间",search:"搜索",level:{1:"一级",2:"二级",3:"三级"},unknown:"未知",title:"标题",required:"该项为必填",back:"返回",button:"按钮",check:"查询",adSearch:"高级查询",all:"全选",tabSetting:" 列表显示设置",delete:"删除",fView:"全屏预览",download:"点击下载",file:"文件",selectFile:"选择文件",notImg:"文件不是图片，不可预览",wrongFileType:"文件类型不被允许",supportType:"支持类型：",none:"无",fileIsBig:"文件过大",supportSize:"支持最大：",uploadError:"上传出错",uploadFail:"上传失败",closePreview:"关闭预览",fullImg:"全屏图片",preview:"预览",searchFor:"当前搜索：",noMore:"没有更多数据了",optionLabel:"选项",getDataError:"拉取数据出错",add:"添加",remove:"移除",addAll:"全部添加",removeAll:"全部移除",added:"已添加",notAdded:"未添加",success:"成功",failed:"失败",error:"出错",pageNotFound:"页面没找到",notFoundMsg:"您访问的页面不存在，点击下面按钮返回上一个页面。",hideMenu:"隐藏菜单",showMenu:"显示菜单",print:"打印",close:"关闭",help:"帮助",printGuide:{1:"1. 鼠标停留在表头列右边框，出现拖动图标，按下鼠标拖动可设置列宽。",2:"2. 点击“列表显示设置”，可选择需要打印的列，选择完需点击“确定”按钮。",3:"3. 页面有A4灰色参考线，将表格右边缘调至参考线区间，打印机默认设置时可将表格内容铺满A4纸，表格越宽字体将越小。",4:"4. 将此页面地址复制到浏览器地址栏，打开的页面将不可用。",5:"未到此线内容将无法铺满纸张",6:"超过此线打印内容将不完整",7:"A4 纵向参考线",8:"A4 横向参考线",9:"复制的页面无法使用该打印功能。"}}},Ol=/(%|){([0-9a-zA-Z_]+)}/g;function Ml(){function a(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function i(t,...n){let d;return n.length===1&&typeof n[0]=="object"&&(d=n[0]),(!d||!d.hasOwnProperty)&&(d={}),t===void 0?"":t.replace(Ol,(o,f,r,h)=>{let s;return t[h-1]==="{"&&t[h+o.length]==="}"?r:(s=a(d,r)?d[r]:null,s??"")})}return i}const El=Ml();let Fe=xt;const Fl={zh:xt};let Lt,It={},ce,Rl=function(a,i){if(typeof this=="object"&&Reflect.has(this,"$t"))return this.$t(a,i);if(ce&&ce.global)return ce.global.t(a,i);if(ce&&ce.locale){if(!It[ce.locale]||Lt!=ce.locale){It[ce.locale]=!0;let t=ce.getLocaleMessage(ce.locale)||{},n=we(Fl[ce.locale],t,{clone:!0});Fe=n,ce.setLocaleMessage(ce.locale,n),Lt=ce.locale}return ce.hlang(a,i)}};const ye=function(a,i){let t=Rl.apply(this,[a,i]);if(t!=null)return t;const n=a.split(".");let d=Fe;for(let o=0,f=n.length;o<f;o++){const r=n[o];if(t=d[r],o===f-1)return El(t,i);if(!t)return"";d=t}return""},Re={use:function(a){Fe=a||Fe},t:ye,i18n:function(a){ce=a}};function T(a,i){var n,d,o;const t=(o=(d=(n=e.getCurrentInstance())==null?void 0:n.appContext)==null?void 0:d.config)==null?void 0:o.globalProperties;return ye.apply(t,[a,i])}const ve=e.defineComponent({__name:"HeaderBt",props:{icon:{},withIcon:{type:Boolean,default:!1},iconSize:{default:18},color:{default:"inherit"},borderColor:{default:"#fff"},disabled:{type:Boolean,default:!1}},emits:["click"],setup(a,{emit:i}){const t=a;function n(){t.disabled||i("click")}return(d,o)=>{const f=e.resolveComponent("Icon");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass({headerBtCTM:!0,withIconCTM:t.icon||t.withIcon,disabled:t.disabled}),style:e.normalizeStyle({color:t.color,borderLeftColor:t.borderColor}),onClick:n},[t.icon?(e.openBlock(),e.createBlock(f,{key:0,size:t.iconSize,type:t.icon},null,8,["size","type"])):e.createCommentVNode("",!0),e.renderSlot(d.$slots,"default")],6)}}}),Pl={class:"headerTxtAM"},$l={class:"contentAM"},Dt=e.defineComponent({__name:"FullPop",props:{title:{},headerColor:{},headerBg:{},headerFontSize:{default:12},zIndex:{default:1e3}},emits:["on-open","on-close"],setup(a,{expose:i,emit:t}){const n=a;let d=e.ref(!1);const o=e.computed(()=>typeof n.headerFontSize=="number"?n.headerFontSize+"px":n.headerFontSize),f=e.computed(()=>({zIndex:n.zIndex}));function r(){d.value=!0,t("on-open")}function h(s){d.value=!1,t("on-close",s===!0)}return i({open:r,close:h}),(s,u)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{class:"fullScreenPopBoxAM",style:e.normalizeStyle(e.unref(f))},[e.createElementVNode("div",{class:"headerAM",style:e.normalizeStyle({color:n.headerColor,backgroundColor:n.headerBg,fontSize:e.unref(o)})},[e.createElementVNode("span",Pl,e.toDisplayString(s.title||e.unref(T)("r.title")),1),e.createVNode(ve,{icon:"md-return-left",onClick:h},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(T)("r.back")),1)]),_:1})],4),e.createElementVNode("div",$l,[e.renderSlot(s.$slots,"default")])],4)),[[e.vShow,e.unref(d)]])}}),Kl={class:"msg"},Ot=e.defineComponent({__name:"Hello",setup(a){let i=e.ref("Greetings from Ricky.");return(t,n)=>(e.openBlock(),e.createElementBlock("span",Kl,e.toDisplayString(e.unref(i)),1))}});function Pe(){const{appContext:a}=e.getCurrentInstance();return a.config.globalProperties}const $e=e.defineComponent({__name:"IconTxtBtn",props:{name:{},icon:{default:"md-download"},size:{default:()=>Pe().iconTxtBtnIconSize},disabled:{type:Boolean,default:!1},has:{default:""}},emits:["click"],setup(a,{emit:i}){const t=a,n=e.computed(()=>Math.floor(t.size/17*12)+"px");function d(o){t.disabled||i("click",o)}return(o,f)=>{const r=e.resolveComponent("Icon"),h=e.resolveDirective("has");return e.withDirectives((e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["tabTopBtnsT",{disabled:t.disabled}]),onClick:d,style:e.normalizeStyle({"font-size":e.unref(n)})},[e.createVNode(r,{type:t.icon,size:t.size},null,8,["type","size"]),e.createTextVNode(" "+e.toDisplayString(t.name||e.unref(T)("r.button")),1)],6)),[[h,o.has]])}}}),Ul={class:"c404K"},zl=e.createElementVNode("div",{class:"t404"},"404",-1),Gl={class:"ct404"},Hl={class:"p404"},Mt=e.defineComponent({__name:"Page404",setup(a){const t=e.getCurrentInstance().appContext.config.globalProperties.$router;function n(){t.go(-1)}return(d,o)=>{const f=e.resolveComponent("Button");return e.openBlock(),e.createElementBlock("div",Ul,[zl,e.createElementVNode("div",Gl,"UH OH! "+e.toDisplayString(e.unref(T)("r.pageNotFound")),1),e.createElementVNode("div",Hl,e.toDisplayString(e.unref(T)("r.notFoundMsg")),1),e.createVNode(f,{class:"bt404",onClick:n},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(T)("r.back")),1)]),_:1})])}}});function de(a,i,t){const n=(...d)=>ye.apply(this,d);return new Promise((d,o)=>{if(typeof a=="object"&&!Array.isArray(a)){let f=n("r.confirm"),r=n("r.cancel"),h=!1,s="swalConfirmBt",u="swalCancelBt";const p=/^HTML.*Element$/;a.type&&(a.icon=a.type)&&delete a.type,a.content&&(a.text=a.content)&&delete a.content,a.className=a.className||"swalBoxX";let V="";a.text&&p.test(F(a.text))?V="content":a.text&&F(a.text)==="String"&&(V="text"),a.buttons&&(typeof a.buttons=="object"&&!Array.isArray(a.buttons)?a.buttons.cancel&&(a.buttons.cancel.text&&(r=a.buttons.cancel.text)&&(h=!0),a.buttons.cancel.className&&(u=a.buttons.cancel.className),a.buttons.confirm.text&&(f=a.buttons.confirm.text),a.buttons.confirm.className&&(s=a.buttons.confirm.className)):Array.isArray(a.buttons)&&(a.buttons[0]&&(r=a.buttons[0],h=!0),a.buttons[1]&&(f=a.buttons[1]))),Ee({title:a.title,icon:a.icon,className:a.className,[V]:a.text,buttons:{confirm:{text:f,value:!0,visible:!0,className:s},cancel:{text:r,value:null,visible:h,className:u}}}).then(k=>{k&&typeof a.onOk=="function"&&a.onOk(),d(k)}).catch(k=>{o(k)})}else if(typeof a=="string"){let f="";if(i)switch(typeof i){case"string":f="text";break;case"object":f="content";break}Ee({title:a,[f]:i||"",icon:t||"",className:"swalBoxX",buttons:{confirm:{text:n("r.confirm"),value:!0,visible:!0,className:"swalConfirmBt",closeModal:!0}}}).then(r=>{d(r)}).catch(r=>{o(r)})}else if(typeof a=="boolean")!a&&Ee.close&&Ee.close();else throw new TypeError("swal第一个参数类型有误，仅支持Object/String/false")})}function et(a){return a.replace(/_(\w)/g,function(i,t){return t.toUpperCase()})}function Et(a){let i=document.createElement("div");return i.textContent!==void 0?i.textContent=a:i.innerText=a,i.innerHTML}function Ft(a){let i=document.createElement("div");return i.innerHTML=a,i.innerText||i.textContent}function Te(a){return new Promise(i=>{let t=new FileReader;t.readAsDataURL(a),t.onloadend=()=>{i(t.result)}})}function Ke(a){return(a==null?void 0:a.split(".").pop().toLocaleLowerCase())||""}function Ne(a){return F(a)==="String"&&a.indexOf("image")>-1}function Ue(a){const i=Ke(a);let t="ios-document-outline";return["gif","jpg","jpeg","png","bmp","webp"].indexOf(i)>-1?t="ios-image":["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"].indexOf(i)>-1?t="ios-film":["mp3","wav","wma","ogg","aac","flac"].indexOf(i)>-1?t="ios-musical-notes":["doc","txt","docx","pages","epub","pdf"].indexOf(i)>-1?t="md-document":["numbers","csv","xls","xlsx"].indexOf(i)>-1?t="ios-stats":["keynote","ppt","pptx"].indexOf(i)>-1&&(t="ios-videocam"),t}function tt(a,i){let t=document.createElement("a");t.href=i,t.download=a,lt(t)}function lt(a){let i=document.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(i)}function Ae({group:a,condition:i,pathKey:t,childKey:n="children",path:d=[]}){if(a&&D.isObject(a)){if(D.isFunction(i)){if(D.isPlainObject(a)){let o=a,f=D.cloneDeep(d);if(i(o))return t&&o[t]&&f.push(o[t]),f;if(o[n]&&!D.isEmpty(o[n])){t&&o[t]&&f.push(o[t]);let r=Ae({group:o[n],condition:i,pathKey:t,childKey:n,path:f});if(!D.isEmpty(r))return r}}else if(Array.isArray(a))for(let o of a){let f=D.cloneDeep(d);if(i(o))return t&&o[t]?f.push(o[t]):f.push(String(a.indexOf(o))),f;if(o[n]&&o[n].length>0){t&&o[t]?f.push(o[t]):f.push(String(a.indexOf(o)));let r=Ae({group:o[n],condition:i,pathKey:t,childKey:n,path:f});if(!D.isEmpty(r))return r}}}else if(Array.isArray(a))for(let o of a){let f=D.cloneDeep(d);if(o===i)return f.push(String(a.indexOf(o))),f}}return[]}function nt(a,i=12){if(F(a)==="String"&&a.length>0){let t=document.createElement("span");t.style.fontSize=i+"px",t.style.fontFamily="inherit",t.innerHTML=a,t.style.opacity="0",t.style.position="fixed",t.style.top="3000px",document.body.append(t);const n=t.clientWidth;return document.body.removeChild(t),n}return 0}function Rt(a){return a===""?null:a}function Pt(a){a=a||window.Event,a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}const Wl=Object.freeze(Object.defineProperty({__proto__:null,downloadFileReaderFile:tt,emptyInput:Rt,fakeALinkClick:lt,findPath:Ae,getFileSrc:Te,getFileTypeByName:Ke,getFileTypeIconByName:Ue,getStringWidth:nt,htmlDecode:Ft,htmlEncode:Et,isImgByFile:Ne,stopBubbling:Pt,toHump:et},Symbol.toStringTag,{value:"Module"}));function F(a){return Object.prototype.toString.call(a).replace(/\[object |]/g,"")}function at(a){return a.replace(/([A-Z])/g,"_$1").toLowerCase()}function xe(a){let i=F(a);if(i==="Object"){for(let t in a)if(a.hasOwnProperty(t)){let n=F(a[t]);n==="String"?a[t]=a[t].trim():(n==="Object"||n==="Array")&&xe(a[t])}}else if(i==="Array")for(let t=0,n=a.length;t<n;t++){let d=F(a[t]);d==="String"?a[t]=a[t].trim():(d==="Array"||d==="Object")&&xe(a[t])}return a}function ze(a,i=[]){if(F(a)==="Array")return a.forEach((t,n)=>{switch(F(t)){case"Array":case"Object":ze(t);break;default:a[n]=null}}),a;if(F(a)==="Object"){for(let t in a)if(a.hasOwnProperty(t)){let n=!0;for(let d of i)if(d===t){n=!1;break}if(n)switch(F(a[t])){case"Array":case"Object":ze(a[t]);break;default:a[t]=null}}return a}else return a}const $t={headers:{"Content-Type":"multipart/form-data"}};function Kt(a){let i=new FormData;for(let t in a)a.hasOwnProperty(t)&&a[t]!==null&&i.append(t,a[t]);return i}function Ve(a,i,t=!1){if(!a||!i)return!1;let n,d="notFoundC",o=function(f,r){if(Array.isArray(f)){if(F(r)==="Function"&&r(f))return d=f,[];for(let h of f){if(d!=="notFoundC")break;if(F(r)==="Function"&&r(h)||h===r)return d=h,[f.indexOf(h)];if(F(h)==="Array"||F(h)==="Object"){let s=o(h,r);if(s!==void 0)return[f.indexOf(h),...s]}}}else if(F(f)==="Object"){if(F(r)==="Function"&&r(f))return d=f,[];for(let h in f){if(d!=="notFoundC")break;if(f.hasOwnProperty(h)){if(F(r)==="Function"&&r(h)||f[h]===r)return d=f[h],[h];if(F(f[h])==="Object"||F(f[h])==="Array"){let s=o(f[h],r);if(s!==void 0)return[h,...s]}}}}};return n=o(a,i),t?n||!1:d==="notFoundC"?!1:d}function Ut(a,i){for(let t=0,n=i.length;t<n;t++)if(a===i[t])return!0;return!1}function zt(a,i=2){let t=new RegExp(`(^-?\\d+\\.\\d{${i}})(\\d+$)`),n=a&&String(a)||"";return t.test(n)?Number(n.replace(t,"$1")):a}function ot(a,i={},t="get"){let n=document.createElement("form"),d=document.getElementsByTagName("body")[0];d.appendChild(n),n.setAttribute("style","display:none"),n.setAttribute("target",""),n.setAttribute("method",t);let o=a;if(window&&window.hasOwnProperty("g")){let f=Object.keys(window.g).filter(r=>r.indexOf("URL")>-1).map(r=>r.replace("URL",""));for(let r of f){let h=new RegExp("^/"+r+"(?=/.*$)","i");if(h.test(a)&&window.g[r+"URL"]){o=window.g[r+"URL"]+a.replace(h,"");break}}}if(n.setAttribute("action",o),D.isPlainObject(i)){for(let r in i)if(i.hasOwnProperty(r)&&(i[r]||i[r]===0||i[r]===!1||i[r]==="")){let h=document.createElement("input");h.setAttribute("type","hidden"),h.setAttribute("name",r),h.setAttribute("value",i[r]),n.appendChild(h)}n.submit();let f=setTimeout(()=>{d.removeChild(n),clearTimeout(f),f=null},8e3)}else console.error("请求数据格式有误，无法下载文件")}function Gt(a,i={},t="get"){if(i.hasOwnProperty("columns")&&(i.columns===""||i.columns===null||i.columns===void 0)){de.call(this,{title:"需要导出的列不能为空",type:"warning"});return}ot(a,i,t)}function Ht(a,i,t=!1){let n;if(a&&F(i)==="Array"){let d=localStorage.getItem(a);if(d){let o=JSON.parse(decodeURI(d));n=i.filter(f=>f.key&&o.indexOf(f.title)!==-1).map(f=>f.key)}else n=i.map(o=>o.key)}else n=[];return t||(n=String(n)),n}function le(a){return a!=null&&a!==""}function Wt(a){return/^-?\d+(.\d+)?$/.test(a)}function it(a,i=!1,t=""){return function(n,d){var h,s;let o;if(Array.isArray(a)){let u=[];for(let p of a)le((h=d.row)==null?void 0:h[p])&&u.push(d.row[p]);o=u.join(t)}else typeof a=="function"?o=a(d):o=(s=d.row)==null?void 0:s[a];let f=nt(o),r=d.column._width;return o&&f>r?e.h(oe.Tooltip,{style:{width:"100%"},content:o,maxWidth:r*2},()=>e.h("span",{style:{width:"100%",display:"inline-block","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden","vertical-align":"top"}},o)):e.h("span",i&&!le(o)?"--":o)}}function jt(a){if(D.isPlainObject(a)){for(let i in a)if(a.hasOwnProperty(i)&&le(a[i]))return!1;return!0}else if(Array.isArray(a)){for(let i of a)if(le(i))return!1;return!0}return!le(a)}function qt(a){return F(a)==="String"?a.replace(/[^\x00-\xff]/g,"01").length:F(a)==="Number"?(a+="",a.replace(/[^\x00-\xff]/g,"01").length):0}function Be({group:a,condition:i,key:t,val:n,childKey:d="children"}){if(F(a)!=="Array"||F(i)!=="Function"||F(t)!=="String"||F(d)!=="String")return!1;a.forEach(o=>{i(o)&&(F(n)==="Function"?o[t]=n(o[t]):o[t]=n),F(o[d])==="Array"&&o[d].length>0&&Be({group:o[d],condition:i,key:t,val:n,childKey:d})})}function rt(a){let i=sessionStorage.getItem("btnPermissions");return i?i.split(",").indexOf(a)>-1:!1}function st(a){return F(a)==="Number"&&String(a)==="NaN"}function Jt(a,i=!1,t=!1){if(F(a)!=="Object")return a;let n=Object.assign(a,{}),d="";for(let o in n)if(n.hasOwnProperty(o)){let f=n[o];f===void 0||f===""||F(f)==="String"&&f.trim()===""||f===null||st(f)?t?i?d+=o+"=&":n[o]="":delete n[o]:i&&(d+=o+"="+f+"&")}return i?d.length>0?d.substring(0,d.length-1):"":n}function Ge(a){let i={};if(Array.isArray(a)){i=[];for(let t of a)Array.isArray(t)||D.isPlainObject(t)?i.push(Ge(t)):le(t)&&i.push(t)}else if(D.isPlainObject(a))for(let t in a)a.hasOwnProperty(t)&&(Array.isArray(a[t])||D.isPlainObject(a[t])?i[t]=Ge(a[t]):le(a[t])&&(i[t]=a[t]));return i}function Yt(a){const i=window.open();if(i){i.document.write(a);let t=setTimeout(()=>{i.print(),window.clearTimeout(t),t=null},10)}}function ct(a){let i=[],t=a;for(;a.previousSibling&&(a=a.previousSibling);)a.nodeType===1&&i.push(a);for(;t.nextSibling&&(t=t.nextSibling);)t.nodeType===1&&i.push(t);return i}const Xt=Object.freeze(Object.defineProperty({__proto__:null,clearObj:ze,dataFilterOrToUrl:Jt,decimalDigitsLimit:zt,downloadFileByFormSubmit:ot,fileExport:Gt,findCollection:Ve,formDataHeadConfig:$t,getColumnsKeys:Ht,hasPermission:rt,htmlPrint:Yt,isEmptyValue:jt,isNaN:st,isNumberValue:Wt,isValidValue:le,myTypeof:F,oneOf:Ut,removeEmptyValue:Ge,setValByOption:Be,siblingElems:ct,stringLength:qt,toFormData:Kt,toLine:at,tooltipManual:it,trimObj:xe},Symbol.toStringTag,{value:"Module"})),jl={class:"groupBoxRP"},ql=["onClick"],Jl=e.defineComponent({__name:"SideMenuGroup",props:{data:{default:()=>[]},pathName:{default:""}},setup(a){const i=a,t=Qe.useRouter();function n(o){return o.path===i.pathName?"active":""}function d(o,f){o.preventDefault();let r=o.target;if(!f.children&&!r.classList.contains("active")){t.push(f.path);return}let h=r.parentNode,s=ct(h);for(let u of s){u.classList.remove("open");const p=u.querySelectorAll(".open");for(let V of p)V.classList.remove("open")}h.classList.toggle("open")}return(o,f)=>{const r=e.resolveComponent("sideMenuGroup",!0);return e.openBlock(),e.createElementBlock("ul",jl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(i.data,(h,s)=>(e.openBlock(),e.createElementBlock("li",{class:e.normalizeClass({dropItemRP:h.children}),key:h.path+s},[e.createElementVNode("div",{class:e.normalizeClass(["menuTxtR",n(h)]),onClick:u=>d(u,h),style:e.normalizeStyle({paddingLeft:h.level*20+"px"})},e.toDisplayString(h.name||"-- no name --"),15,ql),h.children?(e.openBlock(),e.createBlock(r,{key:0,data:h.children,"path-name":i.pathName},null,8,["data","path-name"])):e.createCommentVNode("",!0)],2))),128))])}}}),Yl={class:"menuListR"},Qt=e.defineComponent({__name:"SideMenu",props:{data:{default:()=>[]}},emits:["on-change"],setup(a,{emit:i}){const t=a,n=Qe.useRoute(),d=e.ref(!0),o=e.ref(),f=e.ref(),r=e.computed(()=>d.value?T("r.hideMenu"):T("r.showMenu")),h=e.computed(()=>d.value?"ios-arrow-back":"ios-arrow-forward");e.onBeforeMount(()=>{let p=localStorage.getItem("menuDisplayR")||"";p!==""?d.value=JSON.parse(p):(d.value=!0,localStorage.setItem("menuDisplayR",JSON.stringify(!0)))}),e.watch(()=>n.path,p=>{o.value=p,e.nextTick(u)},{immediate:!0});function s(){d.value=!d.value,localStorage.setItem("menuDisplayR",JSON.stringify(d.value)),i("on-change",d.value)}function u(){let p=f.value.querySelectorAll(".dropItemRP");for(let V of p)V.querySelector(".active")&&!V.classList.contains("open")&&V.classList.add("open")}return(p,V)=>{const k=e.resolveComponent("Icon");return e.openBlock(),e.createElementBlock("div",{ref_key:"menuRef",ref:f,class:"menuBoxRP"},[e.withDirectives(e.createElementVNode("div",Yl,[e.createVNode(Jl,{data:t.data,pathName:e.unref(o)},null,8,["data","pathName"])],512),[[e.vShow,e.unref(d)]]),e.createVNode(k,{type:e.unref(h),size:25,class:e.normalizeClass([{showIco:!e.unref(d)},"menuShowHideIco"]),title:e.unref(r),onClick:s,color:e.unref(d)?"#fff":"#333"},null,8,["type","class","title","color"])],512)}}}),Xl=["title"],dt=e.defineComponent({__name:"TableIconBtn",props:{icon:{default:"md-radio-button-on"},title:{},has:{default:""},disabled:{type:Boolean,default:!1},size:{default:24}},emits:["click"],setup(a,{emit:i}){const t=a;function n(d){t.disabled||i("click",d)}return(d,o)=>{const f=e.resolveComponent("Icon"),r=e.resolveDirective("has");return e.withDirectives((e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["tableBtnsG",{disabled:t.disabled}]),onClick:n,title:t.title||e.unref(T)("r.button")},[e.createVNode(f,{type:t.icon,size:t.size},null,8,["type","size"])],10,Xl)),[[r,t.has]])}}}),Ql={class:"contentX"},Zl={class:"arrowA"},He=e.defineComponent({__name:"ShowHidePanel",props:{bg:{}},setup(a){const i=a,t=e.ref(!0),n=e.computed(()=>t?"background:"+i.bg||"transparent":"");return(d,o)=>{const f=e.resolveComponent("Icon");return e.openBlock(),e.createElementBlock("div",{style:e.normalizeStyle(e.unref(n))},[e.withDirectives(e.createElementVNode("div",Ql,[e.renderSlot(d.$slots,"default")],512),[[e.vShow,e.unref(t)]]),e.createElementVNode("div",Zl,[e.createElementVNode("div",{class:"btA",onClick:o[0]||(o[0]=r=>t.value=!e.unref(t))},[e.createVNode(f,{type:e.unref(t)?"ios-arrow-up":"ios-arrow-down",size:"20"},null,8,["type"])])])],4)}}}),vl={class:"contentZ"},Zt=e.defineComponent({__name:"ShowHidePanelB",props:{modelValue:{type:Boolean,default:!1},bg:{default:"transparent"}},emits:["update:modelValue"],setup(a,{emit:i}){const t=a,n=e.computed({get(){return t.modelValue},set(o){i("update:modelValue",o)}}),d=e.computed(()=>n.value?"background:"+t.bg:"");return(o,f)=>(e.openBlock(),e.createElementBlock("div",{style:e.normalizeStyle(e.unref(d))},[e.withDirectives(e.createElementVNode("div",vl,[e.renderSlot(o.$slots,"default")],512),[[e.vShow,e.unref(n)]])],4))}});let ft=[],ut=[];const en=function(a){a&&a.beforeEach?a.beforeEach(()=>{ft.map(i=>{window.clearTimeout(i)}),ut.map(i=>{window.clearInterval(i)}),ft.length=0,ut.length=0}):console.warn("安装库plug-r-qw时未传入router，调用该库的定时器方法产生的定时器将不能自动销毁，请传入router：Vue.use(plugRQw,{router,...})")},se=function(a,i){let t=window.setTimeout(a,i);return ft.push(t),t},pt=function(a,i){let t=window.setInterval(a,i);return ut.push(t),t},vt=e.defineComponent({__name:"TableSearch",props:{modelValue:{},open:{type:Boolean,default:!1},placeholder:{},showBtn:{type:Boolean,default:!0},fixed:{type:Boolean,default:!1},width:{default:"210px"},right:{default:"0"},top:{default:"0"},btnColor:{default:"inherit"}},emits:["update:modelValue","on-toggle","on-search"],setup(a,{emit:i}){const t=a;let n=!1;const d=e.computed({get(){return t.modelValue},set(h){i("update:modelValue",h)}}),o=e.computed({get(){return t.open},set(h){i("on-toggle",h)}}),f=e.computed(()=>o.value?"ios-arrow-up":"ios-arrow-down");function r(){n||(n=!0,i("on-search",d.value),se(()=>{n=!1},2e3))}return(h,s)=>{const u=e.resolveComponent("Input"),p=e.resolveComponent("icon");return e.openBlock(),e.createElementBlock("div",{class:"tableSearchV",style:e.normalizeStyle({position:t.fixed?"fixed":"absolute",right:t.right,top:t.top})},[e.renderSlot(h.$slots,"default",{},()=>[e.createVNode(u,{modelValue:e.unref(d),"onUpdate:modelValue":s[0]||(s[0]=V=>e.isRef(d)?d.value=V:null),style:e.normalizeStyle({width:t.width}),search:"",onOnSearch:r,class:"searchInputC",placeholder:t.placeholder||e.unref(T)("r.pInput")},null,8,["modelValue","style","placeholder"])]),e.withDirectives(e.createElementVNode("span",{class:"sbt",onClick:s[1]||(s[1]=V=>o.value=!e.unref(o)),style:e.normalizeStyle({color:t.btnColor})},[e.createVNode(p,{type:e.unref(f),color:t.btnColor},null,8,["type","color"]),e.createTextVNode(e.toDisplayString(e.unref(T)("r.adSearch")),1)],4),[[e.vShow,t.showBtn]])],4)}}}),tn={class:"tabSetF"},ln={class:"topCheck"},mt=e.defineComponent({__name:"TableSetting",props:{modelValue:{default:()=>[]},sKey:{},top:{default:"30px"},right:{default:"0"},width:{default:"150px"},bg:{default:"#ccc"},defaultCheck:{type:Boolean,default:!1},storage:{default:"localStorage"}},emits:["update:modelValue"],setup(a,{emit:i}){var b,S,x,w,C;const t=a,n=e.ref(!0),d=e.ref(!1),o=e.ref(!1),f=e.ref([]),r=e.computed(()=>{let _=T("r.unknown");return t.modelValue.length>f.value.length&&(f.value=D.cloneDeep(t.modelValue)),f.value.map(N=>{let I={label:N&&N.title||_};return N&&N.disableShowSetting&&(I.disabled=!0),I})}),h=e.computed(()=>r.value.filter(_=>_.disabled)),s=e.computed({get(){return t.modelValue.map(_=>_&&_.title||T("r.unknown"))},set(_){let N=f.value.filter(I=>{for(let m of _)if(m===I.title)return!0;return!1});i("update:modelValue",N)}}),u=(C=(w=(x=(S=(b=e.getCurrentInstance())==null?void 0:b.appContext)==null?void 0:S.config)==null?void 0:x.globalProperties)==null?void 0:w.$i18n)==null?void 0:C.locale;e.onMounted(()=>{let _=T("r.unknown"),N;u?N=window[t.storage].getItem(t.sKey+"_"+u):N=window[t.storage].getItem(t.sKey),N?s.value=JSON.parse(decodeURI(N)):t.defaultCheck&&(s.value=t.modelValue.filter(I=>I.showSettingCheck).map(I=>I&&I.title||_))});function p(_){_.length===r.value.length?(n.value=!1,d.value=!0):_.length>h.value.length?(n.value=!0,d.value=!1):(n.value=!1,d.value=!1)}e.watch(()=>s.value,p,{immediate:!0,deep:!0});function V(){o.value||(o.value=!0)}function k(){u?window[t.storage].setItem(t.sKey+"_"+u,encodeURI(JSON.stringify(s.value))):window[t.storage].setItem(t.sKey,encodeURI(JSON.stringify(s.value))),o.value=!1}function g(){n.value?d.value=!1:d.value=!d.value,n.value=!1,d.value?s.value=r.value.map(_=>_.label):s.value=h.value.map(_=>_.label)}return(_,N)=>{const I=e.resolveComponent("Icon"),m=e.resolveComponent("Checkbox"),O=e.resolveComponent("CheckboxGroup");return e.openBlock(),e.createElementBlock("div",tn,[e.createElementVNode("div",{class:"tabSetBt",onClick:V},[e.createVNode(I,{type:"md-settings",size:"17"}),e.createElementVNode("span",null,e.toDisplayString(e.unref(T)("r.tabSetting")),1)]),e.withDirectives(e.createElementVNode("div",{class:"tabSetCard",style:e.normalizeStyle({top:t.top,right:t.right,width:t.width,backgroundColor:t.bg})},[e.createElementVNode("div",ln,[e.createVNode(m,{indeterminate:e.unref(n),modelValue:e.unref(d),"onUpdate:modelValue":N[0]||(N[0]=y=>e.isRef(d)?d.value=y:null),onClick:e.withModifiers(g,["prevent"])},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(T)("r.all")),1)]),_:1},8,["indeterminate","modelValue","onClick"]),e.createElementVNode("span",{style:{cursor:"pointer",float:"right"},onClick:k},e.toDisplayString(e.unref(T)("r.confirm")),1)]),e.createVNode(O,{modelValue:e.unref(s),"onUpdate:modelValue":N[1]||(N[1]=y=>e.isRef(s)?s.value=y:null)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),(y,M)=>(e.openBlock(),e.createBlock(m,{class:"setItem",label:y&&y.label,key:"tabSet_"+t.sKey+M,disabled:y&&y.disabled},null,8,["label","disabled"]))),128))]),_:1},8,["modelValue"])],4),[[e.vShow,e.unref(o)]])])}}});let Le=!1;function Ie({height:a,width:i=416,title:t,content:n,onOk:d,onCancel:o,onClose:f,okText:r,cancelText:h,noWarnIcon:s,footerAlign:u,cancelBt:p=!0}){const V=(...S)=>ye.apply(this,S);let g=(a&&Number(a)-90>100?Number(a)-90+"px":0)||"100px",b=F(n)==="String";oe.Modal.warning({width:i,footerHide:!0,render:()=>e.h("div",{class:"customMessageBox",style:{height:g}},[e.h("div",{class:"containerN"},[e.h("div",{class:"titleN"},[e.h("span",t||V("r.info.title")),e.h(oe.Button,{class:"fr closeN",type:"text",onClick(){Le||(oe.Modal.remove(),f&&F(f)==="Function"&&f())}},()=>e.h("i",{class:"ivu-icon ivu-icon-ios-close",style:{fontSize:"30px"}}))]),e.h("div",{class:"contentN",style:{textAlign:b?"center":"left"}},[e.h("i",{class:b&&!s?"ivu-icon ivu-icon-ios-alert-outline":"hide",style:{fontSize:"60px",color:"#f8bb86"}}),e.h("div",{class:"msgBoxConO"},n||V("r.info.text"))]),e.h("div",{class:"footerN",style:{textAlign:u||"center"}},[e.h(oe.Button,{class:"okBtN",onClick(S){var x,w,C,_,N,I,m,O,y;if(d&&typeof d=="function"){const M=d();if(M&&F(M)==="Promise"){Le=!0;const K=(S==null?void 0:S.currentTarget)||(S==null?void 0:S.target);K&&((w=(x=K.classList)==null?void 0:x.add)==null||w.call(x,"ivu-btn-loading"),(_=(C=K.nextSibling)==null?void 0:C.setAttribute)==null||_.call(C,"disabled","disabled"),(y=(O=((m=(I=(N=K.parentElement)==null?void 0:N.parentElement)==null?void 0:I.querySelector)==null?void 0:m.call(I,".titleN .closeN")).classList)==null?void 0:O.add)==null||y.call(O,"disabled")),Promise.resolve(M).then(()=>{Le=!1,oe.Modal.remove()}).catch(()=>{Le=!1,oe.Modal.remove()})}else oe.Modal.remove()}}},()=>[e.h("i",{class:"ivu-load-loop ivu-icon ivu-icon-ios-loading"}),e.h("span",r||V("r.confirm"))]),e.h(oe.Button,{class:["cancelBtN",!p&&"hide"],onClick(){Le||(oe.Modal.remove(),F(o)==="Function"&&o&&o())}},()=>h||V("r.cancel"))])])])})}let Ce=0,De=document.createElement("div");De.setAttribute("class","spinModal"),De.innerHTML='<div class="loader"><svg class="circular" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="5" stroke-miterlimit="10" /></svg></div>',window.onload=function(){document.getElementsByTagName("body")[0].append(De)};function el(a){a?De.classList.add("show"):De.classList.remove("show")}function tl(a){let i=Ce;a?Ce++:Ce>0&&Ce--,i!==Ce&&(Ce===0?el(!1):i===0&&el(!0))}const nn=window.location.origin;let We=null;const ll=(...a)=>ye.apply(We,a);let fe=Ze.create({baseURL:nn,withCredentials:!0});function an(){console.info("store为空，请在安装插件时传入store实例：Vue.use(plugRQw,{store:store})，Pinia传{store:useStore}")}fe.interceptors.request.use(a=>a,a=>Promise.reject(a));function nl(){var a,i;if(fe.store)if(typeof fe.store=="function"){const t=fe.store();t.logout&&t.logout()}else(i=(a=fe.store)==null?void 0:a.dispatch)==null||i.call(a,"logout");else an()}fe.interceptors.response.use(a=>{var i,t;return We&&(((i=a==null?void 0:a.data)==null?void 0:i.code)===403||((t=a==null?void 0:a.data)==null?void 0:t.code)===409)&&Ie({content:ll("r.http."+a.data.code),onOk:nl}),a},a=>{var i,t;return We&&(((i=a==null?void 0:a.response)==null?void 0:i.status)===403||((t=a==null?void 0:a.response)==null?void 0:t.status)===409)&&Ie({content:ll("r.http."+a.response.status),onOk:nl}),console.warn("请求出错：",a),Promise.reject(a)});function ge(a,i,t,n){n&&n.spin&&tl(!1);let d=!0,o=a&&a.data;if(o){t=t||[];for(let f of t)o=o[f],d=d&&o;return d?o:(i&&console.warn(i),!1)}return i&&console.warn(i),!1}function on(a,i,t,n,d,o,f){return new Promise((r,h)=>{switch(a){case"get":fe.get(i,{params:t}).then(u=>{let p=ge(u,n,d,o);p?r(p):h(u)}).catch(u=>{ge({},n,d,o),h(u)});break;case"delete":let s=f?"params":"data";fe.delete(i,{[s]:t}).then(u=>{let p=ge(u,n,d,o);p?r(p):h(u)}).catch(u=>{ge({},n,d,o),h(u)});break;case"post":fe.post(i,t,o).then(u=>{let p=ge(u,n,d,o);p?r(p):h(u)}).catch(u=>{ge({},n,d,o),h(u)});break;case"put":fe.put(i,t,o).then(u=>{let p=ge(u,n,d,o);p?r(p):h(u)}).catch(u=>{ge({},n,d,o),h(u)});break}})}function je(a,i,t={},n,d,o,f){return new Promise((r,h)=>{var s;if(i){o&&o.spin&&tl(!0);let u=i;if(window&&window.hasOwnProperty("g")){const k=window.g;let g=Object.keys(k).filter(b=>b.indexOf("URL")>-1).map(b=>b.replace("URL",""));for(let b of g){let S=new RegExp("^/"+b+"(?=/.*$)","i");if(S.test(i)&&k[b+"URL"]){u=k[b+"URL"]+i.replace(S,"");break}}}let p;if(((s=o==null?void 0:o.headers)==null?void 0:s["Content-Type"])==="multipart/form-data")p=t;else if(t&&!D.isEmpty(t))if(Array.isArray(t)){p=[];for(let k of t)(k||k===0||k===!1||k===""&&o&&!o.noEmptyStr)&&p.push(k)}else{p={};for(let k in t)t.hasOwnProperty(k)&&(t[k]||t[k]===0||t[k]===!1||t[k]===""&&o&&!o.noEmptyStr)&&(p[k]=t[k])}let V=a.toLowerCase();on(V,u,p,n,d,o,f).then(k=>{r(k)}).catch(k=>{h(k)})}else console.error("没有请求地址:url"),h("没有请求地址:url")})}const ue={init(a,i){fe.store=a,We=i.config.globalProperties},post(a,i,t,n,d){return new Promise((o,f)=>{je("post",a,i,t,n,d).then(r=>{o(r)}).catch(r=>{f(r)})})},put(a,i,t,n,d){return new Promise((o,f)=>{je("put",a,i,t,n,d).then(r=>{o(r)}).catch(r=>{f(r)})})},get(a,i,t,n,d){return new Promise((o,f)=>{je("get",a,i,t,n,d).then(r=>{o(r)}).catch(r=>{f(r)})})},delete(a,i,t,n,d,o=!0){return new Promise((f,r)=>{je("delete",a,i,t,n,d,o).then(h=>{f(h)}).catch(h=>{r(h)})})},all:Ze.all,spread:Ze.spread,config:fe},rn={class:"btTablePage fullHeight flexColumnBox",ref:"tableBox"},sn={class:"topBtn"},cn={class:"tableContainer growFlexItem"},dn={class:"fullHeight relativeBox"},fn={ref:"tableContainerLOI",class:"fullFlowContent"},un={class:"pageContainer"},pn=300,qe=e.defineComponent({__name:"BtTablePage",props:{url:{default:""},method:{default:"get"},searchData:{default:()=>({})},columns:{default:()=>[]},dataHandler:{},selection:{type:Boolean,default:!1},radio:{type:Boolean,default:!1},selectionFixed:{type:[String,Boolean],default:!1},rowClickSelect:{type:Boolean,default:!0},data:{default:()=>[]},pageSize:{default:10},sortable:{default:""},initData:{type:Boolean,default:!0},highlightRow:{type:Boolean,default:!1},rowClickNum:{default:-1},tableEmptyTdHandle:{type:Boolean,default:!1},noBorderTable:{type:Boolean,default:!1},noPage:{type:Boolean,default:!1},orderDefault:{default:"desc"},orderKey:{default:"id"},orderKeyFormat:{default:"underline"},getDataLoading:{type:Boolean,default:!1},showTopRow:{type:Boolean,default:!1},lightHead:{type:Boolean,default:!1},pageComponentSize:{default:"default"},noElevator:{type:Boolean,default:!1}},emits:["on-selection-change","on-data-change"],setup(a,{expose:i,emit:t}){const n=a,{globalProperties:d}=e.getCurrentInstance().appContext.config;({...{showSettingCheck:!1,disableShowSetting:!1},...oe.TableColumnConfig});const f=d.pageSizes||[10,20,30,40],r=e.ref(n.data),h=e.ref(localStorage.getItem("btPageSize")&&Number(localStorage.getItem("btPageSize"))||n.pageSize),s=e.ref(1),u=e.ref(0);let p=[],V,k,g=n.orderKey,b=n.orderDefault;const S=e.computed(()=>{for(let R of n.columns)if(R.fixed)return!0;return!1}),x=e.computed(()=>n.selectionFixed||S.value),w=e.computed(()=>{let R={...n.searchData,current:s.value,size:h.value};return n.sortable==="custom"&&(n.orderKeyFormat==="underline"?R[b]=at(g):n.orderKeyFormat==="camelcase"&&(R[b]=et(g))),R}),C=e.computed(()=>{let R=n.columns.filter(P=>P.type!=="selection");if(n.selection||n.radio){let P;n.radio?P={title:" ",width:65,render:(te,ee)=>e.h(oe.Radio,{value:ee.row.btChecked})}:P={type:"selection",width:60},n.selectionFixed&&(P.fixed=n.selectionFixed),R.unshift(P)}return R.forEach(P=>{n.sortable==="custom"?P.key&&P.sortable!==!0&&P.sortable!==!1&&(P.sortable="custom"):P.sortable=!1,P.align||(P.align="center")}),n.tableEmptyTdHandle&&R.forEach(P=>{P.key&&P.render===void 0&&(P.tooltip?P.render=it(P.key,!0):P.render=(te,ee)=>{let ie=ee.row[P.key];return te("span",ie===""||ie===null||ie===void 0?"--":ie)})}),R}),_=e.computed({get(){return r.value.map((R,P)=>({btKey:"bt-"+P,btChecked:!1,...R}))},set(R){r.value=R}}),N=e.computed(()=>p.map(R=>R.id)),I=e.computed(()=>p.map(R=>R.btKey)),m=e.ref();e.watch(()=>n.searchData,O,{deep:!0}),e.watch(()=>n.orderDefault,R=>{b=R}),e.watch(()=>n.orderKey,R=>{g=R});function O(){s.value=1,he()}function y(){n.initData&&he()}function M(R){r.value.unshift(D.cloneDeep(R)),se(()=>{var P,te;(te=(P=m.value)==null?void 0:P.clickCurrentRow)==null||te.call(P,0)},100)}function K(R,P,te){let ee=null;if(D.isBoolean(P)&&P?ee=k:D.isNumber(P)&&(ee=P),ee!==null){let ie=r.value[ee];for(let j in R)R.hasOwnProperty(j)&&(ie[j]=R[j]);te&&se(()=>{var j,pe;(pe=(j=m.value)==null?void 0:j.clickCurrentRow)==null||pe.call(j,ee)},10)}}function z(R){r.value.splice(R,1),se(()=>{var P,te;(te=(P=m.value)==null?void 0:P.clickCurrentRow)==null||te.call(P,0)},100)}function W(R,P){var te,ee;R.btChecked&&n.radio||(n.selection||n.radio)&&n.rowClickSelect&&((ee=(te=m.value)==null?void 0:te.toggleSelect)==null||ee.call(te,P))}function Z(R,P){V=P.btKey,k=Number(P.btKey.split("-")[1]),n.radio&&(r.value[k].btChecked=!0)}function ae(R){if(n.radio)for(let P of _.value)P.btKey!==V&&(r.value[Number(P.btKey.split("-")[1])].btChecked=!1);p=R,t("on-selection-change",R)}function ne(){return D.cloneDeep(p)}function U(R){s.value=R,he()}function v(R){h.value=R,localStorage.setItem("btPageSize",String(R)),s.value===1&&he()}function X({key:R,order:P}){b==="normal"?(g=n.orderKey,b=n.orderDefault):(g=R,b=P),s.value=1,Q()}function E(){var R,P;if(n.radio){if(I.value.length>0&&_.value.length>0){let te=I.value[0].split("-")[1];_.value[te].btChecked=!1}}else(P=(R=m.value)==null?void 0:R.selectAll)==null||P.call(R,!1);p.length>0&&(p=[],t("on-selection-change",[])),V=null,k=null}function J(){r.value=[],E(),s.value=1,u.value=0}function Q(R,P,te){return new Promise(ee=>{R&&(b=R),P&&(g=P),n.url?ue[n.method](n.url,w.value,"",[],{spin:n.getDataLoading}).then(ie=>{var pe,Xe;let j;te||E(),typeof n.dataHandler=="function"?j=n.dataHandler(ie):j=ie,j.data?(j.data.records||j.data.records===null?r.value=j.data.records||[]:j.data.page?(j.data.page.records||j.data.page.records===null)&&(r.value=j.data.page.records||[]):j.data.data?(j.data.data.records||j.data.data.records===null)&&(r.value=j.data.data.records||[]):r.value=j.data,u.value=((pe=j.data.page)==null?void 0:pe.total)||((Xe=j.data.data)==null?void 0:Xe.total)||j.data.total||j.total||0,u.value===0&&s.value>1&&r.value&&r.value.length===0?s.value=1:s.value>1&&u.value<=(s.value-1)*h.value&&(s.value--,e.nextTick(function(){Q(R,P)})),t("on-data-change",j),ee(j)):(console.warn("请求返回数据有误，无法使用"),J(),t("on-data-change",j))}).catch(ie=>{E(),J(),t("on-data-change",ie)}):console.warn("没有有效的请求地址，无法获取表格数据")})}function he(R,P,te){n.radio&&(R||n.rowClickNum!==-1)?Q(P,te,R).then(()=>{r.value.length>0&&se(()=>{var ee,ie,j,pe;R?(ie=(ee=m.value)==null?void 0:ee.clickCurrentRow)==null||ie.call(ee,k||0):(pe=(j=m.value)==null?void 0:j.clickCurrentRow)==null||pe.call(j,n.rowClickNum)},10)}):Q()}return e.onMounted(y),i({selectedIds:N,addRow:M,setRowData:K,deleteRow:z,getSelected:ne,clearSelect:E,clearTableData:J,getTableData:Q,getDataAndClickRow:he}),(R,P)=>{const te=e.resolveComponent("Table"),ee=e.resolveComponent("Page");return e.openBlock(),e.createElementBlock("div",rn,[e.withDirectives(e.createElementVNode("div",sn,[e.renderSlot(R.$slots,"tableSetting"),e.renderSlot(R.$slots,"topMsg"),e.renderSlot(R.$slots,"topBtnGroup")],512),[[e.vShow,n.showTopRow]]),e.createElementVNode("div",cn,[e.createElementVNode("div",dn,[e.createElementVNode("div",fn,[e.createVNode(te,e.mergeProps({ref_key:"tableRef",ref:m},R.$attrs,{height:e.unref(x)&&pn||null,class:{noBorderTable:n.noBorderTable,fullHeightTable:!e.unref(x),lightHeadO:n.lightHead},columns:e.unref(C),data:e.unref(_),"highlight-row":n.radio||n.highlightRow,onOnSelect:Z,onOnSelectionChange:ae,onOnSortChange:X,onOnRowClick:W}),null,16,["height","class","columns","data","highlight-row"])],512)])]),e.withDirectives(e.createElementVNode("div",un,[e.createVNode(ee,{modelValue:e.unref(s),"onUpdate:modelValue":P[0]||(P[0]=ie=>e.isRef(s)?s.value=ie:null),"page-size-opts":e.unref(f),total:e.unref(u),"page-size":e.unref(h),"show-sizer":"","show-total":"",showElevator:!n.noElevator,size:n.pageComponentSize,onOnChange:U,onOnPageSizeChange:v},null,8,["modelValue","page-size-opts","total","page-size","showElevator","size"])],512),[[e.vShow,!n.noPage]])],512)}}}),ht=e.defineComponent({__name:"SelectInput",props:{modelValue:{default:()=>({key:null,val:null})},labelWidth:{default:160},labelTextAlign:{default:"right"},itemWidth:{default:200},selectOption:{default:()=>[]},placeholder:{},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","on-change"],setup(a,{emit:i}){const t=a,n=e.computed({get(){return t.modelValue&&t.modelValue.key||null},set(s){let u={key:s,val:null};n.value&&n.value!==s&&(u.beforeKey=n.value),i("update:modelValue",u),i("on-change",u)}}),d=e.computed({get(){return t.modelValue&&t.modelValue.val||null},set(s){i("update:modelValue",{key:n.value,val:s})}}),o=e.computed(()=>({width:t.labelWidth+"px",textAlign:t.labelTextAlign})),f=e.computed(()=>({width:t.itemWidth+"px"}));function r(s){var u;((u=s==null?void 0:s.target)==null?void 0:u.value)!==void 0&&h({key:n.value,val:s.target.value})}const h=D.debounce(s=>{i("on-change",s)},500);return(s,u)=>{const p=e.resolveComponent("Option"),V=e.resolveComponent("Select"),k=e.resolveComponent("Input");return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(V,{modelValue:e.unref(n),"onUpdate:modelValue":u[0]||(u[0]=g=>e.isRef(n)?n.value=g:null),style:e.normalizeStyle(e.unref(o)),disabled:!!t.disabled,transfer:""},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.selectOption,(g,b)=>(e.openBlock(),e.createBlock(p,{value:g.val,label:g.label,key:"selectInputOp"+g.value+b,style:e.normalizeStyle({textAlign:t.labelTextAlign})},null,8,["value","label","style"]))),128))]),_:1},8,["modelValue","style","disabled"]),e.createVNode(k,{modelValue:e.unref(d),"onUpdate:modelValue":u[1]||(u[1]=g=>e.isRef(d)?d.value=g:null),placeholder:t.placeholder||e.unref(T)("r.pInput"),style:e.normalizeStyle(e.unref(f)),clearable:t.clearable,disabled:!!t.disabled,onOnChange:r},null,8,["modelValue","placeholder","style","clearable","disabled"])])}}});var mn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function hn(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var al={exports:{}};(function(a,i){(function(t,n){a.exports=n()})(mn,function(){function t(p){var V=[];return p.AMapUI&&V.push(n(p.AMapUI)),p.Loca&&V.push(d(p.Loca)),Promise.all(V)}function n(p){return new Promise(function(V,k){var g=[];if(p.plugins)for(var b=0;b<p.plugins.length;b+=1)f.AMapUI.plugins.indexOf(p.plugins[b])==-1&&g.push(p.plugins[b]);if(r.AMapUI===o.failed)k("前次请求 AMapUI 失败");else if(r.AMapUI===o.notload){r.AMapUI=o.loading,f.AMapUI.version=p.version||f.AMapUI.version,b=f.AMapUI.version;var S=document.body||document.head,x=document.createElement("script");x.type="text/javascript",x.src="https://webapi.amap.com/ui/"+b+"/main.js",x.onerror=function(w){r.AMapUI=o.failed,k("请求 AMapUI 失败")},x.onload=function(){if(r.AMapUI=o.loaded,g.length)window.AMapUI.loadUI(g,function(){for(var w=0,C=g.length;w<C;w++){var _=g[w].split("/").slice(-1)[0];window.AMapUI[_]=arguments[w]}for(V();h.AMapUI.length;)h.AMapUI.splice(0,1)[0]()});else for(V();h.AMapUI.length;)h.AMapUI.splice(0,1)[0]()},S.appendChild(x)}else r.AMapUI===o.loaded?p.version&&p.version!==f.AMapUI.version?k("不允许多个版本 AMapUI 混用"):g.length?window.AMapUI.loadUI(g,function(){for(var w=0,C=g.length;w<C;w++){var _=g[w].split("/").slice(-1)[0];window.AMapUI[_]=arguments[w]}V()}):V():p.version&&p.version!==f.AMapUI.version?k("不允许多个版本 AMapUI 混用"):h.AMapUI.push(function(w){w?k(w):g.length?window.AMapUI.loadUI(g,function(){for(var C=0,_=g.length;C<_;C++){var N=g[C].split("/").slice(-1)[0];window.AMapUI[N]=arguments[C]}V()}):V()})})}function d(p){return new Promise(function(V,k){if(r.Loca===o.failed)k("前次请求 Loca 失败");else if(r.Loca===o.notload){r.Loca=o.loading,f.Loca.version=p.version||f.Loca.version;var g=f.Loca.version,b=f.AMap.version.startsWith("2"),S=g.startsWith("2");if(b&&!S||!b&&S)k("JSAPI 与 Loca 版本不对应！！");else{b=f.key,S=document.body||document.head;var x=document.createElement("script");x.type="text/javascript",x.src="https://webapi.amap.com/loca?v="+g+"&key="+b,x.onerror=function(w){r.Loca=o.failed,k("请求 AMapUI 失败")},x.onload=function(){for(r.Loca=o.loaded,V();h.Loca.length;)h.Loca.splice(0,1)[0]()},S.appendChild(x)}}else r.Loca===o.loaded?p.version&&p.version!==f.Loca.version?k("不允许多个版本 Loca 混用"):V():p.version&&p.version!==f.Loca.version?k("不允许多个版本 Loca 混用"):h.Loca.push(function(w){w?k(w):k()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var o;(function(p){p.notload="notload",p.loading="loading",p.loaded="loaded",p.failed="failed"})(o||(o={}));var f={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},r={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},h={AMap:[],AMapUI:[],Loca:[]},s=[],u=function(p){typeof p=="function"&&(r.AMap===o.loaded?p(window.AMap):s.push(p))};return{load:function(p){return new Promise(function(V,k){if(r.AMap==o.failed)k("");else if(r.AMap==o.notload){var g=p.key,b=p.version,S=p.plugins;g?(window.AMap&&location.host!=="lbs.amap.com"&&k("禁止多种API加载方式混用"),f.key=g,f.AMap.version=b||f.AMap.version,f.AMap.plugins=S||f.AMap.plugins,r.AMap=o.loading,b=document.body||document.head,window.___onAPILoaded=function(w){if(delete window.___onAPILoaded,w)r.AMap=o.failed,k(w);else for(r.AMap=o.loaded,t(p).then(function(){V(window.AMap)}).catch(k);s.length;)s.splice(0,1)[0]()},S=document.createElement("script"),S.type="text/javascript",S.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+f.AMap.version+"&key="+g+"&plugin="+f.AMap.plugins.join(","),S.onerror=function(w){r.AMap=o.failed,k(w)},b.appendChild(S)):k("请填写key")}else if(r.AMap==o.loaded)if(p.key&&p.key!==f.key)k("多个不一致的 key");else if(p.version&&p.version!==f.AMap.version)k("不允许多个版本 JSAPI 混用");else{if(g=[],p.plugins)for(b=0;b<p.plugins.length;b+=1)f.AMap.plugins.indexOf(p.plugins[b])==-1&&g.push(p.plugins[b]);g.length?window.AMap.plugin(g,function(){t(p).then(function(){V(window.AMap)}).catch(k)}):t(p).then(function(){V(window.AMap)}).catch(k)}else if(p.key&&p.key!==f.key)k("多个不一致的 key");else if(p.version&&p.version!==f.AMap.version)k("不允许多个版本 JSAPI 混用");else{var x=[];if(p.plugins)for(b=0;b<p.plugins.length;b+=1)f.AMap.plugins.indexOf(p.plugins[b])==-1&&x.push(p.plugins[b]);u(function(){x.length?window.AMap.plugin(x,function(){t(p).then(function(){V(window.AMap)}).catch(k)}):t(p).then(function(){V(window.AMap)}).catch(k)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,f={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},r={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},h={AMap:[],AMapUI:[],Loca:[]}}}})})(al);var yn=al.exports;const Je=hn(yn);let yt={securityJsCode:"",key:""};function gn({securityJsCode:a,key:i}){yt.securityJsCode=a,yt.key=i}function bn(a){return yt[a]}const gt=e.defineComponent({__name:"InputMap",props:{modelValue:{default:()=>({})},width:{default:"100%"},height:{},placeholder:{},disabled:{type:Boolean,default:!1},showMap:{type:Boolean,default:!0}},emits:["update:modelValue","on-change"],setup(a,{emit:i}){const t=a,n=e.computed({get(){let C;return t.modelValue?t.modelValue.name?C=D.cloneDeep(t.modelValue):C={...t.modelValue,name:null}:C={name:null},C},set(C){i("update:modelValue",D.cloneDeep(C))}}),d=e.computed(()=>D.isNumber(t.width)?t.width+"px":t.width),o=e.computed(()=>D.isNumber(t.height)?t.height+"px":t.height?t.height:D.isNumber(t.width)?t.width*.66+"px":"200px"),f=e.computed(()=>({width:d.value,position:"relative"})),r=e.computed(()=>({width:d.value,height:o.value,marginTop:"6px",opacity:t.showMap?1:0,position:t.showMap?"relative":"absolute",top:t.showMap?0:"-10000px"}));e.watch(()=>t.modelValue,C=>{if(C&&C.lng&&C.lat){if(!g||!b)return;x({lng:C.lng,lat:C.lat,name:C.name})}});const h="mapId"+Math.floor(Math.random()*1e9),s=e.ref(null),u=e.ref(null);let p;function V(){u.value&&u.value.clientHeight<10||!u.value?se(V,300):se(S,100)}let k,g,b;function S(){Je.load({key:bn("key"),version:"2.0",plugins:["AMap.AutoComplete","AMap.Geocoder"]}).then(C=>{k=C,g=new k.Map(h).on("complete",()=>{var N,I,m,O;b=new k.Geocoder,(N=t.modelValue)!=null&&N.lng&&((I=t.modelValue)!=null&&I.lat)&&x({lng:t.modelValue.lng,lat:t.modelValue.lat,name:t.modelValue.name});const _=(O=(m=s.value)==null?void 0:m.$el)==null?void 0:O.children;_&&_.length>1&&new k.AutoComplete({input:_[1]}).on("select",y=>{var M,K,z;(M=y==null?void 0:y.poi)!=null&&M.name&&((K=y.poi.location)!=null&&K.lng&&((z=y.poi.location)!=null&&z.lat)?(x({name:y.poi.name,lng:y.poi.location.lng,lat:y.poi.location.lat}),n.value={name:y.poi.name,lng:y.poi.location.lng,lat:y.poi.location.lat}):g.setCity(y.poi.name,()=>{let W=g.getCenter();x({name:y.poi.name,lng:W.lng,lat:W.lat}),n.value={name:y.poi.name,lng:W.lng,lat:W.lat}})),i("on-change",n.value)}),g.on("hotspotclick",y=>{x({name:y.name,lng:y.lnglat.lng,lat:y.lnglat.lat}),n.value={name:y.name,lng:y.lnglat.lng,lat:y.lnglat.lat}})})})}function x({lng:C,lat:_,name:N}){g.clearMap();let I=new k.LngLat(C,_),m=new k.Marker({map:g,position:I,draggable:!0});g.add(m),w(C,_),m.on("dragend",()=>{let O=m.getPosition();n.value={name:N||null,lng:O.lng,lat:O.lat},w(C,_)}),m.on("click",O=>{p&&p.open(g,O.target.getPosition())}),g.setFitView()}function w(C,_){b.getAddress([C,_],(N,I)=>{N==="complete"&&I.info==="OK"&&I.regeocode&&I.regeocode.formattedAddress?p=new k.InfoWindow({isCustom:!0,content:'<div class="mapInfoWindowIKJ">'+I.regeocode.formattedAddress+"</div>",offset:new k.Pixel(16,-45),closeWhenClickMap:!0}):(p=null,console.warn("地图获取位置信息失败",I))})}return e.onMounted(V),e.onUnmounted(()=>{g&&(g.destroy(),Je==null||Je.reset(),g=null,b=null,p=null)}),(C,_)=>(e.openBlock(),e.createElementBlock("div",{style:e.normalizeStyle(e.unref(f)),class:"containerIKJ"},[e.createVNode(e.unref(oe.Input),{ref_key:"mapInputRef",ref:s,modelValue:e.unref(n).name,"onUpdate:modelValue":_[0]||(_[0]=N=>e.unref(n).name=N),class:e.normalizeClass({mapInputIKJ:t.showMap}),placeholder:t.placeholder||e.unref(T)("r.search"),disabled:t.disabled,icon:"ios-search"},null,8,["modelValue","class","placeholder","disabled"]),e.createElementVNode("div",{style:e.normalizeStyle(e.unref(r)),ref_key:"mapRef",ref:u,id:h},null,4)],4))}}),bt=e.defineComponent({__name:"AsyncCascader",props:{modelValue:{},url:{default:(gl=window==null?void 0:window.g)!=null&&gl.mgrURL?window.g.mgrURL+"/web/v1/umc/orgs":""},optionVal:{default:"id"},optionLabel:{default:"name"},optionFilter:{},separator:{default:"/"},onlyLastVal:{type:Boolean,default:!0},onlyLastLabel:{type:Boolean,default:!0},filterable:{type:Boolean,default:!1},placeholder:{default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","on-label-change"],setup(a,{emit:i}){const t=a,n=e.ref([]),d=e.computed({get(){let s=t.modelValue;return Array.isArray(s)?D.cloneDeep(s):D.isNumber(s)?Ae({group:n.value,condition:u=>u.value===s,pathKey:"value"}):D.isString(s)?s.split(t.separator):[]},set(s){if(t.onlyLastVal)D.isEmpty(s)?(i("update:modelValue",null),i("on-label-change",null)):i("update:modelValue",D.last(s));else{if(D.isEqual(t.modelValue,s))return;i("update:modelValue",D.cloneDeep(s))}}});function o(){if(!t.url){console.error("没有用于拉取级联数据的有效接口地址");return}ue.get(t.url).then(s=>{var p;let u=null;(p=s==null?void 0:s.data)!=null&&p.records?u=s.data.records:s!=null&&s.data?u=s.data:s&&(u=s),u?(typeof t.optionFilter=="function"&&F(t.optionFilter)==="Function"&&(u=t.optionFilter(u)),n.value=f(u)):console.warn("级联数据错误，不能使用")}).catch(()=>{console.warn("拉取级联数据出错")})}function f(s){let u=[];for(let p of s){let V={value:p[t.optionVal],label:p[t.optionLabel]};p.children&&!D.isEmpty(p.children)&&(V.children=f(p.children)),u.push(V)}return u}function r(s){return t.onlyLastLabel?D.last(s):s.join(t.separator)}function h(s,u){let p="";D.isEmpty(u)||(p=u.map(V=>V.label).join(t.separator)),i("on-label-change",p)}return e.onMounted(o),(s,u)=>{const p=e.resolveComponent("Cascader");return e.openBlock(),e.createBlock(p,{data:e.unref(n),modelValue:e.unref(d),"onUpdate:modelValue":u[0]||(u[0]=V=>e.isRef(d)?d.value=V:null),onOnChange:h,"change-on-select":"",transfer:"",disabled:t.disabled,"render-format":r,placeholder:t.placeholder||e.unref(T)("r.pSelect"),filterable:t.filterable},null,8,["data","modelValue","disabled","placeholder","filterable"])}}}),kt=e.defineComponent({__name:"AlCascaderMC",props:{modelValue:{},level:{default:2},disabled:{type:Boolean,default:!1},transfer:{type:Boolean,default:!0},filterable:{type:Boolean,default:!0},separator:{default:"/"},placeholder:{}},emits:["update:modelValue","on-name-change"],setup(a,{emit:i}){const t=a,n=e.ref(),d=e.computed({get(){if(t.modelValue&&(D.isNumber(t.modelValue)||D.isString(t.modelValue))){let f=String(t.modelValue).trim();if(/^\d*$/.test(f)){let h=f.substring(0,2)+"0000",s,u=o(f);return u.length<7?s=f.substring(0,4)+"00":s=f.substring(0,6),/^8\d+$/.test(f)?[h,u]:[h,s,u]}return f.indexOf(t.separator)!==-1?f.split(t.separator):[f]}else return Array.isArray(t.modelValue)?D.cloneDeep(t.modelValue):(n.value&&(n.value.select=[]),[])},set(f){if(D.isEmpty(f))i("update:modelValue",null),i("on-name-change",null);else{let r=D.last(f),h="",s="";if(r&&(h=r.code),h&&h.length<12){let u=[...h];for(;u.length<12;)u.push(0);h=u.join("")}if(Array.isArray(f)&&(s=f.map(u=>u.name).join(t.separator)),h){if(h===t.modelValue)return;i("update:modelValue",h)}s&&i("on-name-change",s)}}});function o(f){let r=[...f];for(;r[r.length-1]==="0";)r.pop();return r.join("")}return(f,r)=>(e.openBlock(),e.createBlock(e.unref(Ll),e.mergeProps(f.$attrs,{class:"alCascaderMC",ref_key:"alCRef",ref:n,modelValue:e.unref(d),"onUpdate:modelValue":r[0]||(r[0]=h=>e.isRef(d)?d.value=h:null),level:t.level,disabled:t.disabled,placeholder:t.placeholder||e.unref(T)("r.pSelect"),transfer:t.transfer,searchable:t.filterable}),null,16,["modelValue","level","disabled","placeholder","transfer","searchable"]))}});function be(a){var f,r,h;const i=(...s)=>ye.apply(this,s),t=i("r.closePreview"),n=i("r.fullImg");let d=D.first(document.getElementsByTagName("body")),o=document.createElement("div");o.setAttribute("class","fullScreenImgByDom"),o.innerHTML=`<div class='previewInner'><img src='${a}' alt='${n}' ><i class='ivu-icon ivu-icon-md-close' title='${t}' ></i></div>`,(r=(f=o.querySelector(".ivu-icon-md-close"))==null?void 0:f.addEventListener)==null||r.call(f,"click",function(){var u;let s=D.first(document.getElementsByTagName("body"));(u=s==null?void 0:s.removeChild)==null||u.call(s,o)}),(h=d==null?void 0:d.appendChild)==null||h.call(d,o)}const kn={class:"previewBoxM"},wn={class:"imgLoading"},Vn=[e.createElementVNode("div",{"data-loader":"circle-side",class:"loader-div"},null,-1)],Bn=["src","alt"],Cn={class:"deleteModal"},Sn={class:"previewBoxM"},_n={key:0,class:"previewImg"},Tn=["src","alt"],Nn={class:"deleteModal"},An={class:"customFileListM"},xn={key:0,class:"customFileListItem"},Ln=["onClick","title"],In={class:"btBoxJ"},Dn={class:"customFileListM"},On={key:0,class:"customFileListItem"},Mn={class:"listLoading"},En=[e.createElementVNode("div",{"data-loader":"circle-side",class:"loader-div"},null,-1)],Fn=["onClick","title"],Rn={class:"btBoxJ"},wt=e.defineComponent({__name:"UploadGroup",props:{modelValue:{default:()=>[]},url:{default:(bl=window==null?void 0:window.g)!=null&&bl.mgrURL?window.g.mgrURL+"/web/v1/fsc/file":""},data:{default:()=>({appId:0,moduleId:0,typeId:0})},manualUpload:{type:Boolean,default:!1},maxSize:{default:0},length:{default:0},showUploadList:{type:Boolean,default:!0},withCredentials:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},format:{default:()=>[]},showImg:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","on-change"],setup(a,{emit:i}){const t=a,n=e.shallowRef([]),d=e.shallowRef([]),o=e.computed(()=>!t.manualUpload&&t.showImg&&s.value?"img":t.manualUpload&&t.showImg&&s.value?"localImg":t.manualUpload&&t.showUploadList&&(!t.showImg||!s.value)?"localList":!t.manualUpload&&t.showUploadList&&(!t.showImg||!s.value)?"list":""),f=e.computed(()=>t.manualUpload?"//jsonplaceholder.typicode.com/posts/":t.url),r=e.computed({get(){return t.manualUpload?h.value:h.value.map(y=>({id:y}))},set(y){t.manualUpload?h.value=y||[]:h.value=(y==null?void 0:y.map(M=>M.id))||[]}}),h=e.computed({get(){switch(typeof t.modelValue){case"number":return[t.modelValue];case"string":return t.modelValue.indexOf("--")!==-1?[]:/^\d*$/.test(t.modelValue)?[Number(t.modelValue)]:[t.modelValue];case"object":return Array.isArray(t.modelValue)?t.modelValue.filter(y=>y!=="--"):F(t.modelValue)==="File"?[t.modelValue]:[];default:return[]}},set(y){if(t.length===1){let M=D.first(y);i("update:modelValue",M??null),i("on-change",M??null)}else i("update:modelValue",D.cloneDeep(y)),i("on-change",D.cloneDeep(y))}}),s=e.computed(()=>{let y;if(t.manualUpload?y=r.value:y=d.value,!y)return!1;for(let M of y){let K;if(t.manualUpload?K=M==null?void 0:M.type:K=M==null?void 0:M.mimeType,!K||K&&!(Ne(K)||K==="loading"))return!1}return!0});e.watch(()=>r.value,async y=>{if(o.value==="localImg")y!=null&&y.length?n.value=await p(y):n.value=[];else if(y!=null&&y.length&&o.value!=="localList"){let M=D.cloneDeep(y);const K=D.cloneDeep(d.value);for(let z of M)if((z==null?void 0:z.name)===void 0)if(z.id){const W=D.find(K,Z=>Z.id===z.id);W?(z.name=W.name,z.mimeType=W.mimeType):(z.mimeType="loading",ue.get(t.url+"/"+z.id).then(Z=>{var ae,ne,U,v,X,E;z.name=((U=(ne=(ae=Z==null?void 0:Z.data)==null?void 0:ae.returnValue)==null?void 0:ne[0])==null?void 0:U.name)||T("r.file")+D.indexOf(y,z),z.mimeType=((E=(X=(v=Z==null?void 0:Z.data)==null?void 0:v.returnValue)==null?void 0:X[0])==null?void 0:E.mimeType)||"unknown",e.triggerRef(d)}).catch(()=>{z.name=T("r.file")+D.indexOf(M,z)}))}else z.name=T("r.unknown");d.value=M}else d.value=[]},{immediate:!0,deep:!0});function u(y){return(y==null?void 0:y.name)||(y==null?void 0:y.split)&&D.last(y.split("/"))||y}async function p(y){let M=[];for(let K of y){let z=await Te(K);M.push(z)}return M}function V(y){if(!t.disabled){let M=r.value;M==null||M.splice(y,1),r.value=M}}function k(y){y!=null&&y.id&&window.open(t.url+"/"+y.id+"/download")}function g(y){return t.manualUpload?(y==null?void 0:y.type)&&Ne(y.type):(y==null?void 0:y.id)&&y.mimeType&&Ne(y.mimeType)}function b(y){if(t.manualUpload){if(!y)return;Te(y).then(M=>{be(M)})}else y!=null&&y.id&&be(t.url+"/"+y.id+"/download?preview=true")}function S(y){F(y)==="String"&&y.indexOf("http")>-1?window.open(y):F(y)==="File"&&Te(y).then(M=>{tt(y.name,M)})}function x(y){var M,K;if(t.manualUpload){if(y){let z=Ke(y.name);if((M=t.format)!=null&&M.length&&t.format.indexOf(z)<0)return de(T("r.wrongFileType"),T("r.supportType")+(((K=t.format)==null?void 0:K.length)&&String(t.format)||T("r.none")),"warning"),!1;if(t.maxSize&&y.size>t.maxSize*1024)return de(T("r.fileIsBig"),T("r.supportSize")+t.maxSize+"kb","warning"),!1;let W=r.value;W==null||W.push(y),r.value=W}return!1}else return!0}function w(y){console.warn(y),de(T("r.uploadError"),"","error")}function C(y,M,K){var z,W,Z,ae,ne,U;if((y==null?void 0:y.code)===0){let v=r.value;M.id=(W=(z=y.data)==null?void 0:z[0])==null?void 0:W.id,M.name=(ae=(Z=y.data)==null?void 0:Z[0])==null?void 0:ae.name,M.mimeType=(U=(ne=y.data)==null?void 0:ne[0])==null?void 0:U.mimeType,v==null||v.push(M),r.value=v}else de(T("r.uploadFail"),(y==null?void 0:y.message)||"","error")}function _(){de(T("r.fileIsBig"),T("r.supportSize")+t.maxSize+" kb","warning")}function N(){var y;de(T("r.wrongFileType"),T("r.supportType")+(((y=t.format)==null?void 0:y.length)&&String(t.format)||T("r.none")),"warning")}function I(y){let M=y==null?void 0:y.id,K=y==null?void 0:y.mimeType;M&&(F(K)==="String"&&K.indexOf("image")>-1?be(t.url+"/"+M+"/download?preview=true"):window.open(t.url+"/"+M+"/download?preview=true"))}function m(y){var K,z,W;let M=(W=(z=(K=y==null?void 0:y.response)==null?void 0:K.data)==null?void 0:z[0])==null?void 0:W.id;O(null,M)}function O(y,M){if(!(!M&&M!==0)&&!t.disabled&&h.value.indexOf(M)!==-1){const K=D.cloneDeep(h.value);let z=r.value;z==null||z.splice(K.indexOf(M),1),r.value=z}}return(y,M)=>{var Z,ae,ne,U,v,X;const K=e.resolveComponent("Button"),z=e.resolveComponent("Upload"),W=e.resolveComponent("Icon");return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(z,{name:"files",action:e.unref(f),"before-upload":x,"on-error":w,"on-success":C,"on-exceeded-size":_,"on-preview":I,"on-remove":m,"on-format-error":N,data:t.data,"max-size":t.maxSize,"show-upload-list":!1,"with-credentials":t.withCredentials,format:t.format,multiple:t.multiple||!1,disabled:t.length&&((Z=e.unref(r))==null?void 0:Z.length)&&((ae=e.unref(r))==null?void 0:ae.length)>=t.length||!!t.disabled},{default:e.withCtx(()=>{var E,J;return[e.createVNode(K,{icon:"ios-cloud-upload-outline",class:e.normalizeClass({disabledR:t.length&&((E=e.unref(r))==null?void 0:E.length)&&((J=e.unref(r))==null?void 0:J.length)>=t.length||!!t.disabled})},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(T)("r.selectFile")),1)]),_:1},8,["class"])]}),_:1},8,["action","data","max-size","with-credentials","format","multiple","disabled"]),e.withDirectives(e.createElementVNode("div",kn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(d),E=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:E==null?void 0:E.id},[!t.manualUpload&&(E==null?void 0:E.id)!==null?(e.openBlock(),e.createElementBlock("div",{key:0,class:e.normalizeClass(["previewImg",{previewLoading:E.mimeType==="loading"}])},[e.withDirectives(e.createElementVNode("div",wn,Vn,512),[[e.vShow,E.mimeType==="loading"]]),e.withDirectives(e.createElementVNode("img",{src:y.url+"/"+E.id+"/download?preview=true",alt:E.name},null,8,Bn),[[e.vShow,E.mimeType!=="loading"]]),e.withDirectives(e.createElementVNode("div",Cn,[e.createVNode(W,{type:"ios-expand",size:"40",class:"previewExpand",title:e.unref(T)("r.fView"),onClick:J=>e.unref(be)(t.url+"/"+E.id+"/download?preview=true")},null,8,["title","onClick"]),e.createVNode(W,{type:"ios-trash-outline",size:"40",class:"previewDelete",onClick:J=>O(J,E.id),title:e.unref(T)("r.delete")},null,8,["onClick","title"])],512),[[e.vShow,E.mimeType!=="loading"]])],2)):e.createCommentVNode("",!0)],64))),128))],512),[[e.vShow,e.unref(o)==="img"&&((ne=e.unref(d))==null?void 0:ne.length)]]),e.withDirectives(e.createElementVNode("div",Sn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(n),(E,J)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:"manualImg"+J},[t.manualUpload&&E!==null?(e.openBlock(),e.createElementBlock("div",_n,[e.createElementVNode("img",{src:E,alt:"manualImg"+J},null,8,Tn),e.createElementVNode("div",Nn,[e.createVNode(W,{type:"ios-expand",size:"40",class:"previewExpand",onClick:Q=>e.unref(be)(E),title:e.unref(T)("r.fView")},null,8,["onClick","title"]),e.createVNode(W,{type:"ios-trash-outline",size:"40",class:"previewDelete",onClick:Q=>V(J),title:e.unref(T)("r.delete")},null,8,["onClick","title"])])])):e.createCommentVNode("",!0)],64))),128))],512),[[e.vShow,e.unref(o)==="localImg"&&((U=e.unref(n))==null?void 0:U.length)]]),e.withDirectives(e.createElementVNode("div",An,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),(E,J)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:"manualItem"+J},[t.manualUpload&&E!==null?(e.openBlock(),e.createElementBlock("p",xn,[E.name?(e.openBlock(),e.createBlock(W,{key:0,type:e.unref(Ue)(E.name)},null,8,["type"])):e.createCommentVNode("",!0),e.createElementVNode("span",{class:e.normalizeClass(["upNameT",{previewName:g(E)}]),onClick:Q=>S(E),title:e.unref(T)("r.download")},e.toDisplayString(u(E)),11,Ln),e.createElementVNode("span",In,[g(E)?(e.openBlock(),e.createBlock(W,{key:0,type:"md-qr-scanner",size:"14",class:"listBtH",onClick:Q=>b(E),title:e.unref(T)("r.fView")},null,8,["onClick","title"])):e.createCommentVNode("",!0),e.createVNode(W,{type:"ios-close",size:"22",class:"listBtH",onClick:Q=>V(J),title:e.unref(T)("r.delete")},null,8,["onClick","title"])])])):e.createCommentVNode("",!0)],64))),128))],512),[[e.vShow,e.unref(o)==="localList"&&((v=e.unref(r))==null?void 0:v.length)]]),e.withDirectives(e.createElementVNode("div",Dn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(d),(E,J)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:"defaultItem"+J},[!t.manualUpload&&E!==null?(e.openBlock(),e.createElementBlock("div",On,[e.withDirectives(e.createElementVNode("div",Mn,En,512),[[e.vShow,E.mimeType==="loading"]]),e.withDirectives(e.createVNode(W,{type:e.unref(Ue)(E.name)},null,8,["type"]),[[e.vShow,E.mimeType!=="loading"]]),e.withDirectives(e.createElementVNode("span",{class:e.normalizeClass(["upNameT",{previewName:g(E)}]),onClick:Q=>k(E),title:e.unref(T)("r.download")},e.toDisplayString(E.name||e.unref(T)("r.file")+(J+1)),11,Fn),[[e.vShow,E.mimeType!=="loading"]]),e.withDirectives(e.createElementVNode("span",Rn,[g(E)?(e.openBlock(),e.createBlock(W,{key:0,type:"md-qr-scanner",size:"14",class:"listBtH",onClick:Q=>b(E),title:e.unref(T)("r.fView")},null,8,["onClick","title"])):e.createCommentVNode("",!0),e.createVNode(W,{type:"ios-close",size:"22",class:"listBtH",onClick:Q=>V(J),title:e.unref(T)("r.delete")},null,8,["onClick","title"])],512),[[e.vShow,E.mimeType!=="loading"]])])):e.createCommentVNode("",!0)],64))),128))],512),[[e.vShow,e.unref(o)==="list"&&((X=e.unref(d))==null?void 0:X.length)]])])}}}),Pn=e.createElementVNode("div",{class:"bRoot"},null,-1),Vt=e.defineComponent({__name:"MonthRange",props:{modelValue:{default:()=>["",""]},placement:{default:"bottom-start"},placeholder:{},options1:{},options2:{},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","on-change"],setup(a,{emit:i}){const t=a,n=e.ref(!1),d=e.ref(!1),o=e.ref(!1),f=e.computed({get(){return t.modelValue&&t.modelValue[0]||null},set(b){i("update:modelValue",[b,r.value]),i("on-change",[b,r.value])}}),r=e.computed({get(){return t.modelValue&&t.modelValue[1]||null},set(b){i("update:modelValue",[f.value,b]),i("on-change",[f.value,b])}}),h=e.computed(()=>(f.value||"")+((f.value||r.value)&&" - "||"")+(r.value||"")),s=e.ref();e.onMounted(()=>{s.value.querySelector(".aRoot .ivu-input-suffix").addEventListener("mouseover",()=>{o.value=!0}),s.value.querySelector(".aRoot .ivu-input-suffix").addEventListener("mouseout",()=>{o.value=!1}),s.value.querySelector(".aRoot .ivu-input-suffix").addEventListener("click",b=>{!t.disabled&&(f.value||r.value)&&(b.stopPropagation(),k())})});function u(){t.disabled||(n.value=!0)}function p(b){f.value=b,n.value=!1,d.value=!0}function V(b){r.value=b,d.value=!1}function k(){i("update:modelValue",[null,null]),i("on-change",[null,null])}function g(){n.value=!1,d.value=!1,f.value&&r.value===null&&(f.value=null)}return(b,S)=>{const x=e.resolveComponent("DatePicker"),w=e.resolveComponent("Icon"),C=e.resolveComponent("Input");return e.openBlock(),e.createElementBlock("div",{class:"monthRangeBoxR",ref_key:"mPickerRef",ref:s},[e.createVNode(x,{open:e.unref(d),modelValue:e.unref(r),transfer:"",type:"month",placement:t.placement,options:t.options2,onOnChange:V,onOnClickoutside:g},{default:e.withCtx(()=>[Pn]),_:1},8,["open","modelValue","placement","options"]),e.createVNode(x,{open:e.unref(n),modelValue:e.unref(f),transfer:"",type:"month",placement:t.placement,options:t.options1,onOnChange:p,onOnClickoutside:g},{default:e.withCtx(()=>[e.createElementVNode("div",{onClick:u},[e.createVNode(C,{class:"aRoot",modelValue:e.unref(h),"onUpdate:modelValue":S[0]||(S[0]=_=>e.isRef(h)?h.value=_:null),readonly:"",placeholder:t.placeholder||e.unref(T)("r.selectDate"),disabled:t.disabled},{suffix:e.withCtx(()=>[e.createVNode(w,{type:e.unref(o)&&(e.unref(f)||e.unref(r))&&!t.disabled?"ios-close-circle":"ios-calendar-outline"},null,8,["type"])]),_:1},8,["modelValue","placeholder","disabled"])])]),_:1},8,["open","modelValue","placement","options"])],512)}}}),$n={class:"editor-pro-root"},Bt=e.defineComponent({__name:"EditorPro",props:{modelValue:{default:"<p></p>"},toolbarConfig:{default:()=>({})},editorConfig:{default:()=>({})},mode:{default:"default"},height:{default:300},imgUploadUrl:{},videoUploadUrl:{},placeholder:{default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","on-change"],setup(a,{emit:i}){const t=a,n=e.shallowRef(),d=e.computed({get(){return t.modelValue},set(s){i("update:modelValue",s),i("on-change",s)}}),o=e.computed(()=>Object.assign({placeholder:t.placeholder||T("r.pInput"),insertKeys:{index:31,keys:["previewX"]}},t.toolbarConfig)),f=e.computed(()=>Object.assign({readOnly:t.disabled,MENU_CONF:{uploadImage:{async customUpload(s,u){let p=new FormData;p.append("files",s);const V=s.name,k=t.imgUploadUrl??"/node-serve/file";ue.post(k,p,null,[],{spin:!0,headers:{"Content-Type":"multipart/form-data"}}).then(g=>{if(g&&g.data)if(Array.isArray(g.data))for(let b of g.data){const S=k+"/"+b.id+"/download";u(S,V,S)}else{const b=k+"/"+g.data.id+"/download";u(b,V,b)}}).catch(()=>{de(T("r.uploadFail"),"","error")})}},uploadVideo:{async customUpload(s,u){let p=new FormData;p.append("files",s);const V=t.videoUploadUrl??"/node-serve/file";ue.post(V,p,null,[],{spin:!0,headers:{"Content-Type":"multipart/form-data"}}).then(k=>{if(k&&k.data)if(Array.isArray(k.data))for(let g of k.data){const b=V+"/"+g.id+"/download";u(b)}else{const g=V+"/"+k.data.id+"/download";u(g)}}).catch(()=>{de(T("r.uploadFail"),"","error")})}}}},t.editorConfig)),r=e.computed(()=>({height:typeof t.height=="number"?t.height+"px":t.height}));function h(s){n.value=s}return e.watch(()=>t.disabled,s=>{s?n.value.disable():n.value.enable()}),e.onBeforeUnmount(()=>{n.value&&n.value.destroy()}),(s,u)=>(e.openBlock(),e.createElementBlock("div",$n,[e.withDirectives(e.createVNode(e.unref(At.Toolbar),{class:"editor-pro-toolbar",editor:e.unref(n),defaultConfig:e.unref(o),mode:s.mode},null,8,["editor","defaultConfig","mode"]),[[e.vShow,!s.disabled]]),e.createVNode(e.unref(At.Editor),{class:"editor-pro-editor",modelValue:e.unref(d),"onUpdate:modelValue":u[0]||(u[0]=p=>e.isRef(d)?d.value=p:null),defaultConfig:e.unref(f),mode:s.mode,onOnCreated:h,style:e.normalizeStyle(e.unref(r))},null,8,["modelValue","defaultConfig","mode","style"])]))}}),Kn={key:19,class:"formInfoTxtXN"},Un={key:20,class:"formTitleTxtXN"},ol=e.defineComponent({__name:"ItemR",props:{item:{},itemStyle:{},valGroup:{},tempKeys:{},inline:{type:Boolean},disabled:{type:Boolean},labelWidth:{},itemWidth:{},mgrUrl:{},uploadUrl:{}},emits:["item-change","re-validate","select-input-change","al-name-change","async-label-change"],setup(a,{emit:i}){const t=a;function n(s){return{withInfo:!!s.info,withTitle:!!s.title,inlineFormItemXN:t.inline,noLabel:s.type==="selectInput",[s.class]:s.class,slotInput:s.slotPosition}}function d(s,u){i("item-change",{e:s,root:u})}function o(s,u){i("re-validate",{e:s,root:u})}function f(s){i("select-input-change",s)}function r(s,u){i("al-name-change",{name:s,root:u})}function h(s,u){i("async-label-change",{label:s,root:u})}return(s,u)=>{const p=e.resolveComponent("InputNumber"),V=e.resolveComponent("Input"),k=e.resolveComponent("Option"),g=e.resolveComponent("Select"),b=e.resolveComponent("Radio"),S=e.resolveComponent("Icon"),x=e.resolveComponent("RadioGroup"),w=e.resolveComponent("Checkbox"),C=e.resolveComponent("CheckboxGroup"),_=e.resolveComponent("DatePicker"),N=e.resolveComponent("TimePicker"),I=e.resolveComponent("FormItem");return e.openBlock(),e.createBlock(I,{label:t.item.type!=="radio"&&t.item.type!=="checkbox"?t.item.label:" ",prop:t.item.key||"",class:e.normalizeClass(["relativeBox",n(t.item)])},{default:e.withCtx(()=>[t.item.type==="txt"?(e.openBlock(),e.createElementBlock("div",{key:0,style:e.normalizeStyle([t.itemStyle,{display:"inline-block"}]),class:e.normalizeClass({likeInputX:t.item.likeInput,disabled:!!t.item.disabled||t.disabled})},e.toDisplayString(t.item.valKey?t.valGroup[t.item.valKey]||"无":t.item.val),7)):t.item.type==="inputNumber"?(e.openBlock(),e.createBlock(p,{key:1,style:e.normalizeStyle(t.itemStyle),modelValue:t.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[0]||(u[0]=m=>t.tempKeys[t.item.tempKey]=m),max:t.item.max||t.item.max===0?t.item.max:1/0,min:t.item.min||t.item.min===0?t.item.min:-1/0,precision:t.item.precision,step:t.item.step||1,placeholder:t.item.placeholder||e.unref(T)("r.pInput"),disabled:!!t.item.disabled||t.disabled,readonly:!!t.item.readonly,editable:t.item.editable!==!1,onOnBlur:u[1]||(u[1]=m=>d(m,t.item)),"active-change":!!t.item.activeChange,clearable:t.item.clearable!==!1},null,8,["style","modelValue","max","min","precision","step","placeholder","disabled","readonly","editable","active-change","clearable"])):t.item.type==="input"?(e.openBlock(),e.createBlock(V,{key:2,style:e.normalizeStyle(s.itemStyle),modelValue:t.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[2]||(u[2]=m=>t.tempKeys[t.item.tempKey]=m),type:t.item.inputType??(t.item.password?"password":"text"),maxlength:t.item.maxLength||null,password:!!t.item.password,icon:t.item.icon,prefix:t.item.prefix,suffix:t.item.suffix,placeholder:t.item.placeholder||e.unref(T)("r.pInput"),disabled:!!t.item.disabled||t.disabled,onOnBlur:u[3]||(u[3]=m=>d(m,t.item)),clearable:!t.item.password&&t.item.inputType==="text"&&t.item.clearable!==!1},e.createSlots({_:2},[t.item.slotPosition&&t.item.slotName?{name:t.item.slotPosition,fn:e.withCtx(()=>[e.renderSlot(s.$slots,t.item.slotName)]),key:"0"}:void 0,t.item.slotPosition!=="prepend"&&t.item.prepend?{name:"prepend",fn:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(t.item.prepend),1)]),key:"1"}:void 0,t.item.slotPosition!=="append"&&t.item.append?{name:"append",fn:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(t.item.append),1)]),key:"2"}:void 0]),1032,["style","modelValue","type","maxlength","password","icon","prefix","suffix","placeholder","disabled","clearable"])):t.item.type==="select"?(e.openBlock(),e.createBlock(g,{key:3,modelValue:s.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[4]||(u[4]=m=>s.tempKeys[t.item.tempKey]=m),style:e.normalizeStyle(s.itemStyle),filterable:t.item.filterable===!0||t.item.filterable===!1?t.item.filterable:!1,disabled:!!t.item.disabled||t.disabled,multiple:!!t.item.multiple,placeholder:t.item.placeholder||e.unref(T)("r.pSelect"),onOnChange:u[5]||(u[5]=m=>d(m,t.item)),transfer:"",clearable:t.item.clearable!==!1},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.item.options,(m,O)=>(e.openBlock(),e.createBlock(k,{value:m.val,label:m.label||m.val,key:"option-"+t.item.key+O,disabled:!!m.disabled},null,8,["value","label","disabled"]))),128))]),_:1},8,["modelValue","style","filterable","disabled","multiple","placeholder","clearable"])):t.item.type==="selectInput"?(e.openBlock(),e.createBlock(ht,{key:4,modelValue:s.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[6]||(u[6]=m=>s.tempKeys[t.item.tempKey]=m),"label-width":s.labelWidth,"item-width":s.itemWidth,"select-option":t.item.options||[],placeholder:t.item.placeholder||e.unref(T)("r.pInput"),clearable:t.item.clearable!==!1,disabled:!!t.item.disabled||t.disabled,onOnChange:f},null,8,["modelValue","label-width","item-width","select-option","placeholder","clearable","disabled"])):t.item.type==="alCascader"?(e.openBlock(),e.createBlock(kt,{key:5,style:e.normalizeStyle(s.itemStyle),class:"inlineBlock",modelValue:t.valGroup[t.item.key],"onUpdate:modelValue":u[7]||(u[7]=m=>t.valGroup[t.item.key]=m),level:t.item.level||t.item.level===0?t.item.level:2,disabled:!!t.item.disabled||t.disabled,filterable:t.item.filterable!==!1,placeholder:t.item.placeholder||e.unref(T)("r.pSelect"),"change-on-select":!!t.item.changeOnSelect,onOnNameChange:u[8]||(u[8]=m=>r(m,t.item))},null,8,["style","modelValue","level","disabled","filterable","placeholder","change-on-select"])):t.item.type==="asyncCascader"?(e.openBlock(),e.createBlock(bt,{key:6,style:e.normalizeStyle(s.itemStyle),modelValue:t.valGroup[t.item.key],"onUpdate:modelValue":u[9]||(u[9]=m=>t.valGroup[t.item.key]=m),url:t.item.url||s.mgrUrl+"/web/v1/umc/orgs","option-val":t.item.optionVal||"id","option-label":t.item.optionLabel||"name","option-filter":t.item.optionFilter||null,"only-last-val":t.item.onlyLastVal!==!1,"only-last-label":t.item.onlyLastLabel!==!1,separator:t.item.separator||"/",placeholder:t.item.placeholder||e.unref(T)("r.pSelect"),filterable:!!t.item.filterable,disabled:!!t.item.disabled||t.disabled,onOnLabelChange:u[10]||(u[10]=m=>h(m,t.item))},null,8,["style","modelValue","url","option-val","option-label","option-filter","only-last-val","only-last-label","separator","placeholder","filterable","disabled"])):t.item.type==="radio"?(e.openBlock(),e.createBlock(b,{key:7,modelValue:t.valGroup[t.item.key],"onUpdate:modelValue":u[11]||(u[11]=m=>t.valGroup[t.item.key]=m),disabled:!!t.item.disabled||t.disabled,onOnChange:u[12]||(u[12]=m=>d(m,t.item))},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t.item.label),1)]),_:1},8,["modelValue","disabled"])):t.item.type==="radioGroup"?(e.openBlock(),e.createBlock(x,{key:8,style:e.normalizeStyle(s.itemStyle),onOnChange:u[13]||(u[13]=m=>o(m,t.item)),type:t.item.buttonType?"button":null,modelValue:s.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[14]||(u[14]=m=>s.tempKeys[t.item.tempKey]=m)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.item.options,m=>(e.openBlock(),e.createBlock(b,{key:"radioItem"+m.val,label:m.val,border:!!t.item.itemBorder,disabled:!!t.item.disabled||t.disabled||m.disabled},{default:e.withCtx(()=>[m.icon&&!t.item.buttonType?(e.openBlock(),e.createBlock(S,{key:0,type:m.icon},null,8,["type"])):e.createCommentVNode("",!0),e.createElementVNode("span",null,e.toDisplayString(m.label||m.val),1)]),_:2},1032,["label","border","disabled"]))),128))]),_:1},8,["style","type","modelValue"])):t.item.type==="checkbox"?(e.openBlock(),e.createBlock(w,{key:9,modelValue:t.valGroup[t.item.key],"onUpdate:modelValue":u[15]||(u[15]=m=>t.valGroup[t.item.key]=m),disabled:!!t.item.disabled,onOnChange:u[16]||(u[16]=m=>d(m,t.item))},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t.item.label),1)]),_:1},8,["modelValue","disabled"])):t.item.type==="checkboxGroup"?(e.openBlock(),e.createBlock(C,{key:10,style:e.normalizeStyle(s.itemStyle),modelValue:s.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[17]||(u[17]=m=>s.tempKeys[t.item.tempKey]=m),onOnChange:u[18]||(u[18]=m=>o(m,t.item))},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.item.options,m=>(e.openBlock(),e.createBlock(w,{key:"checkItem"+m.val,label:m.val,disabled:!!t.item.disabled||t.disabled||m.disabled},{default:e.withCtx(()=>[m.icon?(e.openBlock(),e.createBlock(S,{key:0,type:m.icon},null,8,["type"])):e.createCommentVNode("",!0),e.createElementVNode("span",null,e.toDisplayString(m.label||m.val),1)]),_:2},1032,["label","disabled"]))),128))]),_:1},8,["style","modelValue"])):t.item.type==="textarea"?(e.openBlock(),e.createBlock(V,{key:11,type:"textarea",modelValue:s.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[19]||(u[19]=m=>s.tempKeys[t.item.tempKey]=m),autosize:t.item.autosize||{minRows:2},style:e.normalizeStyle(s.itemStyle),maxlength:t.item.maxLength||null,"show-word-limit":!!t.item.showWordLimit,placeholder:t.item.placeholder||e.unref(T)("r.pInput"),disabled:!!t.item.disabled||t.disabled,onOnBlur:u[20]||(u[20]=m=>d(m,t.item)),clearable:t.item.clearable!==!1},null,8,["modelValue","autosize","style","maxlength","show-word-limit","placeholder","disabled","clearable"])):t.item.type==="upload"?(e.openBlock(),e.createBlock(wt,{key:12,style:e.normalizeStyle(s.itemStyle),class:"inlineBlock",modelValue:t.valGroup[t.item.key],"onUpdate:modelValue":u[21]||(u[21]=m=>t.valGroup[t.item.key]=m),url:t.item.url||s.uploadUrl,"manual-upload":!!t.item.manualUpload,format:t.item.format||[],data:t.item.data,"max-size":t.item.maxSize||0,"show-img":!!t.item.showImg,length:t.item.length||0,disabled:!!t.item.disabled||t.disabled,"with-credentials":t.item.withCredentials!==!1,onOnFileIdChange:u[22]||(u[22]=m=>o(m,t.item))},null,8,["style","modelValue","url","manual-upload","format","data","max-size","show-img","length","disabled","with-credentials"])):t.item.type==="date"?(e.openBlock(),e.createBlock(_,{key:13,style:e.normalizeStyle(s.itemStyle),modelValue:s.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[23]||(u[23]=m=>s.tempKeys[t.item.tempKey]=m),type:t.item.dateType,disabled:!!t.item.disabled||t.disabled,placement:"bottom-end",placeholder:t.item.placeholder||e.unref(T)("r.selectDate"),options:t.item.dateOptions||null,clearable:t.item.clearable!==!1,editable:!1,transfer:"",onOnChange:u[24]||(u[24]=m=>d(m,t.item))},null,8,["style","modelValue","type","disabled","placeholder","options","clearable"])):t.item.type==="time"?(e.openBlock(),e.createBlock(N,{key:14,style:e.normalizeStyle(s.itemStyle),modelValue:s.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[25]||(u[25]=m=>s.tempKeys[t.item.tempKey]=m),type:t.item.dateType,disabled:!!t.item.disabled||t.disabled,placement:"bottom-end",placeholder:t.item.placeholder||e.unref(T)("r.selectTime"),steps:t.item.steps||[],clearable:t.item.clearable!==!1,editable:!1,format:t.item.format||"HH:mm:ss",transfer:"",onOnChange:u[26]||(u[26]=m=>d(m,t.item))},null,8,["style","modelValue","type","disabled","placeholder","steps","clearable","format"])):t.item.type==="monthRange"?(e.openBlock(),e.createBlock(Vt,{key:15,style:e.normalizeStyle(s.itemStyle),modelValue:s.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[27]||(u[27]=m=>s.tempKeys[t.item.tempKey]=m),disabled:!!t.item.disabled||t.disabled,placement:"bottom-end",placeholder:t.item.placeholder||e.unref(T)("r.selectDate"),options1:t.item.dateOptions1||null,options2:t.item.dateOptions2||null,onOnChange:u[28]||(u[28]=m=>d(m,t.item))},null,8,["style","modelValue","disabled","placeholder","options1","options2"])):t.item.type==="editorPro"?(e.openBlock(),e.createBlock(Bt,{key:16,class:"inlineBlock",style:e.normalizeStyle(s.itemStyle),modelValue:t.valGroup[t.item.key],"onUpdate:modelValue":u[29]||(u[29]=m=>t.valGroup[t.item.key]=m),placeholder:t.item.placeholder||e.unref(T)("r.pInput"),disabled:!!t.item.disabled||t.disabled,"toolbar-config":t.item.toolbarConfig||{},"editor-config":t.item.editorConfig||{},mode:t.item.mode||"simple",height:t.item.height||300,onInput:u[30]||(u[30]=m=>d(m,t.item))},null,8,["style","modelValue","placeholder","disabled","toolbar-config","editor-config","mode","height"])):t.item.type==="inputMap"?(e.openBlock(),e.createBlock(gt,{key:17,modelValue:s.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[31]||(u[31]=m=>s.tempKeys[t.item.tempKey]=m),style:e.normalizeStyle(s.itemStyle),placeholder:t.item.placeholder||e.unref(T)("r.search"),disabled:!!t.item.disabled||t.disabled,"show-map":t.item.showMap!==!1,height:t.item.mapHeight||"250px",onOnChange:u[32]||(u[32]=m=>d(m,t.item))},null,8,["modelValue","style","placeholder","disabled","show-map","height"])):t.item.type==="custom"?(e.openBlock(),e.createElementBlock("div",{key:18,class:"inlineBlock",style:e.normalizeStyle(s.itemStyle)},[e.renderSlot(s.$slots,t.item.slotName,{valGroup:t.valGroup})],4)):e.createCommentVNode("",!0),t.item.info?(e.openBlock(),e.createElementBlock("div",Kn,e.toDisplayString(t.item.info),1)):e.createCommentVNode("",!0),t.item.title?(e.openBlock(),e.createElementBlock("div",Un,e.toDisplayString(t.item.title),1)):e.createCommentVNode("",!0)]),_:3},8,["label","prop","class"])}}}),zn=e.createElementVNode("input",{type:"text"},null,-1),Gn={class:"inlineBlock"},Oe=e.defineComponent({__name:"FormR",props:{formData:{default:()=>[]},formRules:{default:()=>({})},showMessage:{type:Boolean,default:!0},labelWidth:{default:160},contentWidth:{default:"70%"},itemWidth:{default:200},inline:{type:Boolean,default:!1},showLongOkBt:{type:Boolean,default:!1},longOkBtTxt:{},showInlineOkBt:{type:Boolean,default:!1},inlineOkBtTxt:{},showInlineClearBt:{type:Boolean,default:!1},inlineClearBtTxt:{},disabled:{type:Boolean,default:!1},btnLoading:{type:Boolean,default:!1},trim:{type:Boolean,default:!0},teamClass:{default:"formTeamBox"}},emits:["on-item-change","on-reset","on-re-render","on-submit"],setup(a,{expose:i,emit:t}){var Al,xl;const n=a,d=e.ref(null),o=e.ref({}),f=e.ref([]),r=e.ref({});let h=[];const s=((Al=window==null?void 0:window.g)==null?void 0:Al.mgrURL)??"";let u=[],p=[];const V=e.ref(!1),k=e.ref(Math.random()*1e8+1e3),g=(xl=window==null?void 0:window.g)!=null&&xl.mgrURL?window.g.mgrURL+"/web/v1/fsc/file":"/file";let b=!1;const S=e.computed(()=>Array.isArray(n.formData.length?n.formData[0]:!1)),x=e.computed(()=>n.inline?{width:n.itemWidth+n.labelWidth+"px"}:{}),w=e.computed(()=>n.inline?{width:"100%"}:{width:n.contentWidth}),C=e.computed(()=>{let c=D.cloneDeep(n.formRules);for(let l in c)if(c.hasOwnProperty(l))if(Array.isArray(c[l]))for(let A of c[l])A.message||A.validator||(A.message=T("r.required"));else F(c[l])==="Object"&&(c[l].message||c[l].validator||(c[l].message=T("r.required")));return c}),_=e.computed(()=>{let c=[];if(S.value)for(let l of f.value)m(l,c);else m(f.value,c);return c.concat(u,p)}),N=e.computed(()=>{let c=[];if(S.value)for(let l of f.value)O(l,c);else O(f.value,c);return c});function I(c){return c.filter(l=>l.slotName)}function m(c,l){for(let A of c)if(A.showing===!0&&A.key&&A.type!=="selectInput"&&(l.push(A.key),A.key2&&l.push(A.key2),A.collectLabel)){if(!Array.isArray(A.collectLabel)&&A.collectLabel.key)l.push(A.collectLabel.key);else if(Array.isArray(A.collectLabel))for(let B of A.collectLabel)B.key&&l.push(B.key)}}function O(c,l){for(let A of c)A.showing===!0&&A.key&&A.type!=="selectInput"&&l.push(A.key)}function y(){return new Promise(c=>{z(),K().then(()=>{t("on-reset"),c(!0)})})}function M(){return new Promise(c=>{for(let l of h)l();h=[],r.value={},P(),J(),K().then(()=>{t("on-re-render"),c(!0)})})}function K(){return new Promise(c=>{k.value=Math.floor(Math.random()*1e8+1e3),e.nextTick(function(){c(!0)})})}function z(){let c=ae();for(let l in o.value)if(o.value.hasOwnProperty(l))if(le(c[l]))o.value[l]=c[l];else if(Array.isArray(o.value[l]))o.value[l]=[];else if(F(o.value[l])==="Boolean")o.value[l]=!1;else{const A=Ve(n.formData,B=>B.key===l);A&&(A.type==="editor"||A.type==="editorPro")?o.value[l]="":o.value[l]=null}W(c)}function W(c){for(let l in r.value)r.value.hasOwnProperty(l)&&(le(c[l])?r.value[l]=c[l]:Array.isArray(r.value[l])?r.value[l]=[]:F(r.value[l])==="Object"&&r.value[l].hasOwnProperty("key")&&r.value[l].hasOwnProperty("val")?r.value[l].val=null:r.value[l]=null)}function Z(c){let l=ae();le(l[c])?r.value[c]=l[c]:Array.isArray(r.value[c])?r.value[c]=[]:r.value[c]=null}function ae(){let c={};if(S.value)for(let l of f.value)ne(l,c);else ne(f.value,c);return c}function ne(c,l){for(let A of c)A.tempKey&&le(A.defaultVal)&&E(A,l),A.key&&le(A.defaultVal)&&(l[A.key]=A.defaultVal),A.key2&&le(A.defaultVal2)&&(l[A.key2]=A.defaultVal2)}function U(c){if(c.show){if(F(c.show)==="Object")return X(c,v(c.show));if(Array.isArray(c.show))if(c.showOr){for(let l of c.show)if(v(l)===!0)return X(c,!0);return X(c,!1)}else{for(let l of c.show)if(v(l)===!1)return X(c,!1);return X(c,!0)}else if(F(c.show)==="Function")return X(c,c.show(o.value))}else c.showing||(c.showing=!0);return!0}function v(c){if(c.reg&&typeof c.reg.test=="function")return c.reg.test(o.value[c.key]);if(Array.isArray(c.val)){for(let l of c.val){if((o.value[c.key]||o.value[c.key]===0||o.value[c.key]===!1)&&l===".")return!0;if(o.value[c.key]===l)return!0}return!1}else return!1}function X(c,l){return!c.showing&&l&&c.key?(c.showing=l,c.defaultVal!==void 0&&(c.tempKey?(r.value[c.tempKey]===null||r.value[c.tempKey]===void 0||(F(r.value[c.tempKey])==="Object"||Array.isArray(r.value[c.tempKey]))&&D.isEmpty(r.value[c.tempKey]))&&E(c,r.value):(o.value[c.key]===null||o.value[c.key]===void 0)&&(o.value[c.key]=c.defaultVal),c.key2&&c.deafultVal2!==void 0&&(o.value[c.key2]===null||o.value[c.key2]===void 0)&&c.type!=="inputMap"&&(o.value[c.key2]=c.defaultVal2)),c.tempKey&&ee(r.value[c.tempKey],c)):c.showing=l,l}function E(c,l){switch(c.type){case"selectInput":l[c.tempKey]={key:c.key,val:c.defaultVal};break;case"inputMap":c.key3?l[c.tempKey]={lng:c.defaultVal||0,lat:c.defaultVal2||0,name:c.defaultVal3||""}:l[c.tempKey]={lng:c.defaultVal||0,lat:c.defaultVal2||0};break;case"input":case"inputNumber":case"textarea":l[c.tempKey]=c.defaultVal;break;case"radioGroup":case"select":case"checkboxGroup":c.booleanVal?l[c.tempKey]=c.defaultVal?1:0:l[c.tempKey]=c.defaultVal;break;case"date":case"time":case"monthRange":c.dateType==="date"||c.dateType==="datetime"||c.dateType==="time"||c.dateType==="year"||c.dateType==="month"?l[c.tempKey]=c.defaultVal:(c.dateType==="daterange"||c.dateType==="datetimerange"||c.dateType==="timerange"||c.type==="monthRange")&&(l[c.tempKey]=c.defaultVal&&c.defaultVal2&&[c.defaultVal,c.defaultVal2]||[]);break}}function J(){let c=D.cloneDeep(n.formData);if(S.value)for(let l of c)Q(l);else Q(c);f.value=c}function Q(c){for(let l of c)switch(l.type){case"selectInput":const A="selectInput"+Math.floor(Math.random()*1e8);l.tempKey=A,r.value[A]={key:l.key||null,val:l.defaultVal||null},h.push(e.watch(()=>r.value[A],$=>{ee($,l)},{immediate:!0}));break;case"inputMap":const B="inputMap"+Math.floor(Math.random()*1e8);l.key&&(l.tempKey=B,l.key3?r.value[B]=l.defaultVal!==void 0&&l.defaultVal2!==void 0?{lng:l.defaultVal,lat:l.defaultVal2,name:l.defaultVal3||""}:{lng:null,lat:null,name:null}:r.value[B]=l.defaultVal!==void 0&&l.defaultVal2!==void 0?{lng:l.defaultVal,lat:l.defaultVal2}:{lng:null,lat:null},h.push(e.watch(()=>r.value[B],$=>{ee($,l)},{immediate:!0})));break;case"input":case"inputNumber":case"textarea":const Y="inputT"+Math.floor(Math.random()*1e8);l.key&&(l.tempKey=Y,r.value[Y]=l.defaultVal!==void 0?l.defaultVal:null,h.push(e.watch(()=>r.value[Y],$=>{ee($,l)},{immediate:!0})));break;case"select":case"radioGroup":case"checkboxGroup":if(l.options||(l.options=[]),l.asyncOption)if(l.changeOption)if(Array.isArray(l.changeOption)){let $=!0;for(let G of l.changeOption)if(!G.valKey||!G.key){$=!1;break}$?h.push(e.watch(()=>{let G="";if(Array.isArray(l.changeOption))for(let re of l.changeOption){let me=o.value[re.valKey];if(me||me===0||me===!1)G+="&"+re.key+"="+me;else if(!re.notRequired)return!1}return G},G=>{let re=D.cloneDeep(r.value[l.tempKey]);if(r.value[l.tempKey]=null,G&&l.optionUrl){let me=l.optionUrl.indexOf("?")!==-1?l.optionUrl:l.optionUrl+"?";he((me+G).replace(/\?&/,"?"),l,re)}else l.options=[],l.localOption&&(l.options=[...l.localOption]),le(re)&&R(re,l)},{immediate:!0})):(l.options=[],l.localOption&&(l.options=[...l.localOption]))}else typeof l.changeOption=="object"?l.changeOption.valKey&&l.changeOption.key&&h.push(e.watch(()=>typeof l.changeOption=="object"&&!Array.isArray(l.changeOption)?o.value[l.changeOption.valKey]:!1,$=>{let G=D.cloneDeep(r.value[l.tempKey]);if(r.value[l.tempKey]=null,($||$===0||$===!1)&&l.optionUrl&&typeof l.changeOption=="object"&&!Array.isArray(l.changeOption)){let re=l.optionUrl.indexOf("?")!==-1?l.optionUrl:l.optionUrl+"?";he((re+"&"+l.changeOption.key+"="+$).replace(/\?&/,"?"),l,G)}else l.options=[],l.localOption&&(l.options=[...l.localOption]),le(G)&&R(G,l)},{immediate:!0})):F(l.changeOption)==="Boolean"&&h.push(e.watch(()=>Ve(n.formData,$=>$.key===l.key).optionUrl,$=>{let G=D.cloneDeep(r.value[l.tempKey]);r.value[l.tempKey]=null,$?he($,l,G):(l.options=[],l.localOption&&(l.options=[...l.localOption]),le(G)&&R(G,l))},{immediate:!0}));else l.optionUrl&&he(l.optionUrl,l);else F(l.borrowOption)==="String"&&(l.options=Ve(f.value,$=>$.key===l.borrowOption).options);const q="opEle"+Math.floor(Math.random()*1e8);l.key&&(l.tempKey=q,l.type==="select"&&l.multiple||l.type==="checkboxGroup"?r.value[q]=l.defaultVal!==void 0?l.defaultVal:[]:l.booleanVal?r.value[q]=l.defaultVal!==void 0?l.defaultVal?1:0:null:r.value[q]=l.defaultVal!==void 0?l.defaultVal:null,h.push(e.watch(()=>r.value[q],$=>{ee($,l)},{immediate:!0})));break;case"date":case"time":case"monthRange":const H="date"+Math.floor(Math.random()*1e8);l.tempKey=H,l.dateType==="date"||l.dateType==="datetime"||l.dateType==="time"||l.dateType==="year"||l.dateType==="month"?r.value[H]=l.defaultVal||null:(l.dateType==="daterange"||l.dateType==="datetimerange"||l.dateType==="timerange"||l.type==="monthRange")&&(r.value[H]=l.defaultVal&&l.defaultVal2&&[l.defaultVal,l.defaultVal2]||[]),h.push(e.watch(()=>r.value[H],$=>{ee($,l)}));break}}function he(c,l,A){ue.get(c).then(B=>{var q;if(!l.options)return;let Y=((q=B==null?void 0:B.data)==null?void 0:q.records)||(B==null?void 0:B.data)||B||[];Array.isArray(Y)?(l.optionFilter&&F(l.optionFilter)==="Function"&&(Y=l.optionFilter(Y)),l.optionLabel&&l.optionVal?(l.options.length=0,l.options.push(...Y.map(H=>{let $;if(Array.isArray(l.optionLabel)){let G="";l.optionLabel.forEach((re,me)=>{let Nt=String(H[re]);me===1?G+="（"+Nt:me>1?G+="、"+Nt:G+=Nt}),$={label:G+"）",val:l.optionVal&&H[l.optionVal]}}else $={label:l.optionLabel&&H[l.optionLabel],val:l.optionVal&&H[l.optionVal]};if(l.collectLabel)if(Array.isArray(l.collectLabel))for(let G of l.collectLabel)G.valKey&&G.valKey!=="label"&&($[G.valKey]=H[G.valKey]);else l.collectLabel.valKey&&l.collectLabel.valKey!=="label"&&($[l.collectLabel.valKey]=H[l.collectLabel.valKey]);if($.val!==null&&$.val!==void 0)return $}))):(l.options.length=0,l.options.push(...Y))):l.options.length=0,l.localOption&&l.options.unshift(...l.localOption),le(A)&&R(A,l),l.disableOptionByOthers&&(F(l.disableOptionByOthers)==="String"?h.push(e.watch(()=>o.value[l.disableOptionByOthers],H=>{if(Z(l.tempKey),!!l.options){for(let $ of l.options)$.disabled&&($.disabled=!1);if(H||H===0||H===!1)for(let $ of l.options)$.val===H&&($.disabled=!0)}},{immediate:!0})):Array.isArray(l.disableOptionByOthers)&&h.push(e.watch(()=>l.disableOptionByOthers.filter(H=>H).map(H=>o.value[H]),H=>{if(Z(l.tempKey),!!l.options){for(let $ of l.options)$.disabled&&($.disabled=!1);if(H){for(let $ of l.options)for(let G=0;G<H.length;G++)if($.val===H[G]){$.disabled=!0,H.splice(G,1);break}}}},{immediate:!0})))}).catch(()=>{console.warn("拉取选项出错")})}function R(c,l){Array.isArray(l.options)&&D.findIndex(l.options,{val:c})!==-1&&(r.value[l.tempKey]=c)}function P(){if(o.value={},S.value)for(let c of n.formData)te(c);else te(n.formData)}function te(c){for(let l of c)l.key&&(l.type==="checkboxGroup"||l.type==="select"&&l.multiple?o.value[l.key]=l.defaultVal!==void 0&&l.show===void 0?l.defaultVal:[]:l.type==="editor"||l.type==="editorPro"?o.value[l.key]=l.defaultVal!==void 0&&l.show===void 0?l.defaultVal:"":(o.value[l.key]=l.defaultVal!==void 0&&l.show===void 0?l.defaultVal:null,l.key2&&(o.value[l.key2]=l.defaultVal2!==void 0&&l.show===void 0?l.defaultVal2:null)))}function ee(c,l){if(l.showing)switch(l.type){case"selectInput":c&&(c.beforeKey&&delete o.value[c.beforeKey],o.value[c.key]=c.val);break;case"inputMap":if(!l.key||!l.key2)return;c?(o.value[l.key]=c.lng,o.value[l.key2]=c.lat,l.key3&&(o.value[l.key3]=c.name)):(o.value[l.key]=null,o.value[l.key2]=null,l.key3&&(o.value[l.key3]=null));break;case"input":case"inputNumber":case"textarea":if(!l.key)return;if(c||c===0){let Y=/^-?\d+(.\d+)?$/;l.numberVal&&Y.test(c)?o.value[l.key]=Number(c):o.value[l.key]=c}else o.value[l.key]=null;break;case"select":case"radioGroup":case"checkboxGroup":if(!l.key)return;if(l.booleanVal&&!l.multiple?o.value[l.key]=c===void 0||c===""||c===null?null:!!c:l.multiple||l.type==="checkboxGroup"?o.value[l.key]=Object.assign([],c):o.value[l.key]=c,l.collectLabel){const Y=ie(l,c);if(Array.isArray(l.collectLabel)){for(let q of l.collectLabel)if(q.key&&q.valKey){const H=j(q.key);let $=null;Array.isArray(Y)?($=Y.map(re=>re[q.valKey]),o.value[q.key]=$,H&&(r.value[H]=$)):(Y&&le(Y[q.valKey])&&($=Y[q.valKey]),o.value[q.key]=$,H&&(r.value[H]=$));let G=Ve(f.value,re=>re.key===q.key);G&&G.tempKey&&(r.value[G.tempKey]=o.value[q.key])}}else if(typeof l.collectLabel=="object"&&l.collectLabel.key&&l.collectLabel.valKey){const q=j(l.collectLabel.key);let H=null;Array.isArray(Y)?(H=Y.map(G=>l.collectLabel&&!Array.isArray(l.collectLabel)&&G[l.collectLabel.valKey]),o.value[l.collectLabel.key]=H,q&&(r.value[q]=H)):(Y&&le(Y[l.collectLabel.valKey])&&(H=Y[l.collectLabel.valKey]),o.value[l.collectLabel.key]=H,q&&(r.value[q]=H));let $=Ve(f.value,G=>l.collectLabel&&!Array.isArray(l.collectLabel)&&G.key===l.collectLabel.key||!1);$&&$.tempKey&&(r.value[$.tempKey]=o.value[l.collectLabel.key])}}break;case"date":case"time":case"monthRange":if(!l.key)return;let A=l.dateType;const B={date:"YYYY-MM-DD",daterange:"YYYY-MM-DD",datetime:"YYYY-MM-DD HH:mm:ss",datetimerange:"YYYY-MM-DD HH:mm:ss",year:"YYYY",month:"MM"};if(A==="date"||A==="datetime"||A==="time"||A==="year"||A==="month")c?(A==="time"?o.value[l.key]=c:o.value[l.key]=_e(c).format(typeof l.format=="string"?l.format:B[A]),A==="date"&&l.addTime&&(o.value[l.key]+=" 00:00:00")):o.value[l.key]=null;else if(l.type==="monthRange"||A==="daterange"||A==="datetimerange"||A==="timerange"){if(!l.key2)return;c&&c[0]&&c[1]?(A==="timerange"?(o.value[l.key]=c[0],o.value[l.key2]=c[1]):l.type==="monthRange"?(o.value[l.key]=typeof l.format=="string"&&_e(c[0]).format(l.format)||c[0],o.value[l.key2]=typeof l.format=="string"&&l.format&&_e(c[1]).format(l.format)||c[1]):(o.value[l.key]=_e(c[0]).format(l.format||A&&B[A]),o.value[l.key2]=_e(c[1]).format(l.format||A&&B[A])),A==="daterange"&&l.addTime&&(o.value[l.key]+=" 00:00:00",o.value[l.key2]+=" 23:59:59")):(o.value[l.key]=null,o.value[l.key2]=null)}break}}function ie(c,l){if(c.options)if(c.multiple||c.type==="checkboxGroup"){if(l){let A=[];for(let B of c.options)l.indexOf(B.val)!==-1&&A.push(B);return A}return!1}else{if(l||l===0||l===!1){for(let A of c.options)if(A.val===l)return A}return!1}}function j(c){if(S.value){for(let l of f.value){const A=pe(l,c);if(A)return A}return!1}return pe(f.value,c)}function pe(c,l){for(let A of c)if(A.key===l)return A.tempKey;return!1}function Xe(c,l){let A={};for(let B in o.value)o.value.hasOwnProperty(B)&&c[B]!==void 0&&(A[B]=c[B],delete c[B]);wl(A,l);for(let B in c)c.hasOwnProperty(B)&&(p.indexOf(B)<0&&p.push(B),o.value[B]=c[B])}function Pa(c){let l=D.cloneDeep(c);if(S.value){let A=[];for(let B of n.formData)A.push(...kl(B,l));return A}return kl(n.formData,l)}function kl(c,l){return c.filter(A=>{for(let B of Object.keys(l))if(A.key===B&&N.value.indexOf(B)>-1&&!(l[B]===null||(Array.isArray(l[B])||F(l[B])==="Object")&&D.isEmpty(l[B])))return delete l[B],!0;return!1}).map(A=>A.key)}function wl(c,l=!1){let A=D.cloneDeep(c);$a(c,l);for(let B in o.value)if(o.value.hasOwnProperty(B)&&c[B]!==void 0&&c[B]!=="--"){if(Array.isArray(c[B]))c[B]=c[B].filter(Y=>Y!=="--");else if(F(c[B])==="Object")for(let Y in c[B])c[B].hasOwnProperty(Y)&&c[B][Y]==="--"&&(c[B][Y]=null);o.value[B]=c[B]}else l||(o.value[B]=Array.isArray(o.value[B])?[]:null);e.nextTick(function(){Ga(Pa(A))})}function $a(c,l=!1){if(S.value)for(let A of f.value)Vl(A,c,l);else Vl(f.value,c,l)}function Vl(c,l,A=!1){for(let B of c)if(B.key&&(A&&(l[B.key]!==void 0||B.key2&&l[B.key2]!==void 0)||!A)&&B.tempKey)switch(B.type){case"inputMap":if(!B.key2)continue;F(l[B.key])==="Number"&&F(l[B.key2]==="Number")?B.key3?r.value[B.tempKey]={lng:l[B.key],lat:l[B.key2],name:l[B.key3]}:r.value[B.tempKey]={lng:l[B.key],lat:l[B.key2]}:B.key3?r.value[B.tempKey]={lng:null,lat:null,name:null}:r.value[B.tempKey]={lng:null,lat:null};break;case"input":case"inputNumber":case"textarea":l[B.key]&&l[B.key]!=="--"||l[B.key]===0?r.value[B.tempKey]=l[B.key]:r.value[B.tempKey]=null;break;case"select":case"radioGroup":case"checkboxGroup":l[B.key]&&l[B.key]!=="--"||l[B.key]===0||l[B.key]===!1?B.multiple||B.type==="checkboxGroup"?r.value[B.tempKey]=[...l[B.key]]:B.booleanVal?r.value[B.tempKey]=l[B.key]?1:0:r.value[B.tempKey]=l[B.key]:B.multiple||B.type==="checkboxGroup"?r.value[B.tempKey]=[]:r.value[B.tempKey]=null;break;case"date":case"time":if(B.dateType==="date"||B.dateType==="datetime"||B.dateType==="year"||B.dateType==="month"||B.dateType==="time")r.value[B.tempKey]=l[B.key]&&l[B.key]!=="--"?l[B.key]:null;else if(B.dateType==="daterange"||B.dateType==="datetimerange"||B.dateType==="timerange"){if(!B.key2)continue;r.value[B.tempKey]=l[B.key]&&l[B.key]!=="--"&&l[B.key2]&&l[B.key2]!=="--"&&[l[B.key],l[B.key2]]||[]}break}}function Ka(c){if(Array.isArray(c))for(let l of c)Bl(l);else F(c)==="Object"&&Bl(c)}function Bl(c){const{index:l,indexB:A,key:B,val:Y}=c;if(typeof l=="number")if(Array.isArray(f.value[l])){if(typeof A=="number")if(B&&c.hasOwnProperty("val"))f.value[l][A][B]=Y;else for(let q of Object.keys(c))q!=="index"&&B!=="indexB"&&(f.value[l][A][q]=c[q])}else if(B&&c.hasOwnProperty("val"))f.value[l][B]=Y;else for(let q of Object.keys(c))q!=="index"&&(f.value[l][q]=c[q])}function Cl({label:c,root:l}){l.key2&&(o.value[l.key2]=c),Se({e:c,root:l})}function Sl(c){c.beforeKey&&D.remove(u,l=>l===c.beforeKey),c.key&&(u.indexOf(c.key)===-1&&u.push(c.key),Se({e:null,root:c}))}function _l({name:c,root:l}){l.key2&&(o.value[l.key2]=c),Se({e:c,root:l})}function Tl({e:c,root:l}){Se({e:c,root:l}),e.nextTick(function(){var A,B;(B=(A=d.value)==null?void 0:A.validateField)==null||B.call(A,l.key)})}function Se({e:c,root:l}){se(()=>{let A={event:c};if(l.key&&(A[l.key]=o.value[l.key]),l.key2&&(A[l.key2]=o.value[l.key2]),Array.isArray(l.collectLabel))for(let B of l.collectLabel)A[B.key]=o.value[B.key];else l.collectLabel&&l.collectLabel.key&&(A[l.collectLabel.key]=o.value[l.collectLabel.key]);t("on-item-change",A)},500)}function Nl(){let c={};for(let l of _.value)c[l]=o.value[l];return n.trim&&(c=xe(c)),c}function Ua(){var c,l;(l=(c=d.value)==null?void 0:c.validate)==null||l.call(c)}function za(c){se(()=>{var l,A;(A=(l=d.value)==null?void 0:l.validateField)==null||A.call(l,c,()=>{})},10)}function Ga(c){se(()=>{var l,A;if(Array.isArray(c))for(let B of c)(A=(l=d.value)==null?void 0:l.validateField)==null||A.call(l,B,()=>{})},10)}function Ha(c){c!==void 0&&(V.value=!!c)}function Tt(){var c,l;n.disabled||(l=(c=d.value)==null?void 0:c.validate)==null||l.call(c,A=>{b||(b=!0,A&&(V.value=!0,t("on-submit",Nl())),se(()=>{b=!1},2e3))})}return e.onMounted(()=>{P(),J()}),i({resetForm:y,refreshFormDom:K,reRenderForm:M,setItemToValGroup:Xe,updateValGroup:wl,updateFormDataT:Ka,validate:Ua,reValidate:za,changeLoading:Ha,getValGroup:Nl,submit:Tt}),(c,l)=>{const A=e.resolveComponent("FormItem"),B=e.resolveComponent("Button"),Y=e.resolveComponent("Form");return e.openBlock(),e.createBlock(Y,{ref_key:"formGroupXRef",ref:d,model:e.unref(o),rules:e.unref(C),"label-width":n.labelWidth,inline:n.inline,"show-message":n.showMessage,class:"formXN",key:e.unref(k)},{default:e.withCtx(()=>[e.createVNode(A,{style:{display:"none"}},{default:e.withCtx(()=>[zn]),_:1}),e.unref(S)?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(e.unref(f),(q,H)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([c.teamClass,"formTeamBox"+H]),key:"formTeamBox"+H},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(q,($,G)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:"formItem"+G},[U($)?(e.openBlock(),e.createBlock(ol,{key:0,item:$,style:e.normalizeStyle(e.unref(x)),"item-style":e.unref(w),"val-group":e.unref(o),"temp-keys":e.unref(r),inline:n.inline,disabled:n.disabled,"label-width":n.labelWidth,"item-width":n.itemWidth,"mgr-url":e.unref(s),"upload-url":e.unref(g),onItemChange:Se,onReValidate:Tl,onClearTempKeyItem:Z,onSelectInputChange:Sl,onAlNameChange:_l,onAsyncLabelChange:Cl},e.createSlots({_:2},[e.renderList(I(q),re=>({name:re.slotName,fn:e.withCtx(me=>[e.renderSlot(c.$slots,re.slotName,{valGroup:me.valGroup})])}))]),1032,["item","style","item-style","val-group","temp-keys","inline","disabled","label-width","item-width","mgr-url","upload-url"])):e.createCommentVNode("",!0)],64))),128))],2))),128)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(f),(q,H)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:"formItem"+H},[!e.unref(S)&&U(q)?(e.openBlock(),e.createBlock(ol,{key:0,item:q,style:e.normalizeStyle(e.unref(x)),"item-style":e.unref(w),"val-group":e.unref(o),"temp-keys":e.unref(r),inline:n.inline,disabled:n.disabled,"label-width":n.labelWidth,"item-width":n.itemWidth,"mgr-url":e.unref(s),"upload-url":e.unref(g),onItemChange:Se,onReValidate:Tl,onClearTempKeyItem:Z,onSelectInputChange:Sl,onAlNameChange:_l,onAsyncLabelChange:Cl},e.createSlots({_:2},[e.renderList(I(c.formData),$=>({name:$.slotName,fn:e.withCtx(G=>[e.renderSlot(c.$slots,$.slotName,{valGroup:G.valGroup})])}))]),1032,["item","style","item-style","val-group","temp-keys","inline","disabled","label-width","item-width","mgr-url","upload-url"])):e.createCommentVNode("",!0)],64))),128)),n.showLongOkBt?(e.openBlock(),e.createBlock(A,{key:1},{default:e.withCtx(()=>[e.createVNode(B,{onClick:Tt,style:e.normalizeStyle(e.unref(w)),type:"primary",loading:n.btnLoading&&e.unref(V),disabled:n.disabled},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.longOkBtTxt||e.unref(T)("r.confirm")),1)]),_:1},8,["style","loading","disabled"])]),_:1})):e.createCommentVNode("",!0),e.createElementVNode("div",Gn,[n.showInlineOkBt?(e.openBlock(),e.createBlock(B,{key:0,type:"primary",class:e.normalizeClass({inlineFormBtXN:n.inline,okBtnXN:!0}),onClick:Tt,loading:n.btnLoading&&e.unref(V),disabled:n.disabled},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.inlineOkBtTxt||e.unref(T)("r.confirm")),1)]),_:1},8,["class","loading","disabled"])):e.createCommentVNode("",!0),n.showInlineClearBt?(e.openBlock(),e.createBlock(B,{key:1,onClick:y,class:e.normalizeClass({inlineFormBtXN:n.inline}),type:"dashed"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.inlineClearBtTxt||e.unref(T)("r.clear")),1)]),_:1},8,["class"])):e.createCommentVNode("",!0)])]),_:3},8,["model","rules","label-width","inline","show-message"])}}}),il=e.defineComponent({__name:"FormGroup",props:{formData:{default:()=>[]},with:{default:"100%"},labelWidth:{default:()=>Pe().formGroupLabelWidth},contentWidth:{default:"70%"},itemWidth:{default:200},showOkBt:{type:Boolean,default:!0},showCancelBt:{type:Boolean,default:!0},okBtTxt:{},cancelBtTxt:{},btnLoading:{type:Boolean,default:!1}},emits:["on-cancel"],setup(a,{expose:i,emit:t}){const n=a,d=e.ref({width:n.with}),o=e.ref(!1),f=e.ref(),r=e.computed(()=>{if(Array.isArray(n.formData))if(Array.isArray(n.formData[0])){let N=[];for(let I of n.formData)N=N.concat(I.filter(m=>m.type==="custom"));return N}else return n.formData.filter(N=>N.type==="custom");return[]});function h(){return new Promise(N=>{var I,m;(m=(I=f.value).resetForm)==null||m.call(I).then(O=>{N(O)})})}function s(){return new Promise(N=>{var I,m;(m=(I=f.value).refreshFormDom)==null||m.call(I).then(O=>{N(O)})})}function u(){return new Promise(N=>{var I,m;(m=(I=f.value).reRenderForm)==null||m.call(I).then(O=>{N(O)})})}function p(N,I){var m,O;(O=(m=f.value).setItemToValGroup)==null||O.call(m,N,I)}function V(N,I){var m,O;(O=(m=f.value).updateValGroup)==null||O.call(m,N,I)}function k(N){var I,m;(m=(I=f.value).updateFormDataT)==null||m.call(I,N)}function g(){var N,I;(I=(N=f.value).validate)==null||I.call(N)}function b(N){var I,m;(m=(I=f.value).reValidate)==null||m.call(I,N)}function S(N){var I,m;N!==void 0&&(o.value=!!N,(m=(I=f.value).changeLoading)==null||m.call(I,o.value))}function x(){var N,I;return(I=(N=f.value).getValGroup)==null?void 0:I.call(N)}function w(){o.value=!0}function C(){var N,I;(I=(N=f.value).submit)==null||I.call(N)}function _(){t("on-cancel"),se(()=>{var N,I;o.value=!1,(I=(N=f.value).changeLoading)==null||I.call(N,!1)},1e3)}return i({resetForm:h,refreshFormDom:s,reRenderForm:u,setItemToValGroup:p,updateValGroup:V,updateFormDataT:k,validate:g,reValidate:b,changeLoading:S,getValGroup:x,submit:C,close:_}),(N,I)=>{const m=e.resolveComponent("Button");return e.openBlock(),e.createElementBlock("div",{style:e.normalizeStyle(e.unref(d)),class:"formGroupBoxVM"},[e.createVNode(Oe,e.mergeProps({ref_key:"formRRef",ref:f},N.$attrs,{"form-data":n.formData,"label-width":n.labelWidth,"content-width":n.contentWidth,"item-width":n.itemWidth,btnLoading:n.btnLoading,onOnSubmit:w}),e.createSlots({_:2},[e.renderList(e.unref(r),O=>({name:O.slotName,fn:e.withCtx(({valGroup:y})=>[e.renderSlot(N.$slots,O.slotName,{valGroup:y})])}))]),1040,["form-data","label-width","content-width","item-width","btnLoading"]),e.withDirectives(e.createElementVNode("div",{class:"formFooterVM",style:e.normalizeStyle({marginLeft:n.labelWidth+"px"})},[e.createElementVNode("div",{style:e.normalizeStyle({width:n.contentWidth}),class:"btnBoxKAL"},[n.showOkBt?(e.openBlock(),e.createBlock(m,{key:0,onClick:C,class:"form-save-btn",loading:n.btnLoading&&e.unref(o)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.okBtTxt||e.unref(T)("r.confirm")),1)]),_:1},8,["loading"])):e.createCommentVNode("",!0),n.showCancelBt?(e.openBlock(),e.createBlock(m,{key:1,onClick:_,class:"form-cancel-btn"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.cancelBtTxt||e.unref(T)("r.cancel")),1)]),_:1})):e.createCommentVNode("",!0)],4)],4),[[e.vShow,n.showOkBt||n.showCancelBt]])],4)}}}),Ye=e.defineComponent({__name:"SearchForm",props:{formData:{default:()=>[]},labelWidth:{default:()=>Pe().searchFormLabelWidth},itemWidth:{default:202},showInlineOkBt:{type:Boolean,default:!0},showInlineClearBt:{type:Boolean,default:!0}},emits:["on-search"],setup(a,{expose:i,emit:t}){const n=a,d=e.ref(),o=e.computed(()=>{if(Array.isArray(n.formData[0])){let w=[];for(let C of n.formData)w=w.concat(C.filter(_=>_.type==="custom"));return w}return n.formData.filter(w=>w.type==="custom")});function f(){return new Promise(w=>{var C,_;(_=(C=d.value).resetForm)==null||_.call(C).then(()=>{w()})})}function r(){return new Promise(w=>{var C,_;(_=(C=d.value).refreshFormDom)==null||_.call(C).then(()=>{w()})})}function h(){return new Promise(w=>{var C,_;(_=(C=d.value).reRenderForm)==null||_.call(C).then(()=>{w()})})}function s(w,C){var _,N;(N=(_=d.value).setItemToValGroup)==null||N.call(_,w,C)}function u(w,C){var _,N;(N=(_=d.value).updateValGroup)==null||N.call(_,w,C)}function p(w){var C,_;(_=(C=d.value).updateFormDataT)==null||_.call(C,w)}function V(){var w,C;(C=(w=d.value).validate)==null||C.call(w)}function k(w){var C,_;(_=(C=d.value).reValidate)==null||_.call(C,w)}function g(w){var C,_;(_=(C=d.value).changeLoading)==null||_.call(C,w===void 0?!1:w)}function b(){var w,C;return(C=(w=d.value).getValGroup)==null?void 0:C.call(w)}function S(w){t("on-search",w)}function x(){var w,C;(C=(w=d.value).submit)==null||C.call(w)}return e.onMounted(()=>{const w=d.value.$el;w!=null&&w.parentNode&&w.parentNode.addEventListener("keyup",C=>{C.keyCode===13&&x()})}),i({resetForm:f,refreshFormDom:r,reRenderForm:h,setItemToValGroup:s,updateValGroup:u,updateFormDataT:p,validate:V,reValidate:k,changeLoading:g,getValGroup:b,submit:x}),(w,C)=>(e.openBlock(),e.createBlock(Oe,e.mergeProps({ref_key:"formRRef",ref:d},w.$attrs,{"form-data":n.formData,"label-width":n.labelWidth,"item-width":n.itemWidth,inline:"","show-long-ok-bt":!1,"show-inline-ok-bt":n.showInlineOkBt,"inline-ok-bt-txt":e.unref(T)("r.check"),"show-inline-clear-bt":n.showInlineClearBt,"show-message":!1,onOnSubmit:S}),e.createSlots({_:2},[e.renderList(e.unref(o),_=>({name:_.slotName,fn:e.withCtx(({valGroup:N})=>[e.renderSlot(w.$slots,_.slotName,{valGroup:N})])}))]),1040,["form-data","label-width","item-width","show-inline-ok-bt","inline-ok-bt-txt","show-inline-clear-bt"]))}}),rl=e.defineComponent({__name:"FormModal",props:{title:{},formData:{default:()=>[]},width:{default:520},labelWidth:{default:()=>Pe().formModalLabelWidth},okBtTxt:{},cancelBtTxt:{},hideCancelBt:{type:Boolean,default:!1},hideFooter:{type:Boolean,default:!1},btnLoading:{type:Boolean,default:!1}},emits:["on-close","on-open"],setup(a,{expose:i,emit:t}){const n=a,d=e.ref(),o=e.ref(!1),f=e.ref(!1),r=e.computed(()=>{if(Array.isArray(n.formData[0])){let m=[];for(let O of n.formData)m=m.concat(O.filter(y=>y.type==="custom"));return m}return n.formData.filter(m=>m.type==="custom")});function h(){return new Promise(m=>{var O,y;(y=(O=d.value).resetForm)==null||y.call(O).then(()=>{m()})})}function s(){return new Promise(m=>{var O,y;(y=(O=d.value).refreshFormDom)==null||y.call(O).then(()=>{m()})})}function u(){return new Promise(m=>{var O,y;(y=(O=d.value).reRenderForm)==null||y.call(O).then(()=>{m()})})}function p(m,O){var y,M;(M=(y=d.value).setItemToValGroup)==null||M.call(y,m,O)}function V(m,O){var y,M;(M=(y=d.value).updateValGroup)==null||M.call(y,m,O)}function k(m){var O,y;(y=(O=d.value).updateFormDataT)==null||y.call(O,m)}function g(){var m,O;(O=(m=d.value).validate)==null||O.call(m)}function b(m){var O,y;(y=(O=d.value).reValidate)==null||y.call(O,m)}function S(m){var O,y;m!==void 0&&(f.value=!!m,(y=(O=d.value).changeLoading)==null||y.call(O,f.value))}function x(){var m,O;return(O=(m=d.value).getValGroup)==null?void 0:O.call(m)}function w(){f.value=!0}function C(){var m,O;n.hideCancelBt?N():(O=(m=d.value).submit)==null||O.call(m)}function _(){o.value=!0}function N(){o.value=!1,se(()=>{var m,O;f.value=!1,(O=(m=d.value).changeLoading)==null||O.call(m,!1)},1e3)}function I(m){t(m?"on-open":"on-close")}return i({resetForm:h,refreshFormDom:s,reRenderForm:u,setItemToValGroup:p,updateValGroup:V,updateFormDataT:k,validate:g,reValidate:b,changeLoading:S,getValGroup:x,submit:C,open:_,close:N}),(m,O)=>{const y=e.resolveComponent("Button"),M=e.resolveComponent("Modal");return e.openBlock(),e.createBlock(M,{class:e.normalizeClass(["formModal",{hideFooter:n.hideFooter}]),title:n.title||e.unref(T)("r.title"),modelValue:e.unref(o),"onUpdate:modelValue":O[0]||(O[0]=K=>e.isRef(o)?o.value=K:null),"mask-closable":!1,"footer-hide":n.hideFooter,width:n.width,onOnVisibleChange:I},{footer:e.withCtx(()=>[e.createVNode(y,{onClick:C,class:"modal-save-btn",loading:n.btnLoading&&e.unref(f)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.okBtTxt||e.unref(T)("r.confirm")),1)]),_:1},8,["loading"]),n.hideCancelBt?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(y,{key:0,onClick:N,class:"modal-cancel-btn"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.cancelBtTxt||e.unref(T)("r.cancel")),1)]),_:1}))]),default:e.withCtx(()=>[e.createVNode(Oe,e.mergeProps({ref_key:"formRRef",ref:d},m.$attrs,{"form-data":n.formData,"label-width":n.labelWidth,btnLoading:n.btnLoading,onOnSubmit:w}),e.createSlots({_:2},[e.renderList(e.unref(r),K=>({name:K.slotName,fn:e.withCtx(({valGroup:z})=>[e.renderSlot(m.$slots,K.slotName,{valGroup:z})])}))]),1040,["form-data","label-width","btnLoading"])]),_:3},8,["title","modelValue","footer-hide","class","width"])}}}),sl=e.defineComponent({__name:"CheckboxTree",props:{modelValue:{default:()=>[]},data:{default:()=>[]},expandAll:{type:Boolean,default:!1},label:{default:"name"},collectVal:{default:"id"},leaf:{type:Boolean,default:!0},inlineLeaf:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","on-change"],setup(a,{emit:i}){const t=a,n=e.ref(!0),d=e.ref([]),o="CKT"+Math.floor(Math.random()*1e7+1e7);let f=[];const r=e.computed(()=>Array.isArray(t.collectVal)?t.collectVal:typeof t.collectVal=="string"?[t.collectVal]:[]),h=e.computed(()=>Array.isArray(t.modelValue)?t.modelValue:[]);e.watch(()=>t.data,g=>{n.value=!1;let b=[];s(g,b),d.value=b,e.nextTick(function(){n.value=!0,t.inlineLeaf&&e.nextTick(V)})},{immediate:!0,deep:!0}),e.watch(()=>h.value,g=>{let b,S="s";if(Array.isArray(t.collectVal)?(b=t.collectVal[0]||"",S="a"):b=t.collectVal,!b||JSON.stringify(g)===JSON.stringify(f)){f=[];return}Be({group:d.value,condition:x=>x.checked===!0,key:"checked",val:!1}),Be(S==="a"?{group:d.value,condition:x=>D.findIndex(g,[b,x[b]])!==-1,key:"checked",val:!0}:{group:d.value,condition:x=>g.indexOf(x[b])!==-1,key:"checked",val:!0})}),e.watch(()=>t.disabled,g=>{Be({group:d.value,condition:b=>b.disableCheckbox!==g,key:"disableCheckbox",val:g}),t.inlineLeaf&&e.nextTick(V)},{immediate:!0});function s(g,b=[]){for(let S of g){let x=!1;r.value.length>1?x=D.find(h.value,C=>C[r.value[0]]===S[r.value[0]])!==void 0:x=r.value[0]?h.value.indexOf(S[r.value[0]])!==-1:!1;let w={name:S[t.label],expand:!!(t.expandAll||S.expand),checked:x,disableCheckbox:t.disabled};for(let C of r.value)w[C]=S[C];b.push(w),S.children&&S.children.length>0&&(w.children=[],u(S.children,w.children))}}function u(g,b=[]){for(let S of g){let x=!1;r.value.length>1?x=D.find(h.value,C=>C[r.value[0]]===S[r.value[0]])!==void 0:x=r.value[0]?h.value.indexOf(S[r.value[0]])!==-1:!1;let w={name:S[t.label],expand:!!(t.expandAll||S.expand),checked:x,disableCheckbox:t.disabled};for(let C of r.value)w[C]=S[C];b.push(w),S.children&&S.children.length>0&&(w.children=[],s(S.children,w.children))}}function p(g,{data:b}){let S="",x=!0;if(b.children&&b.children.length>0){for(let w of b.children)if(w.children!==void 0){x=!1;break}x&&t.inlineLeaf&&(S="inlineChildXA")}return g("div",{style:{display:"inline-block",width:"100%"},class:S},[g("span",{style:{fontWeight:b.children?"bold":"normal"}},b.name)])}function V(g){if(g){g.expand&&e.nextTick(V);return}let b=document.querySelectorAll("#"+o+" .inlineChildXA");if(b.length>0)for(let S of b){let x=S.parentElement,w=x==null?void 0:x.nextElementSibling;if(!w)return;if(w.tagName!=="BR"){let C=x==null?void 0:x.parentElement,_=document.createElement("br");C==null||C.insertBefore(_,w),w=_.nextElementSibling,(w==null?void 0:w.className.indexOf("inlineTreeNodeF"))===-1&&w.setAttribute("class",w.className+" inlineTreeNodeF")}for(;w!=null&&w.nextElementSibling;)w=w.nextElementSibling,w.className.indexOf("inlineTreeNodeF")===-1&&w.setAttribute("class",w.className+" inlineTreeNodeF")}}function k(g){let b=[];if(t.leaf){for(let S of g)if(!S.children)if(Array.isArray(t.collectVal)){let x={};for(let w of t.collectVal)x[w]=S[w];b.push(x)}else b.push(S[t.collectVal])}else for(let S of g)if(Array.isArray(t.collectVal)){let x={};for(let w of t.collectVal)x[w]=S[w];b.push(x)}else b.push(S[t.collectVal]);f=b,i("update:modelValue",b),i("on-change",D.cloneDeep(b))}return(g,b)=>{const S=e.resolveComponent("Tree");return e.unref(n)?(e.openBlock(),e.createBlock(S,{key:0,id:o,class:"checkboxTreeGA",data:e.unref(d),render:p,onOnCheckChange:k,onOnToggleExpand:V,"show-checkbox":""},null,8,["data"])):e.createCommentVNode("",!0)}}}),Hn={class:"transferBoxRL"},Wn={class:"leftBoxLLL"},jn={class:"fullHeight flexColumnBox"},qn={class:"notGrow"},Jn={class:"titleLLL"},Yn={class:"growFlexItem"},Xn={class:"middleBoxLLL"},Qn={class:"rightBoxLLL"},Zn={class:"fullHeight flexColumnBox"},vn={class:"notGrow"},ea={class:"titleLLL"},ta={class:"growFlexItem"},cl=e.defineComponent({__name:"TransferBox",props:{titleLeft:{},titleRight:{},formDataLeft:{default:()=>[]},formDataRight:{default:()=>[]},formRulesLeft:{default:()=>({})},formRulesRight:{default:()=>({})},constSearchDataLeft:{default:()=>({})},constSearchDataRight:{default:()=>({})},leftTableColumns:{default:()=>[]},rightTableColumns:{default:()=>[]},leftTableUrl:{},rightTableUrl:{},addUrl:{},deleteUrl:{},addAllUrl:{},deleteAllUrl:{},addParamsHandle:{type:Function,default:a=>a.map(i=>i.id)},deleteParamsHandle:{type:Function,default:a=>a.map(i=>i.id)},addAllParamsHandle:{type:Function,default:a=>a},deleteAllParamsHandle:{type:Function,default:a=>a},addMethod:{default:"post"},addAllMethod:{default:"post"},deleteMethod:{default:"delete"},deleteAllMethod:{default:"delete"},searchFormLabelWith:{}},emits:["transferred","on-data-change-l","on-data-change-r"],setup(a,{expose:i,emit:t}){const n=a;let d=e.ref({}),o=e.ref({}),f=e.ref([]),r=e.ref([]),h=e.ref(0),s=e.ref(0);const u=e.computed(()=>({...n.constSearchDataLeft,...d.value})),p=e.computed(()=>({...n.constSearchDataRight,...o.value})),V=e.computed(()=>h.value<1),k=e.computed(()=>f.value.length<1),g=e.computed(()=>r.value.length<1),b=e.computed(()=>s.value<1),S=e.ref(),x=e.ref(),w=e.ref(),C=e.ref();function _(){S.value.resetForm(),x.value.resetForm(),D.isEmpty(d.value)||(d.value={}),D.isEmpty(o.value)||(o.value={}),w.value.clearSelect(),C.value.clearSelect()}function N(){w.value.search(),C.value.search()}function I(U){f.value=U}function m(U){r.value=U}function O(U){var v,X,E,J,Q;h.value=((X=(v=U==null?void 0:U.data)==null?void 0:v.page)==null?void 0:X.total)||((J=(E=U==null?void 0:U.data)==null?void 0:E.data)==null?void 0:J.total)||((Q=U==null?void 0:U.data)==null?void 0:Q.total)||(U==null?void 0:U.total)||0,t("on-data-change-l",U)}function y(U){var v,X,E,J,Q;s.value=((X=(v=U==null?void 0:U.data)==null?void 0:v.page)==null?void 0:X.total)||((J=(E=U==null?void 0:U.data)==null?void 0:E.data)==null?void 0:J.total)||((Q=U==null?void 0:U.data)==null?void 0:Q.total)||(U==null?void 0:U.total)||0,t("on-data-change-r",U)}function M(U){d.value=U}function K(U){o.value=U}function z(){n.addUrl&&ne("add")}function W(){n.deleteUrl&&ne("delete")}function Z(){n.addAllUrl&&n.addUrl&&ne("addAll")}function ae(){n.deleteAllUrl&&ne("deleteAll")}function ne(U){let v,X,E={},J="";switch(U){case"add":v=n.addMethod,X=n.addUrl,E=n.addParamsHandle(r.value),J=T("r.add");break;case"delete":v=n.deleteMethod,X=n.deleteUrl,E=n.deleteParamsHandle(f.value),J=T("r.remove");break;case"addAll":v=n.addAllMethod,X=n.addAllUrl,E=n.addAllParamsHandle(p.value),J=T("r.addAll");break;case"deleteAll":v=n.deleteAllMethod,X=n.deleteAllUrl,E=n.deleteAllParamsHandle(u.value),J=T("r.removeAll");break}X&&v&&ue[v](X,E,null,[],{spin:!0},!1).then(Q=>{(Q==null?void 0:Q.code)===0?(de(J+T("r.success"),(Q==null?void 0:Q.message)||"","success"),w.value&&w.value.getTableData(),C.value&&C.value.getTableData(),t("transferred")):de(J+T("r.failed"),(Q==null?void 0:Q.message)||"","error")}).catch(()=>{de(J+T("r.error"),"","error")})}return i({reset:_,search:N}),(U,v)=>{const X=e.resolveComponent("Icon"),E=e.resolveComponent("Button");return e.openBlock(),e.createElementBlock("div",Hn,[e.createElementVNode("div",Wn,[e.createElementVNode("div",jn,[e.createElementVNode("div",qn,[e.createElementVNode("div",Jn,e.toDisplayString(n.titleLeft||e.unref(T)("r.added")),1),e.createVNode(He,null,{default:e.withCtx(()=>[e.createVNode(Ye,{ref_key:"leftFormRef",ref:S,"form-data":n.formDataLeft,"form-rules":n.formRulesLeft,"label-width":n.searchFormLabelWith,onOnSearch:M},null,8,["form-data","form-rules","label-width"])]),_:1})]),e.createElementVNode("div",Yn,[e.createVNode(qe,{ref_key:"lTabRef",ref:w,columns:n.leftTableColumns,url:n.leftTableUrl,"search-data":e.unref(u),onOnSelectionChange:I,onOnDataChange:O,"init-data":!!(e.unref(D.isEmpty)(n.constSearchDataLeft)&&n.leftTableUrl),"get-data-loading":"",selection:""},null,8,["columns","url","search-data","init-data"])])])]),e.createElementVNode("div",Xn,[e.createVNode(E,{class:"middleBtLLL",size:"large",type:"default",onClick:ae,disabled:e.unref(V)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(T)("r.removeAll"))+" ",1),e.createVNode(X,{type:"ios-arrow-forward"})]),_:1},8,["disabled"]),e.createVNode(E,{class:"middleBtLLL",size:"large",type:"default",onClick:W,disabled:e.unref(k)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(T)("r.remove"))+" ",1),e.createVNode(X,{type:"ios-arrow-forward"})]),_:1},8,["disabled"]),e.createVNode(E,{class:"middleBtLLL",size:"large",type:"primary",onClick:z,disabled:e.unref(g)},{default:e.withCtx(()=>[e.createVNode(X,{type:"ios-arrow-back"}),e.createTextVNode(" "+e.toDisplayString(e.unref(T)("r.add")),1)]),_:1},8,["disabled"]),e.createVNode(E,{class:"middleBtLLL",size:"large",type:"primary",onClick:Z,disabled:e.unref(b)},{default:e.withCtx(()=>[e.createVNode(X,{type:"ios-arrow-back"}),e.createTextVNode(" "+e.toDisplayString(e.unref(T)("r.addAll")),1)]),_:1},8,["disabled"])]),e.createElementVNode("div",Qn,[e.createElementVNode("div",Zn,[e.createElementVNode("div",vn,[e.createElementVNode("div",ea,e.toDisplayString(n.titleRight||e.unref(T)("r.notAdded")),1),e.createVNode(He,null,{default:e.withCtx(()=>[e.createVNode(Ye,{ref_key:"rightFormRef",ref:x,"form-data":n.formDataRight,"form-rules":n.formRulesRight,"label-width":n.searchFormLabelWith,onOnSearch:K},null,8,["form-data","form-rules","label-width"])]),_:1})]),e.createElementVNode("div",ta,[e.createVNode(qe,{ref_key:"rTabRef",ref:C,columns:n.rightTableColumns,url:n.rightTableUrl,"search-data":e.unref(p),onOnSelectionChange:m,onOnDataChange:y,"init-data":!!(e.unref(D.isEmpty)(n.constSearchDataRight)&&n.rightTableUrl),"get-data-loading":"",selection:""},null,8,["columns","url","search-data","init-data"])])])])])}}}),la={class:"boxLPA"},na={class:"headerJ"},aa={class:"firstT borderBoxAS"},oa={class:"secondT borderBoxAS"},ia={class:"firstCol borderBoxAS"},ra={class:"secondCol borderBoxAS"},dl=e.defineComponent({__name:"CheckboxGroupTwoClass",props:{modelValue:{default:()=>[]},data:{default:()=>[]},firstTitle:{},secondTitle:{},label:{default:"name"},collectVal:{default:"id"},leaf:{type:Boolean,default:!0},disabled:{type:Boolean}},emits:["update:modelValue","on-change"],setup(a,{emit:i}){const t=a,n=e.ref([]),d=e.computed(()=>{let h=D.cloneDeep(t.data),s=D.cloneDeep(n.value);for(let u of h){let p=0;if(u.children&&!D.isEmpty(u.children))for(let V of u.children){for(let k=0,g=s.length;k<g;k++)if(Array.isArray(t.collectVal)){let b=!0;for(let S of t.collectVal)if(s[k][S]!==V[S]){b=!1;break}if(b){V.checked=!0,p++,s.splice(k,1);break}}else if(s[k]===V[t.collectVal]){V.checked=!0,p++,s.splice(k,1);break}!V.checked&&(V.checked=!1)}p===0?(u.checked=!1,u.indeterminate=!1):u.children&&p===u.children.length?(u.checked=!0,u.indeterminate=!1):(u.checked=!1,u.indeterminate=!0)}return h});e.watch(()=>t.modelValue,(h,s)=>{D.isEqual(n.value,h)||D.isEqual(h,s)||(n.value=h)},{immediate:!0,deep:!0});function o(h,s){if(h.children)for(let u of h.children)u.checked=s;f()}function f(){r(d.value,!0)}function r(h,s){let u=[];for(let p of h){if(!s&&!t.leaf&&p.checked&&p.indeterminate===!1)if(Array.isArray(t.collectVal)){let V={};for(let k of t.collectVal)V[k]=p[k];u.push(V)}else F(t.collectVal)==="String"&&u.push(p[t.collectVal]);if(p.children){for(let V of p.children)if(V.checked)if(Array.isArray(t.collectVal)){let k={};for(let g of t.collectVal)k[g]=V[g];u.push(k)}else F(t.collectVal)==="String"&&u.push(V[t.collectVal])}}s?(n.value=u,t.leaf?(i("update:modelValue",u),i("on-change",D.cloneDeep(u))):e.nextTick(function(){r(d.value)})):(i("update:modelValue",u),i("on-change",D.cloneDeep(u)))}return(h,s)=>{const u=e.resolveComponent("Checkbox");return e.openBlock(),e.createElementBlock("div",la,[e.createElementVNode("div",na,[e.createElementVNode("div",aa,e.toDisplayString(h.firstTitle||e.unref(T)("r.level.1")),1),e.createElementVNode("div",oa,e.toDisplayString(h.secondTitle||e.unref(T)("r.level.2")),1)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(d),(p,V)=>(e.openBlock(),e.createElementBlock("div",{class:"bodyJ",key:"checkboxJ"+V},[e.createElementVNode("div",ia,[e.createVNode(u,{modelValue:p.checked,"onUpdate:modelValue":k=>p.checked=k,indeterminate:p.indeterminate,onOnChange:k=>o(p,k),disabled:h.disabled},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(p[h.label]),1)]),_:2},1032,["modelValue","onUpdate:modelValue","indeterminate","onOnChange","disabled"])]),e.createElementVNode("div",ra,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.children,(k,g)=>(e.openBlock(),e.createElementBlock("div",{class:"secItem",key:"secItem"+g},[e.createVNode(u,{modelValue:k.checked,"onUpdate:modelValue":b=>k.checked=b,onOnChange:f,disabled:h.disabled},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(k[h.label]),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]))),128))])]))),128))])}}}),sa={class:"boxLPB"},ca={class:"headerF"},da={class:"firstT borderBoxKa"},fa={class:"secondT borderBoxKa"},ua={class:"thirdT borderBoxKa"},pa={class:"firstCol borderBoxKa"},ma={class:"rightBoxAL"},ha={class:"secondCol borderBoxKa"},ya={class:"thirdCol borderBoxKa"},fl=e.defineComponent({__name:"CheckboxGroupThreeClass",props:{modelValue:{default:()=>[]},data:{default:()=>[]},firstTitle:{},secondTitle:{},thirdTitle:{},label:{default:"name"},collectVal:{default:"id"},leaf:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","on-change"],setup(a,{emit:i}){const t=a,n=e.ref([]),d=e.computed(()=>{let s=D.cloneDeep(t.data),u=D.cloneDeep(n.value);for(let p of s){let V=0,k=0;if(p.children&&!D.isEmpty(p.children))for(let g of p.children){let b=0;if(g.children&&!D.isEmpty(g.children))for(let S of g.children){for(let x=0,w=u.length;x<w;x++)if(Array.isArray(t.collectVal)){let C=!0;for(let _ of t.collectVal)if(u[x][_]!==S[_]){C=!1;break}if(C){S.checked=!0,b++,u.splice(x,1);break}}else if(u[x]===S[t.collectVal]){S.checked=!0,b++,u.splice(x,1);break}!S.checked&&(S.checked=!1)}b===0?(g.checked=!1,g.indeterminate=!1):g.children&&b===g.children.length?(g.checked=!0,g.indeterminate=!1,V++):(g.checked=!1,g.indeterminate=!0,k++)}V===0&&k===0?(p.checked=!1,p.indeterminate=!1):p.children&&V===p.children.length?(p.checked=!0,p.indeterminate=!1):(p.checked=!1,p.indeterminate=!0)}return s});e.watch(()=>t.modelValue,(s,u)=>{D.isEqual(n.value,s)||D.isEqual(s,u)||(n.value=s)},{immediate:!0,deep:!0});function o(s,u){if(s.children){for(let p of s.children)if(p.checked=u,p.children)for(let V of p.children)V.checked=u}r()}function f(s,u){if(s.children)for(let p of s.children)p.checked=u;r()}function r(){h(d.value,!0)}function h(s,u){let p=[];for(let V of s){if(!u&&!t.leaf&&V.checked&&V.indeterminate===!1)if(Array.isArray(t.collectVal)){let k={};for(let g of t.collectVal)k[g]=V[g];p.push(k)}else F(t.collectVal)==="String"&&p.push(V[t.collectVal]);if(V.children)for(let k of V.children){if(!u&&!t.leaf&&k.checked&&k.indeterminate===!1)if(Array.isArray(t.collectVal)){let g={};for(let b of t.collectVal)g[b]=k[b];p.push(g)}else F(t.collectVal)==="String"&&p.push(k[t.collectVal]);if(k.children){for(let g of k.children)if(g.checked)if(Array.isArray(t.collectVal)){let b={};for(let S of t.collectVal)b[S]=g[S];p.push(b)}else F(t.collectVal)==="String"&&p.push(g[t.collectVal])}}}u?(n.value=p,t.leaf?(i("update:modelValue",p),i("on-change",D.cloneDeep(p))):e.nextTick(function(){h(d.value)})):(i("update:modelValue",p),i("on-change",D.cloneDeep(p)))}return(s,u)=>{const p=e.resolveComponent("Checkbox");return e.openBlock(),e.createElementBlock("div",sa,[e.createElementVNode("div",ca,[e.createElementVNode("div",da,e.toDisplayString(s.firstTitle||e.unref(T)("r.level.1")),1),e.createElementVNode("div",fa,e.toDisplayString(s.secondTitle||e.unref(T)("r.level.2")),1),e.createElementVNode("div",ua,e.toDisplayString(s.thirdTitle||e.unref(T)("r.level.3")),1)]),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(d),(V,k)=>(e.openBlock(),e.createElementBlock("div",{class:"bodyF",key:"checkboxJ"+k},[e.createElementVNode("div",pa,[e.createVNode(p,{modelValue:V.checked,"onUpdate:modelValue":g=>V.checked=g,indeterminate:V.indeterminate,onOnChange:g=>o(V,g),disabled:s.disabled},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(V[s.label]),1)]),_:2},1032,["modelValue","onUpdate:modelValue","indeterminate","onOnChange","disabled"])]),e.createElementVNode("div",ma,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(V.children,(g,b)=>(e.openBlock(),e.createElementBlock("div",{class:"rightBoxInner",key:"secItem"+b},[e.createElementVNode("div",ha,[e.createVNode(p,{modelValue:g.checked,"onUpdate:modelValue":S=>g.checked=S,indeterminate:g.indeterminate,onOnChange:S=>f(g,S),disabled:s.disabled},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(g[s.label]),1)]),_:2},1032,["modelValue","onUpdate:modelValue","indeterminate","onOnChange","disabled"])]),e.createElementVNode("div",ya,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(g.children,(S,x)=>(e.openBlock(),e.createElementBlock("div",{class:"thirdItem",key:"thirdItem"+x},[e.createVNode(p,{modelValue:S.checked,"onUpdate:modelValue":w=>S.checked=w,onOnChange:r,disabled:s.disabled},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(S[s.label]),1)]),_:2},1032,["modelValue","onUpdate:modelValue","disabled"])]))),128))])]))),128))])]))),128))])}}}),ga={class:"flexColumnBox wellCardR"},ba={class:"panelHeader notGrow"},ka={class:"fl",style:{"font-weight":"bold"}},wa={class:"btsF"},Va={class:"growFlexItem relativeBox"},Ba={class:"fullFlowContent"},ul=e.defineComponent({__name:"WellCard",props:{title:{},width:{default:"100%"},height:{default:"100%"},inline:{type:Boolean,default:!1}},setup(a){const i=a,t=e.computed(()=>{let n={width:i.width,height:i.height};i.inline&&(n.display="inline-block");for(let d in n)n.hasOwnProperty(d)&&typeof n[d]=="number"&&n[d]>0&&(n[d]+="px");return n});return(n,d)=>(e.openBlock(),e.createElementBlock("div",{style:e.normalizeStyle(e.unref(t))},[e.createElementVNode("div",ga,[e.createElementVNode("div",ba,[e.createElementVNode("div",ka,e.toDisplayString(i.title||e.unref(T)("r.title")),1),e.createElementVNode("div",wa,[e.renderSlot(n.$slots,"bts")])]),e.createElementVNode("div",Va,[e.createElementVNode("div",Ba,[e.renderSlot(n.$slots,"default")])])])],4))}}),pl=e.defineComponent({__name:"SelectScrollMore",props:{modelValue:{},url:{},searchData:{default:()=>({size:10})},getOptions:{type:Boolean,default:!0},optionFilter:{},optionsLabelKey:{default:"name"},optionsValKey:{default:"id"},searchKey:{default:"name"},searchWordsRequired:{type:Boolean,default:!1},collectLabel:{type:Boolean,default:!1},placeholder:{},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","on-change","update-option-finish"],setup(a,{emit:i}){const t=a;let n=e.ref(1),d=1;const o=e.ref(""),f=e.shallowRef([]);let r={},h=!0,s=!1;const u="scm"+Math.random(),p=e.computed(()=>o.value?T("r.searchFor")+o.value:t.placeholder||T("r.pInput")),V=e.computed({get(){return t.modelValue??""},set(N){if(i("update:modelValue",N??""),t.collectLabel&&N!==void 0){let I={};for(let m of f.value)if(m[t.optionsValKey]===N){I=JSON.parse(JSON.stringify(m));break}i("on-change",I)}}}),k=e.computed(()=>t.searchKey?{...t.searchData,current:n.value,[t.searchKey]:o.value}:{...t.searchData,current:n.value});e.watch(()=>t.getOptions,N=>{N?h&&_():S()},{immediate:!0}),e.watch(()=>t.url,N=>{N&&(s=!0)});const g=e.ref();function b(){g.value.$el.querySelector('.ivu-select-input[type="text"]').addEventListener("keyup",w)}function S(){h||(V.value="",h=!0,o.value="",f.value=[],n.value=1,d=1,r={},s=!1)}function x(N){for(let I of f.value)if(I.label===N)return!0;return!1}const w=D.debounce(function(N){const I=N.target.value;x(I)||(le(I)?(s?S():(D.isEmpty(r)&&(r.current=n.value,r.pages=d,r.options=D.cloneDeep(f.value)),le(V.value)&&(V.value="")),o.value=String(I),f.value=[],n.value=1,h=!0,_()):s?(S(),_()):(V.value="",o.value="",r.current?(n.value=r.current,d=r.pages,f.value=D.cloneDeep(r.options),r={}):_()))},600);function C(){s&&S(),n.value<d?(++n.value,e.nextTick(function(){_()})):oe.Message.warning({background:!0,content:T("r.noMore")})}function _(){return new Promise((N,I)=>{if(t.getOptions){if(t.searchWordsRequired&&!le(o.value)){N(!1);return}ue.get(t.url,k.value).then(m=>{var M;h=!1;let O=[];(M=m==null?void 0:m.data)!=null&&M.records?(O=m.data.records,d=m.data.pages):m!=null&&m.data&&F(m.data)==="Array"?(O=m.data,d=m.pages):m!=null&&m.data&&F(m.data)==="Object"&&(O=[m.data],d=1),typeof t.optionFilter=="function"&&F(t.optionFilter)==="Function"&&(O=t.optionFilter(O)),D.isEmpty(O)||(O=O.map((K,z)=>{let W=T("r.optionLabel")+z;if(Array.isArray(t.optionsLabelKey)){let Z=[];for(let ae=1,ne=t.optionsLabelKey.length;ae<ne;ae++)Z.push(K[t.optionsLabelKey[ae]]);W=`${K[t.optionsLabelKey[0]]}(${String(Z)})`}else D.isString(t.optionsLabelKey)&&(W=K[t.optionsLabelKey]);if(t.collectLabel){let Z=D.cloneDeep(K);return delete Z.value,delete Z.label,{value:K[t.optionsValKey],label:W,...Z}}return{value:K[t.optionsValKey],label:W}})),f.value.push(...O);let y={};f.value=f.value.filter(K=>y[K.value]?!1:(y[K.value]=!0,!0)),e.nextTick(function(){i("update-option-finish")}),N(!0)}).catch(()=>{oe.Message.error(T("r.getDataError")),I(T("r.getDataError"))})}else N(!1)})}return e.onMounted(b),(N,I)=>{const m=e.resolveComponent("Option"),O=e.resolveComponent("Select"),y=e.resolveDirective("loadmore");return e.withDirectives((e.openBlock(),e.createBlock(O,e.mergeProps({modelValue:e.unref(V),"onUpdate:modelValue":I[0]||(I[0]=M=>e.isRef(V)?V.value=M:null),ref_key:"selectScrollSourceRef",ref:g,"transfer-class-name":u},N.$attrs,{transfer:"",filterable:"",placeholder:e.unref(p),disabled:N.disabled}),{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(f),(M,K)=>(e.openBlock(),e.createBlock(m,{key:"op"+K,value:M.value,label:M.label,disabled:M.disabled},null,8,["value","label","disabled"]))),128))]),_:1},16,["modelValue","placeholder","disabled"])),[[y,C,u]])}}}),ml=Object.freeze(Object.defineProperty({__proto__:null,AlCascaderMC:kt,AsyncCascader:bt,BtTablePage:qe,CheckboxGroupThreeClass:fl,CheckboxGroupTwoClass:dl,CheckboxTree:sl,EditorPro:Bt,FormGroup:il,FormModal:rl,FormR:Oe,FullPop:Dt,HeaderBt:ve,Hello:Ot,IconTxtBtn:$e,InputMap:gt,MonthRange:Vt,Page404:Mt,SearchForm:Ye,SelectInput:ht,SelectScrollMore:pl,ShowHidePanel:He,ShowHidePanelB:Zt,SideMenu:Qt,TableIconBtn:dt,TableSearch:vt,TableSetting:mt,TransferBox:cl,UploadGroup:wt,WellCard:ul},Symbol.toStringTag,{value:"Module"})),Ca={class:"a4Line aL notPrint"},Sa={class:"a4Line aR notPrint"},_a={class:"a4Line bL notPrint"},Ta={class:"a4Line bR notPrint"},Na={class:"topsL notPrint"},Aa={class:"topsLTitle"},xa={class:"topsLBtn"},La={class:"topsLHelp"},Ia=e.defineComponent({__name:"PrintModal",setup(a){const i=Qe.useRoute(),t=e.ref(),n=e.ref(!1),d=e.ref(!1),o=e.ref(!1),f=e.ref(),r="tablePrint_"+Date.now().toString(),h=e.ref(""),s=e.ref([]),u=e.ref([]),p=()=>{f.value&&window.sessionStorage.removeItem("print_"+f.value),window.sessionStorage.removeItem(r),window.close()},V=()=>{o.value&&(o.value=!1)},k=()=>{o.value=!1;let b=window.setTimeout(()=>{window.clearTimeout(b),window.print()},100)},g=()=>{var b,S,x;if(f.value=(b=i==null?void 0:i.params)==null?void 0:b.isFrom,f.value){let w=window.sessionStorage.getItem("print_"+f.value);if(w){const C=JSON.parse(w);if(!C){n.value=!0;return}s.value=C.columns,u.value=C.data,t.value=C.title,h.value=((S=C==null?void 0:C.config)==null?void 0:S.customClass)||"",d.value=((x=C==null?void 0:C.config)==null?void 0:x.autoPrint)||!1,document.title=(t.value||T("r.print"))+"_"+new Date().toLocaleString()}else n.value=!0}};return e.onMounted(()=>{if(d.value){let b=window.setTimeout(()=>{window.clearTimeout(b),k()},100)}}),g(),(b,S)=>{const x=e.resolveComponent("Table");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["tablePrintModal",[e.unref(h)]]),onClick:V},[e.withDirectives(e.createElementVNode("div",{class:"msgL notPrint"},e.toDisplayString(e.unref(T)("r.printGuide.9")),513),[[e.vShow,e.unref(n)]]),e.withDirectives(e.createElementVNode("div",Ca,[e.createElementVNode("p",null,e.toDisplayString(e.unref(T)("r.printGuide.7")),1),e.createTextVNode(),e.createElementVNode("p",null,e.toDisplayString(e.unref(T)("r.printGuide.5")),1)],512),[[e.vShow,!e.unref(n)]]),e.withDirectives(e.createElementVNode("div",Sa,[e.createElementVNode("p",null,e.toDisplayString(e.unref(T)("r.printGuide.7")),1),e.createTextVNode(),e.createElementVNode("p",null,e.toDisplayString(e.unref(T)("r.printGuide.6")),1)],512),[[e.vShow,!e.unref(n)]]),e.withDirectives(e.createElementVNode("div",_a,[e.createElementVNode("p",null,e.toDisplayString(e.unref(T)("r.printGuide.8")),1),e.createTextVNode(),e.createElementVNode("p",null,e.toDisplayString(e.unref(T)("r.printGuide.5")),1)],512),[[e.vShow,!e.unref(n)]]),e.withDirectives(e.createElementVNode("div",Ta,[e.createElementVNode("p",null,e.toDisplayString(e.unref(T)("r.printGuide.8")),1),e.createTextVNode(),e.createElementVNode("p",null,e.toDisplayString(e.unref(T)("r.printGuide.6")),1)],512),[[e.vShow,!e.unref(n)]]),e.withDirectives(e.createElementVNode("div",Na,[e.createElementVNode("div",Aa,e.toDisplayString(e.unref(t)||e.unref(T)("r.print")),1),e.createElementVNode("div",xa,[e.createVNode($e,{icon:"md-help-circle",name:e.unref(T)("r.help"),onClick:S[0]||(S[0]=e.withModifiers(w=>o.value=!e.unref(o),["stop"]))},null,8,["name"]),e.createVNode($e,{icon:"md-print",name:e.unref(T)("r.preview"),onClick:k},null,8,["name"]),e.createVNode(mt,{modelValue:e.unref(s),"onUpdate:modelValue":S[1]||(S[1]=w=>e.isRef(s)?s.value=w:null),"s-key":r,storage:"sessionStorage"},null,8,["modelValue"]),e.createVNode(dt,{icon:"md-close",onClick:p,title:e.unref(T)("r.close")},null,8,["title"])]),e.withDirectives(e.createElementVNode("div",La,[e.createElementVNode("p",null,e.toDisplayString(e.unref(T)("r.printGuide.1")),1),e.createElementVNode("p",null,e.toDisplayString(e.unref(T)("r.printGuide.2")),1),e.createElementVNode("p",null,e.toDisplayString(e.unref(T)("r.printGuide.3")),1),e.createElementVNode("p",null,e.toDisplayString(e.unref(T)("r.printGuide.4")),1)],512),[[e.vShow,e.unref(o)]])],512),[[e.vShow,!e.unref(n)]]),e.withDirectives(e.createVNode(x,{class:"tablePW",columns:e.unref(s),data:e.unref(u),border:""},null,8,["columns","data"]),[[e.vShow,!e.unref(n)]])],2)}}});let ke=null;function hl(){document.documentElement.style.setProperty("overflow","auto");const i=document.createElement("style");i.innerHTML="body,div[data-v-app]{height:100% !important}",document.head.appendChild(i)}function Da(a){a!=null&&a.addRoute&&(a.hasRoute("tablePrint")||a.addRoute({name:"tablePrint",path:"/tablePrint/:isFrom",component:Ia})),ke=a,location.pathname.indexOf("tablePrint")>-1?(ke.push(location.pathname),hl()):location.hash.indexOf("tablePrint")>-1&&(ke.push(location.hash.replace(/^#/,"")),hl())}function Oa(a,i,t,n){var s,u;if(!ke)return;let d=D.cloneDeep(a.filter(p=>p.key)),o;d[0].type==="selection"&&d.shift(),d.length?o=d.map(p=>(p.width=p.minWidth||100,p.sortable=!1,delete p.minWidth,delete p.__id,p.resizable=!0,p)):o=[];let f=(u=(s=ke==null?void 0:ke.currentRoute)==null?void 0:s.value)==null?void 0:u.fullPath;f&&(f=f.replace(/\//g,"_")),window.sessionStorage.setItem("print_"+f,JSON.stringify({columns:o,data:i,title:t,config:n}));const r=ke.resolve({name:"tablePrint",params:{isFrom:f}});window.open(r==null?void 0:r.href,"_blank")||console.log("请不要禁用浏览器弹出窗口，否则无法正常使用该打印功能。")}const Ct={init:Da,print:Oa};function St(a){const i=(...o)=>ye.apply(this,o),t=i("r.closePreview"),n=i("r.fullImg");let d="previewImg"+Math.floor(Math.random()*1e7);oe.Modal.info({closable:!1,"transition-names":["linear","fade"],render:o=>e.h("div",{class:"previewModal",id:d},[e.h("div",{class:"previewModalInner"},[e.h("img",{src:a,alt:n}),e.h(oe.Icon,{type:"md-close",size:20,title:t,class:"previewModalDelete",onClick(){oe.Modal.remove()}})])])}),se(()=>{var r,h,s,u,p,V;const o=(u=(s=(h=(r=document.getElementById(d))==null?void 0:r.parentElement)==null?void 0:h.parentElement)==null?void 0:s.parentElement)==null?void 0:u.parentElement,f=(V=(p=document.getElementById(d))==null?void 0:p.parentElement)==null?void 0:V.nextSibling;o&&(o.style.height="0"),o&&(o.style.padding="0"),f&&(f.style.display="none")},10)}function _t(a,i,t,n){const d=(...o)=>ye.apply(this,o);de.call(this,{title:a||d("r.info.title"),text:i||d("r.info.text"),icon:t||"warning",onOk:n,buttons:[d("r.cancel")]})}(()=>{if(window.wangeditorMenuInit)return;class a{constructor(){Me(this,"title");Me(this,"iconSvg");Me(this,"tag");Me(this,"alwaysEnable");this.title=ye("r.preview"),this.iconSvg='<svg t="1656644788547" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12356" width="256" height="256"><path d="M512 1024H135.4C60.7 1024 0 963.3 0 888.6V135.4C0 60.7 60.7 0 135.4 0h753.2C963.3 0 1024 60.7 1024 135.4V512c0 24.9-20.1 45-45 45s-45-20.1-45-45V135.4c0-25-20.4-45.4-45.4-45.4H135.4c-25 0-45.4 20.4-45.4 45.4v753.2c0 25 20.4 45.4 45.4 45.4H512c24.9 0 45 20.1 45 45s-20.1 45-45 45z" p-id="12357"></path><path d="M512 802c-77.5 0-150.3-30.2-205.1-84.9C252.2 662.3 222 589.5 222 512s30.2-150.3 84.9-205.1S434.5 222 512 222s150.3 30.2 205.1 84.9C771.8 361.7 802 434.5 802 512s-30.2 150.3-84.9 205.1C662.3 771.8 589.5 802 512 802z m0-490c-110.3 0-200 89.7-200 200s89.7 200 200 200 200-89.7 200-200-89.7-200-200-200z" p-id="12358"></path><path d="M978.5 1023.5c-11.5 0-23-4.4-31.8-13.2L653.2 716.8c-17.6-17.6-17.6-46.1 0-63.6 17.6-17.6 46.1-17.6 63.6 0l293.5 293.5c17.6 17.6 17.6 46.1 0 63.6-8.8 8.8-20.3 13.2-31.8 13.2z" p-id="12359"></path></svg>',this.tag="button",this.alwaysEnable=!0}getValue(){return""}isActive(){return!1}isDisabled(){return!1}exec(n){const d=document.getElementById("editor-preview");let o=localStorage.getItem("editorPreviewW")||300,f=localStorage.getItem("editorPreviewH")||500;const r=n.getHtml();if(d){let h=d.children[0].children[1].children[0],s=d.children[0].children[1];h.innerHTML=r,h.style.width=o+"px",s.style.height=f+"px",d.style.display="block"}else{const h=document.body,s=document.createElement("div");s.setAttribute("id","editor-preview"),s.setAttribute("class","editor-preview-mask"),s.innerHTML=`<div class='editor-preview-body'><div class='editor-preview-head'><div><span>宽</span><input type='number' value='${o}' min='200'><span>高</span><input type='number' value='${f}' min='300'></div><i class='ivu-icon ivu-icon-md-close'></i></div><div class='editor-preview-out-wall'><div class='editor-preview-wall r-editor-view'></div></div></div>`;let u=s.children[0].children[1],p=s.children[0].children[1].children[0],V=s.children[0].children[0].children[0].children[1];const k=40,g=70,b=C=>{if(C&&C.type==="keyup"){let I=!1;if(C.key&&(I=C.key!=="Enter"),I)return}let _=C.target.value;if(_=Number(_),p.style&&p.style.width===_+"px")return;const N=h.clientWidth;_<250?(_=250,C.target.value=250):_>N-k&&(_=N-k,C.target.value=N-k),p.style.width=_+"px",localStorage.setItem("editorPreviewW",_)};V.addEventListener("blur",b),V.addEventListener("keyup",b);let S=s.children[0].children[0].children[0].children[3];const x=C=>{if(C&&C.type==="keyup"){let I=!1;if(C.key&&(I=C.key!=="Enter"),I)return}let _=C.target.value;if(_=Number(_),u.style&&u.style.height===_+"px")return;const N=h.clientHeight;_<300?(_=300,C.target.value=300):_>N-g&&(_=N-g,C.target.value=N-g),u.style.height=_+"px",localStorage.setItem("editorPreviewH",_)};S.addEventListener("blur",x),S.addEventListener("keyup",x),s.children[0].children[0].children[1].addEventListener("click",()=>{s.style.display="none"}),p.innerHTML=r,p.style.width=o+"px",u.style.height=f+"px",h.append(s)}}}const i={key:"previewX",factory(){return new a}};Il.Boot.registerMenu(i),window.wangeditorMenuInit=!0})();const yl={$fetch:ue,tablePrint:Ct,fullScreenImgByDom:be,fullScreenImgPreview:St,$swal:de,$swalConfirm:_t,messageBox:Ie,setInterval:pt,setTimeout:se,...Xt},Ma=function(a,i={}){ue.init(i.useStore||i.store,a),a.use(Dl),i.locale&&Re.use(i.locale),i.i18n&&Re.i18n(i.i18n),i.router&&(en(i.router),Ct.init(i.router)),i.amap&&gn(i.amap),i.notRegistryGlobal||(Object.keys(ml).forEach(t=>{a.component(t)||a.component(t,ml[t])}),Object.keys(yl).forEach(t=>{a.config.globalProperties[t]=yl[t]})),a.directive("has")||a.directive("has",(t,n)=>{n.value&&!rt(n.value)&&(t.style.display="none")}),a.directive("loadmore")||a.directive("loadmore",{mounted(t,n){var o;let d=t;n.arg&&(d=(o=document.getElementsByClassName(n.arg))==null?void 0:o[0]),d&&d.addEventListener("scroll",function(){d.scrollTop>0&&d.scrollHeight-d.scrollTop<=d.clientHeight&&n.value()})}}),a.config.globalProperties.searchFormLabelWidth=84,a.config.globalProperties.formModalLabelWidth=140,a.config.globalProperties.formGroupLabelWidth=160,a.config.globalProperties.iconTxtBtnIconSize=17},Ea=Re.use,Fa=Re.i18n,Ra={locale:Ea,i18n:Fa,install:Ma,...Xt,...Wl,$fetch:ue,fullScreenImgByDom:be,fullScreenImgPreview:St,$swal:de,$swalConfirm:_t,messageBox:Ie,setInterval:pt,setTimeout:se};L.$fetch=ue,L.$swal=de,L.$swalConfirm=_t,L.AlCascaderMC=kt,L.AsyncCascader=bt,L.BtTablePage=qe,L.CheckboxGroupThreeClass=fl,L.CheckboxGroupTwoClass=dl,L.CheckboxTree=sl,L.EditorPro=Bt,L.FormGroup=il,L.FormModal=rl,L.FormR=Oe,L.FullPop=Dt,L.HeaderBt=ve,L.Hello=Ot,L.IconTxtBtn=$e,L.InputMap=gt,L.MonthRange=Vt,L.Page404=Mt,L.SearchForm=Ye,L.SelectInput=ht,L.SelectScrollMore=pl,L.ShowHidePanel=He,L.ShowHidePanelB=Zt,L.SideMenu=Qt,L.TableIconBtn=dt,L.TableSearch=vt,L.TableSetting=mt,L.TransferBox=cl,L.UploadGroup=wt,L.WellCard=ul,L.clearObj=ze,L.dataFilterOrToUrl=Jt,L.decimalDigitsLimit=zt,L.default=Ra,L.downloadFileByFormSubmit=ot,L.downloadFileReaderFile=tt,L.emptyInput=Rt,L.fakeALinkClick=lt,L.fileExport=Gt,L.findCollection=Ve,L.findPath=Ae,L.formDataHeadConfig=$t,L.fullScreenImgByDom=be,L.fullScreenImgPreview=St,L.getColumnsKeys=Ht,L.getFileSrc=Te,L.getFileTypeByName=Ke,L.getFileTypeIconByName=Ue,L.getStringWidth=nt,L.hasPermission=rt,L.htmlDecode=Ft,L.htmlEncode=Et,L.htmlPrint=Yt,L.isEmptyValue=jt,L.isImgByFile=Ne,L.isNaN=st,L.isNumberValue=Wt,L.isValidValue=le,L.messageBox=Ie,L.myTypeof=F,L.oneOf=Ut,L.removeEmptyValue=Ge,L.setInterval=pt,L.setTimeout=se,L.setValByOption=Be,L.siblingElems=ct,L.stopBubbling=Pt,L.stringLength=qt,L.tablePrint=Ct,L.toFormData=Kt,L.toHump=et,L.toLine=at,L.tooltipManual=it,L.trimObj=xe,Object.defineProperties(L,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=plugRQw.umd.cjs.map
