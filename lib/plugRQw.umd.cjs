(function(A,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue"),require("deepmerge"),require("lodash-es"),require("sweetalert"),require("view-ui-plus"),require("vue-router"),require("vue-i18n"),require("axios"),require("ar-cascader"),require("@wangeditor/editor-for-vue"),require("moment"),require("@wangeditor/editor")):typeof define=="function"&&define.amd?define(["exports","vue","deepmerge","lodash-es","sweetalert","view-ui-plus","vue-router","vue-i18n","axios","ar-cascader","@wangeditor/editor-for-vue","moment","@wangeditor/editor"],e):(A=typeof globalThis<"u"?globalThis:A||self,e(A.plugRQw={},A.Vue,A.deepmerge,A.lodashEs,A.swal,A.ViewUIPlus,A.VueRouter,A.VueI18n,A.axios,A.ArCascader,A.editorForVue,A.moment,A.editor))})(this,function(A,e,ke,M,De,se,Vt,Bl,ve,Cl,Bt,_e,Sl){var cl,dl;"use strict";var la=Object.defineProperty;var na=(A,e,ke)=>e in A?la(A,e,{enumerable:!0,configurable:!0,writable:!0,value:ke}):A[e]=ke;var Me=(A,e,ke)=>(na(A,typeof e!="symbol"?e+"":e,ke),ke);const Ct={r:{locale:"zh-CN",testMsg:"测试国际化",confirm:"确定",cancel:"取消",clear:"清空",info:{title:"提示",text:"确定执行该操作？"},http:{403:"登录状态失效,请重新登录！",409:"该账号已在其他地方登录,点击确定退出。"},pSelect:"请选择",pInput:"请输入",selectDate:"选择日期",selectTime:"选择时间",search:"搜索",level:{1:"一级",2:"二级",3:"三级"},unknown:"未知",title:"标题",required:"该项为必填",back:"返回",button:"按钮",check:"查询",adSearch:"高级查询",all:"全选",tabSetting:" 列表显示设置",delete:"删除",fView:"全屏预览",download:"点击下载",file:"文件",selectFile:"选择文件",notImg:"文件不是图片，不可预览",wrongFileType:"文件类型不被允许",supportType:"支持类型：",none:"无",fileIsBig:"文件过大",supportSize:"支持最大：",uploadError:"上传出错",uploadFail:"上传失败",closePreview:"关闭预览",fullImg:"全屏图片",preview:"预览",searchFor:"当前搜索：",noMore:"没有更多数据了",optionLabel:"选项",getDataError:"拉取数据出错",add:"添加",remove:"移除",addAll:"全部添加",removeAll:"全部移除",added:"已添加",notAdded:"未添加",success:"成功",failed:"失败",error:"出错",pageNotFound:"页面没找到",notFoundMsg:"您访问的页面不存在，点击下面按钮返回上一个页面。",hideMenu:"隐藏菜单",showMenu:"显示菜单"}},_l=/(%|){([0-9a-zA-Z_]+)}/g;function Al(){function a(t,n){return Object.prototype.hasOwnProperty.call(t,n)}function s(t,...n){let c;return n.length===1&&typeof n[0]=="object"&&(c=n[0]),(!c||!c.hasOwnProperty)&&(c={}),t===void 0?"":t.replace(_l,(o,d,r,m)=>{let f;return t[m-1]==="{"&&t[m+o.length]==="}"?r:(f=a(c,r)?c[r]:null,f??"")})}return s}const xl=Al();let Fe=Ct;const Tl={zh:Ct};let St,_t={},ce,Ll=function(a,s){if(typeof this=="object"&&Reflect.has(this,"$t"))return this.$t(a,s);if(ce&&ce.global)return ce.global.t(a,s);if(ce&&ce.locale){if(!_t[ce.locale]||St!=ce.locale){_t[ce.locale]=!0;let t=ce.getLocaleMessage(ce.locale)||{},n=ke(Tl[ce.locale],t,{clone:!0});Fe=n,ce.setLocaleMessage(ce.locale,n),St=ce.locale}return ce.hlang(a,s)}};const he=function(a,s){let t=Ll.apply(this,[a,s]);if(t!=null)return t;const n=a.split(".");let c=Fe;for(let o=0,d=n.length;o<d;o++){const r=n[o];if(t=c[r],o===d-1)return xl(t,s);if(!t)return"";c=t}return""},Ee={use:function(a){Fe=a||Fe},t:he,i18n:function(a){ce=a}};function L(a,s){var n,c,o;const t=(o=(c=(n=e.getCurrentInstance())==null?void 0:n.appContext)==null?void 0:c.config)==null?void 0:o.globalProperties;return he.apply(t,[a,s])}const qe=e.defineComponent({__name:"HeaderBt",props:{icon:{},withIcon:{type:Boolean,default:!1},iconSize:{default:18},color:{default:"inherit"},borderColor:{default:"#fff"},disabled:{type:Boolean,default:!1}},emits:["click"],setup(a,{emit:s}){const t=a;function n(){t.disabled||s("click")}return(c,o)=>{const d=e.resolveComponent("Icon");return e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass({headerBtCTM:!0,withIconCTM:t.icon||t.withIcon,disabled:t.disabled}),style:e.normalizeStyle({color:t.color,borderLeftColor:t.borderColor}),onClick:n},[t.icon?(e.openBlock(),e.createBlock(d,{key:0,size:t.iconSize,type:t.icon},null,8,["size","type"])):e.createCommentVNode("",!0),e.renderSlot(c.$slots,"default")],6)}}}),Nl={class:"headerTxtAM"},Il={class:"contentAM"},At=e.defineComponent({__name:"FullPop",props:{title:{},headerColor:{},headerBg:{},headerFontSize:{default:12},zIndex:{default:1e3}},emits:["on-open","on-close"],setup(a,{expose:s,emit:t}){const n=a;let c=e.ref(!1);const o=e.computed(()=>typeof n.headerFontSize=="number"?n.headerFontSize+"px":n.headerFontSize),d=e.computed(()=>({zIndex:n.zIndex}));function r(){c.value=!0,t("on-open")}function m(f){c.value=!1,t("on-close",f===!0)}return s({open:r,close:m}),(f,u)=>e.withDirectives((e.openBlock(),e.createElementBlock("div",{class:"fullScreenPopBoxAM",style:e.normalizeStyle(e.unref(d))},[e.createElementVNode("div",{class:"headerAM",style:e.normalizeStyle({color:n.headerColor,backgroundColor:n.headerBg,fontSize:e.unref(o)})},[e.createElementVNode("span",Nl,e.toDisplayString(f.title||e.unref(L)("r.title")),1),e.createVNode(qe,{icon:"md-return-left",onClick:m},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(L)("r.back")),1)]),_:1})],4),e.createElementVNode("div",Il,[e.renderSlot(f.$slots,"default")])],4)),[[e.vShow,e.unref(c)]])}}),Ol={class:"msg"},xt=e.defineComponent({__name:"Hello",setup(a){let s=e.ref("Greetings from Ricky.");return(t,n)=>(e.openBlock(),e.createElementBlock("span",Ol,e.toDisplayString(e.unref(s)),1))}});function Re(){const{appContext:a}=e.getCurrentInstance();return a.config.globalProperties}const Tt=e.defineComponent({__name:"IconTxtBtn",props:{name:{},icon:{default:"md-download"},size:{default:()=>Re().iconTxtBtnIconSize},disabled:{type:Boolean,default:!1},has:{default:""}},emits:["click"],setup(a,{emit:s}){const t=a,n=e.computed(()=>Math.floor(t.size/17*12)+"px");function c(o){t.disabled||s("click",o)}return(o,d)=>{const r=e.resolveComponent("Icon"),m=e.resolveDirective("has");return e.withDirectives((e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["tabTopBtnsT",{disabled:t.disabled}]),onClick:c,style:e.normalizeStyle({"font-size":e.unref(n)})},[e.createVNode(r,{type:t.icon,size:t.size},null,8,["type","size"]),e.createTextVNode(" "+e.toDisplayString(t.name||e.unref(L)("r.button")),1)],6)),[[m,o.has]])}}}),Ml={class:"c404K"},Dl=e.createElementVNode("div",{class:"t404"},"404",-1),Fl={class:"ct404"},El={class:"p404"},Lt=e.defineComponent({__name:"Page404",setup(a){const t=e.getCurrentInstance().appContext.config.globalProperties.$router;function n(){t.go(-1)}return(c,o)=>{const d=e.resolveComponent("Button");return e.openBlock(),e.createElementBlock("div",Ml,[Dl,e.createElementVNode("div",Fl,"UH OH! "+e.toDisplayString(e.unref(L)("r.pageNotFound")),1),e.createElementVNode("div",El,e.toDisplayString(e.unref(L)("r.notFoundMsg")),1),e.createVNode(d,{class:"bt404",onClick:n},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(L)("r.back")),1)]),_:1})])}}});function de(a,s,t){const n=(...c)=>he.apply(this,c);return new Promise((c,o)=>{if(typeof a=="object"&&!Array.isArray(a)){let d=n("r.confirm"),r=n("r.cancel"),m=!1,f="swalConfirmBt",u="swalCancelBt";const y=/^HTML.*Element$/;a.type&&(a.icon=a.type)&&delete a.type,a.content&&(a.text=a.content)&&delete a.content,a.className=a.className||"swalBoxX";let x="";a.text&&y.test(P(a.text))?x="content":a.text&&P(a.text)==="String"&&(x="text"),a.buttons&&(typeof a.buttons=="object"&&!Array.isArray(a.buttons)?a.buttons.cancel&&(a.buttons.cancel.text&&(r=a.buttons.cancel.text)&&(m=!0),a.buttons.cancel.className&&(u=a.buttons.cancel.className),a.buttons.confirm.text&&(d=a.buttons.confirm.text),a.buttons.confirm.className&&(f=a.buttons.confirm.className)):Array.isArray(a.buttons)&&(a.buttons[0]&&(r=a.buttons[0],m=!0),a.buttons[1]&&(d=a.buttons[1]))),De({title:a.title,icon:a.icon,className:a.className,[x]:a.text,buttons:{confirm:{text:d,value:!0,visible:!0,className:f},cancel:{text:r,value:null,visible:m,className:u}}}).then(C=>{C&&typeof a.onOk=="function"&&a.onOk(),c(C)}).catch(C=>{o(C)})}else if(typeof a=="string"){let d="";if(s)switch(typeof s){case"string":d="text";break;case"object":d="content";break}De({title:a,[d]:s||"",icon:t||"",className:"swalBoxX",buttons:{confirm:{text:n("r.confirm"),value:!0,visible:!0,className:"swalConfirmBt",closeModal:!0}}}).then(r=>{c(r)}).catch(r=>{o(r)})}else if(typeof a=="boolean")!a&&De.close&&De.close();else throw new TypeError("swal第一个参数类型有误，仅支持Object/String/false")})}function Ye(a){return a.replace(/_(\w)/g,function(s,t){return t.toUpperCase()})}function Nt(a){let s=document.createElement("div");return s.textContent!==void 0?s.textContent=a:s.innerText=a,s.innerHTML}function It(a){let s=document.createElement("div");return s.innerHTML=a,s.innerText||s.textContent}function Ae(a){return new Promise(s=>{let t=new FileReader;t.readAsDataURL(a),t.onloadend=()=>{s(t.result)}})}function Pe(a){return a.split(".").pop().toLocaleLowerCase()}function xe(a){return P(a)==="String"&&a.indexOf("image")>-1}function Ue(a){const s=Pe(a);let t="ios-document-outline";return["gif","jpg","jpeg","png","bmp","webp"].indexOf(s)>-1?t="ios-image":["mp4","m3u8","rmvb","avi","swf","3gp","mkv","flv"].indexOf(s)>-1?t="ios-film":["mp3","wav","wma","ogg","aac","flac"].indexOf(s)>-1?t="ios-musical-notes":["doc","txt","docx","pages","epub","pdf"].indexOf(s)>-1?t="md-document":["numbers","csv","xls","xlsx"].indexOf(s)>-1?t="ios-stats":["keynote","ppt","pptx"].indexOf(s)>-1&&(t="ios-videocam"),t}function Je(a,s){let t=document.createElement("a");t.href=s,t.download=a,Xe(t)}function Xe(a){let s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(s)}function Te({group:a,condition:s,pathKey:t,childKey:n="children",path:c=[]}){if(a&&M.isObject(a)){if(M.isFunction(s)){if(M.isPlainObject(a)){let o=a,d=M.cloneDeep(c);if(s(o))return t&&o[t]&&d.push(o[t]),d;if(o[n]&&!M.isEmpty(o[n])){t&&o[t]&&d.push(o[t]);let r=Te({group:o[n],condition:s,pathKey:t,childKey:n,path:d});if(!M.isEmpty(r))return r}}else if(Array.isArray(a))for(let o of a){let d=M.cloneDeep(c);if(s(o))return t&&o[t]?d.push(o[t]):d.push(String(a.indexOf(o))),d;if(o[n]&&o[n].length>0){t&&o[t]?d.push(o[t]):d.push(String(a.indexOf(o)));let r=Te({group:o[n],condition:s,pathKey:t,childKey:n,path:d});if(!M.isEmpty(r))return r}}}else if(Array.isArray(a))for(let o of a){let d=M.cloneDeep(c);if(o===s)return d.push(String(a.indexOf(o))),d}}return[]}function Qe(a,s=12){if(P(a)==="String"&&a.length>0){let t=document.createElement("span");t.style.fontSize=s+"px",t.style.fontFamily="inherit",t.innerHTML=a,t.style.opacity="0",t.style.position="fixed",t.style.top="3000px",document.body.append(t);const n=t.clientWidth;return document.body.removeChild(t),n}return 0}function Ot(a){return a===""?null:a}function Mt(a){a=a||window.Event,a.stopPropagation?a.stopPropagation():a.cancelBubble=!0}const Rl=Object.freeze(Object.defineProperty({__proto__:null,downloadFileReaderFile:Je,emptyInput:Ot,fakeALinkClick:Xe,findPath:Te,getFileSrc:Ae,getFileTypeByName:Pe,getFileTypeIconByName:Ue,getStringWidth:Qe,htmlDecode:It,htmlEncode:Nt,isImgByFile:xe,stopBubbling:Mt,toHump:Ye},Symbol.toStringTag,{value:"Module"}));function P(a){return Object.prototype.toString.call(a).replace(/\[object |]/g,"")}function Ze(a){return a.replace(/([A-Z])/g,"_$1").toLowerCase()}function Le(a){let s=P(a);if(s==="Object"){for(let t in a)if(a.hasOwnProperty(t)){let n=P(a[t]);n==="String"?a[t]=a[t].trim():(n==="Object"||n==="Array")&&Le(a[t])}}else if(s==="Array")for(let t=0,n=a.length;t<n;t++){let c=P(a[t]);c==="String"?a[t]=a[t].trim():(c==="Array"||c==="Object")&&Le(a[t])}return a}function ze(a,s=[]){if(P(a)==="Array")return a.forEach((t,n)=>{switch(P(t)){case"Array":case"Object":ze(t);break;default:a[n]=null}}),a;if(P(a)==="Object"){for(let t in a)if(a.hasOwnProperty(t)){let n=!0;for(let c of s)if(c===t){n=!1;break}if(n)switch(P(a[t])){case"Array":case"Object":ze(a[t]);break;default:a[t]=null}}return a}else return a}const Dt={headers:{"Content-Type":"multipart/form-data"}};function Ft(a){let s=new FormData;for(let t in a)a.hasOwnProperty(t)&&a[t]!==null&&s.append(t,a[t]);return s}function we(a,s,t=!1){if(!a||!s)return!1;let n,c="notFoundC",o=function(d,r){if(Array.isArray(d)){if(P(r)==="Function"&&r(d))return c=d,[];for(let m of d){if(c!=="notFoundC")break;if(P(r)==="Function"&&r(m)||m===r)return c=m,[d.indexOf(m)];if(P(m)==="Array"||P(m)==="Object"){let f=o(m,r);if(f!==void 0)return[d.indexOf(m),...f]}}}else if(P(d)==="Object"){if(P(r)==="Function"&&r(d))return c=d,[];for(let m in d){if(c!=="notFoundC")break;if(d.hasOwnProperty(m)){if(P(r)==="Function"&&r(m)||d[m]===r)return c=d[m],[m];if(P(d[m])==="Object"||P(d[m])==="Array"){let f=o(d[m],r);if(f!==void 0)return[m,...f]}}}}};return n=o(a,s),t?n||!1:c==="notFoundC"?!1:c}function Et(a,s){for(let t=0,n=s.length;t<n;t++)if(a===s[t])return!0;return!1}function Rt(a,s=2){let t=new RegExp(`(^-?\\d+\\.\\d{${s}})(\\d+$)`),n=a&&String(a)||"";return t.test(n)?Number(n.replace(t,"$1")):a}function et(a,s={},t="get"){let n=document.createElement("form"),c=document.getElementsByTagName("body")[0];c.appendChild(n),n.setAttribute("style","display:none"),n.setAttribute("target",""),n.setAttribute("method",t);let o=a;if(window&&window.hasOwnProperty("g")){let d=Object.keys(window.g).filter(r=>r.indexOf("URL")>-1).map(r=>r.replace("URL",""));for(let r of d){let m=new RegExp("^/"+r+"(?=/.*$)","i");if(m.test(a)&&window.g[r+"URL"]){o=window.g[r+"URL"]+a.replace(m,"");break}}}if(n.setAttribute("action",o),M.isPlainObject(s)){for(let r in s)if(s.hasOwnProperty(r)&&(s[r]||s[r]===0||s[r]===!1||s[r]==="")){let m=document.createElement("input");m.setAttribute("type","hidden"),m.setAttribute("name",r),m.setAttribute("value",s[r]),n.appendChild(m)}n.submit();let d=setTimeout(()=>{c.removeChild(n),clearTimeout(d),d=null},8e3)}else console.error("请求数据格式有误，无法下载文件")}function Pt(a,s={},t="get"){if(s.hasOwnProperty("columns")&&(s.columns===""||s.columns===null||s.columns===void 0)){de.call(this,{title:"需要导出的列不能为空",type:"warning"});return}et(a,s,t)}function Ut(a,s,t=!1){let n;if(a&&P(s)==="Array"){let c=localStorage.getItem(a);if(c){let o=JSON.parse(decodeURI(c));n=s.filter(d=>d.key&&o.indexOf(d.title)!==-1).map(d=>d.key)}else n=s.map(o=>o.key)}else n=[];return t||(n=String(n)),n}function ae(a){return a!=null&&a!==""}function zt(a){return/^-?\d+(.\d+)?$/.test(a)}function tt(a,s=!1,t=""){return function(n,c){var m,f;let o;if(Array.isArray(a)){let u=[];for(let y of a)ae((m=c.row)==null?void 0:m[y])&&u.push(c.row[y]);o=u.join(t)}else typeof a=="function"?o=a(c):o=(f=c.row)==null?void 0:f[a];let d=Qe(o),r=c.column._width;return o&&d>r?e.h(se.Tooltip,{style:{width:"100%"},content:o,maxWidth:r*2},()=>e.h("span",{style:{width:"100%",display:"inline-block","text-overflow":"ellipsis","white-space":"nowrap",overflow:"hidden","vertical-align":"top"}},o)):e.h("span",s&&!ae(o)?"--":o)}}function Kt(a){if(M.isPlainObject(a)){for(let s in a)if(a.hasOwnProperty(s)&&ae(a[s]))return!1;return!0}else if(Array.isArray(a)){for(let s of a)if(ae(s))return!1;return!0}return!ae(a)}function $t(a){return P(a)==="String"?a.replace(/[^\x00-\xff]/g,"01").length:P(a)==="Number"?(a+="",a.replace(/[^\x00-\xff]/g,"01").length):0}function Ve({group:a,condition:s,key:t,val:n,childKey:c="children"}){if(P(a)!=="Array"||P(s)!=="Function"||P(t)!=="String"||P(c)!=="String")return!1;a.forEach(o=>{s(o)&&(P(n)==="Function"?o[t]=n(o[t]):o[t]=n),P(o[c])==="Array"&&o[c].length>0&&Ve({group:o[c],condition:s,key:t,val:n,childKey:c})})}function lt(a){let s=sessionStorage.getItem("btnPermissions");return s?s.split(",").indexOf(a)>-1:!1}function nt(a){return P(a)==="Number"&&String(a)==="NaN"}function Gt(a,s=!1,t=!1){if(P(a)!=="Object")return a;let n=Object.assign(a,{}),c="";for(let o in n)if(n.hasOwnProperty(o)){let d=n[o];d===void 0||d===""||P(d)==="String"&&d.trim()===""||d===null||nt(d)?t?s?c+=o+"=&":n[o]="":delete n[o]:s&&(c+=o+"="+d+"&")}return s?c.length>0?c.substring(0,c.length-1):"":n}function Ke(a){let s={};if(Array.isArray(a)){s=[];for(let t of a)Array.isArray(t)||M.isPlainObject(t)?s.push(Ke(t)):ae(t)&&s.push(t)}else if(M.isPlainObject(a))for(let t in a)a.hasOwnProperty(t)&&(Array.isArray(a[t])||M.isPlainObject(a[t])?s[t]=Ke(a[t]):ae(a[t])&&(s[t]=a[t]));return s}function Ht(a){const s=window.open();if(s){s.document.write(a);let t=setTimeout(()=>{s.print(),window.clearTimeout(t),t=null},10)}}function at(a){let s=[],t=a;for(;a.previousSibling&&(a=a.previousSibling);)a.nodeType===1&&s.push(a);for(;t.nextSibling&&(t=t.nextSibling);)t.nodeType===1&&s.push(t);return s}const Wt=Object.freeze(Object.defineProperty({__proto__:null,clearObj:ze,dataFilterOrToUrl:Gt,decimalDigitsLimit:Rt,downloadFileByFormSubmit:et,fileExport:Pt,findCollection:we,formDataHeadConfig:Dt,getColumnsKeys:Ut,hasPermission:lt,htmlPrint:Ht,isEmptyValue:Kt,isNaN:nt,isNumberValue:zt,isValidValue:ae,myTypeof:P,oneOf:Et,removeEmptyValue:Ke,setValByOption:Ve,siblingElems:at,stringLength:$t,toFormData:Ft,toLine:Ze,tooltipManual:tt,trimObj:Le},Symbol.toStringTag,{value:"Module"})),Pl={class:"groupBoxRP"},Ul=["onClick"],zl=e.defineComponent({__name:"SideMenuGroup",props:{data:{default:()=>[]},pathName:{default:""}},setup(a){const s=a,t=Vt.useRouter();function n(o){return o.path===s.pathName?"active":""}function c(o,d){o.preventDefault();let r=o.target;if(!d.children&&!r.classList.contains("active")){t.push(d.path);return}let m=r.parentNode,f=at(m);for(let u of f){u.classList.remove("open");const y=u.querySelectorAll(".open");for(let x of y)x.classList.remove("open")}m.classList.toggle("open")}return(o,d)=>{const r=e.resolveComponent("sideMenuGroup",!0);return e.openBlock(),e.createElementBlock("ul",Pl,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(s.data,(m,f)=>(e.openBlock(),e.createElementBlock("li",{class:e.normalizeClass({dropItemRP:m.children}),key:m.path+f},[e.createElementVNode("div",{class:e.normalizeClass(["menuTxtR",n(m)]),onClick:u=>c(u,m),style:e.normalizeStyle({paddingLeft:m.level*20+"px"})},e.toDisplayString(m.name||"-- no name --"),15,Ul),m.children?(e.openBlock(),e.createBlock(r,{key:0,data:m.children,"path-name":s.pathName},null,8,["data","path-name"])):e.createCommentVNode("",!0)],2))),128))])}}}),Kl={class:"menuListR"},jt=e.defineComponent({__name:"SideMenu",props:{data:{default:()=>[]}},emits:["on-change"],setup(a,{emit:s}){const t=a,n=Vt.useRoute(),c=e.ref(!0),o=e.ref(),d=e.ref(),r=e.computed(()=>c.value?L("r.hideMenu"):L("r.showMenu")),m=e.computed(()=>c.value?"ios-arrow-back":"ios-arrow-forward");e.onBeforeMount(()=>{let y=localStorage.getItem("menuDisplayR")||"";y!==""?c.value=JSON.parse(y):(c.value=!0,localStorage.setItem("menuDisplayR",JSON.stringify(!0)))}),e.watch(()=>n.path,y=>{o.value=y,e.nextTick(u)},{immediate:!0});function f(){c.value=!c.value,localStorage.setItem("menuDisplayR",JSON.stringify(c.value)),s("on-change",c.value)}function u(){let y=d.value.querySelectorAll(".dropItemRP");for(let x of y)x.querySelector(".active")&&!x.classList.contains("open")&&x.classList.add("open")}return(y,x)=>{const C=e.resolveComponent("Icon");return e.openBlock(),e.createElementBlock("div",{ref_key:"menuRef",ref:d,class:"menuBoxRP"},[e.withDirectives(e.createElementVNode("div",Kl,[e.createVNode(zl,{data:t.data,pathName:e.unref(o)},null,8,["data","pathName"])],512),[[e.vShow,e.unref(c)]]),e.createVNode(C,{type:e.unref(m),size:25,class:e.normalizeClass([{showIco:!e.unref(c)},"menuShowHideIco"]),title:e.unref(r),onClick:f,color:e.unref(c)?"#fff":"#333"},null,8,["type","class","title","color"])],512)}}}),$l=["title"],vt=e.defineComponent({__name:"TableIconBtn",props:{icon:{default:"md-radio-button-on"},title:{},has:{default:""},disabled:{type:Boolean,default:!1},size:{default:24}},emits:["click"],setup(a,{emit:s}){const t=a;function n(c){t.disabled||s("click",c)}return(c,o)=>{const d=e.resolveComponent("Icon"),r=e.resolveDirective("has");return e.withDirectives((e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass(["tableBtnsG",{disabled:t.disabled}]),onClick:n,title:t.title||e.unref(L)("r.button")},[e.createVNode(d,{type:t.icon,size:t.size},null,8,["type","size"])],10,$l)),[[r,t.has]])}}}),Gl={class:"contentX"},Hl={class:"arrowA"},$e=e.defineComponent({__name:"ShowHidePanel",props:{bg:{}},setup(a){const s=a,t=e.ref(!0),n=e.computed(()=>t?"background:"+s.bg||"transparent":"");return(c,o)=>{const d=e.resolveComponent("Icon");return e.openBlock(),e.createElementBlock("div",{style:e.normalizeStyle(e.unref(n))},[e.withDirectives(e.createElementVNode("div",Gl,[e.renderSlot(c.$slots,"default")],512),[[e.vShow,e.unref(t)]]),e.createElementVNode("div",Hl,[e.createElementVNode("div",{class:"btA",onClick:o[0]||(o[0]=r=>t.value=!e.unref(t))},[e.createVNode(d,{type:e.unref(t)?"ios-arrow-up":"ios-arrow-down",size:"20"},null,8,["type"])])])],4)}}}),Wl={class:"contentZ"},qt=e.defineComponent({__name:"ShowHidePanelB",props:{modelValue:{type:Boolean,default:!1},bg:{default:"transparent"}},emits:["update:modelValue"],setup(a,{emit:s}){const t=a,n=e.computed({get(){return t.modelValue},set(o){s("update:modelValue",o)}}),c=e.computed(()=>n.value?"background:"+t.bg:"");return(o,d)=>(e.openBlock(),e.createElementBlock("div",{style:e.normalizeStyle(e.unref(c))},[e.withDirectives(e.createElementVNode("div",Wl,[e.renderSlot(o.$slots,"default")],512),[[e.vShow,e.unref(n)]])],4))}});let ot=[],it=[];const jl=function(a){a&&a.beforeEach?a.beforeEach(()=>{ot.map(s=>{window.clearTimeout(s)}),it.map(s=>{window.clearInterval(s)}),ot.length=0,it.length=0}):console.warn("安装库plug-r-qw时未传入router，调用该库的定时器方法产生的定时器将不能自动销毁，请传入router：Vue.use(plugRQw,{router,...})")},re=function(a,s){let t=window.setTimeout(a,s);return ot.push(t),t},rt=function(a,s){let t=window.setInterval(a,s);return it.push(t),t},Yt=e.defineComponent({__name:"TableSearch",props:{modelValue:{},open:{type:Boolean,default:!1},placeholder:{},showBtn:{type:Boolean,default:!0},fixed:{type:Boolean,default:!1},width:{default:"210px"},right:{default:"0"},top:{default:"0"},btnColor:{default:"inherit"}},emits:["update:modelValue","on-toggle","on-search"],setup(a,{emit:s}){const t=a;let n=!1;const c=e.computed({get(){return t.modelValue},set(m){s("update:modelValue",m)}}),o=e.computed({get(){return t.open},set(m){s("on-toggle",m)}}),d=e.computed(()=>o.value?"ios-arrow-up":"ios-arrow-down");function r(){n||(n=!0,s("on-search",c.value),re(()=>{n=!1},2e3))}return(m,f)=>{const u=e.resolveComponent("Input"),y=e.resolveComponent("icon");return e.openBlock(),e.createElementBlock("div",{class:"tableSearchV",style:e.normalizeStyle({position:t.fixed?"fixed":"absolute",right:t.right,top:t.top})},[e.renderSlot(m.$slots,"default",{},()=>[e.createVNode(u,{modelValue:e.unref(c),"onUpdate:modelValue":f[0]||(f[0]=x=>e.isRef(c)?c.value=x:null),style:e.normalizeStyle({width:t.width}),search:"",onOnSearch:r,class:"searchInputC",placeholder:t.placeholder||e.unref(L)("r.pInput")},null,8,["modelValue","style","placeholder"])]),e.withDirectives(e.createElementVNode("span",{class:"sbt",onClick:f[1]||(f[1]=x=>o.value=!e.unref(o)),style:e.normalizeStyle({color:t.btnColor})},[e.createVNode(y,{type:e.unref(d),color:t.btnColor},null,8,["type","color"]),e.createTextVNode(e.toDisplayString(e.unref(L)("r.adSearch")),1)],4),[[e.vShow,t.showBtn]])],4)}}}),vl={class:"tabSetF"},ql={class:"topCheck"},Jt=e.defineComponent({__name:"TableSetting",props:{modelValue:{default:()=>[]},sKey:{},top:{default:"30px"},right:{default:"0"},width:{default:"150px"},bg:{default:"#ccc"},defaultCheck:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(a,{emit:s}){const t=a,n=e.ref(!0),c=e.ref(!1),o=e.ref(!1),d=e.ref([]),r=e.computed(()=>{let h=L("r.unknown");return t.modelValue.length>d.value.length&&(d.value=M.cloneDeep(t.modelValue)),d.value.map(S=>{let T={label:S&&S.title||h};return S&&S.disableShowSetting&&(T.disabled=!0),T})}),m=e.computed(()=>r.value.filter(h=>h.disabled)),f=e.computed({get(){return t.modelValue.map(h=>h&&h.title||L("r.unknown"))},set(h){let S=d.value.filter(T=>{for(let k of h)if(k===T.title)return!0;return!1});s("update:modelValue",S)}}),{locale:u}=Bl.useI18n();e.onMounted(()=>{let h=L("r.unknown"),S;u.value?S=localStorage.getItem(t.sKey+"_"+u.value):S=localStorage.getItem(t.sKey),S?f.value=JSON.parse(decodeURI(S)):t.defaultCheck&&(f.value=t.modelValue.filter(T=>T.showSettingCheck).map(T=>T&&T.title||h))});function y(h){h.length===r.value.length?(n.value=!1,c.value=!0):h.length>m.value.length?(n.value=!0,c.value=!1):(n.value=!1,c.value=!1)}e.watch(()=>f.value,y,{immediate:!0,deep:!0});function x(){o.value||(o.value=!0)}function C(){u.value?localStorage.setItem(t.sKey+"_"+u.value,encodeURI(JSON.stringify(f.value))):localStorage.setItem(t.sKey,encodeURI(JSON.stringify(f.value))),o.value=!1}function V(){n.value?c.value=!1:c.value=!c.value,n.value=!1,c.value?f.value=r.value.map(h=>h.label):f.value=m.value.map(h=>h.label)}return(h,S)=>{const T=e.resolveComponent("Icon"),k=e.resolveComponent("Checkbox"),w=e.resolveComponent("CheckboxGroup");return e.openBlock(),e.createElementBlock("div",vl,[e.createElementVNode("div",{class:"tabSetBt",onClick:x},[e.createVNode(T,{type:"md-settings",size:"17"}),e.createElementVNode("span",null,e.toDisplayString(e.unref(L)("r.tabSetting")),1)]),e.withDirectives(e.createElementVNode("div",{class:"tabSetCard",style:e.normalizeStyle({top:t.top,right:t.right,width:t.width,backgroundColor:t.bg})},[e.createElementVNode("div",ql,[e.createVNode(k,{indeterminate:e.unref(n),modelValue:e.unref(c),"onUpdate:modelValue":S[0]||(S[0]=_=>e.isRef(c)?c.value=_:null),onClick:e.withModifiers(V,["prevent"])},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(L)("r.all")),1)]),_:1},8,["indeterminate","modelValue","onClick"]),e.createElementVNode("span",{style:{cursor:"pointer",float:"right"},onClick:C},e.toDisplayString(e.unref(L)("r.confirm")),1)]),e.createVNode(w,{modelValue:e.unref(f),"onUpdate:modelValue":S[1]||(S[1]=_=>e.isRef(f)?f.value=_:null)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),(_,N)=>(e.openBlock(),e.createBlock(k,{class:"setItem",label:_&&_.label,key:"tabSet_"+t.sKey+N,disabled:_&&_.disabled},null,8,["label","disabled"]))),128))]),_:1},8,["modelValue"])],4),[[e.vShow,e.unref(o)]])])}}});let Be=0,Ne=document.createElement("div");Ne.setAttribute("class","spinModal"),Ne.innerHTML='<div class="loader"><svg class="circular" viewBox="25 25 50 50"><circle class="path" cx="50" cy="50" r="20" fill="none" stroke-width="5" stroke-miterlimit="10" /></svg></div>',window.onload=function(){document.getElementsByTagName("body")[0].append(Ne)};function Xt(a){a?Ne.classList.add("show"):Ne.classList.remove("show")}function Qt(a){let s=Be;a?Be++:Be>0&&Be--,s!==Be&&(Be===0?Xt(!1):s===0&&Xt(!0))}const Yl=window.location.origin;let Ce=null;const Zt=(...a)=>he.apply(Ce,a);let fe=ve.create({baseURL:Yl,withCredentials:!0});function Jl(){console.info("store为空，请在安装插件时传入store实例：Vue.use(plugRQw,{store:store})，Pinia传{store:useStore}")}fe.interceptors.request.use(a=>a,a=>Promise.reject(a));function el(){var a,s;if(fe.store)if(typeof fe.store=="function"){const t=fe.store();t.logout&&t.logout()}else(s=(a=fe.store)==null?void 0:a.dispatch)==null||s.call(a,"logout");else Jl()}fe.interceptors.response.use(a=>{var s,t;return Ce&&(((s=a==null?void 0:a.data)==null?void 0:s.code)===403||((t=a==null?void 0:a.data)==null?void 0:t.code)===409)&&Ce.messageBox({content:Zt("r.http."+a.data.code),onOk:el}),a},a=>{var s,t;return Ce&&(((s=a==null?void 0:a.response)==null?void 0:s.status)===403||((t=a==null?void 0:a.response)==null?void 0:t.status)===409)&&Ce.messageBox({content:Zt("r.http."+a.response.status),onOk:el}),console.warn("请求出错：",a),Promise.reject(a)});function ge(a,s,t,n){n&&n.spin&&Qt(!1);let c=!0,o=a&&a.data;if(o){t=t||[];for(let d of t)o=o[d],c=c&&o;return c?o:(s&&console.warn(s),!1)}return s&&console.warn(s),!1}function Xl(a,s,t,n,c,o,d){return new Promise((r,m)=>{switch(a){case"get":fe.get(s,{params:t}).then(u=>{let y=ge(u,n,c,o);y?r(y):m(u)}).catch(u=>{ge({},n,c,o),m(u)});break;case"delete":let f=d?"params":"data";fe.delete(s,{[f]:t}).then(u=>{let y=ge(u,n,c,o);y?r(y):m(u)}).catch(u=>{ge({},n,c,o),m(u)});break;case"post":fe.post(s,t,o).then(u=>{let y=ge(u,n,c,o);y?r(y):m(u)}).catch(u=>{ge({},n,c,o),m(u)});break;case"put":fe.put(s,t,o).then(u=>{let y=ge(u,n,c,o);y?r(y):m(u)}).catch(u=>{ge({},n,c,o),m(u)});break}})}function Ge(a,s,t={},n,c,o,d){return new Promise((r,m)=>{var f;if(s){o&&o.spin&&Qt(!0);let u=s;if(window&&window.hasOwnProperty("g")){const C=window.g;let V=Object.keys(C).filter(h=>h.indexOf("URL")>-1).map(h=>h.replace("URL",""));for(let h of V){let S=new RegExp("^/"+h+"(?=/.*$)","i");if(S.test(s)&&C[h+"URL"]){u=C[h+"URL"]+s.replace(S,"");break}}}let y;if(((f=o==null?void 0:o.headers)==null?void 0:f["Content-Type"])==="multipart/form-data")y=t;else if(t&&!M.isEmpty(t))if(Array.isArray(t)){y=[];for(let C of t)(C||C===0||C===!1||C===""&&o&&!o.noEmptyStr)&&y.push(C)}else{y={};for(let C in t)t.hasOwnProperty(C)&&(t[C]||t[C]===0||t[C]===!1||t[C]===""&&o&&!o.noEmptyStr)&&(y[C]=t[C])}let x=a.toLowerCase();Xl(x,u,y,n,c,o,d).then(C=>{r(C)}).catch(C=>{m(C)})}else console.error("没有请求地址:url"),m("没有请求地址:url")})}const ue={init(a,s){fe.store=a,Ce=s.config.globalProperties},post(a,s,t,n,c){return new Promise((o,d)=>{Ge("post",a,s,t,n,c).then(r=>{o(r)}).catch(r=>{d(r)})})},put(a,s,t,n,c){return new Promise((o,d)=>{Ge("put",a,s,t,n,c).then(r=>{o(r)}).catch(r=>{d(r)})})},get(a,s,t,n,c){return new Promise((o,d)=>{Ge("get",a,s,t,n,c).then(r=>{o(r)}).catch(r=>{d(r)})})},delete(a,s,t,n,c,o=!0){return new Promise((d,r)=>{Ge("delete",a,s,t,n,c,o).then(m=>{d(m)}).catch(m=>{r(m)})})},all:ve.all,spread:ve.spread,config:fe},Ql={class:"btTablePage fullHeight",ref:"tableBox"},Zl={class:"topBtn"},en={class:"fullHeight relativeBox"},tn={ref:"tableContainerLOI",class:"fullFlowContent"},ln={class:"pageContainer"},nn=300,He=e.defineComponent({__name:"BtTablePage",props:{url:{default:""},searchData:{default:()=>({})},columns:{default:()=>[]},dataHandler:{},selection:{type:Boolean,default:!1},radio:{type:Boolean,default:!1},selectionFixed:{type:[String,Boolean],default:!1},rowClickSelect:{type:Boolean,default:!0},data:{default:()=>[]},pageSize:{default:10},sortable:{default:""},initData:{type:Boolean,default:!0},highlightRow:{type:Boolean,default:!1},rowClickNum:{default:-1},tableEmptyTdHandle:{type:Boolean,default:!1},noBorderTable:{type:Boolean,default:!1},noPage:{type:Boolean,default:!1},orderDefault:{default:"desc"},orderKey:{default:"id"},orderKeyFormat:{default:"underline"},getDataLoading:{type:Boolean,default:!1},showTopRow:{type:Boolean,default:!1},lightHead:{type:Boolean,default:!1},pageComponentSize:{default:"default"},noElevator:{type:Boolean,default:!1}},emits:["on-selection-change","on-data-change"],setup(a,{expose:s,emit:t}){const n=a,{globalProperties:c}=e.getCurrentInstance().appContext.config;({...{showSettingCheck:!1,disableShowSetting:!1},...se.TableColumnConfig});const d=c.pageSizes||[10,20,30,40],r=e.ref(n.data),m=e.ref(localStorage.getItem("btPageSize")&&Number(localStorage.getItem("btPageSize"))||n.pageSize),f=e.ref(1),u=e.ref(0);let y=[],x,C,V=n.orderKey,h=n.orderDefault;const S=e.computed(()=>{for(let E of n.columns)if(E.fixed)return!0;return!1}),T=e.computed(()=>n.selectionFixed||S.value),k=e.computed(()=>{let E={...n.searchData,current:f.value,size:m.value};return n.sortable==="custom"&&(n.orderKeyFormat==="underline"?E[h]=Ze(V):n.orderKeyFormat==="camelcase"&&(E[h]=Ye(V))),E}),w=e.computed(()=>{let E=n.columns.filter(F=>F.type!=="selection");if(n.selection||n.radio){let F;n.radio?F={title:" ",width:65,render:(te,Q)=>e.h(se.Radio,{value:Q.row.btChecked})}:F={type:"selection",width:60},n.selectionFixed&&(F.fixed=n.selectionFixed),E.unshift(F)}return E.forEach(F=>{n.sortable==="custom"?F.key&&F.sortable!==!0&&F.sortable!==!1&&(F.sortable="custom"):F.sortable=!1,F.align||(F.align="center")}),n.tableEmptyTdHandle&&E.forEach(F=>{F.key&&F.render===void 0&&(F.tooltip?F.render=tt(F.key,!0):F.render=(te,Q)=>{let oe=Q.row[F.key];return te("span",oe===""||oe===null||oe===void 0?"--":oe)})}),E}),_=e.computed({get(){return r.value.map((E,F)=>({btKey:"bt-"+F,btChecked:!1,...E}))},set(E){r.value=E}}),N=e.computed(()=>y.map(E=>E.id)),D=e.computed(()=>y.map(E=>E.btKey)),p=e.ref();e.watch(()=>n.searchData,I,{deep:!0});function I(){f.value=1,ye()}function g(){n.initData&&ye()}function O(E){r.value.unshift(M.cloneDeep(E)),re(()=>{var F,te;(te=(F=p.value)==null?void 0:F.clickCurrentRow)==null||te.call(F,0)},100)}function U(E,F,te){let Q=null;if(M.isBoolean(F)&&F?Q=C:M.isNumber(F)&&(Q=F),Q!==null){let oe=r.value[Q];for(let H in E)E.hasOwnProperty(H)&&(oe[H]=E[H]);te&&re(()=>{var H,pe;(pe=(H=p.value)==null?void 0:H.clickCurrentRow)==null||pe.call(H,Q)},10)}}function W(E){r.value.splice(E,1),re(()=>{var F,te;(te=(F=p.value)==null?void 0:F.clickCurrentRow)==null||te.call(F,0)},100)}function q(E,F){var te,Q;E.btChecked&&n.radio||(n.selection||n.radio)&&n.rowClickSelect&&((Q=(te=p.value)==null?void 0:te.toggleSelect)==null||Q.call(te,F))}function K(E,F){x=F.btKey,C=Number(F.btKey.split("-")[1]),n.radio&&(r.value[C].btChecked=!0)}function ee(E){if(n.radio)for(let F of _.value)F.btKey!==x&&(r.value[Number(F.btKey.split("-")[1])].btChecked=!1);y=E,t("on-selection-change",E)}function le(){return M.cloneDeep(y)}function z(E){f.value=E,ye()}function ne(E){m.value=E,localStorage.setItem("btPageSize",String(E)),f.value===1&&ye()}function Y({key:E,order:F}){h==="normal"?(V=n.orderKey,h=n.orderDefault):(V=E,h=F),f.value=1,X()}function J(){var E,F;if(n.radio){if(D.value.length>0&&_.value.length>0){let te=D.value[0].split("-")[1];_.value[te].btChecked=!1}}else(F=(E=p.value)==null?void 0:E.selectAll)==null||F.call(E,!1);y.length>0&&(y=[],t("on-selection-change",[])),x=null,C=null}function Z(){r.value=[],J(),f.value=1,u.value=0}function X(E,F,te){return new Promise(Q=>{E&&(h=E),F&&(V=F),n.url?ue.get(n.url,k.value,"",[],{spin:n.getDataLoading}).then(oe=>{var pe,je;let H;te||J(),typeof n.dataHandler=="function"?H=n.dataHandler(oe):H=oe,H.data?(H.data.records||H.data.records===null?r.value=H.data.records||[]:H.data.page?(H.data.page.records||H.data.page.records===null)&&(r.value=H.data.page.records||[]):H.data.data?(H.data.data.records||H.data.data.records===null)&&(r.value=H.data.data.records||[]):r.value=H.data,u.value=((pe=H.data.page)==null?void 0:pe.total)||((je=H.data.data)==null?void 0:je.total)||H.data.total||H.total||0,u.value===0&&f.value>1&&r.value&&r.value.length===0?f.value=1:f.value>1&&u.value<=(f.value-1)*m.value&&(f.value--,e.nextTick(function(){X(E,F)})),t("on-data-change",H),Q(H)):(console.warn("请求返回数据有误，无法使用"),Z(),t("on-data-change",H))}).catch(oe=>{console.warn(oe),J(),Z(),t("on-data-change",oe)}):console.warn("没有有效的请求地址，无法获取表格数据")})}function ye(E,F,te){n.radio&&(E||n.rowClickNum!==-1)?X(F,te,E).then(()=>{r.value.length>0&&re(()=>{var Q,oe,H,pe;E?(oe=(Q=p.value)==null?void 0:Q.clickCurrentRow)==null||oe.call(Q,C||0):(pe=(H=p.value)==null?void 0:H.clickCurrentRow)==null||pe.call(H,n.rowClickNum)},10)}):X()}return e.onMounted(g),s({selectedIds:N,addRow:O,setRowData:U,deleteRow:W,getSelected:le,clearSelect:J,clearTableData:Z,getTableData:X,getDataAndClickRow:ye}),(E,F)=>{const te=e.resolveComponent("Table"),Q=e.resolveComponent("Page");return e.openBlock(),e.createElementBlock("div",Ql,[e.withDirectives(e.createElementVNode("div",Zl,[e.renderSlot(E.$slots,"tableSetting"),e.renderSlot(E.$slots,"topMsg"),e.renderSlot(E.$slots,"topBtnGroup")],512),[[e.vShow,n.showTopRow]]),e.createElementVNode("div",{class:e.normalizeClass(["tableContainer fullHeight",{noTop:!n.showTopRow,noPage:n.noPage}])},[e.createElementVNode("div",en,[e.createElementVNode("div",tn,[e.createVNode(te,e.mergeProps({ref_key:"tableRef",ref:p},E.$attrs,{height:e.unref(T)&&nn||null,class:{noBorderTable:n.noBorderTable,fullHeightTable:!e.unref(T),lightHeadO:n.lightHead},columns:e.unref(w),data:e.unref(_),"highlight-row":n.radio||n.highlightRow,onOnSelect:K,onOnSelectionChange:ee,onOnSortChange:Y,onOnRowClick:q}),null,16,["height","class","columns","data","highlight-row"])],512)])],2),e.withDirectives(e.createElementVNode("div",ln,[e.createVNode(Q,{modelValue:e.unref(f),"onUpdate:modelValue":F[0]||(F[0]=oe=>e.isRef(f)?f.value=oe:null),"page-size-opts":e.unref(d),total:e.unref(u),"page-size":e.unref(m),"show-sizer":"","show-total":"",showElevator:!n.noElevator,size:n.pageComponentSize,onOnChange:z,onOnPageSizeChange:ne},null,8,["modelValue","page-size-opts","total","page-size","showElevator","size"])],512),[[e.vShow,!n.noPage]])],512)}}}),st=e.defineComponent({__name:"SelectInput",props:{modelValue:{default:()=>({key:null,val:null})},labelWidth:{default:160},labelTextAlign:{default:"right"},itemWidth:{default:200},selectOption:{default:()=>[]},placeholder:{},clearable:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","on-change"],setup(a,{emit:s}){const t=a,n=e.computed({get(){return t.modelValue&&t.modelValue.key||null},set(f){let u={key:f,val:null};n.value&&n.value!==f&&(u.beforeKey=n.value),s("update:modelValue",u),s("on-change",u)}}),c=e.computed({get(){return t.modelValue&&t.modelValue.val||null},set(f){s("update:modelValue",{key:n.value,val:f})}}),o=e.computed(()=>({width:t.labelWidth+"px",textAlign:t.labelTextAlign})),d=e.computed(()=>({width:t.itemWidth+"px"}));function r(f){var u;((u=f==null?void 0:f.target)==null?void 0:u.value)!==void 0&&m({key:n.value,val:f.target.value})}const m=M.debounce(f=>{s("on-change",f)},500);return(f,u)=>{const y=e.resolveComponent("Option"),x=e.resolveComponent("Select"),C=e.resolveComponent("Input");return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(x,{modelValue:e.unref(n),"onUpdate:modelValue":u[0]||(u[0]=V=>e.isRef(n)?n.value=V:null),style:e.normalizeStyle(e.unref(o)),disabled:!!t.disabled,transfer:""},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.selectOption,(V,h)=>(e.openBlock(),e.createBlock(y,{value:V.val,key:"selectInputOp"+V.value+h,style:e.normalizeStyle({textAlign:t.labelTextAlign})},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(V.label),1)]),_:2},1032,["value","style"]))),128))]),_:1},8,["modelValue","style","disabled"]),e.createVNode(C,{modelValue:e.unref(c),"onUpdate:modelValue":u[1]||(u[1]=V=>e.isRef(c)?c.value=V:null),placeholder:t.placeholder||e.unref(L)("r.pInput"),style:e.normalizeStyle(e.unref(d)),clearable:t.clearable,disabled:!!t.disabled,onOnChange:r},null,8,["modelValue","placeholder","style","clearable","disabled"])])}}});var an=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function on(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var tl={exports:{}};(function(a,s){(function(t,n){a.exports=n()})(an,function(){function t(y){var x=[];return y.AMapUI&&x.push(n(y.AMapUI)),y.Loca&&x.push(c(y.Loca)),Promise.all(x)}function n(y){return new Promise(function(x,C){var V=[];if(y.plugins)for(var h=0;h<y.plugins.length;h+=1)d.AMapUI.plugins.indexOf(y.plugins[h])==-1&&V.push(y.plugins[h]);if(r.AMapUI===o.failed)C("前次请求 AMapUI 失败");else if(r.AMapUI===o.notload){r.AMapUI=o.loading,d.AMapUI.version=y.version||d.AMapUI.version,h=d.AMapUI.version;var S=document.body||document.head,T=document.createElement("script");T.type="text/javascript",T.src="https://webapi.amap.com/ui/"+h+"/main.js",T.onerror=function(k){r.AMapUI=o.failed,C("请求 AMapUI 失败")},T.onload=function(){if(r.AMapUI=o.loaded,V.length)window.AMapUI.loadUI(V,function(){for(var k=0,w=V.length;k<w;k++){var _=V[k].split("/").slice(-1)[0];window.AMapUI[_]=arguments[k]}for(x();m.AMapUI.length;)m.AMapUI.splice(0,1)[0]()});else for(x();m.AMapUI.length;)m.AMapUI.splice(0,1)[0]()},S.appendChild(T)}else r.AMapUI===o.loaded?y.version&&y.version!==d.AMapUI.version?C("不允许多个版本 AMapUI 混用"):V.length?window.AMapUI.loadUI(V,function(){for(var k=0,w=V.length;k<w;k++){var _=V[k].split("/").slice(-1)[0];window.AMapUI[_]=arguments[k]}x()}):x():y.version&&y.version!==d.AMapUI.version?C("不允许多个版本 AMapUI 混用"):m.AMapUI.push(function(k){k?C(k):V.length?window.AMapUI.loadUI(V,function(){for(var w=0,_=V.length;w<_;w++){var N=V[w].split("/").slice(-1)[0];window.AMapUI[N]=arguments[w]}x()}):x()})})}function c(y){return new Promise(function(x,C){if(r.Loca===o.failed)C("前次请求 Loca 失败");else if(r.Loca===o.notload){r.Loca=o.loading,d.Loca.version=y.version||d.Loca.version;var V=d.Loca.version,h=d.AMap.version.startsWith("2"),S=V.startsWith("2");if(h&&!S||!h&&S)C("JSAPI 与 Loca 版本不对应！！");else{h=d.key,S=document.body||document.head;var T=document.createElement("script");T.type="text/javascript",T.src="https://webapi.amap.com/loca?v="+V+"&key="+h,T.onerror=function(k){r.Loca=o.failed,C("请求 AMapUI 失败")},T.onload=function(){for(r.Loca=o.loaded,x();m.Loca.length;)m.Loca.splice(0,1)[0]()},S.appendChild(T)}}else r.Loca===o.loaded?y.version&&y.version!==d.Loca.version?C("不允许多个版本 Loca 混用"):x():y.version&&y.version!==d.Loca.version?C("不允许多个版本 Loca 混用"):m.Loca.push(function(k){k?C(k):C()})})}if(!window)throw Error("AMap JSAPI can only be used in Browser.");var o;(function(y){y.notload="notload",y.loading="loading",y.loaded="loaded",y.failed="failed"})(o||(o={}));var d={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},r={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},m={AMap:[],AMapUI:[],Loca:[]},f=[],u=function(y){typeof y=="function"&&(r.AMap===o.loaded?y(window.AMap):f.push(y))};return{load:function(y){return new Promise(function(x,C){if(r.AMap==o.failed)C("");else if(r.AMap==o.notload){var V=y.key,h=y.version,S=y.plugins;V?(window.AMap&&location.host!=="lbs.amap.com"&&C("禁止多种API加载方式混用"),d.key=V,d.AMap.version=h||d.AMap.version,d.AMap.plugins=S||d.AMap.plugins,r.AMap=o.loading,h=document.body||document.head,window.___onAPILoaded=function(k){if(delete window.___onAPILoaded,k)r.AMap=o.failed,C(k);else for(r.AMap=o.loaded,t(y).then(function(){x(window.AMap)}).catch(C);f.length;)f.splice(0,1)[0]()},S=document.createElement("script"),S.type="text/javascript",S.src="https://webapi.amap.com/maps?callback=___onAPILoaded&v="+d.AMap.version+"&key="+V+"&plugin="+d.AMap.plugins.join(","),S.onerror=function(k){r.AMap=o.failed,C(k)},h.appendChild(S)):C("请填写key")}else if(r.AMap==o.loaded)if(y.key&&y.key!==d.key)C("多个不一致的 key");else if(y.version&&y.version!==d.AMap.version)C("不允许多个版本 JSAPI 混用");else{if(V=[],y.plugins)for(h=0;h<y.plugins.length;h+=1)d.AMap.plugins.indexOf(y.plugins[h])==-1&&V.push(y.plugins[h]);V.length?window.AMap.plugin(V,function(){t(y).then(function(){x(window.AMap)}).catch(C)}):t(y).then(function(){x(window.AMap)}).catch(C)}else if(y.key&&y.key!==d.key)C("多个不一致的 key");else if(y.version&&y.version!==d.AMap.version)C("不允许多个版本 JSAPI 混用");else{var T=[];if(y.plugins)for(h=0;h<y.plugins.length;h+=1)d.AMap.plugins.indexOf(y.plugins[h])==-1&&T.push(y.plugins[h]);u(function(){T.length?window.AMap.plugin(T,function(){t(y).then(function(){x(window.AMap)}).catch(C)}):t(y).then(function(){x(window.AMap)}).catch(C)})}})},reset:function(){delete window.AMap,delete window.AMapUI,delete window.Loca,d={key:"",AMap:{version:"1.4.15",plugins:[]},AMapUI:{version:"1.1",plugins:[]},Loca:{version:"1.3.2"}},r={AMap:o.notload,AMapUI:o.notload,Loca:o.notload},m={AMap:[],AMapUI:[],Loca:[]}}}})})(tl);var rn=tl.exports;const sn=on(rn);let ct={securityJsCode:"",key:""};function cn({securityJsCode:a,key:s}){ct.securityJsCode=a,ct.key=s}function dn(a){return ct[a]}const dt=e.defineComponent({__name:"InputMap",props:{modelValue:{default:()=>({})},width:{default:"100%"},height:{},placeholder:{},disabled:{type:Boolean,default:!1},showMap:{type:Boolean,default:!0}},emits:["update:modelValue","on-change"],setup(a,{emit:s}){const t=a,n=e.computed({get(){let w;return t.modelValue?t.modelValue.name?w=M.cloneDeep(t.modelValue):w={...t.modelValue,name:null}:w={name:null},w},set(w){s("update:modelValue",M.cloneDeep(w))}}),c=e.computed(()=>M.isNumber(t.width)?t.width+"px":t.width),o=e.computed(()=>M.isNumber(t.height)?t.height+"px":t.height?t.height:M.isNumber(t.width)?t.width*.66+"px":"200px"),d=e.computed(()=>({width:c.value,position:"relative"})),r=e.computed(()=>({width:c.value,height:o.value,marginTop:"6px",opacity:t.showMap?1:0,position:t.showMap?"relative":"absolute",top:t.showMap?0:"-10000px"}));e.watch(()=>t.modelValue,w=>{if(w&&w.lng&&w.lat){if(!V||!h)return;T({lng:w.lng,lat:w.lat,name:w.name})}});const m="mapId"+Math.floor(Math.random()*1e9),f=e.ref(null),u=e.ref(null);let y;function x(){u.value&&u.value.clientHeight<10||!u.value?re(x,300):re(S,100)}let C,V,h;function S(){sn.load({key:dn("key"),version:"2.0",plugins:["AMap.AutoComplete","AMap.Geocoder"]}).then(w=>{C=w,V=new C.Map(m).on("complete",()=>{var N,D,p,I;h=new C.Geocoder,(N=t.modelValue)!=null&&N.lng&&((D=t.modelValue)!=null&&D.lat)&&T({lng:t.modelValue.lng,lat:t.modelValue.lat,name:t.modelValue.name});const _=(I=(p=f.value)==null?void 0:p.$el)==null?void 0:I.children;_&&_.length>1&&new C.AutoComplete({input:_[1]}).on("select",g=>{var O,U,W;(O=g==null?void 0:g.poi)!=null&&O.name&&((U=g.poi.location)!=null&&U.lng&&((W=g.poi.location)!=null&&W.lat)?(T({name:g.poi.name,lng:g.poi.location.lng,lat:g.poi.location.lat}),n.value={name:g.poi.name,lng:g.poi.location.lng,lat:g.poi.location.lat}):V.setCity(g.poi.name,()=>{let q=V.getCenter();T({name:g.poi.name,lng:q.lng,lat:q.lat}),n.value={name:g.poi.name,lng:q.lng,lat:q.lat}})),s("on-change",n.value)}),V.on("hotspotclick",g=>{T({name:g.name,lng:g.lnglat.lng,lat:g.lnglat.lat}),n.value={name:g.name,lng:g.lnglat.lng,lat:g.lnglat.lat}})})})}function T({lng:w,lat:_,name:N}){V.clearMap();let D=new C.LngLat(w,_),p=new C.Marker({map:V,position:D,draggable:!0});V.add(p),k(w,_),p.on("dragend",()=>{let I=p.getPosition();n.value={name:N||null,lng:I.lng,lat:I.lat},k(w,_)}),p.on("click",I=>{y&&y.open(V,I.target.getPosition())}),V.setFitView()}function k(w,_){h.getAddress([w,_],(N,D)=>{N==="complete"&&D.info==="OK"&&D.regeocode&&D.regeocode.formattedAddress?y=new C.InfoWindow({isCustom:!0,content:'<div class="mapInfoWindowIKJ">'+D.regeocode.formattedAddress+"</div>",offset:new C.Pixel(16,-45),closeWhenClickMap:!0}):(y=null,console.warn("地图获取位置信息失败",D))})}return e.onMounted(x),e.onUnmounted(()=>{V&&(V.destroy(),V=null,h=null,y=null)}),(w,_)=>(e.openBlock(),e.createElementBlock("div",{style:e.normalizeStyle(e.unref(d)),class:"containerIKJ"},[e.createVNode(e.unref(se.Input),{ref_key:"mapInputRef",ref:f,modelValue:e.unref(n).name,"onUpdate:modelValue":_[0]||(_[0]=N=>e.unref(n).name=N),class:e.normalizeClass({mapInputIKJ:t.showMap}),placeholder:t.placeholder||e.unref(L)("r.search"),disabled:t.disabled,icon:"ios-search"},null,8,["modelValue","class","placeholder","disabled"]),e.createElementVNode("div",{style:e.normalizeStyle(e.unref(r)),ref_key:"mapRef",ref:u,id:m},null,4)],4))}}),ft=e.defineComponent({__name:"AsyncCascader",props:{modelValue:{},url:{default:(cl=window==null?void 0:window.g)!=null&&cl.mgrURL?window.g.mgrURL+"/web/v1/umc/orgs":""},optionVal:{default:"id"},optionLabel:{default:"name"},optionFilter:{},separator:{default:"/"},onlyLastVal:{type:Boolean,default:!0},onlyLastLabel:{type:Boolean,default:!0},filterable:{type:Boolean,default:!1},placeholder:{default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","on-label-change"],setup(a,{emit:s}){const t=a,n=e.ref([]),c=e.computed({get(){let f=t.modelValue;return Array.isArray(f)?M.cloneDeep(f):M.isNumber(f)?Te({group:n.value,condition:u=>u.value===f,pathKey:"value"}):M.isString(f)?f.split(t.separator):[]},set(f){if(t.onlyLastVal)M.isEmpty(f)?(s("update:modelValue",null),s("on-label-change",null)):s("update:modelValue",M.last(f));else{if(M.isEqual(t.modelValue,f))return;s("update:modelValue",M.cloneDeep(f))}}});function o(){if(!t.url){console.error("没有用于拉取级联数据的有效接口地址");return}ue.get(t.url).then(f=>{var y;let u=null;(y=f==null?void 0:f.data)!=null&&y.records?u=f.data.records:f!=null&&f.data?u=f.data:f&&(u=f),u?(typeof t.optionFilter=="function"&&P(t.optionFilter)==="Function"&&(u=t.optionFilter(u)),n.value=d(u)):console.warn("级联数据错误，不能使用")}).catch(()=>{console.warn("拉取级联数据出错")})}function d(f){let u=[];for(let y of f){let x={value:y[t.optionVal],label:y[t.optionLabel]};y.children&&!M.isEmpty(y.children)&&(x.children=d(y.children)),u.push(x)}return u}function r(f){return t.onlyLastLabel?M.last(f):f.join(t.separator)}function m(f,u){let y="";M.isEmpty(u)||(y=u.map(x=>x.label).join(t.separator)),s("on-label-change",y)}return e.onMounted(o),(f,u)=>{const y=e.resolveComponent("Cascader");return e.openBlock(),e.createBlock(y,{data:e.unref(n),modelValue:e.unref(c),"onUpdate:modelValue":u[0]||(u[0]=x=>e.isRef(c)?c.value=x:null),onOnChange:m,"change-on-select":"",transfer:"",disabled:t.disabled,"render-format":r,placeholder:t.placeholder||e.unref(L)("r.pSelect"),filterable:t.filterable},null,8,["data","modelValue","disabled","placeholder","filterable"])}}}),ut=e.defineComponent({__name:"AlCascaderMC",props:{modelValue:{},level:{default:2},disabled:{type:Boolean,default:!1},transfer:{type:Boolean,default:!0},filterable:{type:Boolean,default:!0},separator:{default:"/"},placeholder:{}},emits:["update:modelValue","on-name-change"],setup(a,{emit:s}){const t=a,n=e.ref(),c=e.computed({get(){if(t.modelValue&&(M.isNumber(t.modelValue)||M.isString(t.modelValue))){let d=String(t.modelValue).trim();if(/^\d*$/.test(d)){let m=d.substring(0,2)+"0000",f,u=o(d);return u.length<7?f=d.substring(0,4)+"00":f=d.substring(0,6),/^8\d+$/.test(d)?[m,u]:[m,f,u]}return d.indexOf(t.separator)!==-1?d.split(t.separator):[d]}else return Array.isArray(t.modelValue)?M.cloneDeep(t.modelValue):(n.value&&(n.value.select=[]),[])},set(d){if(M.isEmpty(d))s("update:modelValue",null),s("on-name-change",null);else{let r=M.last(d),m="",f="";if(r&&(m=r.code),m&&m.length<12){let u=[...m];for(;u.length<12;)u.push(0);m=u.join("")}if(Array.isArray(d)&&(f=d.map(u=>u.name).join(t.separator)),m){if(m===t.modelValue)return;s("update:modelValue",m)}f&&s("on-name-change",f)}}});function o(d){let r=[...d];for(;r[r.length-1]==="0";)r.pop();return r.join("")}return(d,r)=>(e.openBlock(),e.createBlock(e.unref(Cl),e.mergeProps(d.$attrs,{class:"alCascaderMC",ref_key:"alCRef",ref:n,modelValue:e.unref(c),"onUpdate:modelValue":r[0]||(r[0]=m=>e.isRef(c)?c.value=m:null),level:t.level,disabled:t.disabled,placeholder:t.placeholder||e.unref(L)("r.pSelect"),transfer:t.transfer,searchable:t.filterable}),null,16,["modelValue","level","disabled","placeholder","transfer","searchable"]))}});function be(a){var d,r,m;const s=(...f)=>he.apply(this,f),t=s("r.closePreview"),n=s("r.fullImg");let c=M.first(document.getElementsByTagName("body")),o=document.createElement("div");o.setAttribute("class","fullScreenImgByDom"),o.innerHTML=`<div class='previewInner'><img src='${a}' alt='${n}' ><i class='ivu-icon ivu-icon-md-close' title='${t}' ></i></div>`,(r=(d=o.querySelector(".ivu-icon-md-close"))==null?void 0:d.addEventListener)==null||r.call(d,"click",function(){var u;let f=M.first(document.getElementsByTagName("body"));(u=f==null?void 0:f.removeChild)==null||u.call(f,o)}),(m=c==null?void 0:c.appendChild)==null||m.call(c,o)}const fn={class:"previewBoxM"},un={key:0,class:"previewImg"},pn=["src","alt"],mn={class:"deleteModal"},yn={class:"previewBoxM"},hn={key:0,class:"previewImg"},gn=["src","alt"],bn={class:"deleteModal"},kn={class:"customFileListM"},wn={key:0,class:"customFileListItem"},Vn=["onClick","title"],Bn={class:"btBoxJ"},Cn={class:"customFileListM"},Sn={key:0,class:"customFileListItem"},_n=["onClick","title"],An={class:"btBoxJ"},pt=e.defineComponent({__name:"UploadGroup",props:{modelValue:{default:()=>[]},url:{default:(dl=window==null?void 0:window.g)!=null&&dl.mgrURL?window.g.mgrURL+"/web/v1/fsc/file":""},data:{default:()=>({appId:0,moduleId:0,typeId:0})},manualUpload:{type:Boolean,default:!1},maxSize:{default:0},length:{default:0},showUploadList:{type:Boolean,default:!0},withCredentials:{type:Boolean,default:!0},multiple:{type:Boolean,default:!1},format:{default:()=>[]},showImg:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","on-change"],setup(a,{emit:s}){const t=a,n=e.shallowRef([]),c=e.shallowRef([]),o=e.computed(()=>!t.manualUpload&&t.showImg&&f.value?"img":t.manualUpload&&t.showImg&&f.value?"localImg":t.manualUpload&&t.showUploadList&&(!t.showImg||!f.value)?"localList":!t.manualUpload&&t.showUploadList&&(!t.showImg||!f.value)?"list":""),d=e.computed(()=>t.manualUpload?"//jsonplaceholder.typicode.com/posts/":t.url),r=e.computed({get(){if(t.manualUpload)return m.value;{let g=[];for(let O of m.value)typeof O=="object"&&P(O)==="File"?g.push(O):(typeof O=="number"||typeof O=="string")&&g.push({response:{data:[{id:O}]}});return g}},set(g){var O,U,W;if(t.manualUpload)m.value=g;else{let q=[];for(let K of g)(W=(U=(O=K.response)==null?void 0:O.data)==null?void 0:U[0])!=null&&W.id&&q.push(K.response.data[0].id);m.value=q}}}),m=e.computed({get(){switch(typeof t.modelValue){case"number":return[t.modelValue];case"string":return t.modelValue.indexOf("--")!==-1?[]:/^\d*$/.test(t.modelValue)?[Number(t.modelValue)]:[t.modelValue];case"object":return Array.isArray(t.modelValue)?t.modelValue.filter(g=>g!=="--"):P(t.modelValue)==="File"?[t.modelValue]:[];default:return[]}},set(g){if(t.length===1){let O=M.first(g);s("update:modelValue",O??null),s("on-change",O??null)}else s("update:modelValue",M.cloneDeep(g)),s("on-change",M.cloneDeep(g))}}),f=e.computed(()=>{let g;t.manualUpload?g=r.value:g=c.value;for(let O of g){let U;if(t.manualUpload?U=O&&O.type:U=O&&O.mimeType,!U||U&&!xe(U))return!1}return!0});e.watch(()=>r.value,async g=>{var O,U,W,q,K,ee,le,z,ne;if(o.value==="localImg")(g==null?void 0:g.length)>0?n.value=await y(g):n.value=[];else if((g==null?void 0:g.length)>0&&o.value!=="localList"){let Y=[];for(let J of g)if(J.name===void 0)if((W=(U=(O=J.response)==null?void 0:O.data)==null?void 0:U[0])!=null&&W.id){let Z=await ue.get(t.url+"/"+J.response.data[0].id).catch(()=>{Y.push({name:L("r.file")+M.indexOf(g,J)})}),X=M.cloneDeep(J);X.name=((ee=(K=(q=Z==null?void 0:Z.data)==null?void 0:q.returnValue)==null?void 0:K[0])==null?void 0:ee.name)||L("r.file")+M.indexOf(g,J),X.mimeType=((ne=(z=(le=Z==null?void 0:Z.data)==null?void 0:le.returnValue)==null?void 0:z[0])==null?void 0:ne.mimeType)||"unknown",Y.push(X)}else Y.push({name:L("r.unknown")});else Y.push(J);c.value=Y}else c.value=[]},{immediate:!0,deep:!0});function u(g){return g.name||g.split&&M.last(g.split("/"))||g}async function y(g){let O=[];for(let U of g){let W=await Ae(U);O.push(W)}return O}function x(g){if(!t.disabled){let O=r.value;O.splice(g,1),r.value=O}}function C(g){var O,U,W;(W=(U=(O=g==null?void 0:g.response)==null?void 0:O.data)==null?void 0:U[0])!=null&&W.id&&window.open(t.url+"/"+g.response.data[0].id+"/download")}function V(g){var O,U,W;return t.manualUpload?g.type&&xe(g.type):((W=(U=(O=g==null?void 0:g.response)==null?void 0:O.data)==null?void 0:U[0])==null?void 0:W.id)&&g.mimeType&&xe(g.mimeType)}function h(g){t.manualUpload?Ae(g).then(O=>{be(O)}):be(t.url+"/"+g.response.data[0].id+"/download?preview=true")}function S(g){P(g)==="String"&&g.indexOf("http")>-1?window.open(g):P(g)==="File"&&Ae(g).then(O=>{Je(g.name,O)})}function T(g){if(t.manualUpload){if(g){let O=Pe(g.name);if(t.format.length>0&&t.format.indexOf(O)<0)return de(L("r.wrongFileType"),L("r.supportType")+(t.format.length>0&&String(t.format)||L("r.none")),"warning"),!1;if(t.maxSize&&g.size>t.maxSize*1024)return de(L("r.fileIsBig"),L("r.supportSize")+t.maxSize+"kb","warning"),!1;let U=r.value;U.push(g),r.value=U}return!1}else return!0}function k(g){console.warn(g),de(L("r.uploadError"),"","error")}function w(g,O,U){if(g&&g.code===0){let W=r.value;W.push(O),r.value=W}else de(L("r.uploadFail"),g&&g.message||"","error")}function _(){de(L("r.fileIsBig"),L("r.supportSize")+t.maxSize+" kb","warning")}function N(){de(L("r.wrongFileType"),L("r.supportType")+(t.format.length>0&&String(t.format)||L("r.none")),"warning")}function D(g){var W,q,K,ee,le,z;let O=(K=(q=(W=g==null?void 0:g.response)==null?void 0:W.data)==null?void 0:q[0])==null?void 0:K.id,U=(z=(le=(ee=g==null?void 0:g.response)==null?void 0:ee.data)==null?void 0:le[0])==null?void 0:z.mimeType;O&&(P(U)==="String"&&U.indexOf("image")>-1?be(t.url+"/"+O+"/download?preview=true"):window.open(t.url+"/"+O+"/download?preview=true"))}function p(g){var U,W,q;let O=(q=(W=(U=g==null?void 0:g.response)==null?void 0:U.data)==null?void 0:W[0])==null?void 0:q.id;I(null,O)}function I(g,O){if(!t.disabled&&m.value.indexOf(O)!==-1){const U=M.cloneDeep(m.value);let W=r.value;W.splice(U.indexOf(O),1),r.value=W}}return(g,O)=>{const U=e.resolveComponent("Button"),W=e.resolveComponent("Upload"),q=e.resolveComponent("Icon");return e.openBlock(),e.createElementBlock("div",null,[e.createVNode(W,{name:"files",action:e.unref(d),"before-upload":T,"on-error":k,"on-success":w,"on-exceeded-size":_,"on-preview":D,"on-remove":p,"on-format-error":N,data:t.data,"max-size":t.maxSize,"show-upload-list":!1,"with-credentials":t.withCredentials,format:t.format,multiple:t.multiple||!1,disabled:t.length>0&&e.unref(r).length>=t.length||!!t.disabled},{default:e.withCtx(()=>[e.createVNode(U,{icon:"ios-cloud-upload-outline",class:e.normalizeClass({disabledR:t.length>0&&e.unref(r).length>=t.length||!!t.disabled})},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(L)("r.selectFile")),1)]),_:1},8,["class"])]),_:1},8,["action","data","max-size","with-credentials","format","multiple","disabled"]),e.withDirectives(e.createElementVNode("div",fn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(m),K=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:K},[!t.manualUpload&&K!==null?(e.openBlock(),e.createElementBlock("div",un,[e.createElementVNode("img",{src:g.url+"/"+K+"/download?preview=true",alt:K},null,8,pn),e.createElementVNode("div",mn,[e.createVNode(q,{type:"ios-expand",size:"40",class:"previewExpand",title:e.unref(L)("r.fView"),onClick:ee=>e.unref(be)(t.url+"/"+K+"/download?preview=true")},null,8,["title","onClick"]),e.createVNode(q,{type:"ios-trash-outline",size:"40",class:"previewDelete",onClick:ee=>I(ee,K),title:e.unref(L)("r.delete")},null,8,["onClick","title"])])])):e.createCommentVNode("",!0)],64))),128))],512),[[e.vShow,e.unref(o)==="img"&&e.unref(m).length>0]]),e.withDirectives(e.createElementVNode("div",yn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(n),(K,ee)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:"manualImg"+ee},[t.manualUpload&&K!==null?(e.openBlock(),e.createElementBlock("div",hn,[e.createElementVNode("img",{src:K,alt:"manualImg"+ee},null,8,gn),e.createElementVNode("div",bn,[e.createVNode(q,{type:"ios-expand",size:"40",class:"previewExpand",onClick:le=>e.unref(be)(K),title:e.unref(L)("r.fView")},null,8,["onClick","title"]),e.createVNode(q,{type:"ios-trash-outline",size:"40",class:"previewDelete",onClick:le=>x(ee),title:e.unref(L)("r.delete")},null,8,["onClick","title"])])])):e.createCommentVNode("",!0)],64))),128))],512),[[e.vShow,e.unref(o)==="localImg"&&e.unref(n).length>0]]),e.withDirectives(e.createElementVNode("div",kn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),(K,ee)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:"manualItem"+ee},[t.manualUpload&&K!==null?(e.openBlock(),e.createElementBlock("p",wn,[K.name?(e.openBlock(),e.createBlock(q,{key:0,type:e.unref(Ue)(K.name)},null,8,["type"])):e.createCommentVNode("",!0),e.createElementVNode("span",{class:e.normalizeClass(["upNameT",{previewName:V(K)}]),onClick:le=>S(K),title:e.unref(L)("r.download")},e.toDisplayString(u(K)),11,Vn),e.createElementVNode("span",Bn,[V(K)?(e.openBlock(),e.createBlock(q,{key:0,type:"md-qr-scanner",size:"14",class:"listBtH",onClick:le=>h(K),title:e.unref(L)("r.fView")},null,8,["onClick","title"])):e.createCommentVNode("",!0),e.createVNode(q,{type:"ios-close",size:"22",class:"listBtH",onClick:le=>x(ee),title:e.unref(L)("r.delete")},null,8,["onClick","title"])])])):e.createCommentVNode("",!0)],64))),128))],512),[[e.vShow,e.unref(o)==="localList"&&e.unref(r).length>0]]),e.withDirectives(e.createElementVNode("div",Cn,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(c),(K,ee)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:"defaultItem"+ee},[!t.manualUpload&&K!==null?(e.openBlock(),e.createElementBlock("p",Sn,[e.createVNode(q,{type:e.unref(Ue)(K.name)},null,8,["type"]),e.createElementVNode("span",{class:e.normalizeClass(["upNameT",{previewName:V(K)}]),onClick:le=>C(K),title:e.unref(L)("r.download")},e.toDisplayString(K.name||e.unref(L)("r.file")+(ee+1)),11,_n),e.createElementVNode("span",An,[V(K)?(e.openBlock(),e.createBlock(q,{key:0,type:"md-qr-scanner",size:"14",class:"listBtH",onClick:le=>h(K),title:e.unref(L)("r.fView")},null,8,["onClick","title"])):e.createCommentVNode("",!0),e.createVNode(q,{type:"ios-close",size:"22",class:"listBtH",onClick:le=>x(ee),title:e.unref(L)("r.delete")},null,8,["onClick","title"])])])):e.createCommentVNode("",!0)],64))),128))],512),[[e.vShow,e.unref(o)==="list"&&e.unref(c).length>0]])])}}}),xn=e.createElementVNode("div",{class:"bRoot"},null,-1),mt=e.defineComponent({__name:"MonthRange",props:{modelValue:{default:()=>["",""]},placement:{default:"bottom-start"},placeholder:{},options1:{},options2:{},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","on-change"],setup(a,{emit:s}){const t=a,n=e.ref(!1),c=e.ref(!1),o=e.ref(!1),d=e.computed({get(){return t.modelValue&&t.modelValue[0]||null},set(h){s("update:modelValue",[h,r.value]),s("on-change",[h,r.value])}}),r=e.computed({get(){return t.modelValue&&t.modelValue[1]||null},set(h){s("update:modelValue",[d.value,h]),s("on-change",[d.value,h])}}),m=e.computed(()=>(d.value||"")+((d.value||r.value)&&" - "||"")+(r.value||"")),f=e.ref();e.onMounted(()=>{f.value.querySelector(".aRoot .ivu-input-suffix").addEventListener("mouseover",()=>{o.value=!0}),f.value.querySelector(".aRoot .ivu-input-suffix").addEventListener("mouseout",()=>{o.value=!1}),f.value.querySelector(".aRoot .ivu-input-suffix").addEventListener("click",h=>{!t.disabled&&(d.value||r.value)&&(h.stopPropagation(),C())})});function u(){t.disabled||(n.value=!0)}function y(h){d.value=h,n.value=!1,c.value=!0}function x(h){r.value=h,c.value=!1}function C(){s("update:modelValue",[null,null]),s("on-change",[null,null])}function V(){n.value=!1,c.value=!1,d.value&&r.value===null&&(d.value=null)}return(h,S)=>{const T=e.resolveComponent("DatePicker"),k=e.resolveComponent("Icon"),w=e.resolveComponent("Input");return e.openBlock(),e.createElementBlock("div",{class:"monthRangeBoxR",ref_key:"mPickerRef",ref:f},[e.createVNode(T,{open:e.unref(c),modelValue:e.unref(r),transfer:"",type:"month",placement:t.placement,options:t.options2,onOnChange:x,onOnClickoutside:V},{default:e.withCtx(()=>[xn]),_:1},8,["open","modelValue","placement","options"]),e.createVNode(T,{open:e.unref(n),modelValue:e.unref(d),transfer:"",type:"month",placement:t.placement,options:t.options1,onOnChange:y,onOnClickoutside:V},{default:e.withCtx(()=>[e.createElementVNode("div",{onClick:u},[e.createVNode(w,{class:"aRoot",modelValue:e.unref(m),"onUpdate:modelValue":S[0]||(S[0]=_=>e.isRef(m)?m.value=_:null),readonly:"",placeholder:t.placeholder||e.unref(L)("r.selectDate"),disabled:t.disabled},{suffix:e.withCtx(()=>[e.createVNode(k,{type:e.unref(o)&&(e.unref(d)||e.unref(r))&&!t.disabled?"ios-close-circle":"ios-calendar-outline"},null,8,["type"])]),_:1},8,["modelValue","placeholder","disabled"])])]),_:1},8,["open","modelValue","placement","options"])],512)}}}),Tn={class:"editor-pro-root"},yt=e.defineComponent({__name:"EditorPro",props:{modelValue:{default:"<p></p>"},toolbarConfig:{default:()=>({})},editorConfig:{default:()=>({})},mode:{default:"default"},height:{default:300},imgUploadUrl:{},videoUploadUrl:{},placeholder:{default:""},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","on-change"],setup(a,{emit:s}){const t=a,n=e.shallowRef(),c=e.computed({get(){return t.modelValue},set(f){s("update:modelValue",f),s("on-change",f)}}),o=e.computed(()=>Object.assign({placeholder:t.placeholder||L("r.pInput"),insertKeys:{index:31,keys:["previewX"]}},t.toolbarConfig)),d=e.computed(()=>Object.assign({readOnly:t.disabled,MENU_CONF:{uploadImage:{async customUpload(f,u){let y=new FormData;y.append("files",f);const x=f.name,C=t.imgUploadUrl??"/node-serve/file";ue.post(C,y,null,[],{spin:!0,headers:{"Content-Type":"multipart/form-data"}}).then(V=>{if(V&&V.data)if(Array.isArray(V.data))for(let h of V.data){const S=C+"/"+h.id+"/download";u(S,x,S)}else{const h=C+"/"+V.data.id+"/download";u(h,x,h)}}).catch(()=>{de(L("r.uploadFail"),"","error")})}},uploadVideo:{async customUpload(f,u){let y=new FormData;y.append("files",f);const x=t.videoUploadUrl??"/node-serve/file";ue.post(x,y,null,[],{spin:!0,headers:{"Content-Type":"multipart/form-data"}}).then(C=>{if(C&&C.data)if(Array.isArray(C.data))for(let V of C.data){const h=x+"/"+V.id+"/download";u(h)}else{const V=x+"/"+C.data.id+"/download";u(V)}}).catch(()=>{de(L("r.uploadFail"),"","error")})}}}},t.editorConfig)),r=e.computed(()=>({height:typeof t.height=="number"?t.height+"px":t.height}));function m(f){n.value=f}return e.watch(()=>t.disabled,f=>{f?n.value.disable():n.value.enable()}),e.onBeforeUnmount(()=>{n.value&&n.value.destroy()}),(f,u)=>(e.openBlock(),e.createElementBlock("div",Tn,[e.withDirectives(e.createVNode(e.unref(Bt.Toolbar),{class:"editor-pro-toolbar",editor:e.unref(n),defaultConfig:e.unref(o),mode:f.mode},null,8,["editor","defaultConfig","mode"]),[[e.vShow,!f.disabled]]),e.createVNode(e.unref(Bt.Editor),{class:"editor-pro-editor",modelValue:e.unref(c),"onUpdate:modelValue":u[0]||(u[0]=y=>e.isRef(c)?c.value=y:null),defaultConfig:e.unref(d),mode:f.mode,onOnCreated:m,style:e.normalizeStyle(e.unref(r))},null,8,["modelValue","defaultConfig","mode","style"])]))}}),Ln={key:19,class:"formInfoTxtXN"},Nn={key:20,class:"formTitleTxtXN"},ll=e.defineComponent({__name:"ItemR",props:{item:{},itemStyle:{},valGroup:{},tempKeys:{},inline:{type:Boolean},disabled:{type:Boolean},labelWidth:{},itemWidth:{},mgrUrl:{},uploadUrl:{}},emits:["item-change","re-validate","select-input-change","al-name-change","async-label-change"],setup(a,{emit:s}){const t=a;function n(f){return{withInfo:!!f.info,withTitle:!!f.title,inlineFormItemXN:t.inline,noLabel:f.type==="selectInput",[f.class]:f.class,slotInput:f.slotPosition}}function c(f,u){s("item-change",{e:f,root:u})}function o(f,u){s("re-validate",{e:f,root:u})}function d(f){s("select-input-change",f)}function r(f,u){s("al-name-change",{name:f,root:u})}function m(f,u){s("async-label-change",{label:f,root:u})}return(f,u)=>{const y=e.resolveComponent("InputNumber"),x=e.resolveComponent("Input"),C=e.resolveComponent("Option"),V=e.resolveComponent("Select"),h=e.resolveComponent("Radio"),S=e.resolveComponent("Icon"),T=e.resolveComponent("RadioGroup"),k=e.resolveComponent("Checkbox"),w=e.resolveComponent("CheckboxGroup"),_=e.resolveComponent("DatePicker"),N=e.resolveComponent("TimePicker"),D=e.resolveComponent("FormItem");return e.openBlock(),e.createBlock(D,{label:t.item.type!=="radio"&&t.item.type!=="checkbox"?t.item.label:" ",prop:t.item.key||"",class:e.normalizeClass(["relativeBox",n(t.item)])},{default:e.withCtx(()=>[t.item.type==="txt"?(e.openBlock(),e.createElementBlock("div",{key:0,style:e.normalizeStyle([t.itemStyle,{display:"inline-block"}]),class:e.normalizeClass({likeInputX:t.item.likeInput,disabled:!!t.item.disabled||t.disabled})},e.toDisplayString(t.item.valKey?t.valGroup[t.item.valKey]||"无":t.item.val),7)):t.item.type==="inputNumber"?(e.openBlock(),e.createBlock(y,{key:1,style:e.normalizeStyle(t.itemStyle),modelValue:t.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[0]||(u[0]=p=>t.tempKeys[t.item.tempKey]=p),max:t.item.max||t.item.max===0?t.item.max:1/0,min:t.item.min||t.item.min===0?t.item.min:-1/0,precision:t.item.precision,step:t.item.step||1,placeholder:t.item.placeholder||e.unref(L)("r.pInput"),disabled:!!t.item.disabled||t.disabled,readonly:!!t.item.readonly,editable:t.item.editable!==!1,onOnBlur:u[1]||(u[1]=p=>c(p,t.item)),"active-change":!!t.item.activeChange,clearable:t.item.clearable!==!1},null,8,["style","modelValue","max","min","precision","step","placeholder","disabled","readonly","editable","active-change","clearable"])):t.item.type==="input"?(e.openBlock(),e.createBlock(x,{key:2,style:e.normalizeStyle(f.itemStyle),modelValue:t.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[2]||(u[2]=p=>t.tempKeys[t.item.tempKey]=p),maxlength:t.item.maxLength||null,password:!!t.item.password,icon:t.item.icon,prefix:t.item.prefix,suffix:t.item.suffix,placeholder:t.item.placeholder||e.unref(L)("r.pInput"),disabled:!!t.item.disabled||t.disabled,onOnBlur:u[3]||(u[3]=p=>c(p,t.item)),clearable:t.item.clearable!==!1},e.createSlots({_:2},[t.item.slotPosition&&t.item.slotName?{name:t.item.slotPosition,fn:e.withCtx(()=>[e.renderSlot(f.$slots,t.item.slotName)]),key:"0"}:void 0,t.item.slotPosition!=="prepend"&&t.item.prepend?{name:"prepend",fn:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(t.item.prepend),1)]),key:"1"}:void 0,t.item.slotPosition!=="append"&&t.item.append?{name:"append",fn:e.withCtx(()=>[e.createElementVNode("span",null,e.toDisplayString(t.item.append),1)]),key:"2"}:void 0]),1032,["style","modelValue","maxlength","password","icon","prefix","suffix","placeholder","disabled","clearable"])):t.item.type==="select"?(e.openBlock(),e.createBlock(V,{key:3,modelValue:f.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[4]||(u[4]=p=>f.tempKeys[t.item.tempKey]=p),style:e.normalizeStyle(f.itemStyle),filterable:t.item.filterable===!0||t.item.filterable===!1?t.item.filterable:!1,disabled:!!t.item.disabled||t.disabled,multiple:!!t.item.multiple,placeholder:t.item.placeholder||e.unref(L)("r.pSelect"),onOnChange:u[5]||(u[5]=p=>c(p,t.item)),transfer:"",clearable:t.item.clearable!==!1},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.item.options,(p,I)=>(e.openBlock(),e.createBlock(C,{value:p.val,label:p.label||p.val,key:"option-"+t.item.key+I,disabled:!!p.disabled},null,8,["value","label","disabled"]))),128))]),_:1},8,["modelValue","style","filterable","disabled","multiple","placeholder","clearable"])):t.item.type==="selectInput"?(e.openBlock(),e.createBlock(st,{key:4,modelValue:f.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[6]||(u[6]=p=>f.tempKeys[t.item.tempKey]=p),"label-width":f.labelWidth,"item-width":f.itemWidth,"select-option":t.item.options||[],placeholder:t.item.placeholder||e.unref(L)("r.pInput"),clearable:t.item.clearable!==!1,disabled:!!t.item.disabled||t.disabled,onOnChange:d},null,8,["modelValue","label-width","item-width","select-option","placeholder","clearable","disabled"])):t.item.type==="alCascader"?(e.openBlock(),e.createBlock(ut,{key:5,style:e.normalizeStyle(f.itemStyle),class:"inlineBlock",modelValue:t.valGroup[t.item.key],"onUpdate:modelValue":u[7]||(u[7]=p=>t.valGroup[t.item.key]=p),level:t.item.level||t.item.level===0?t.item.level:2,disabled:!!t.item.disabled||t.disabled,filterable:t.item.filterable!==!1,placeholder:t.item.placeholder||e.unref(L)("r.pSelect"),"change-on-select":!!t.item.changeOnSelect,onOnNameChange:u[8]||(u[8]=p=>r(p,t.item))},null,8,["style","modelValue","level","disabled","filterable","placeholder","change-on-select"])):t.item.type==="asyncCascader"?(e.openBlock(),e.createBlock(ft,{key:6,style:e.normalizeStyle(f.itemStyle),modelValue:t.valGroup[t.item.key],"onUpdate:modelValue":u[9]||(u[9]=p=>t.valGroup[t.item.key]=p),url:t.item.url||f.mgrUrl+"/web/v1/umc/orgs","option-val":t.item.optionVal||"id","option-label":t.item.optionLabel||"name","option-filter":t.item.optionFilter||null,"only-last-val":t.item.onlyLastVal!==!1,"only-last-label":t.item.onlyLastLabel!==!1,separator:t.item.separator||"/",placeholder:t.item.placeholder||e.unref(L)("r.pSelect"),filterable:!!t.item.filterable,disabled:!!t.item.disabled||t.disabled,onOnLabelChange:u[10]||(u[10]=p=>m(p,t.item))},null,8,["style","modelValue","url","option-val","option-label","option-filter","only-last-val","only-last-label","separator","placeholder","filterable","disabled"])):t.item.type==="radio"?(e.openBlock(),e.createBlock(h,{key:7,modelValue:t.valGroup[t.item.key],"onUpdate:modelValue":u[11]||(u[11]=p=>t.valGroup[t.item.key]=p),disabled:!!t.item.disabled||t.disabled,onOnChange:u[12]||(u[12]=p=>c(p,t.item))},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t.item.label),1)]),_:1},8,["modelValue","disabled"])):t.item.type==="radioGroup"?(e.openBlock(),e.createBlock(T,{key:8,style:e.normalizeStyle(f.itemStyle),onOnChange:u[13]||(u[13]=p=>o(p,t.item)),type:t.item.buttonType?"button":null,modelValue:f.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[14]||(u[14]=p=>f.tempKeys[t.item.tempKey]=p)},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.item.options,p=>(e.openBlock(),e.createBlock(h,{key:"radioItem"+p.val,label:p.val,border:!!t.item.itemBorder,disabled:!!t.item.disabled||t.disabled||p.disabled},{default:e.withCtx(()=>[p.icon&&!t.item.buttonType?(e.openBlock(),e.createBlock(S,{key:0,type:p.icon},null,8,["type"])):e.createCommentVNode("",!0),e.createElementVNode("span",null,e.toDisplayString(p.label||p.val),1)]),_:2},1032,["label","border","disabled"]))),128))]),_:1},8,["style","type","modelValue"])):t.item.type==="checkbox"?(e.openBlock(),e.createBlock(k,{key:9,modelValue:t.valGroup[t.item.key],"onUpdate:modelValue":u[15]||(u[15]=p=>t.valGroup[t.item.key]=p),disabled:!!t.item.disabled,onOnChange:u[16]||(u[16]=p=>c(p,t.item))},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(t.item.label),1)]),_:1},8,["modelValue","disabled"])):t.item.type==="checkboxGroup"?(e.openBlock(),e.createBlock(w,{key:10,style:e.normalizeStyle(f.itemStyle),modelValue:f.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[17]||(u[17]=p=>f.tempKeys[t.item.tempKey]=p),onOnChange:u[18]||(u[18]=p=>o(p,t.item))},{default:e.withCtx(()=>[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.item.options,p=>(e.openBlock(),e.createBlock(k,{key:"checkItem"+p.val,label:p.val,disabled:!!t.item.disabled||t.disabled||p.disabled},{default:e.withCtx(()=>[p.icon?(e.openBlock(),e.createBlock(S,{key:0,type:p.icon},null,8,["type"])):e.createCommentVNode("",!0),e.createElementVNode("span",null,e.toDisplayString(p.label||p.val),1)]),_:2},1032,["label","disabled"]))),128))]),_:1},8,["style","modelValue"])):t.item.type==="textarea"?(e.openBlock(),e.createBlock(x,{key:11,type:"textarea",modelValue:f.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[19]||(u[19]=p=>f.tempKeys[t.item.tempKey]=p),autosize:t.item.autosize||{minRows:2},style:e.normalizeStyle(f.itemStyle),maxlength:t.item.maxLength||null,"show-word-limit":!!t.item.showWordLimit,placeholder:t.item.placeholder||e.unref(L)("r.pInput"),disabled:!!t.item.disabled||t.disabled,onOnBlur:u[20]||(u[20]=p=>c(p,t.item)),clearable:t.item.clearable!==!1},null,8,["modelValue","autosize","style","maxlength","show-word-limit","placeholder","disabled","clearable"])):t.item.type==="upload"?(e.openBlock(),e.createBlock(pt,{key:12,style:e.normalizeStyle(f.itemStyle),class:"inlineBlock",modelValue:t.valGroup[t.item.key],"onUpdate:modelValue":u[21]||(u[21]=p=>t.valGroup[t.item.key]=p),url:t.item.url||f.uploadUrl,"manual-upload":!!t.item.manualUpload,format:t.item.format||[],data:t.item.data,"max-size":t.item.maxSize||0,"show-img":!!t.item.showImg,length:t.item.length||0,disabled:!!t.item.disabled||t.disabled,"with-credentials":t.item.withCredentials!==!1,onOnFileIdChange:u[22]||(u[22]=p=>o(p,t.item))},null,8,["style","modelValue","url","manual-upload","format","data","max-size","show-img","length","disabled","with-credentials"])):t.item.type==="date"?(e.openBlock(),e.createBlock(_,{key:13,style:e.normalizeStyle(f.itemStyle),modelValue:f.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[23]||(u[23]=p=>f.tempKeys[t.item.tempKey]=p),type:t.item.dateType,disabled:!!t.item.disabled||t.disabled,placement:"bottom-end",placeholder:t.item.placeholder||e.unref(L)("r.selectDate"),options:t.item.dateOptions||null,clearable:t.item.clearable!==!1,editable:!1,transfer:"",onOnChange:u[24]||(u[24]=p=>c(p,t.item))},null,8,["style","modelValue","type","disabled","placeholder","options","clearable"])):t.item.type==="time"?(e.openBlock(),e.createBlock(N,{key:14,style:e.normalizeStyle(f.itemStyle),modelValue:f.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[25]||(u[25]=p=>f.tempKeys[t.item.tempKey]=p),type:t.item.dateType,disabled:!!t.item.disabled||t.disabled,placement:"bottom-end",placeholder:t.item.placeholder||e.unref(L)("r.selectTime"),steps:t.item.steps||[],clearable:t.item.clearable!==!1,editable:!1,format:t.item.format||"HH:mm:ss",transfer:"",onOnChange:u[26]||(u[26]=p=>c(p,t.item))},null,8,["style","modelValue","type","disabled","placeholder","steps","clearable","format"])):t.item.type==="monthRange"?(e.openBlock(),e.createBlock(mt,{key:15,style:e.normalizeStyle(f.itemStyle),modelValue:f.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[27]||(u[27]=p=>f.tempKeys[t.item.tempKey]=p),disabled:!!t.item.disabled||t.disabled,placement:"bottom-end",placeholder:t.item.placeholder||e.unref(L)("r.selectDate"),options1:t.item.dateOptions1||null,options2:t.item.dateOptions2||null,onOnChange:u[28]||(u[28]=p=>c(p,t.item))},null,8,["style","modelValue","disabled","placeholder","options1","options2"])):t.item.type==="editorPro"?(e.openBlock(),e.createBlock(yt,{key:16,class:"inlineBlock",style:e.normalizeStyle(f.itemStyle),modelValue:t.valGroup[t.item.key],"onUpdate:modelValue":u[29]||(u[29]=p=>t.valGroup[t.item.key]=p),placeholder:t.item.placeholder||e.unref(L)("r.pInput"),disabled:!!t.item.disabled||t.disabled,"toolbar-config":t.item.toolbarConfig||{},"editor-config":t.item.editorConfig||{},mode:t.item.mode||"simple",height:t.item.height||300,onInput:u[30]||(u[30]=p=>c(p,t.item))},null,8,["style","modelValue","placeholder","disabled","toolbar-config","editor-config","mode","height"])):t.item.type==="inputMap"?(e.openBlock(),e.createBlock(dt,{key:17,modelValue:f.tempKeys[t.item.tempKey],"onUpdate:modelValue":u[31]||(u[31]=p=>f.tempKeys[t.item.tempKey]=p),style:e.normalizeStyle(f.itemStyle),placeholder:t.item.placeholder||e.unref(L)("r.search"),disabled:!!t.item.disabled||t.disabled,"show-map":t.item.showMap!==!1,height:t.item.mapHeight||"250px",onOnChange:u[32]||(u[32]=p=>c(p,t.item))},null,8,["modelValue","style","placeholder","disabled","show-map","height"])):t.item.type==="custom"?(e.openBlock(),e.createElementBlock("div",{key:18,class:"inlineBlock",style:e.normalizeStyle(f.itemStyle)},[e.renderSlot(f.$slots,t.item.slotName,{valGroup:t.valGroup})],4)):e.createCommentVNode("",!0),t.item.info?(e.openBlock(),e.createElementBlock("div",Ln,e.toDisplayString(t.item.info),1)):e.createCommentVNode("",!0),t.item.title?(e.openBlock(),e.createElementBlock("div",Nn,e.toDisplayString(t.item.title),1)):e.createCommentVNode("",!0)]),_:3},8,["label","prop","class"])}}}),In=e.createElementVNode("input",{type:"text"},null,-1),On={class:"inlineBlock"},Ie=e.defineComponent({__name:"FormR",props:{formData:{default:()=>[]},formRules:{default:()=>({})},showMessage:{type:Boolean,default:!0},labelWidth:{default:160},contentWidth:{default:"70%"},itemWidth:{default:200},inline:{type:Boolean,default:!1},showLongOkBt:{type:Boolean,default:!1},longOkBtTxt:{},showInlineOkBt:{type:Boolean,default:!1},inlineOkBtTxt:{},showInlineClearBt:{type:Boolean,default:!1},inlineClearBtTxt:{},disabled:{type:Boolean,default:!1},btnLoading:{type:Boolean,default:!1},trim:{type:Boolean,default:!0},teamClass:{default:"formTeamBox"}},emits:["on-item-change","on-reset","on-re-render","on-submit"],setup(a,{expose:s,emit:t}){var wl,Vl;const n=a,c=e.ref(null),o=e.ref({}),d=e.ref([]),r=e.ref({});let m=[];const f=((wl=window==null?void 0:window.g)==null?void 0:wl.mgrURL)??"";let u=[],y=[];const x=e.ref(!1),C=e.ref(Math.random()*1e8+1e3),V=(Vl=window==null?void 0:window.g)!=null&&Vl.mgrURL?window.g.mgrURL+"/web/v1/fsc/file":"/file";let h=!1;const S=e.computed(()=>Array.isArray(n.formData.length?n.formData[0]:!1)),T=e.computed(()=>n.inline?{width:n.itemWidth+n.labelWidth+"px"}:{}),k=e.computed(()=>n.inline?{width:"100%"}:{width:n.contentWidth}),w=e.computed(()=>{let i=M.cloneDeep(n.formRules);for(let l in i)if(i.hasOwnProperty(l))if(Array.isArray(i[l]))for(let B of i[l])B.message||B.validator||(B.message=L("r.required"));else P(i[l])==="Object"&&(i[l].message||i[l].validator||(i[l].message=L("r.required")));return i}),_=e.computed(()=>{let i=[];if(S.value)for(let l of d.value)p(l,i);else p(d.value,i);return i.concat(u,y)}),N=e.computed(()=>{let i=[];if(S.value)for(let l of d.value)I(l,i);else I(d.value,i);return i});function D(i){return i.filter(l=>l.slotName)}function p(i,l){for(let B of i)if(B.showing===!0&&B.key&&B.type!=="selectInput"&&(l.push(B.key),B.key2&&l.push(B.key2),B.collectLabel)){if(!Array.isArray(B.collectLabel)&&B.collectLabel.key)l.push(B.collectLabel.key);else if(Array.isArray(B.collectLabel))for(let b of B.collectLabel)b.key&&l.push(b.key)}}function I(i,l){for(let B of i)B.showing===!0&&B.key&&B.type!=="selectInput"&&l.push(B.key)}function g(){return new Promise(i=>{W(),U().then(()=>{t("on-reset"),i(!0)})})}function O(){return new Promise(i=>{for(let l of m)l();m=[],r.value={},F(),Z(),U().then(()=>{t("on-re-render"),i(!0)})})}function U(){return new Promise(i=>{C.value=Math.floor(Math.random()*1e8+1e3),e.nextTick(function(){i(!0)})})}function W(){let i=ee();for(let l in o.value)if(o.value.hasOwnProperty(l))if(ae(i[l]))o.value[l]=i[l];else if(Array.isArray(o.value[l]))o.value[l]=[];else if(P(o.value[l])==="Boolean")o.value[l]=!1;else{const B=we(n.formData,b=>b.key===l);B&&(B.type==="editor"||B.type==="editorPro")?o.value[l]="":o.value[l]=null}q(i)}function q(i){for(let l in r.value)r.value.hasOwnProperty(l)&&(ae(i[l])?r.value[l]=i[l]:Array.isArray(r.value[l])?r.value[l]=[]:P(r.value[l])==="Object"&&r.value[l].hasOwnProperty("key")&&r.value[l].hasOwnProperty("val")?r.value[l].val=null:r.value[l]=null)}function K(i){let l=ee();ae(l[i])?r.value[i]=l[i]:Array.isArray(r.value[i])?r.value[i]=[]:r.value[i]=null}function ee(){let i={};if(S.value)for(let l of d.value)le(l,i);else le(d.value,i);return i}function le(i,l){for(let B of i)B.tempKey&&ae(B.defaultVal)&&J(B,l),B.key&&ae(B.defaultVal)&&(l[B.key]=B.defaultVal),B.key2&&ae(B.defaultVal2)&&(l[B.key2]=B.defaultVal2)}function z(i){if(i.show){if(P(i.show)==="Object")return Y(i,ne(i.show));if(Array.isArray(i.show))if(i.showOr){for(let l of i.show)if(ne(l)===!0)return Y(i,!0);return Y(i,!1)}else{for(let l of i.show)if(ne(l)===!1)return Y(i,!1);return Y(i,!0)}else if(P(i.show)==="Function")return Y(i,i.show(o.value))}else i.showing||(i.showing=!0);return!0}function ne(i){if(i.reg&&typeof i.reg.test=="function")return i.reg.test(o.value[i.key]);if(Array.isArray(i.val)){for(let l of i.val){if((o.value[i.key]||o.value[i.key]===0||o.value[i.key]===!1)&&l===".")return!0;if(o.value[i.key]===l)return!0}return!1}else return!1}function Y(i,l){return!i.showing&&l&&i.key?(i.showing=l,i.defaultVal!==void 0&&(i.tempKey?(r.value[i.tempKey]===null||r.value[i.tempKey]===void 0||(P(r.value[i.tempKey])==="Object"||Array.isArray(r.value[i.tempKey]))&&M.isEmpty(r.value[i.tempKey]))&&J(i,r.value):(o.value[i.key]===null||o.value[i.key]===void 0)&&(o.value[i.key]=i.defaultVal),i.key2&&i.deafultVal2!==void 0&&(o.value[i.key2]===null||o.value[i.key2]===void 0)&&i.type!=="inputMap"&&(o.value[i.key2]=i.defaultVal2)),i.tempKey&&Q(r.value[i.tempKey],i)):i.showing=l,l}function J(i,l){switch(i.type){case"selectInput":l[i.tempKey]={key:i.key,val:i.defaultVal};break;case"inputMap":i.key3?l[i.tempKey]={lng:i.defaultVal||0,lat:i.defaultVal2||0,name:i.defaultVal3||""}:l[i.tempKey]={lng:i.defaultVal||0,lat:i.defaultVal2||0};break;case"input":case"inputNumber":case"textarea":l[i.tempKey]=i.defaultVal;break;case"radioGroup":case"select":case"checkboxGroup":i.booleanVal?l[i.tempKey]=i.defaultVal?1:0:l[i.tempKey]=i.defaultVal;break;case"date":case"time":case"monthRange":i.dateType==="date"||i.dateType==="datetime"||i.dateType==="time"||i.dateType==="year"||i.dateType==="month"?l[i.tempKey]=i.defaultVal:(i.dateType==="daterange"||i.dateType==="datetimerange"||i.dateType==="timerange"||i.type==="monthRange")&&(l[i.tempKey]=i.defaultVal&&i.defaultVal2&&[i.defaultVal,i.defaultVal2]||[]);break}}function Z(){let i=M.cloneDeep(n.formData);if(S.value)for(let l of i)X(l);else X(i);d.value=i}function X(i){for(let l of i)switch(l.type){case"selectInput":const B="selectInput"+Math.floor(Math.random()*1e8);l.tempKey=B,r.value[B]={key:l.key||null,val:l.defaultVal||null},m.push(e.watch(()=>r.value[B],R=>{Q(R,l)},{immediate:!0}));break;case"inputMap":const b="inputMap"+Math.floor(Math.random()*1e8);l.key&&(l.tempKey=b,l.key3?r.value[b]=l.defaultVal!==void 0&&l.defaultVal2!==void 0?{lng:l.defaultVal,lat:l.defaultVal2,name:l.defaultVal3||""}:{lng:null,lat:null,name:null}:r.value[b]=l.defaultVal!==void 0&&l.defaultVal2!==void 0?{lng:l.defaultVal,lat:l.defaultVal2}:{lng:null,lat:null},m.push(e.watch(()=>r.value[b],R=>{Q(R,l)},{immediate:!0})));break;case"input":case"inputNumber":case"textarea":const v="inputT"+Math.floor(Math.random()*1e8);l.key&&(l.tempKey=v,r.value[v]=l.defaultVal!==void 0?l.defaultVal:null,m.push(e.watch(()=>r.value[v],R=>{Q(R,l)},{immediate:!0})));break;case"select":case"radioGroup":case"checkboxGroup":if(l.options||(l.options=[]),l.asyncOption)if(l.changeOption)if(Array.isArray(l.changeOption)){let R=!0;for(let $ of l.changeOption)if(!$.valKey||!$.key){R=!1;break}R?m.push(e.watch(()=>{let $="";if(Array.isArray(l.changeOption))for(let ie of l.changeOption){let me=o.value[ie.valKey];if(me||me===0||me===!1)$+="&"+ie.key+"="+me;else if(!ie.notRequired)return!1}return $},$=>{let ie=M.cloneDeep(r.value[l.tempKey]);if(r.value[l.tempKey]=null,$&&l.optionUrl){let me=l.optionUrl.indexOf("?")!==-1?l.optionUrl:l.optionUrl+"?";ye((me+$).replace(/\?&/,"?"),l,ie)}else l.options=[],l.localOption&&(l.options=[...l.localOption]),ae(ie)&&E(ie,l)},{immediate:!0})):(l.options=[],l.localOption&&(l.options=[...l.localOption]))}else typeof l.changeOption=="object"?l.changeOption.valKey&&l.changeOption.key&&m.push(e.watch(()=>typeof l.changeOption=="object"&&!Array.isArray(l.changeOption)?o.value[l.changeOption.valKey]:!1,R=>{let $=M.cloneDeep(r.value[l.tempKey]);if(r.value[l.tempKey]=null,(R||R===0||R===!1)&&l.optionUrl&&typeof l.changeOption=="object"&&!Array.isArray(l.changeOption)){let ie=l.optionUrl.indexOf("?")!==-1?l.optionUrl:l.optionUrl+"?";ye((ie+"&"+l.changeOption.key+"="+R).replace(/\?&/,"?"),l,$)}else l.options=[],l.localOption&&(l.options=[...l.localOption]),ae($)&&E($,l)},{immediate:!0})):P(l.changeOption)==="Boolean"&&m.push(e.watch(()=>we(n.formData,R=>R.key===l.key).optionUrl,R=>{let $=M.cloneDeep(r.value[l.tempKey]);r.value[l.tempKey]=null,R?ye(R,l,$):(l.options=[],l.localOption&&(l.options=[...l.localOption]),ae($)&&E($,l))},{immediate:!0}));else l.optionUrl&&ye(l.optionUrl,l);else P(l.borrowOption)==="String"&&(l.options=we(d.value,R=>R.key===l.borrowOption).options);const j="opEle"+Math.floor(Math.random()*1e8);l.key&&(l.tempKey=j,l.type==="select"&&l.multiple||l.type==="checkboxGroup"?r.value[j]=l.defaultVal!==void 0?l.defaultVal:[]:l.booleanVal?r.value[j]=l.defaultVal!==void 0?l.defaultVal?1:0:null:r.value[j]=l.defaultVal!==void 0?l.defaultVal:null,m.push(e.watch(()=>r.value[j],R=>{Q(R,l)},{immediate:!0})));break;case"date":case"time":case"monthRange":const G="date"+Math.floor(Math.random()*1e8);l.tempKey=G,l.dateType==="date"||l.dateType==="datetime"||l.dateType==="time"||l.dateType==="year"||l.dateType==="month"?r.value[G]=l.defaultVal||null:(l.dateType==="daterange"||l.dateType==="datetimerange"||l.dateType==="timerange"||l.type==="monthRange")&&(r.value[G]=l.defaultVal&&l.defaultVal2&&[l.defaultVal,l.defaultVal2]||[]),m.push(e.watch(()=>r.value[G],R=>{Q(R,l)}));break}}function ye(i,l,B){ue.get(i).then(b=>{var j;if(!l.options)return;let v=((j=b==null?void 0:b.data)==null?void 0:j.records)||(b==null?void 0:b.data)||b||[];Array.isArray(v)?(l.optionFilter&&P(l.optionFilter)==="Function"&&(v=l.optionFilter(v)),l.optionLabel&&l.optionVal?(l.options.length=0,l.options.push(...v.map(G=>{let R;if(Array.isArray(l.optionLabel)){let $="";l.optionLabel.forEach((ie,me)=>{let wt=String(G[ie]);me===1?$+="（"+wt:me>1?$+="、"+wt:$+=wt}),R={label:$+"）",val:l.optionVal&&G[l.optionVal]}}else R={label:l.optionLabel&&G[l.optionLabel],val:l.optionVal&&G[l.optionVal]};if(l.collectLabel)if(Array.isArray(l.collectLabel))for(let $ of l.collectLabel)$.valKey&&$.valKey!=="label"&&(R[$.valKey]=G[$.valKey]);else l.collectLabel.valKey&&l.collectLabel.valKey!=="label"&&(R[l.collectLabel.valKey]=G[l.collectLabel.valKey]);if(R.val!==null&&R.val!==void 0)return R}))):(l.options.length=0,l.options.push(...v))):l.options.length=0,l.localOption&&l.options.unshift(...l.localOption),ae(B)&&E(B,l),l.disableOptionByOthers&&(P(l.disableOptionByOthers)==="String"?m.push(e.watch(()=>o.value[l.disableOptionByOthers],G=>{if(K(l.tempKey),!!l.options){for(let R of l.options)R.disabled&&(R.disabled=!1);if(G||G===0||G===!1)for(let R of l.options)R.val===G&&(R.disabled=!0)}},{immediate:!0})):Array.isArray(l.disableOptionByOthers)&&m.push(e.watch(()=>l.disableOptionByOthers.filter(G=>G).map(G=>o.value[G]),G=>{if(K(l.tempKey),!!l.options){for(let R of l.options)R.disabled&&(R.disabled=!1);if(G){for(let R of l.options)for(let $=0;$<G.length;$++)if(R.val===G[$]){R.disabled=!0,G.splice($,1);break}}}},{immediate:!0})))}).catch(()=>{console.warn("拉取选项出错")})}function E(i,l){Array.isArray(l.options)&&M.findIndex(l.options,{val:i})!==-1&&(r.value[l.tempKey]=i)}function F(){if(o.value={},S.value)for(let i of n.formData)te(i);else te(n.formData)}function te(i){for(let l of i)l.key&&(l.type==="checkboxGroup"||l.type==="select"&&l.multiple?o.value[l.key]=l.defaultVal!==void 0&&l.show===void 0?l.defaultVal:[]:l.type==="editor"||l.type==="editorPro"?o.value[l.key]=l.defaultVal!==void 0&&l.show===void 0?l.defaultVal:"":(o.value[l.key]=l.defaultVal!==void 0&&l.show===void 0?l.defaultVal:null,l.key2&&(o.value[l.key2]=l.defaultVal2!==void 0&&l.show===void 0?l.defaultVal2:null)))}function Q(i,l){if(l.showing)switch(l.type){case"selectInput":i&&(i.beforeKey&&delete o.value[i.beforeKey],o.value[i.key]=i.val);break;case"inputMap":if(!l.key||!l.key2)return;i?(o.value[l.key]=i.lng,o.value[l.key2]=i.lat,l.key3&&(o.value[l.key3]=i.name)):(o.value[l.key]=null,o.value[l.key2]=null,l.key3&&(o.value[l.key3]=null));break;case"input":case"inputNumber":case"textarea":if(!l.key)return;if(i||i===0){let v=/^-?\d+(.\d+)?$/;l.numberVal&&v.test(i)?o.value[l.key]=Number(i):o.value[l.key]=i}else o.value[l.key]=null;break;case"select":case"radioGroup":case"checkboxGroup":if(!l.key)return;if(l.booleanVal&&!l.multiple?o.value[l.key]=i===void 0||i===""||i===null?null:!!i:l.multiple||l.type==="checkboxGroup"?o.value[l.key]=Object.assign([],i):o.value[l.key]=i,l.collectLabel){const v=oe(l,i);if(Array.isArray(l.collectLabel)){for(let j of l.collectLabel)if(j.key&&j.valKey){const G=H(j.key);let R=null;Array.isArray(v)?(R=v.map(ie=>ie[j.valKey]),o.value[j.key]=R,G&&(r.value[G]=R)):(v&&ae(v[j.valKey])&&(R=v[j.valKey]),o.value[j.key]=R,G&&(r.value[G]=R));let $=we(d.value,ie=>ie.key===j.key);$&&$.tempKey&&(r.value[$.tempKey]=o.value[j.key])}}else if(typeof l.collectLabel=="object"&&l.collectLabel.key&&l.collectLabel.valKey){const j=H(l.collectLabel.key);let G=null;Array.isArray(v)?(G=v.map($=>l.collectLabel&&!Array.isArray(l.collectLabel)&&$[l.collectLabel.valKey]),o.value[l.collectLabel.key]=G,j&&(r.value[j]=G)):(v&&ae(v[l.collectLabel.valKey])&&(G=v[l.collectLabel.valKey]),o.value[l.collectLabel.key]=G,j&&(r.value[j]=G));let R=we(d.value,$=>l.collectLabel&&!Array.isArray(l.collectLabel)&&$.key===l.collectLabel.key||!1);R&&R.tempKey&&(r.value[R.tempKey]=o.value[l.collectLabel.key])}}break;case"date":case"time":case"monthRange":if(!l.key)return;let B=l.dateType;const b={date:"YYYY-MM-DD",daterange:"YYYY-MM-DD",datetime:"YYYY-MM-DD HH:mm:ss",datetimerange:"YYYY-MM-DD HH:mm:ss",year:"YYYY",month:"MM"};if(B==="date"||B==="datetime"||B==="time"||B==="year"||B==="month")i?(B==="time"?o.value[l.key]=i:o.value[l.key]=_e(i).format(typeof l.format=="string"?l.format:b[B]),B==="date"&&l.addTime&&(o.value[l.key]+=" 00:00:00")):o.value[l.key]=null;else if(l.type==="monthRange"||B==="daterange"||B==="datetimerange"||B==="timerange"){if(!l.key2)return;i&&i[0]&&i[1]?(B==="timerange"?(o.value[l.key]=i[0],o.value[l.key2]=i[1]):l.type==="monthRange"?(o.value[l.key]=typeof l.format=="string"&&_e(i[0]).format(l.format)||i[0],o.value[l.key2]=typeof l.format=="string"&&l.format&&_e(i[1]).format(l.format)||i[1]):(o.value[l.key]=_e(i[0]).format(l.format||B&&b[B]),o.value[l.key2]=_e(i[1]).format(l.format||B&&b[B])),B==="daterange"&&l.addTime&&(o.value[l.key]+=" 00:00:00",o.value[l.key2]+=" 23:59:59")):(o.value[l.key]=null,o.value[l.key2]=null)}break}}function oe(i,l){if(i.options)if(i.multiple||i.type==="checkboxGroup"){if(l){let B=[];for(let b of i.options)l.indexOf(b.val)!==-1&&B.push(b);return B}return!1}else{if(l||l===0||l===!1){for(let B of i.options)if(B.val===l)return B}return!1}}function H(i){if(S.value){for(let l of d.value){const B=pe(l,i);if(B)return B}return!1}return pe(d.value,i)}function pe(i,l){for(let B of i)if(B.key===l)return B.tempKey;return!1}function je(i,l){let B={};for(let b in o.value)o.value.hasOwnProperty(b)&&i[b]!==void 0&&(B[b]=i[b],delete i[b]);ul(B,l);for(let b in i)i.hasOwnProperty(b)&&(y.indexOf(b)<0&&y.push(b),o.value[b]=i[b])}function Yn(i){let l=M.cloneDeep(i);if(S.value){let B=[];for(let b of n.formData)B.push(...fl(b,l));return B}return fl(n.formData,l)}function fl(i,l){return i.filter(B=>{for(let b of Object.keys(l))if(B.key===b&&N.value.indexOf(b)>-1&&!(l[b]===null||(Array.isArray(l[b])||P(l[b])==="Object")&&M.isEmpty(l[b])))return delete l[b],!0;return!1}).map(B=>B.key)}function ul(i,l=!1){let B=M.cloneDeep(i);Jn(i,l);for(let b in o.value)if(o.value.hasOwnProperty(b)&&i[b]!==void 0&&i[b]!=="--"){if(Array.isArray(i[b]))i[b]=i[b].filter(v=>v!=="--");else if(P(i[b])==="Object")for(let v in i[b])i[b].hasOwnProperty(v)&&i[b][v]==="--"&&(i[b][v]=null);o.value[b]=i[b]}else l||(o.value[b]=Array.isArray(o.value[b])?[]:null);ea(Yn(B))}function Jn(i,l=!1){if(S.value)for(let B of d.value)pl(B,i,l);else pl(d.value,i,l)}function pl(i,l,B=!1){for(let b of i)if(b.key&&(B&&(l[b.key]!==void 0||b.key2&&l[b.key2]!==void 0)||!B)&&b.tempKey)switch(b.type){case"inputMap":if(!b.key2)continue;P(l[b.key])==="Number"&&P(l[b.key2]==="Number")?b.key3?r.value[b.tempKey]={lng:l[b.key],lat:l[b.key2],name:l[b.key3]}:r.value[b.tempKey]={lng:l[b.key],lat:l[b.key2]}:b.key3?r.value[b.tempKey]={lng:null,lat:null,name:null}:r.value[b.tempKey]={lng:null,lat:null};break;case"input":case"inputNumber":case"textarea":l[b.key]&&l[b.key]!=="--"||l[b.key]===0?r.value[b.tempKey]=l[b.key]:r.value[b.tempKey]=null;break;case"select":case"radioGroup":case"checkboxGroup":l[b.key]&&l[b.key]!=="--"||l[b.key]===0||l[b.key]===!1?b.multiple||b.type==="checkboxGroup"?r.value[b.tempKey]=[...l[b.key]]:b.booleanVal?r.value[b.tempKey]=l[b.key]?1:0:r.value[b.tempKey]=l[b.key]:b.multiple||b.type==="checkboxGroup"?r.value[b.tempKey]=[]:r.value[b.tempKey]=null;break;case"date":case"time":if(b.dateType==="date"||b.dateType==="datetime"||b.dateType==="year"||b.dateType==="month"||b.dateType==="time")r.value[b.tempKey]=l[b.key]&&l[b.key]!=="--"?l[b.key]:null;else if(b.dateType==="daterange"||b.dateType==="datetimerange"||b.dateType==="timerange"){if(!b.key2)continue;r.value[b.tempKey]=l[b.key]&&l[b.key]!=="--"&&l[b.key2]&&l[b.key2]!=="--"&&[l[b.key],l[b.key2]]||[]}break}}function Xn(i){if(Array.isArray(i))for(let l of i)ml(l);else P(i)==="Object"&&ml(i)}function ml(i){const{index:l,indexB:B,key:b,val:v}=i;if(typeof l=="number")if(Array.isArray(d.value[l])){if(typeof B=="number")if(b&&(v||v!==void 0))d.value[l][B][b]=v;else for(let j of Object.keys(i))j!=="index"&&b!=="indexB"&&(d.value[l][B][j]=i[j])}else if(b&&(v||v!==void 0))d.value[l][b]=v;else for(let j of Object.keys(i))j!=="index"&&(d.value[l][j]=i[j])}function yl({label:i,root:l}){l.key2&&(o.value[l.key2]=i),Se({e:i,root:l})}function hl(i){i.beforeKey&&M.remove(u,l=>l===i.beforeKey),i.key&&(u.indexOf(i.key)===-1&&u.push(i.key),Se({e:null,root:i}))}function gl({name:i,root:l}){l.key2&&(o.value[l.key2]=i),Se({e:i,root:l})}function bl({e:i,root:l}){Se({e:i,root:l}),e.nextTick(function(){var B,b;(b=(B=c.value)==null?void 0:B.validateField)==null||b.call(B,l.key)})}function Se({e:i,root:l}){re(()=>{let B={event:i};if(l.key&&(B[l.key]=o.value[l.key]),l.key2&&(B[l.key2]=o.value[l.key2]),Array.isArray(l.collectLabel))for(let b of l.collectLabel)B[b.key]=o.value[b.key];else l.collectLabel&&l.collectLabel.key&&(B[l.collectLabel.key]=o.value[l.collectLabel.key]);t("on-item-change",B)},500)}function kl(){let i={};for(let l of _.value)i[l]=o.value[l];return n.trim&&(i=Le(i)),i}function Qn(){var i,l;(l=(i=c.value)==null?void 0:i.validate)==null||l.call(i)}function Zn(i){re(()=>{var l,B;(B=(l=c.value)==null?void 0:l.validateField)==null||B.call(l,i,()=>{})},10)}function ea(i){re(()=>{var l,B;if(Array.isArray(i))for(let b of i)(B=(l=c.value)==null?void 0:l.validateField)==null||B.call(l,b,()=>{})},10)}function ta(i){i!==void 0&&(x.value=!!i)}function kt(){var i,l;n.disabled||(l=(i=c.value)==null?void 0:i.validate)==null||l.call(i,B=>{h||(h=!0,B&&(x.value=!0,t("on-submit",kl())),re(()=>{h=!1},2e3))})}return e.onMounted(()=>{F(),Z()}),s({resetForm:g,refreshFormDom:U,reRenderForm:O,setItemToValGroup:je,updateValGroup:ul,updateFormDataT:Xn,validate:Qn,reValidate:Zn,changeLoading:ta,getValGroup:kl,submit:kt}),(i,l)=>{const B=e.resolveComponent("FormItem"),b=e.resolveComponent("Button"),v=e.resolveComponent("Form");return e.openBlock(),e.createBlock(v,{ref_key:"formGroupXRef",ref:c,model:e.unref(o),rules:e.unref(w),"label-width":n.labelWidth,inline:n.inline,"show-message":n.showMessage,class:"formXN",key:e.unref(C)},{default:e.withCtx(()=>[e.createVNode(B,{style:{display:"none"}},{default:e.withCtx(()=>[In]),_:1}),e.unref(S)?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(e.unref(d),(j,G)=>(e.openBlock(),e.createElementBlock("div",{class:e.normalizeClass([i.teamClass,"formTeamBox"+G]),key:"formTeamBox"+G},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(j,(R,$)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:"formItem"+$},[z(R)?(e.openBlock(),e.createBlock(ll,{key:0,item:R,style:e.normalizeStyle(e.unref(T)),"item-style":e.unref(k),"val-group":e.unref(o),"temp-keys":e.unref(r),inline:n.inline,disabled:n.disabled,"label-width":n.labelWidth,"item-width":n.itemWidth,"mgr-url":e.unref(f),"upload-url":e.unref(V),onItemChange:Se,onReValidate:bl,onClearTempKeyItem:K,onSelectInputChange:hl,onAlNameChange:gl,onAsyncLabelChange:yl},e.createSlots({_:2},[e.renderList(D(j),ie=>({name:ie.slotName,fn:e.withCtx(me=>[e.renderSlot(i.$slots,ie.slotName,{valGroup:me.valGroup})])}))]),1032,["item","style","item-style","val-group","temp-keys","inline","disabled","label-width","item-width","mgr-url","upload-url"])):e.createCommentVNode("",!0)],64))),128))],2))),128)):e.createCommentVNode("",!0),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(d),(j,G)=>(e.openBlock(),e.createElementBlock(e.Fragment,{key:"formItem"+G},[!e.unref(S)&&z(j)?(e.openBlock(),e.createBlock(ll,{key:0,item:j,style:e.normalizeStyle(e.unref(T)),"item-style":e.unref(k),"val-group":e.unref(o),"temp-keys":e.unref(r),inline:n.inline,disabled:n.disabled,"label-width":n.labelWidth,"item-width":n.itemWidth,"mgr-url":e.unref(f),"upload-url":e.unref(V),onItemChange:Se,onReValidate:bl,onClearTempKeyItem:K,onSelectInputChange:hl,onAlNameChange:gl,onAsyncLabelChange:yl},e.createSlots({_:2},[e.renderList(D(i.formData),R=>({name:R.slotName,fn:e.withCtx($=>[e.renderSlot(i.$slots,R.slotName,{valGroup:$.valGroup})])}))]),1032,["item","style","item-style","val-group","temp-keys","inline","disabled","label-width","item-width","mgr-url","upload-url"])):e.createCommentVNode("",!0)],64))),128)),n.showLongOkBt?(e.openBlock(),e.createBlock(B,{key:1},{default:e.withCtx(()=>[e.createVNode(b,{onClick:kt,style:e.normalizeStyle(e.unref(k)),type:"primary",loading:n.btnLoading&&e.unref(x),disabled:n.disabled},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.longOkBtTxt||e.unref(L)("r.confirm")),1)]),_:1},8,["style","loading","disabled"])]),_:1})):e.createCommentVNode("",!0),e.createElementVNode("div",On,[n.showInlineOkBt?(e.openBlock(),e.createBlock(b,{key:0,type:"primary",class:e.normalizeClass({inlineFormBtXN:n.inline,okBtnXN:!0}),onClick:kt,loading:n.btnLoading&&e.unref(x),disabled:n.disabled},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.inlineOkBtTxt||e.unref(L)("r.confirm")),1)]),_:1},8,["class","loading","disabled"])):e.createCommentVNode("",!0),n.showInlineClearBt?(e.openBlock(),e.createBlock(b,{key:1,onClick:g,class:e.normalizeClass({inlineFormBtXN:n.inline}),type:"dashed"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.inlineClearBtTxt||e.unref(L)("r.clear")),1)]),_:1},8,["class"])):e.createCommentVNode("",!0)])]),_:3},8,["model","rules","label-width","inline","show-message"])}}}),nl=e.defineComponent({__name:"FormGroup",props:{formData:{default:()=>[]},with:{default:"100%"},labelWidth:{default:()=>Re().formGroupLabelWidth},contentWidth:{default:"70%"},itemWidth:{default:200},showOkBt:{type:Boolean,default:!0},showCancelBt:{type:Boolean,default:!0},okBtTxt:{},cancelBtTxt:{},btnLoading:{type:Boolean,default:!1}},emits:["on-cancel"],setup(a,{expose:s,emit:t}){const n=a,c=e.ref({width:n.with}),o=e.ref(!1),d=e.ref(),r=e.computed(()=>{if(Array.isArray(n.formData))if(Array.isArray(n.formData[0])){let N=[];for(let D of n.formData)N=N.concat(D.filter(p=>p.type==="custom"));return N}else return n.formData.filter(N=>N.type==="custom");return[]});function m(){return new Promise(N=>{var D,p;(p=(D=d.value).resetForm)==null||p.call(D).then(I=>{N(I)})})}function f(){return new Promise(N=>{var D,p;(p=(D=d.value).refreshFormDom)==null||p.call(D).then(I=>{N(I)})})}function u(){return new Promise(N=>{var D,p;(p=(D=d.value).reRenderForm)==null||p.call(D).then(I=>{N(I)})})}function y(N,D){var p,I;(I=(p=d.value).setItemToValGroup)==null||I.call(p,N,D)}function x(N,D){var p,I;(I=(p=d.value).updateValGroup)==null||I.call(p,N,D)}function C(N){var D,p;(p=(D=d.value).updateFormDataT)==null||p.call(D,N)}function V(){var N,D;(D=(N=d.value).validate)==null||D.call(N)}function h(N){var D,p;(p=(D=d.value).reValidate)==null||p.call(D,N)}function S(N){var D,p;N!==void 0&&(o.value=!!N,(p=(D=d.value).changeLoading)==null||p.call(D,o.value))}function T(){var N,D;return(D=(N=d.value).getValGroup)==null?void 0:D.call(N)}function k(){o.value=!0}function w(){var N,D;(D=(N=d.value).submit)==null||D.call(N)}function _(){t("on-cancel"),re(()=>{var N,D;o.value=!1,(D=(N=d.value).changeLoading)==null||D.call(N,!1)},1e3)}return s({resetForm:m,refreshFormDom:f,reRenderForm:u,setItemToValGroup:y,updateValGroup:x,updateFormDataT:C,validate:V,reValidate:h,changeLoading:S,getValGroup:T,submit:w,close:_}),(N,D)=>{const p=e.resolveComponent("Button");return e.openBlock(),e.createElementBlock("div",{style:e.normalizeStyle(e.unref(c)),class:"formGroupBoxVM"},[e.createVNode(Ie,e.mergeProps({ref_key:"formRRef",ref:d},N.$attrs,{"form-data":n.formData,"label-width":n.labelWidth,"content-width":n.contentWidth,"item-width":n.itemWidth,btnLoading:n.btnLoading,onOnSubmit:k}),e.createSlots({_:2},[e.renderList(e.unref(r),I=>({name:I.slotName,fn:e.withCtx(({valGroup:g})=>[e.renderSlot(N.$slots,I.slotName,{valGroup:g})])}))]),1040,["form-data","label-width","content-width","item-width","btnLoading"]),e.withDirectives(e.createElementVNode("div",{class:"formFooterVM",style:e.normalizeStyle({marginLeft:n.labelWidth+"px"})},[e.createElementVNode("div",{style:e.normalizeStyle({width:n.contentWidth}),class:"btnBoxKAL"},[n.showOkBt?(e.openBlock(),e.createBlock(p,{key:0,onClick:w,class:"form-save-btn",loading:n.btnLoading&&e.unref(o)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.okBtTxt||e.unref(L)("r.confirm")),1)]),_:1},8,["loading"])):e.createCommentVNode("",!0),n.showCancelBt?(e.openBlock(),e.createBlock(p,{key:1,onClick:_,class:"form-cancel-btn"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.cancelBtTxt||e.unref(L)("r.cancel")),1)]),_:1})):e.createCommentVNode("",!0)],4)],4),[[e.vShow,n.showOkBt||n.showCancelBt]])],4)}}}),We=e.defineComponent({__name:"SearchForm",props:{formData:{default:()=>[]},labelWidth:{default:()=>Re().searchFormLabelWidth},itemWidth:{default:202},showInlineOkBt:{type:Boolean,default:!0},showInlineClearBt:{type:Boolean,default:!0}},emits:["on-search"],setup(a,{expose:s,emit:t}){const n=a,c=e.ref(),o=e.computed(()=>{if(Array.isArray(n.formData[0])){let k=[];for(let w of n.formData)k=k.concat(w.filter(_=>_.type==="custom"));return k}return n.formData.filter(k=>k.type==="custom")});function d(){return new Promise(k=>{var w,_;(_=(w=c.value).resetForm)==null||_.call(w).then(()=>{k()})})}function r(){return new Promise(k=>{var w,_;(_=(w=c.value).refreshFormDom)==null||_.call(w).then(()=>{k()})})}function m(){return new Promise(k=>{var w,_;(_=(w=c.value).reRenderForm)==null||_.call(w).then(()=>{k()})})}function f(k,w){var _,N;(N=(_=c.value).setItemToValGroup)==null||N.call(_,k,w)}function u(k,w){var _,N;(N=(_=c.value).updateValGroup)==null||N.call(_,k,w)}function y(k){var w,_;(_=(w=c.value).updateFormDataT)==null||_.call(w,k)}function x(){var k,w;(w=(k=c.value).validate)==null||w.call(k)}function C(k){var w,_;(_=(w=c.value).reValidate)==null||_.call(w,k)}function V(k){var w,_;(_=(w=c.value).changeLoading)==null||_.call(w,k===void 0?!1:k)}function h(){var k,w;return(w=(k=c.value).getValGroup)==null?void 0:w.call(k)}function S(k){t("on-search",k)}function T(){var k,w;(w=(k=c.value).submit)==null||w.call(k)}return s({resetForm:d,refreshFormDom:r,reRenderForm:m,setItemToValGroup:f,updateValGroup:u,updateFormDataT:y,validate:x,reValidate:C,changeLoading:V,getValGroup:h,submit:T}),(k,w)=>(e.openBlock(),e.createBlock(Ie,e.mergeProps({ref_key:"formRRef",ref:c},k.$attrs,{"form-data":n.formData,"label-width":n.labelWidth,"item-width":n.itemWidth,inline:"","show-long-ok-bt":!1,"show-inline-ok-bt":n.showInlineOkBt,"inline-ok-bt-txt":e.unref(L)("r.check"),"show-inline-clear-bt":n.showInlineClearBt,"show-message":!1,onOnSubmit:S}),e.createSlots({_:2},[e.renderList(e.unref(o),_=>({name:_.slotName,fn:e.withCtx(({valGroup:N})=>[e.renderSlot(k.$slots,_.slotName,{valGroup:N})])}))]),1040,["form-data","label-width","item-width","show-inline-ok-bt","inline-ok-bt-txt","show-inline-clear-bt"]))}}),al=e.defineComponent({__name:"FormModal",props:{title:{},formData:{default:()=>[]},width:{default:520},labelWidth:{default:()=>Re().formModalLabelWidth},okBtTxt:{},cancelBtTxt:{},hideCancelBt:{type:Boolean,default:!1},hideFooter:{type:Boolean,default:!1},btnLoading:{type:Boolean,default:!1}},emits:["on-close","on-open"],setup(a,{expose:s,emit:t}){const n=a,c=e.ref(),o=e.ref(!1),d=e.ref(!1),r=e.computed(()=>{if(Array.isArray(n.formData[0])){let p=[];for(let I of n.formData)p=p.concat(I.filter(g=>g.type==="custom"));return p}return n.formData.filter(p=>p.type==="custom")});function m(){return new Promise(p=>{var I,g;(g=(I=c.value).resetForm)==null||g.call(I).then(()=>{p()})})}function f(){return new Promise(p=>{var I,g;(g=(I=c.value).refreshFormDom)==null||g.call(I).then(()=>{p()})})}function u(){return new Promise(p=>{var I,g;(g=(I=c.value).reRenderForm)==null||g.call(I).then(()=>{p()})})}function y(p,I){var g,O;(O=(g=c.value).setItemToValGroup)==null||O.call(g,p,I)}function x(p,I){var g,O;(O=(g=c.value).updateValGroup)==null||O.call(g,p,I)}function C(p){var I,g;(g=(I=c.value).updateFormDataT)==null||g.call(I,p)}function V(){var p,I;(I=(p=c.value).validate)==null||I.call(p)}function h(p){var I,g;(g=(I=c.value).reValidate)==null||g.call(I,p)}function S(p){var I,g;p!==void 0&&(d.value=!!p,(g=(I=c.value).changeLoading)==null||g.call(I,d.value))}function T(){var p,I;return(I=(p=c.value).getValGroup)==null?void 0:I.call(p)}function k(){d.value=!0}function w(){var p,I;n.hideCancelBt?N():(I=(p=c.value).submit)==null||I.call(p)}function _(){o.value=!0}function N(){o.value=!1,re(()=>{var p,I;d.value=!1,(I=(p=c.value).changeLoading)==null||I.call(p,!1)},1e3)}function D(p){t(p?"on-open":"on-close")}return s({resetForm:m,refreshFormDom:f,reRenderForm:u,setItemToValGroup:y,updateValGroup:x,updateFormDataT:C,validate:V,reValidate:h,changeLoading:S,getValGroup:T,submit:w,open:_,close:N}),(p,I)=>{const g=e.resolveComponent("Button"),O=e.resolveComponent("Modal");return e.openBlock(),e.createBlock(O,{class:e.normalizeClass(["formModal",{hideFooter:n.hideFooter}]),title:n.title||e.unref(L)("r.title"),modelValue:e.unref(o),"onUpdate:modelValue":I[0]||(I[0]=U=>e.isRef(o)?o.value=U:null),"mask-closable":!1,"footer-hide":n.hideFooter,width:n.width,onOnVisibleChange:D},{footer:e.withCtx(()=>[e.createVNode(g,{onClick:w,class:"modal-save-btn",loading:n.btnLoading&&e.unref(d)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.okBtTxt||e.unref(L)("r.confirm")),1)]),_:1},8,["loading"]),n.hideCancelBt?e.createCommentVNode("",!0):(e.openBlock(),e.createBlock(g,{key:0,onClick:N,class:"modal-cancel-btn"},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(n.cancelBtTxt||e.unref(L)("r.cancel")),1)]),_:1}))]),default:e.withCtx(()=>[e.createVNode(Ie,e.mergeProps({ref_key:"formRRef",ref:c},p.$attrs,{"form-data":n.formData,"label-width":n.labelWidth,btnLoading:n.btnLoading,onOnSubmit:k}),e.createSlots({_:2},[e.renderList(e.unref(r),U=>({name:U.slotName,fn:e.withCtx(({valGroup:W})=>[e.renderSlot(p.$slots,U.slotName,{valGroup:W})])}))]),1040,["form-data","label-width","btnLoading"])]),_:3},8,["title","modelValue","footer-hide","class","width"])}}}),ol=e.defineComponent({__name:"CheckboxTree",props:{modelValue:{default:()=>[]},data:{default:()=>[]},expandAll:{type:Boolean,default:!1},label:{default:"name"},collectVal:{default:"id"},leaf:{type:Boolean,default:!0},inlineLeaf:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","on-change"],setup(a,{emit:s}){const t=a,n=e.ref(!0),c=e.ref([]),o="CKT"+Math.floor(Math.random()*1e7+1e7);let d=[];const r=e.computed(()=>Array.isArray(t.collectVal)?t.collectVal:typeof t.collectVal=="string"?[t.collectVal]:[]),m=e.computed(()=>Array.isArray(t.modelValue)?t.modelValue:[]);e.watch(()=>t.data,V=>{n.value=!1;let h=[];f(V,h),c.value=h,e.nextTick(function(){n.value=!0,t.inlineLeaf&&e.nextTick(x)})},{immediate:!0,deep:!0}),e.watch(()=>m.value,V=>{let h,S="s";if(Array.isArray(t.collectVal)?(h=t.collectVal[0]||"",S="a"):h=t.collectVal,!h||JSON.stringify(V)===JSON.stringify(d)){d=[];return}Ve({group:c.value,condition:T=>T.checked===!0,key:"checked",val:!1}),Ve(S==="a"?{group:c.value,condition:T=>M.findIndex(V,[h,T[h]])!==-1,key:"checked",val:!0}:{group:c.value,condition:T=>V.indexOf(T[h])!==-1,key:"checked",val:!0})}),e.watch(()=>t.disabled,V=>{Ve({group:c.value,condition:h=>h.disableCheckbox!==V,key:"disableCheckbox",val:V}),t.inlineLeaf&&e.nextTick(x)},{immediate:!0});function f(V,h=[]){for(let S of V){let T=!1;r.value.length>1?T=M.find(m.value,w=>w[r.value[0]]===S[r.value[0]])!==void 0:T=r.value[0]?m.value.indexOf(S[r.value[0]])!==-1:!1;let k={name:S[t.label],expand:!!(t.expandAll||S.expand),checked:T,disableCheckbox:t.disabled};for(let w of r.value)k[w]=S[w];h.push(k),S.children&&S.children.length>0&&(k.children=[],u(S.children,k.children))}}function u(V,h=[]){for(let S of V){let T=!1;r.value.length>1?T=M.find(m.value,w=>w[r.value[0]]===S[r.value[0]])!==void 0:T=r.value[0]?m.value.indexOf(S[r.value[0]])!==-1:!1;let k={name:S[t.label],expand:!!(t.expandAll||S.expand),checked:T,disableCheckbox:t.disabled};for(let w of r.value)k[w]=S[w];h.push(k),S.children&&S.children.length>0&&(k.children=[],f(S.children,k.children))}}function y(V,{data:h}){let S="",T=!0;if(h.children&&h.children.length>0){for(let k of h.children)if(k.children!==void 0){T=!1;break}T&&t.inlineLeaf&&(S="inlineChildXA")}return V("div",{style:{display:"inline-block",width:"100%"},class:S},[V("span",{style:{fontWeight:h.children?"bold":"normal"}},h.name)])}function x(V){if(V){V.expand&&e.nextTick(x);return}let h=document.querySelectorAll("#"+o+" .inlineChildXA");if(h.length>0)for(let S of h){let T=S.parentElement,k=T==null?void 0:T.nextElementSibling;if(!k)return;if(k.tagName!=="BR"){let w=T==null?void 0:T.parentElement,_=document.createElement("br");w==null||w.insertBefore(_,k),k=_.nextElementSibling,(k==null?void 0:k.className.indexOf("inlineTreeNodeF"))===-1&&k.setAttribute("class",k.className+" inlineTreeNodeF")}for(;k!=null&&k.nextElementSibling;)k=k.nextElementSibling,k.className.indexOf("inlineTreeNodeF")===-1&&k.setAttribute("class",k.className+" inlineTreeNodeF")}}function C(V){let h=[];if(t.leaf){for(let S of V)if(!S.children)if(Array.isArray(t.collectVal)){let T={};for(let k of t.collectVal)T[k]=S[k];h.push(T)}else h.push(S[t.collectVal])}else for(let S of V)if(Array.isArray(t.collectVal)){let T={};for(let k of t.collectVal)T[k]=S[k];h.push(T)}else h.push(S[t.collectVal]);d=h,s("update:modelValue",h),s("on-change",M.cloneDeep(h))}return(V,h)=>{const S=e.resolveComponent("Tree");return e.unref(n)?(e.openBlock(),e.createBlock(S,{key:0,id:o,class:"checkboxTreeGA",data:e.unref(c),render:y,onOnCheckChange:C,onOnToggleExpand:x,"show-checkbox":""},null,8,["data"])):e.createCommentVNode("",!0)}}}),Mn={class:"transferBoxRL"},Dn={class:"leftBoxLLL"},Fn={class:"fullHeight flexColumnBox"},En={class:"notGrow"},Rn={class:"titleLLL"},Pn={class:"growFlexItem"},Un={class:"middleBoxLLL"},zn={class:"rightBoxLLL"},Kn={class:"fullHeight flexColumnBox"},$n={class:"notGrow"},Gn={class:"titleLLL"},Hn={class:"growFlexItem"},il=e.defineComponent({__name:"TransferBox",props:{titleLeft:{},titleRight:{},formDataLeft:{default:()=>[]},formDataRight:{default:()=>[]},formRulesLeft:{default:()=>({})},formRulesRight:{default:()=>({})},constSearchDataLeft:{default:()=>({})},constSearchDataRight:{default:()=>({})},leftTableColumns:{default:()=>[]},rightTableColumns:{default:()=>[]},leftTableUrl:{},rightTableUrl:{},addUrl:{},deleteUrl:{},addAllUrl:{},deleteAllUrl:{},addParamsHandle:{type:Function,default:a=>a.map(s=>s.id)},deleteParamsHandle:{type:Function,default:a=>a.map(s=>s.id)},addAllParamsHandle:{type:Function,default:a=>a},deleteAllParamsHandle:{type:Function,default:a=>a},addMethod:{default:"post"},addAllMethod:{default:"post"},deleteMethod:{default:"delete"},deleteAllMethod:{default:"delete"},searchFormLabelWith:{}},emits:["transferred"],setup(a,{expose:s,emit:t}){const n=a;let c=e.ref({}),o=e.ref({}),d=e.ref([]),r=e.ref([]),m=e.ref(0),f=e.ref(0);const u=e.computed(()=>({...n.constSearchDataLeft,...c.value})),y=e.computed(()=>({...n.constSearchDataRight,...o.value})),x=e.computed(()=>m.value<1),C=e.computed(()=>d.value.length<1),V=e.computed(()=>r.value.length<1),h=e.computed(()=>f.value<1),S=e.ref(),T=e.ref(),k=e.ref(),w=e.ref();function _(){S.value.resetForm(),T.value.resetForm(),M.isEmpty(c.value)||(c.value={}),M.isEmpty(o.value)||(o.value={}),k.value.clearSelect(),w.value.clearSelect()}function N(){k.value.search(),w.value.search()}function D(z){d.value=z}function p(z){r.value=z}function I(z){var ne,Y,J,Z,X;m.value=((Y=(ne=z==null?void 0:z.data)==null?void 0:ne.page)==null?void 0:Y.total)||((Z=(J=z==null?void 0:z.data)==null?void 0:J.data)==null?void 0:Z.total)||((X=z==null?void 0:z.data)==null?void 0:X.total)||(z==null?void 0:z.total)||0}function g(z){var ne,Y,J,Z,X;f.value=((Y=(ne=z==null?void 0:z.data)==null?void 0:ne.page)==null?void 0:Y.total)||((Z=(J=z==null?void 0:z.data)==null?void 0:J.data)==null?void 0:Z.total)||((X=z==null?void 0:z.data)==null?void 0:X.total)||(z==null?void 0:z.total)||0}function O(z){c.value=z}function U(z){o.value=z}function W(){n.addUrl&&le("add")}function q(){n.deleteUrl&&le("delete")}function K(){n.addAllUrl&&n.addUrl&&le("addAll")}function ee(){n.deleteAllUrl&&le("deleteAll")}function le(z){let ne,Y,J={},Z="";switch(z){case"add":ne=n.addMethod,Y=n.addUrl,J=n.addParamsHandle(r.value),Z=L("r.add");break;case"delete":ne=n.deleteMethod,Y=n.deleteUrl,J=n.deleteParamsHandle(d.value),Z=L("r.remove");break;case"addAll":ne=n.addAllMethod,Y=n.addAllUrl,J=n.addAllParamsHandle(y.value),Z=L("r.addAll");break;case"deleteAll":ne=n.deleteAllMethod,Y=n.deleteAllUrl,J=n.deleteAllParamsHandle(u.value),Z=L("r.removeAll");break}Y&&ne&&ue[ne](Y,J,null,[],{spin:!0},!1).then(X=>{(X==null?void 0:X.code)===0?(de(Z+L("r.success"),(X==null?void 0:X.message)||"","success"),k.value&&k.value.getTableData(),w.value&&w.value.getTableData(),t("transferred")):de(Z+L("r.failed"),(X==null?void 0:X.message)||"","error")}).catch(()=>{de(Z+L("r.error"),"","error")})}return s({reset:_,search:N}),(z,ne)=>{const Y=e.resolveComponent("Icon"),J=e.resolveComponent("Button");return e.openBlock(),e.createElementBlock("div",Mn,[e.createElementVNode("div",Dn,[e.createElementVNode("div",Fn,[e.createElementVNode("div",En,[e.createElementVNode("div",Rn,e.toDisplayString(n.titleLeft||e.unref(L)("r.added")),1),e.createVNode($e,null,{default:e.withCtx(()=>[e.createVNode(We,{ref_key:"leftFormRef",ref:S,"form-data":n.formDataLeft,"form-rules":n.formRulesLeft,"label-width":n.searchFormLabelWith,onOnSearch:O},null,8,["form-data","form-rules","label-width"])]),_:1})]),e.createElementVNode("div",Pn,[e.createVNode(He,{ref_key:"lTabRef",ref:k,columns:n.leftTableColumns,url:n.leftTableUrl,"search-data":e.unref(u),onOnSelectionChange:D,onOnDataChange:I,"init-data":!!(e.unref(M.isEmpty)(n.constSearchDataLeft)&&n.leftTableUrl),"get-data-loading":"",selection:""},null,8,["columns","url","search-data","init-data"])])])]),e.createElementVNode("div",Un,[e.createVNode(J,{class:"middleBtLLL",size:"large",type:"default",onClick:ee,disabled:e.unref(x)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(L)("r.removeAll"))+" ",1),e.createVNode(Y,{type:"ios-arrow-forward"})]),_:1},8,["disabled"]),e.createVNode(J,{class:"middleBtLLL",size:"large",type:"default",onClick:q,disabled:e.unref(C)},{default:e.withCtx(()=>[e.createTextVNode(e.toDisplayString(e.unref(L)("r.remove"))+" ",1),e.createVNode(Y,{type:"ios-arrow-forward"})]),_:1},8,["disabled"]),e.createVNode(J,{class:"middleBtLLL",size:"large",type:"primary",onClick:W,disabled:e.unref(V)},{default:e.withCtx(()=>[e.createVNode(Y,{type:"ios-arrow-back"}),e.createTextVNode(" "+e.toDisplayString(e.unref(L)("r.add")),1)]),_:1},8,["disabled"]),e.createVNode(J,{class:"middleBtLLL",size:"large",type:"primary",onClick:K,disabled:e.unref(h)},{default:e.withCtx(()=>[e.createVNode(Y,{type:"ios-arrow-back"}),e.createTextVNode(" "+e.toDisplayString(e.unref(L)("r.addAll")),1)]),_:1},8,["disabled"])]),e.createElementVNode("div",zn,[e.createElementVNode("div",Kn,[e.createElementVNode("div",$n,[e.createElementVNode("div",Gn,e.toDisplayString(n.titleRight||e.unref(L)("r.notAdded")),1),e.createVNode($e,null,{default:e.withCtx(()=>[e.createVNode(We,{ref_key:"rightFormRef",ref:T,"form-data":n.formDataRight,"form-rules":n.formRulesRight,"label-width":n.searchFormLabelWith,onOnSearch:U},null,8,["form-data","form-rules","label-width"])]),_:1})]),e.createElementVNode("div",Hn,[e.createVNode(He,{ref_key:"rTabRef",ref:w,columns:n.rightTableColumns,url:n.rightTableUrl,"search-data":e.unref(y),onOnSelectionChange:p,onOnDataChange:g,"init-data":!!(e.unref(M.isEmpty)(n.constSearchDataRight)&&n.rightTableUrl),"get-data-loading":"",selection:""},null,8,["columns","url","search-data","init-data"])])])])])}}}),rl=Object.freeze(Object.defineProperty({__proto__:null,AlCascaderMC:ut,AsyncCascader:ft,BtTablePage:He,CheckboxTree:ol,EditorPro:yt,FormGroup:nl,FormModal:al,FormR:Ie,FullPop:At,HeaderBt:qe,Hello:xt,IconTxtBtn:Tt,InputMap:dt,MonthRange:mt,Page404:Lt,SearchForm:We,SelectInput:st,ShowHidePanel:$e,ShowHidePanelB:qt,SideMenu:jt,TableIconBtn:vt,TableSearch:Yt,TableSetting:Jt,TransferBox:il,UploadGroup:pt},Symbol.toStringTag,{value:"Module"}));function ht(a){const s=(...o)=>he.apply(this,o),t=s("r.closePreview"),n=s("r.fullImg");let c="previewImg"+Math.floor(Math.random()*1e7);se.Modal.info({closable:!1,"transition-names":["linear","fade"],render:o=>e.h("div",{class:"previewModal",id:c},[e.h("div",{class:"previewModalInner"},[e.h("img",{src:a,alt:n}),e.h(se.Icon,{type:"md-close",size:20,title:t,class:"previewModalDelete",onClick(){se.Modal.remove()}})])])}),re(()=>{var r,m,f,u,y,x;const o=(u=(f=(m=(r=document.getElementById(c))==null?void 0:r.parentElement)==null?void 0:m.parentElement)==null?void 0:f.parentElement)==null?void 0:u.parentElement,d=(x=(y=document.getElementById(c))==null?void 0:y.parentElement)==null?void 0:x.nextSibling;o&&(o.style.height="0"),o&&(o.style.padding="0"),d&&(d.style.display="none")},10)}let Oe=!1;function gt({height:a,width:s=416,title:t,content:n,onOk:c,onCancel:o,okText:d,cancelText:r,noWarnIcon:m,footerAlign:f,cancelBt:u=!0}){const y=(...h)=>he.apply(this,h);let C=(a&&Number(a)-90>100?Number(a)-90+"px":0)||"100px",V=P(n)==="String";se.Modal.warning({width:s,footerHide:!0,render:()=>e.h("div",{class:"customMessageBox",style:{height:C}},[e.h("div",{class:"containerN"},[e.h("div",{class:"titleN"},[e.h("span",t||y("r.info.title")),e.h(se.Button,{class:"fr closeN",type:"text",onClick(){Oe||se.Modal.remove()}},()=>e.h("i",{class:"ivu-icon ivu-icon-ios-close",style:{fontSize:"30px"}}))]),e.h("div",{class:"contentN",style:{textAlign:V?"center":"left"}},[e.h("i",{class:V&&!m?"ivu-icon ivu-icon-ios-alert-outline":"hide",style:{fontSize:"60px",color:"#f8bb86"}}),e.h("div",{class:"msgBoxConO"},n||y("r.info.text"))]),e.h("div",{class:"footerN",style:{textAlign:f||"center"}},[e.h(se.Button,{class:"okBtN",onClick(h){var S,T,k,w,_,N,D,p,I;if(c&&typeof c=="function"){const g=c();if(g&&P(g)==="Promise"){Oe=!0;const O=(h==null?void 0:h.currentTarget)||(h==null?void 0:h.target);O&&((T=(S=O.classList)==null?void 0:S.add)==null||T.call(S,"ivu-btn-loading"),(w=(k=O.nextSibling)==null?void 0:k.setAttribute)==null||w.call(k,"disabled","disabled"),(I=(p=((D=(N=(_=O.parentElement)==null?void 0:_.parentElement)==null?void 0:N.querySelector)==null?void 0:D.call(N,".titleN .closeN")).classList)==null?void 0:p.add)==null||I.call(p,"disabled")),Promise.resolve(g).then(()=>{Oe=!1,se.Modal.remove()}).catch(()=>{Oe=!1,se.Modal.remove()})}else se.Modal.remove()}}},()=>[e.h("i",{class:"ivu-load-loop ivu-icon ivu-icon-ios-loading"}),e.h("span",d||y("r.confirm"))]),e.h(se.Button,{class:["cancelBtN",!u&&"hide"],onClick(){Oe||(se.Modal.remove(),P(o)==="Function"&&o&&o())}},()=>r||y("r.cancel"))])])])})}function bt(a,s,t,n){const c=(...o)=>he.apply(this,o);de.call(this,{title:a||c("r.info.title"),text:s||c("r.info.text"),icon:t||"warning",onOk:n,buttons:[c("r.cancel")]})}(()=>{if(window.wangeditorMenuInit)return;class a{constructor(){Me(this,"title");Me(this,"iconSvg");Me(this,"tag");Me(this,"alwaysEnable");this.title=he("r.preview"),this.iconSvg='<svg t="1656644788547" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="12356" width="256" height="256"><path d="M512 1024H135.4C60.7 1024 0 963.3 0 888.6V135.4C0 60.7 60.7 0 135.4 0h753.2C963.3 0 1024 60.7 1024 135.4V512c0 24.9-20.1 45-45 45s-45-20.1-45-45V135.4c0-25-20.4-45.4-45.4-45.4H135.4c-25 0-45.4 20.4-45.4 45.4v753.2c0 25 20.4 45.4 45.4 45.4H512c24.9 0 45 20.1 45 45s-20.1 45-45 45z" p-id="12357"></path><path d="M512 802c-77.5 0-150.3-30.2-205.1-84.9C252.2 662.3 222 589.5 222 512s30.2-150.3 84.9-205.1S434.5 222 512 222s150.3 30.2 205.1 84.9C771.8 361.7 802 434.5 802 512s-30.2 150.3-84.9 205.1C662.3 771.8 589.5 802 512 802z m0-490c-110.3 0-200 89.7-200 200s89.7 200 200 200 200-89.7 200-200-89.7-200-200-200z" p-id="12358"></path><path d="M978.5 1023.5c-11.5 0-23-4.4-31.8-13.2L653.2 716.8c-17.6-17.6-17.6-46.1 0-63.6 17.6-17.6 46.1-17.6 63.6 0l293.5 293.5c17.6 17.6 17.6 46.1 0 63.6-8.8 8.8-20.3 13.2-31.8 13.2z" p-id="12359"></path></svg>',this.tag="button",this.alwaysEnable=!0}getValue(){return""}isActive(){return!1}isDisabled(){return!1}exec(n){const c=document.getElementById("editor-preview");let o=localStorage.getItem("editorPreviewW")||300,d=localStorage.getItem("editorPreviewH")||500;const r=n.getHtml();if(c){let m=c.children[0].children[1].children[0],f=c.children[0].children[1];m.innerHTML=r,m.style.width=o+"px",f.style.height=d+"px",c.style.display="block"}else{const m=document.body,f=document.createElement("div");f.setAttribute("id","editor-preview"),f.setAttribute("class","editor-preview-mask"),f.innerHTML=`<div class='editor-preview-body'><div class='editor-preview-head'><div><span>宽</span><input type='number' value='${o}' min='200'><span>高</span><input type='number' value='${d}' min='300'></div><i class='ivu-icon ivu-icon-md-close'></i></div><div class='editor-preview-out-wall'><div class='editor-preview-wall r-editor-view'></div></div></div>`;let u=f.children[0].children[1],y=f.children[0].children[1].children[0],x=f.children[0].children[0].children[0].children[1];const C=40,V=70,h=w=>{if(w&&w.type==="keyup"){let D=!1;if(w.key&&(D=w.key!=="Enter"),D)return}let _=w.target.value;if(_=Number(_),y.style&&y.style.width===_+"px")return;const N=m.clientWidth;_<250?(_=250,w.target.value=250):_>N-C&&(_=N-C,w.target.value=N-C),y.style.width=_+"px",localStorage.setItem("editorPreviewW",_)};x.addEventListener("blur",h),x.addEventListener("keyup",h);let S=f.children[0].children[0].children[0].children[3];const T=w=>{if(w&&w.type==="keyup"){let D=!1;if(w.key&&(D=w.key!=="Enter"),D)return}let _=w.target.value;if(_=Number(_),u.style&&u.style.height===_+"px")return;const N=m.clientHeight;_<300?(_=300,w.target.value=300):_>N-V&&(_=N-V,w.target.value=N-V),u.style.height=_+"px",localStorage.setItem("editorPreviewH",_)};S.addEventListener("blur",T),S.addEventListener("keyup",T),f.children[0].children[0].children[1].addEventListener("click",()=>{f.style.display="none"}),y.innerHTML=r,y.style.width=o+"px",u.style.height=d+"px",m.append(f)}}}const s={key:"previewX",factory(){return new a}};Sl.Boot.registerMenu(s),window.wangeditorMenuInit=!0})();const sl={$fetch:ue,fullScreenImgByDom:be,fullScreenImgPreview:ht,$swal:de,$swalConfirm:bt,messageBox:gt,setInterval:rt,setTimeout:re,...Wt},Wn=function(a,s={}){ue.init(s.useStore||s.store,a),s.locale&&Ee.use(s.locale),s.i18n&&Ee.i18n(s.i18n),s.router&&jl(s.router),s.amap&&cn(s.amap),s.notRegistryGlobal||(Object.keys(rl).forEach(t=>{a.component(t)||a.component(t,rl[t])}),Object.keys(sl).forEach(t=>{a.config.globalProperties[t]=sl[t]})),a.directive("has")||a.directive("has",(t,n)=>{n.value&&!lt(n.value)&&(t.style.display="none")}),a.directive("loadmore")||a.directive("loadmore",(t,n)=>{let c;n.arg?c=t.querySelector("."+n.arg):c=t.querySelector(".ivu-select-dropdown")||t,c.addEventListener("scroll",function(){c.scrollTop>0&&c.scrollHeight-c.scrollTop<=c.clientHeight&&n.value()})}),a.config.globalProperties.searchFormLabelWidth=84,a.config.globalProperties.formModalLabelWidth=140,a.config.globalProperties.formGroupLabelWidth=160,a.config.globalProperties.iconTxtBtnIconSize=17},jn=Ee.use,vn=Ee.i18n,qn={locale:jn,i18n:vn,install:Wn,...Wt,...Rl,$fetch:ue,fullScreenImgByDom:be,fullScreenImgPreview:ht,$swal:de,$swalConfirm:bt,messageBox:gt,setInterval:rt,setTimeout:re};A.$fetch=ue,A.$swal=de,A.$swalConfirm=bt,A.AlCascaderMC=ut,A.AsyncCascader=ft,A.BtTablePage=He,A.CheckboxTree=ol,A.EditorPro=yt,A.FormGroup=nl,A.FormModal=al,A.FormR=Ie,A.FullPop=At,A.HeaderBt=qe,A.Hello=xt,A.IconTxtBtn=Tt,A.InputMap=dt,A.MonthRange=mt,A.Page404=Lt,A.SearchForm=We,A.SelectInput=st,A.ShowHidePanel=$e,A.ShowHidePanelB=qt,A.SideMenu=jt,A.TableIconBtn=vt,A.TableSearch=Yt,A.TableSetting=Jt,A.TransferBox=il,A.UploadGroup=pt,A.clearObj=ze,A.dataFilterOrToUrl=Gt,A.decimalDigitsLimit=Rt,A.default=qn,A.downloadFileByFormSubmit=et,A.downloadFileReaderFile=Je,A.emptyInput=Ot,A.fakeALinkClick=Xe,A.fileExport=Pt,A.findCollection=we,A.findPath=Te,A.formDataHeadConfig=Dt,A.fullScreenImgByDom=be,A.fullScreenImgPreview=ht,A.getColumnsKeys=Ut,A.getFileSrc=Ae,A.getFileTypeByName=Pe,A.getFileTypeIconByName=Ue,A.getStringWidth=Qe,A.hasPermission=lt,A.htmlDecode=It,A.htmlEncode=Nt,A.htmlPrint=Ht,A.isEmptyValue=Kt,A.isImgByFile=xe,A.isNaN=nt,A.isNumberValue=zt,A.isValidValue=ae,A.messageBox=gt,A.myTypeof=P,A.oneOf=Et,A.removeEmptyValue=Ke,A.setInterval=rt,A.setTimeout=re,A.setValByOption=Ve,A.siblingElems=at,A.stopBubbling=Mt,A.stringLength=$t,A.toFormData=Ft,A.toHump=Ye,A.toLine=Ze,A.tooltipManual=tt,A.trimObj=Le,Object.defineProperties(A,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}})});
//# sourceMappingURL=plugRQw.umd.cjs.map
